(function($hx_exports,$global){"use strict";$hx_exports["kha"]=$hx_exports["kha"]||{};$hx_exports["kha"]["input"]=$hx_exports["kha"]["input"]||{};var $hxClasses={},$estr=function(){return js_Boot.__string_rec(this,"")},$hxEnums=$hxEnums||{},$_;class HxOverrides{static strDate(s){switch(s.length){case 8:let k=s.split(":");let d=new Date;d["setTime"](0);d["setUTCHours"](k[0]);d["setUTCMinutes"](k[1]);d["setUTCSeconds"](k[2]);return d;case 10:let k1=s.split("-");return new Date(k1[0],k1[1]-1,k1[2],0,0,0);case 19:let k2=s.split(" ");let y=k2[0].split("-");let t=k2[1].split(":");return new Date(y[0],y[1]-1,y[2],t[0],t[1],t[2]);default:throw haxe_Exception.thrown("Invalid date format : "+s)}}static cca(s,index){let x=s.charCodeAt(index);if(x!=x){return undefined}return x}static substr(s,pos,len){if(len==null){len=s.length}else if(len<0){if(pos==0){len=s.length+len}else{return""}}return s.substr(pos,len)}static remove(a,obj){let i=a.indexOf(obj);if(i==-1){return false}a.splice(i,1);return true}static now(){return Date.now()}}$hxClasses["HxOverrides"]=HxOverrides;HxOverrides.__name__="HxOverrides";class Main{static main(){iron_object_BoneAnimation.skinMaxBones=8;armory_system_Starter.numAssets=3;armory_system_Starter.drawLoading=armory_trait_internal_LoadingScreen.render;armory_ui_Canvas.imageScaleQuality=1;armory_system_Starter.main("Scene",0,true,true,true,1024,576,1,true,armory_renderpath_RenderPathCreator.get)}}$hxClasses["Main"]=Main;Main.__name__="Main";Math.__name__="Math";class Reflect{static field(o,field){try{return o[field]}catch(_g){return null}}static setProperty(o,field,value){let tmp;let tmp1;if(o.__properties__){tmp=o.__properties__["set_"+field];tmp1=tmp}else{tmp1=false}if(tmp1){o[tmp](value)}else{o[field]=value}}static isFunction(f){if(typeof f=="function"){return!(f.__name__||f.__ename__)}else{return false}}static compare(a,b){if(a==b){return 0}else if(a>b){return 1}else{return-1}}}$hxClasses["Reflect"]=Reflect;Reflect.__name__="Reflect";class Std{static string(s){return js_Boot.__string_rec(s,"")}static parseInt(x){if(x!=null){let _g=0;let _g1=x.length;while(_g<_g1){let i=_g++;let c=x.charCodeAt(i);if(c<=8||c>=14&&c!=32&&c!=45){let nc=x.charCodeAt(i+1);let v=parseInt(x,nc==120||nc==88?16:10);if(isNaN(v)){return null}else{return v}}}}return null}static random(x){if(x<=0){return 0}else{return Math.floor(Math.random()*x)}}}$hxClasses["Std"]=Std;Std.__name__="Std";class StringTools{static replace(s,sub,by){return s.split(sub).join(by)}}$hxClasses["StringTools"]=StringTools;StringTools.__name__="StringTools";class Type{static createInstance(cl,args){let ctor=Function.prototype.bind.apply(cl,[null].concat(args));return new ctor}static createEnum(e,constr,params){let f=Reflect.field(e,constr);if(f==null){throw haxe_Exception.thrown("No such constructor "+constr)}if(Reflect.isFunction(f)){if(params==null){throw haxe_Exception.thrown("Constructor "+constr+" need parameters")}return f.apply(e,params)}if(params!=null&&params.length!=0){throw haxe_Exception.thrown("Constructor "+constr+" does not need parameters")}return f}static getInstanceFields(c){let result=[];while(c!=null){let _g=0;let _g1=Object.getOwnPropertyNames(c.prototype);while(_g<_g1.length){let name=_g1[_g];++_g;switch(name){case"__class__":case"__properties__":case"constructor":break;default:if(result.indexOf(name)==-1){result.push(name)}}}c=c.__super__}return result}}$hxClasses["Type"]=Type;Type.__name__="Type";class armory_system_Signal{constructor(){this.callbacks=[]}connect(callback){if(!this.callbacks.includes(callback)){this.callbacks.push(callback)}}emit(...args){let _g=0;let _g1=this.callbacks.slice();while(_g<_g1.length){let callback=_g1[_g];++_g;if(this.callbacks.includes(callback)){callback.apply(null,args.slice())}}}}$hxClasses["armory.system.Signal"]=armory_system_Signal;armory_system_Signal.__name__="armory.system.Signal";Object.assign(armory_system_Signal.prototype,{__class__:armory_system_Signal,callbacks:null});class arm_Base{static init(){arm_Config.init();arm_Base.theme=zui_Themes.dark;arm_Base.theme.FILL_WINDOW_BG=true}static set_isResizing(value){arm_Base.resizing.emit();return arm_Base.isResizing=value}}$hxClasses["arm.Base"]=arm_Base;arm_Base.__name__="arm.Base";arm_Base.__properties__={set_isResizing:"set_isResizing"};class arm_Config{static init(){if(arm_Config.raw==null){arm_Config.raw={};arm_Config.raw.window_scale=1;arm_Config.raw.layout=[];arm_Config.raw.layout[0]=260;arm_Config.raw.layout[1]=300;arm_Config.raw.layout[2]=300;arm_Config.raw.layout[3]=200}}}$hxClasses["arm.Config"]=arm_Config;arm_Config.__name__="arm.Config";class iron_Trait{constructor(){if(iron_Trait._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this._render2D=null;this._render=null;this._lateUpdate=null;this._update=null;this._fixedUpdate=null;this._remove=null;this._init=null;this._add=null}remove(){this.object.removeTrait(this)}notifyOnUpdate(f){if(this._update==null){this._update=[]}this._update.push(f);iron_App.notifyOnUpdate(f)}notifyOnRender2D(f){if(this._render2D==null){this._render2D=[]}this._render2D.push(f);iron_App.notifyOnRender2D(f)}}$hxClasses["iron.Trait"]=iron_Trait;iron_Trait.__name__="iron.Trait";Object.assign(iron_Trait.prototype,{__class__:iron_Trait,object:null,_add:null,_init:null,_remove:null,_fixedUpdate:null,_update:null,_lateUpdate:null,_render:null,_render2D:null});class arm_KouiEditor extends iron_Trait{constructor(){iron_Trait._hx_skip_constructor=true;super();iron_Trait._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.dragOffsetY=0;this.dragOffsetX=0;this.draggedElement=null;this.labelsCount=0;this.labels=new haxe_ds_StringMap;this.buttonsCount=0;this.buttons=new haxe_ds_StringMap;this.sizeInit=false;this.sceneCounter=1;this.sceneTabs=["Scene"];super._hx_constructor();let _gthis=this;kha_Assets.loadEverything(function(){arm_Base.font=kha_Assets.fonts.font_default;arm_Base.init();arm_Base.resizing.connect($bind(_gthis,_gthis.onResized));_gthis.uiBase=new arm_UIBase(kha_Assets.fonts.font_default);_gthis.themeTextHandle=new zui_Handle;_gthis.sceneTabHandle=new zui_Handle;_gthis.propertiesTabHandle=new zui_Handle;_gthis.themeTabHandle=new zui_Handle;koui_Koui.init(function(){let _this=koui_Koui.anchorPane;_this.set_paddingLeft(100);_this.set_paddingRight(100);_this.set_paddingTop(75);_this.set_paddingBottom(75);let tmp=iron_App.w()*.85|0;let tmp1=iron_App.h()*.85|0;_gthis.anchorPane=new koui_elements_layouts_AnchorPane(0,0,tmp,tmp1);_gthis.anchorPane.setTID("fixed_anchorpane");let anchor=4;if(anchor==null){anchor=0}koui_Koui.anchorPane.add(_gthis.anchorPane,anchor)});iron_App.onResize=$bind(_gthis,_gthis.onResized)});this.notifyOnUpdate($bind(this,this.update));this.notifyOnRender2D($bind(this,this.render2D))}update(){if(this.uiBase==null){return}this.uiBase.update();this.updateDragAndDrop()}updateDragAndDrop(){let mouse=iron_system_Input.getMouse();if(mouse.started()){let element=koui_Koui.getElementAtPosition(mouse.x|0,mouse.y|0);if(element!=null&&element!=this.anchorPane){if(element.parent instanceof koui_elements_Button){this.draggedElement=element.parent}else{this.draggedElement=element}this.dragOffsetX=mouse.x-this.draggedElement.posX*koui_Koui.uiScale|0;this.dragOffsetY=mouse.y-this.draggedElement.posY*koui_Koui.uiScale|0}}else if(mouse.down()&&this.draggedElement!=null){let _this=this.draggedElement;let posY=(mouse.y|0)-this.dragOffsetY;_this.set_posX((mouse.x|0)-this.dragOffsetX);_this.set_posY(posY);koui_elements_Element.invalidations.map.set(this.draggedElement,true)}else{if(this.draggedElement!=null){let _this=this.draggedElement;let posY=this.draggedElement.posY/koui_Koui.uiScale|0;_this.set_posX(this.draggedElement.posX/koui_Koui.uiScale|0);_this.set_posY(posY);koui_elements_Element.invalidations.map.set(this.draggedElement,true)}this.draggedElement=null}}drawElementsPanel(){this.uiBase.ui.t.FILL_WINDOW_BG=false;if(this.uiBase.ui.window(zui_Handle.global.nest(1,null),10,10,100,iron_App.h()-this.uiBase.getBottomH()-20,false)){if(this.uiBase.ui.panel(zui_Handle.global.nest(2,{selected:true}),"Basic")){this.uiBase.ui.indent();if(this.uiBase.ui.button("Label")){let key="label_"+Std.string(this.labelsCount);let label=new koui_elements_Label("New Label");this.labels.h[key]=label;this.anchorPane.add(label,0);this.labelsCount++}if(this.uiBase.ui.button("Image Panel")){haxe_Log.trace("Image Panel",{fileName:"arm/KouiEditor.hx",lineNumber:130,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}if(this.uiBase.ui.button("Panel")){haxe_Log.trace("Panel",{fileName:"arm/KouiEditor.hx",lineNumber:134,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}this.uiBase.ui.unindent()}if(this.uiBase.ui.panel(zui_Handle.global.nest(3,{selected:true}),"Buttons")){this.uiBase.ui.indent();if(this.uiBase.ui.button("Button")){let key="button_"+Std.string(this.buttonsCount);let button=new koui_elements_Button("New Button");this.buttons.h[key]=button;this.anchorPane.add(button,0);this.buttonsCount++}if(this.uiBase.ui.button("Checkbox")){haxe_Log.trace("Checkbox",{fileName:"arm/KouiEditor.hx",lineNumber:152,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}if(this.uiBase.ui.button("Radio")){haxe_Log.trace("Radio",{fileName:"arm/KouiEditor.hx",lineNumber:156,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}this.uiBase.ui.unindent()}if(this.uiBase.ui.panel(zui_Handle.global.nest(4,{selected:true}),"Layout")){this.uiBase.ui.indent();if(this.uiBase.ui.button("AnchorPane")){haxe_Log.trace("AnchorPane",{fileName:"arm/KouiEditor.hx",lineNumber:166,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}if(this.uiBase.ui.button("GridLayout")){haxe_Log.trace("GridLayout",{fileName:"arm/KouiEditor.hx",lineNumber:170,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}if(this.uiBase.ui.button("ColLayout")){haxe_Log.trace("ColLayout",{fileName:"arm/KouiEditor.hx",lineNumber:174,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}if(this.uiBase.ui.button("RowLayout")){haxe_Log.trace("RowLayout",{fileName:"arm/KouiEditor.hx",lineNumber:178,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}if(this.uiBase.ui.button("Expander")){haxe_Log.trace("Expander",{fileName:"arm/KouiEditor.hx",lineNumber:182,className:"arm.KouiEditor",methodName:"drawElementsPanel"})}this.uiBase.ui.unindent()}}this.uiBase.ui.t.FILL_WINDOW_BG=true}drawRightPanels(){this.uiBase.adjustHeightsToWindow();let tabx=this.uiBase.getTabX();let w=this.uiBase.getSidebarW();let h0=this.uiBase.getSidebarH0();let h1=this.uiBase.getSidebarH1();if(this.uiBase.ui.window(this.uiBase.hwnds[0],tabx,0,w,h0)){this.uiBase.ui.row([.7,.15,.15]);this.sceneTabHandle.position=this.uiBase.ui.combo(this.sceneTabHandle,this.sceneTabs,"",true);if(this.uiBase.ui.button("+")){this.sceneCounter++;let newName="Scene "+this.sceneCounter;this.sceneTabs.push(newName);this.sceneTabHandle.position=this.sceneTabs.length-1}if(this.uiBase.ui.button("-")){if(this.sceneTabs.length>1){let currentIndex=this.sceneTabHandle.position;if(currentIndex>0){this.sceneTabHandle.position=currentIndex-1}this.sceneTabs.splice(currentIndex,1);if(this.sceneTabHandle.position>=this.sceneTabs.length){this.sceneTabHandle.position=this.sceneTabs.length-1}}}this.uiBase.ui.text("Editing: "+this.sceneTabs[this.sceneTabHandle.position])}if(this.uiBase.ui.window(this.uiBase.hwnds[1],tabx,h0,w,h1)){this.uiBase.ui.tab(this.propertiesTabHandle,"Properties")}}drawBottomPanel(){let bottomH=this.uiBase.getBottomH();if(bottomH<64){return}let panelX=0;let panelY=iron_App.h()-bottomH;let panelW=this.uiBase.getTabX();if(this.uiBase.ui.window(this.uiBase.hwnds[2],panelX,panelY,panelW,bottomH)){this.uiBase.ui.tab(this.themeTabHandle,"Theme");this.uiBase.ui.row([.075,.075,.075,.075]);if(this.uiBase.ui.button("Load")){haxe_Log.trace("Load",{fileName:"arm/KouiEditor.hx",lineNumber:252,className:"arm.KouiEditor",methodName:"drawBottomPanel"})}if(this.uiBase.ui.button("Save")){haxe_Log.trace("Save",{fileName:"arm/KouiEditor.hx",lineNumber:255,className:"arm.KouiEditor",methodName:"drawBottomPanel"})}if(this.uiBase.ui.button("Save As")){haxe_Log.trace("Save As",{fileName:"arm/KouiEditor.hx",lineNumber:258,className:"arm.KouiEditor",methodName:"drawBottomPanel"})}if(this.uiBase.ui.button("Clear")){haxe_Log.trace("Clear",{fileName:"arm/KouiEditor.hx",lineNumber:261,className:"arm.KouiEditor",methodName:"drawBottomPanel"})}this.uiBase.ui.row([1]);if(this.themeTabHandle.position==0){zui_Ext.textAreaLineNumbers=true;zui_Ext.textAreaScrollPastEnd=true;zui_Ext.textArea(this.uiBase.ui,this.themeTextHandle);zui_Ext.textAreaLineNumbers=false;zui_Ext.textAreaScrollPastEnd=false}}}drawAnchorPane(g2){if(this.anchorPane!=null){let thickness=1;g2.set_color(-1579033);let x=this.anchorPane.drawX;let y=this.anchorPane.drawY;let w=this.anchorPane.drawWidth;let h=this.anchorPane.drawHeight;g2.fillRect(x,y,w,thickness);g2.fillRect(x,y+h-thickness,w,thickness);g2.fillRect(x,y+thickness,thickness,h-thickness*2);g2.fillRect(x+w-thickness,y+thickness,thickness,h-thickness*2)}}render2D(g2){if(this.uiBase==null){return}g2.end();koui_Koui.render(g2);g2.begin(false);this.drawAnchorPane(g2);g2.end();this.uiBase.ui.begin(g2);this.drawElementsPanel();this.drawRightPanels();this.drawBottomPanel();this.uiBase.ui.end();g2.begin(false);if(!this.sizeInit){this.onResized();this.sizeInit=true}}onResized(){koui_Koui.set_uiScale((iron_App.h()-this.uiBase.getBottomH())/576);koui_Koui.onResize(iron_App.w()-this.uiBase.getSidebarW(),iron_App.h()-this.uiBase.getBottomH());if(iron_Scene.active!=null&&iron_Scene.active.camera!=null){iron_Scene.active.camera.buildProjection()}}}$hxClasses["arm.KouiEditor"]=arm_KouiEditor;arm_KouiEditor.__name__="arm.KouiEditor";arm_KouiEditor.__super__=iron_Trait;Object.assign(arm_KouiEditor.prototype,{__class__:arm_KouiEditor,uiBase:null,themeTextHandle:null,sceneTabHandle:null,propertiesTabHandle:null,themeTabHandle:null,anchorPane:null,button:null,sceneTabs:null,sceneCounter:null,sizeInit:null,buttons:null,buttonsCount:null,labels:null,labelsCount:null,draggedElement:null,dragOffsetX:null,dragOffsetY:null});class arm_UIBase{constructor(font){this.cursorSet=false;this.borderHandle=null;this.borderStarted=0;arm_UIBase.inst=this;this.hwnds=[new zui_Handle,new zui_Handle,new zui_Handle];this.ui=new zui_Zui({font:font,theme:arm_Base.theme,scaleFactor:arm_Config.raw.window_scale});zui_Zui.onBorderHover=$bind(this,this.onBorderHover)}update(){if(this.ui==null){return}if(iron_App.w()<200||iron_App.h()<128){return}let mouse=iron_system_Input.getMouse();let maxW=iron_App.w()*.7|0;if(maxW<200){maxW=200}if(arm_Config.raw.layout[0]>maxW){arm_Config.raw.layout[0]=maxW}if(this.borderHandle!=null){if(this.borderStarted==0){arm_Config.raw.layout[0]-=mouse.movementX|0;if(arm_Config.raw.layout[0]<200){arm_Config.raw.layout[0]=200}else if(arm_Config.raw.layout[0]>maxW){arm_Config.raw.layout[0]=maxW}}if(this.borderStarted==3||this.borderStarted==2){let my=mouse.movementY|0;if(this.borderHandle==this.hwnds[2]){arm_Config.raw.layout[3]-=my;let maxBottomH=iron_App.h()*.7|0;if(arm_Config.raw.layout[3]<64){arm_Config.raw.layout[3]=64}else if(arm_Config.raw.layout[3]>maxBottomH){arm_Config.raw.layout[3]=maxBottomH}}else if(arm_Config.raw.layout[1]+my>64&&arm_Config.raw.layout[2]-my>64){arm_Config.raw.layout[1]+=my;arm_Config.raw.layout[2]-=my}}}if(!mouse.down()){if(this.borderHandle!=null){this.borderHandle=null;arm_Base.set_isResizing(false);Krom.setMouseCursor(0)}}if(mouse.movementX!=0||mouse.movementY!=0){if(this.cursorSet){this.cursorSet=false}else if(this.borderHandle==null){Krom.setMouseCursor(0)}}}onBorderHover(handle,side){if(!arm_Base.uiEnabled){return}if(handle!=this.hwnds[0]&&handle!=this.hwnds[1]&&handle!=this.hwnds[2]){return}if(handle==this.hwnds[0]&&side!=0&&side!=3){return}if(handle==this.hwnds[1]&&side!=0&&side!=2){return}if(handle==this.hwnds[2]&&side!=2){return}if(side==0||side==1){Krom.setMouseCursor(3)}else{Krom.setMouseCursor(4)}this.cursorSet=true;if(this.ui.inputStarted){this.borderStarted=side;this.borderHandle=handle;arm_Base.set_isResizing(true)}}getTabX(){let w=iron_App.w();if(w<200){return 0}let sidebarW=arm_Config.raw.layout[0];if(sidebarW>w-64){sidebarW=w-64}return w-sidebarW}getSidebarW(){let w=iron_App.w();if(w<200){return 200}let sidebarW=arm_Config.raw.layout[0];if(sidebarW>w-64){return w-64}if(sidebarW<200){return 200}return sidebarW}getSidebarH0(){let h=arm_Config.raw.layout[1];if(h<64){return 64}return h}getSidebarH1(){let h=arm_Config.raw.layout[2];if(h<64){return 64}return h}getBottomH(){let h=arm_Config.raw.layout[3];if(h<64){return 64}return h}adjustHeightsToWindow(){let totalH=iron_App.h();if(totalH<128){return}let currentTotal=arm_Config.raw.layout[1]+arm_Config.raw.layout[2];if(currentTotal<128){arm_Config.raw.layout[1]=totalH/2|0;arm_Config.raw.layout[2]=totalH-arm_Config.raw.layout[1]}else if(currentTotal!=totalH){let ratio=arm_Config.raw.layout[1]/currentTotal;arm_Config.raw.layout[1]=totalH*ratio|0;arm_Config.raw.layout[2]=totalH-arm_Config.raw.layout[1]}if(arm_Config.raw.layout[1]<64){arm_Config.raw.layout[1]=64;arm_Config.raw.layout[2]=totalH-64}if(arm_Config.raw.layout[2]<64){arm_Config.raw.layout[2]=64;arm_Config.raw.layout[1]=totalH-64}let maxBottomH=iron_App.h()*.7|0;if(arm_Config.raw.layout[3]>maxBottomH){arm_Config.raw.layout[3]=maxBottomH}if(arm_Config.raw.layout[3]<64){arm_Config.raw.layout[3]=64}}}$hxClasses["arm.UIBase"]=arm_UIBase;arm_UIBase.__name__="arm.UIBase";Object.assign(arm_UIBase.prototype,{__class__:arm_UIBase,ui:null,hwnds:null,borderStarted:null,borderHandle:null,cursorSet:null});class armory_data_Config{}$hxClasses["armory.data.Config"]=armory_data_Config;armory_data_Config.__name__="armory.data.Config";class armory_object_Uniforms{static register(){iron_object_Uniforms.externalTextureLinks=[armory_object_Uniforms.textureLink];iron_object_Uniforms.externalVec2Links=[armory_object_Uniforms.vec2Link];iron_object_Uniforms.externalVec3Links=[armory_object_Uniforms.vec3Link];iron_object_Uniforms.externalVec4Links=[];iron_object_Uniforms.externalFloatLinks=[armory_object_Uniforms.floatLink];iron_object_Uniforms.externalFloatsLinks=[armory_object_Uniforms.floatsLink];iron_object_Uniforms.externalIntLinks=[armory_object_Uniforms.intLink]}static textureLink(object,mat,link){switch(link){case"_morphDataNor":return js_Boot.__cast(object,iron_object_MeshObject).morphTarget.morphDataNor;case"_morphDataPos":return js_Boot.__cast(object,iron_object_MeshObject).morphTarget.morphDataPos;case"_nishitaLUT":if(armory_renderpath_Nishita.data==null){armory_renderpath_Nishita.recompute(iron_Scene.active.world)}return armory_renderpath_Nishita.data.lut}let this1=iron_RenderPath.active.renderTargets;let key=link.endsWith("_depth")?HxOverrides.substr(link,0,link.length-6):link;let target=this1.h[key];if(target!=null){return target.image}else{return null}}static vec3Link(object,mat,link){let v=null;return v}static vec2Link(object,mat,link){let v=null;if(link=="_nishitaDensity"){let w=iron_Scene.active.world;if(w!=null){v=iron_object_Uniforms.helpVec;v.x=w.raw.nishita_density.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);v.y=w.raw.nishita_density.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)}}return v}static floatLink(object,mat,link){return null}static floatsLink(object,mat,link){return null}static intLink(object,mat,link){return null}}$hxClasses["armory.object.Uniforms"]=armory_object_Uniforms;armory_object_Uniforms.__name__="armory.object.Uniforms";class armory_renderpath_Inc{static init(_path){armory_renderpath_Inc.path=_path}}$hxClasses["armory.renderpath.Inc"]=armory_renderpath_Inc;armory_renderpath_Inc.__name__="armory.renderpath.Inc";class armory_renderpath_Nishita{static recompute(world){if(world==null||world.raw.nishita_density==null){return}if(armory_renderpath_Nishita.data==null){armory_renderpath_Nishita.data=new armory_renderpath_NishitaData}let density=world.raw.nishita_density;armory_renderpath_Nishita.data.computeLUT(new iron_math_Vec3(density.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),density.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),density.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)))}}$hxClasses["armory.renderpath.Nishita"]=armory_renderpath_Nishita;armory_renderpath_Nishita.__name__="armory.renderpath.Nishita";class iron_math_Vec3{constructor(x,y,z){if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z}}$hxClasses["iron.math.Vec3"]=iron_math_Vec3;iron_math_Vec3.__name__="iron.math.Vec3";Object.assign(iron_math_Vec3.prototype,{__class__:iron_math_Vec3,x:null,y:null,z:null});class armory_renderpath_NishitaData{constructor(){}getOzoneDensity(height){if(height<1e4||height>=4e4){return 0}if(height<25e3){return(height-1e4)/15e3}return-((height-4e4)/15e3)}raySphereIntersection(rayOrigin,rayDirection,sphereRadius){let a=rayDirection.x*rayDirection.x+rayDirection.y*rayDirection.y+rayDirection.z*rayDirection.z;let b=2*(rayDirection.x*rayOrigin.x+rayDirection.y*rayOrigin.y+rayDirection.z*rayOrigin.z);let c=rayOrigin.x*rayOrigin.x+rayOrigin.y*rayOrigin.y+rayOrigin.z*rayOrigin.z-sphereRadius*sphereRadius;let d=b*b-4*a*c;if(d<0){return new iron_math_Vec2(1e5,-1e5)}return new iron_math_Vec2((-b-Math.sqrt(d))/(2*a),(-b+Math.sqrt(d))/(2*a))}computeLUT(density){let this1=new Float32Array(armory_renderpath_NishitaData.lutHeightSteps*armory_renderpath_NishitaData.lutAngleSteps*4);let imageData=this1;let _g=0;let _g1=armory_renderpath_NishitaData.lutHeightSteps;while(_g<_g1){let x=_g++;let height=x/(armory_renderpath_NishitaData.lutHeightSteps-1);height*=height;height*=armory_renderpath_NishitaData.radiusAtmo*1e3;let _g1=0;let _g2=armory_renderpath_NishitaData.lutAngleSteps;while(_g1<_g2){let y=_g1++;let sunTheta=y/(armory_renderpath_NishitaData.lutAngleSteps-1)*2-1;sunTheta=(sunTheta==0?0:sunTheta<0?-1:1)*sunTheta*sunTheta;sunTheta=sunTheta*Math.PI/2+Math.PI/2;let jODepth=this.sampleSecondaryRay(height,sunTheta,density);let pixelIndex=(x+y*armory_renderpath_NishitaData.lutHeightSteps)*4;imageData[pixelIndex]=jODepth.x;imageData[pixelIndex+1]=jODepth.y;imageData[pixelIndex+2]=jODepth.z;imageData[pixelIndex+3]=1}}this.lut=kha_Image.fromBytes(haxe_io_Bytes.ofData(imageData.buffer),armory_renderpath_NishitaData.lutHeightSteps,armory_renderpath_NishitaData.lutAngleSteps,2,0)}sampleSecondaryRay(height,sunTheta,density){let radiusPlanetMeters=armory_renderpath_NishitaData.radiusPlanet*1e3;let x=0;let y=0;let z=height+radiusPlanetMeters;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let iPos_x=x;let iPos_y=y;let iPos_z=z;let _this=new iron_math_Vec3(0,Math.sin(sunTheta),Math.cos(sunTheta));let n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){let invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}let pSun=_this;let jTime=0;let _this1=new iron_math_Vec3(iPos_x,iPos_y,iPos_z);_this1.x*=.001;_this1.y*=.001;_this1.z*=.001;let jStepSize=this.raySphereIntersection(_this1,pSun,armory_renderpath_NishitaData.radiusAtmo).y/armory_renderpath_NishitaData.jSteps;jStepSize*=1e3;let jODepth_x=0;let jODepth_y=0;let jODepth_z=0;let _g=0;let _g1=armory_renderpath_NishitaData.jSteps;while(_g<_g1){let i=_g++;let x=iPos_x;let y=iPos_y;let z=iPos_z;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let jPos_x=x;let jPos_y=y;let jPos_z=z;let x1=pSun.x;let y1=pSun.y;let z1=pSun.z;if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let v_x=x1;let v_y=y1;let v_z=z1;let f=jTime+jStepSize*.5;v_x*=f;v_y*=f;v_z*=f;jPos_x+=v_x;jPos_y+=v_y;jPos_z+=v_z;let jHeight=Math.sqrt(jPos_x*jPos_x+jPos_y*jPos_y+jPos_z*jPos_z)-radiusPlanetMeters;let optDepthRayleigh=Math.exp(-jHeight/armory_renderpath_NishitaData.rayleighScale)*density.x;let optDepthMie=Math.exp(-jHeight/armory_renderpath_NishitaData.mieScale)*density.y;let optDepthOzone=this.getOzoneDensity(jHeight)*density.z;jODepth_x+=optDepthRayleigh;jODepth_y+=optDepthMie;jODepth_z+=optDepthOzone;jTime+=jStepSize}jODepth_x*=jStepSize;jODepth_y*=jStepSize;jODepth_z*=jStepSize;let jAttenuation=new iron_math_Vec3;let mie=armory_renderpath_NishitaData.mieCoeff*jODepth_y;jAttenuation.x+=mie;jAttenuation.y+=mie;jAttenuation.z+=mie;let _this2=armory_renderpath_NishitaData.rayleighCoeff;let x1=_this2.x;let y1=_this2.y;let z1=_this2.z;if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let v_x=x1;let v_y=y1;let v_z=z1;let f=jODepth_x;v_x*=f;v_y*=f;v_z*=f;jAttenuation.x+=v_x;jAttenuation.y+=v_y;jAttenuation.z+=v_z;let _this3=armory_renderpath_NishitaData.ozoneCoeff;let x2=_this3.x;let y2=_this3.y;let z2=_this3.z;if(z2==null){z2=0}if(y2==null){y2=0}if(x2==null){x2=0}let v_x1=x2;let v_y1=y2;let v_z1=z2;let f1=jODepth_z;v_x1*=f1;v_y1*=f1;v_z1*=f1;jAttenuation.x+=v_x1;jAttenuation.y+=v_y1;jAttenuation.z+=v_z1;jAttenuation.x*=-1;jAttenuation.y*=-1;jAttenuation.z*=-1;let v=jAttenuation;jAttenuation.x=Math.exp(v.x);jAttenuation.y=Math.exp(v.y);jAttenuation.z=Math.exp(v.z);return jAttenuation}}$hxClasses["armory.renderpath.NishitaData"]=armory_renderpath_NishitaData;armory_renderpath_NishitaData.__name__="armory.renderpath.NishitaData";Object.assign(armory_renderpath_NishitaData.prototype,{__class__:armory_renderpath_NishitaData,lut:null});class armory_renderpath_RenderPathForward{static setTargetMeshes(){armory_renderpath_RenderPathForward.path.setTarget("")}static drawMeshes(){armory_renderpath_RenderPathForward.path.drawMeshes("mesh")}static init(_path){armory_renderpath_RenderPathForward.path=_path}static commands(){armory_renderpath_RenderPathCreator.setTargetMeshes();armory_renderpath_RenderPathForward.path.clearTarget(-1,1);armory_renderpath_RenderPathCreator.setTargetMeshes();armory_renderpath_RenderPathCreator.drawMeshes()}static setupDepthTexture(){armory_renderpath_RenderPathForward.setTargetMeshes();armory_renderpath_RenderPathForward.path.bindTarget("depthtex","depthtex")}}$hxClasses["armory.renderpath.RenderPathForward"]=armory_renderpath_RenderPathForward;armory_renderpath_RenderPathForward.__name__="armory.renderpath.RenderPathForward";class armory_renderpath_RenderPathCreator{static get(){armory_renderpath_RenderPathCreator.path=new iron_RenderPath;armory_renderpath_Inc.init(armory_renderpath_RenderPathCreator.path);armory_renderpath_RenderPathForward.init(armory_renderpath_RenderPathCreator.path);armory_renderpath_RenderPathCreator.path.commands=function(){armory_renderpath_RenderPathForward.commands();armory_renderpath_RenderPathCreator.commands()};armory_renderpath_RenderPathCreator.path.setupDepthTexture=armory_renderpath_RenderPathForward.setupDepthTexture;return armory_renderpath_RenderPathCreator.path}}armory_renderpath_RenderPathCreator.commands=function(){};$hxClasses["armory.renderpath.RenderPathCreator"]=armory_renderpath_RenderPathCreator;armory_renderpath_RenderPathCreator.__name__="armory.renderpath.RenderPathCreator";class haxe_Exception extends Error{constructor(message,previous,native){super(message);this.message=message;this.__previousException=previous;this.__nativeException=native!=null?native:this}unwrap(){return this.__nativeException}toString(){return this.get_message()}get_message(){return this.message}get_native(){return this.__nativeException}static caught(value){if(value instanceof haxe_Exception){return value}else if(value instanceof Error){return new haxe_Exception(value.message,null,value)}else{return new haxe_ValueException(value,null,value)}}static thrown(value){if(value instanceof haxe_Exception){return value.get_native()}else if(value instanceof Error){return value}else{let e=new haxe_ValueException(value);return e}}}$hxClasses["haxe.Exception"]=haxe_Exception;haxe_Exception.__name__="haxe.Exception";haxe_Exception.__super__=Error;Object.assign(haxe_Exception.prototype,{__class__:haxe_Exception,__skipStack:null,__nativeException:null,__previousException:null,__properties__:{get_native:"get_native",get_message:"get_message"}});class haxe_exceptions_PosException extends haxe_Exception{constructor(message,previous,pos){super(message,previous);if(pos==null){this.posInfos={fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}}else{this.posInfos=pos}}toString(){return""+super.toString()+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber}}$hxClasses["haxe.exceptions.PosException"]=haxe_exceptions_PosException;haxe_exceptions_PosException.__name__="haxe.exceptions.PosException";haxe_exceptions_PosException.__super__=haxe_Exception;Object.assign(haxe_exceptions_PosException.prototype,{__class__:haxe_exceptions_PosException,posInfos:null});class armory_system_Event{static get(name){return armory_system_Event.events.h[name]}}$hxClasses["armory.system.Event"]=armory_system_Event;armory_system_Event.__name__="armory.system.Event";class armory_system_Starter{static main(scene,mode,resize,min,max,w,h,msaa,vsync,getRenderPath){let tasks=0;let start=function(){if(tasks>0){return}if(armory_data_Config.raw==null){armory_data_Config.raw={}}let c=armory_data_Config.raw;if(c.window_mode==null){c.window_mode=mode}if(c.window_resizable==null){c.window_resizable=resize}if(c.window_minimizable==null){c.window_minimizable=min}if(c.window_maximizable==null){c.window_maximizable=max}if(c.window_w==null){c.window_w=w}if(c.window_h==null){c.window_h=h}if(c.window_scale==null){c.window_scale=1}if(c.window_msaa==null){c.window_msaa=msaa}if(c.window_vsync==null){c.window_vsync=vsync}armory_object_Uniforms.register();let windowMode=c.window_mode==0?0:1;let windowFeatures=0;if(c.window_resizable){windowFeatures|=1}if(c.window_maximizable){windowFeatures|=4}if(c.window_minimizable){windowFeatures|=2}kha_System.start(new kha_SystemOptions("koui_editor",c.window_w,c.window_h,new kha_WindowOptions(null,-1,-1,800,600,-1,true,windowFeatures,windowMode),new kha_FramebufferOptions(60,c.window_vsync,32,16,8,c.window_msaa)),function($window){iron_App.init(function(){let load=null;load=function(g){if(iron_Scene.active!=null&&iron_Scene.active.ready){iron_App.removeRender2D(load)}else{armory_system_Starter.drawLoading(g,iron_data_Data.assetsLoaded,armory_system_Starter.numAssets)}};iron_App.notifyOnRender2D(load);iron_Scene.setActive(scene,function(object){iron_RenderPath.setActive(getRenderPath())})})})};tasks=1;tasks-=1;start()}}$hxClasses["armory.system.Starter"]=armory_system_Starter;armory_system_Starter.__name__="armory.system.Starter";class armory_trait_internal_CanvasScript extends iron_Trait{constructor(canvasName,font){iron_Trait._hx_skip_constructor=true;super();iron_Trait._hx_skip_constructor=false;this._hx_constructor(canvasName,font)}_hx_constructor(canvasName,font){if(font==null){font="font_default.ttf"}this.onReadyFuncs=null;this.canvas=null;super._hx_constructor();this.cnvName=canvasName;let _gthis=this;iron_data_Data.getBlob(canvasName+".json",function(blob){iron_data_Data.getBlob("_themes.json",function(tBlob){if(tBlob.get_length()!=0){armory_ui_Canvas.themes=JSON.parse(tBlob.toString())}else{haxe_Log.trace('"_themes.json" is empty! Using default theme instead.',{fileName:"Sources/armory/trait/internal/CanvasScript.hx",lineNumber:39,className:"armory.trait.internal.CanvasScript",methodName:"new"})}if(armory_ui_Canvas.themes.length==0){armory_ui_Canvas.themes.push(armory_ui_Themes.light)}iron_data_Data.getFont(font,function(defaultFont){let c=armory_ui_Canvas.parseCanvasFromBlob(blob);if(c.theme==null){c.theme=armory_ui_Canvas.themes[0].NAME}let tmp=armory_ui_Canvas.getTheme(c.theme);_gthis.cui=new zui_Zui({font:defaultFont,theme:tmp});if(c.assets==null||c.assets.length==0){_gthis.canvas=c}else{let loaded=0;let _g=0;let _g1=c.assets;while(_g<_g1.length){let asset=_g1[_g];++_g;let file=asset.name;if(file!=null&&file.toLowerCase().endsWith(".ttf")){iron_data_Data.getFont(file,function(f){armory_ui_Canvas.assetMap.h[asset.id]=f;if((loaded+=1)>=c.assets.length){_gthis.canvas=c}})}else{iron_data_Data.getImage(file,function(image){armory_ui_Canvas.assetMap.h[asset.id]=image;if((loaded+=1)>=c.assets.length){_gthis.canvas=c}})}}}})})});this.notifyOnRender2D(function(g){if(_gthis.canvas==null){return}_gthis.setCanvasDimensions(kha_System.windowWidth(),kha_System.windowHeight());let events=armory_ui_Canvas.draw(_gthis.cui,_gthis.canvas,g);let _g=0;while(_g<events.length){let e=events[_g];++_g;let all=armory_system_Event.get(e);if(all!=null){let _g=0;while(_g<all.length){let entry=all[_g];++_g;entry.onEvent()}}}if(_gthis.onReadyFuncs!=null){let _g=0;let _g1=_gthis.onReadyFuncs;while(_g<_g1.length){let f=_g1[_g];++_g;f()}_gthis.onReadyFuncs.length=0}})}get_ready(){return this.canvas!=null}notifyOnReady(f){if(this.onReadyFuncs==null){this.onReadyFuncs=[]}this.onReadyFuncs.push(f)}getElement(name){let _g=0;let _g1=this.canvas.elements;while(_g<_g1.length){let e=_g1[_g];++_g;if(e.name==name){return e}}return null}getElements(){return this.canvas.elements}getCanvas(){return this.canvas}setUiScale(factor){this.cui.setScale(factor)}getUiScale(){return this.cui.ops.scaleFactor}setCanvasVisibility(visible){this.canvas.visible=visible}setCanvasVisible(visible){this.canvas.visible=visible}getCanvasVisible(){return this.canvas.visible}setCanvasDimensions(x,y){this.canvas.width=x;this.canvas.height=y}setCanvasFontSize(fontSize){this.cui.t.FONT_SIZE=fontSize;this.cui.setScale(this.cui.ops.scaleFactor)}getCanvasFontSize(){return this.cui.t.FONT_SIZE}setCanvasInputTextFocus(e,focus){if(focus==true){this.cui.startTextEdit(e)}else{this.cui.deselectText()}}getHandle(name){let this1=armory_ui_Canvas.h.children;let key=this.getElement(name).id;return this1.h[key]}static getActiveCanvas(){let activeCanvas=iron_Scene.active.getTrait(armory_trait_internal_CanvasScript);if(activeCanvas==null){activeCanvas=iron_Scene.active.camera.getTrait(armory_trait_internal_CanvasScript)}return activeCanvas}}$hxClasses["armory.trait.internal.CanvasScript"]=armory_trait_internal_CanvasScript;armory_trait_internal_CanvasScript.__name__="armory.trait.internal.CanvasScript";armory_trait_internal_CanvasScript.__super__=iron_Trait;Object.assign(armory_trait_internal_CanvasScript.prototype,{__class__:armory_trait_internal_CanvasScript,cnvName:null,cui:null,canvas:null,ready:null,onReadyFuncs:null,__properties__:{get_ready:"get_ready"}});class armory_trait_internal_LoadingScreen{static render(g,assetsLoaded,assetsTotal){g.set_color(-3200189);g.fillRect(0,iron_App.h()-6,iron_App.w()/assetsTotal*assetsLoaded,6)}}$hxClasses["armory.trait.internal.LoadingScreen"]=armory_trait_internal_LoadingScreen;armory_trait_internal_LoadingScreen.__name__="armory.trait.internal.LoadingScreen";class zui_Handle{constructor(ops){this.changed=false;this.dragY=0;this.dragX=0;this.dragEnabled=false;this.lastMaxY=0;this.lastMaxX=0;this.layout=0;this.scrollEnabled=false;this.scrollOffset=0;this.redraws=2;this.texture=null;this.text="";this.value=0;this.color=-1;this.position=0;this.selected=false;this.ptr=zui_Handle.ptrCounter++;if(ops!=null){if(ops.selected!=null){this.selected=ops.selected}if(ops.position!=null){this.position=ops.position}if(ops.value!=null){this.value=ops.value}if(ops.text!=null){this.text=ops.text}if(ops.color!=null){this.color=ops.color}if(ops.layout!=null){this.layout=ops.layout}}}nest(i,ops){if(this.children==null){this.children=new haxe_ds_IntMap}let c=this.children.h[i];if(c==null){c=new zui_Handle(ops);this.children.h[i]=c}return c}}$hxClasses["zui.Handle"]=zui_Handle;zui_Handle.__name__="zui.Handle";Object.assign(zui_Handle.prototype,{__class__:zui_Handle,ptr:null,selected:null,position:null,color:null,value:null,text:null,texture:null,redraws:null,scrollOffset:null,scrollEnabled:null,layout:null,lastMaxX:null,lastMaxY:null,dragEnabled:null,dragX:null,dragY:null,changed:null,children:null});class armory_ui_Canvas{static draw(ui,canvas,g){armory_ui_Canvas.events.length=0;if(!canvas.visible){return armory_ui_Canvas.events}armory_ui_Canvas.screenW=kha_System.windowWidth();armory_ui_Canvas.screenH=kha_System.windowHeight();armory_ui_Canvas._ui=ui;g.end();g.set_imageScaleQuality(armory_ui_Canvas.imageScaleQuality);ui.begin(g);g.begin(false);ui.g=g;let _g=0;let _g1=canvas.elements;while(_g<_g1.length){let elem=_g1[_g];++_g;if(elem.parent==null){armory_ui_Canvas.drawElement(ui,canvas,elem)}}g.end();ui.end();g.begin(false);return armory_ui_Canvas.events}static drawElement(ui,canvas,element,px,py){if(py==null){py=0}if(px==null){px=0}if(element==null||element.visible==false){return}let anchorOffset=armory_ui_Canvas.getAnchorOffset(canvas,element);px+=anchorOffset[0];py+=anchorOffset[1];ui._x=canvas.x+(element.x*armory_ui_Canvas._ui.ops.scaleFactor|0)+px;ui._y=canvas.y+(element.y*armory_ui_Canvas._ui.ops.scaleFactor|0)+py;ui._w=element.width*armory_ui_Canvas._ui.ops.scaleFactor|0;let rotated=element.rotation!=null&&element.rotation!=0;if(rotated){ui.g.pushRotation(element.rotation,ui._x+(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2)}let font=ui.ops.font;let assetName=element.asset;let fontAsset=assetName!=null&&assetName.toLowerCase().endsWith(".ttf");if(fontAsset){ui.ops.font=armory_ui_Canvas.getAsset(canvas,element.asset)}switch(element.type){case 0:let prevFontSize=ui.fontSize;let prevTEXT_COL=ui.t.TEXT_COL;ui.fontSize=element.height*armory_ui_Canvas._ui.ops.scaleFactor|0;let color=element.color_text;let defaultColor=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color!=null?color:defaultColor;ui.text(element.text,element.alignment);ui.fontSize=prevFontSize;ui.t.TEXT_COL=prevTEXT_COL;break;case 1:let image=armory_ui_Canvas.getAsset(canvas,element.asset);if(image!=null&&!fontAsset){ui.imageScrollAlign=false;let tint=element.color!=null?element.color:-1;if(ui.image(image,tint,element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)==3){let e=element.event;if(e!=null&&e!=""){armory_ui_Canvas.events.push(e)}}ui.imageScrollAlign=true}break;case 2:let prevELEMENT_H=ui.t.ELEMENT_H;let prevBUTTON_H=ui.t.BUTTON_H;let prevBUTTON_COL=ui.t.BUTTON_COL;let prevBUTTON_TEXT_COL=ui.t.BUTTON_TEXT_COL;let prevBUTTON_HOVER_COL=ui.t.BUTTON_HOVER_COL;let prevBUTTON_PRESSED_COL=ui.t.BUTTON_PRESSED_COL;ui.t.ELEMENT_H=element.height;ui.t.BUTTON_H=element.height;let color1=element.color;let defaultColor1=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.BUTTON_COL=color1!=null?color1:defaultColor1;let color2=element.color_text;let defaultColor2=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_TEXT_COL;ui.t.BUTTON_TEXT_COL=color2!=null?color2:defaultColor2;let color3=element.color_hover;let defaultColor3=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.BUTTON_HOVER_COL=color3!=null?color3:defaultColor3;let color4=element.color_press;let defaultColor4=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_PRESSED_COL;ui.t.BUTTON_PRESSED_COL=color4!=null?color4:defaultColor4;if(ui.button(element.text,element.alignment)){let e=element.event;if(e!=null&&e!=""){armory_ui_Canvas.events.push(e)}}ui.t.ELEMENT_H=prevELEMENT_H;ui.t.BUTTON_H=prevBUTTON_H;ui.t.BUTTON_COL=prevBUTTON_COL;ui.t.BUTTON_TEXT_COL=prevBUTTON_TEXT_COL;ui.t.BUTTON_HOVER_COL=prevBUTTON_HOVER_COL;ui.t.BUTTON_PRESSED_COL=prevBUTTON_PRESSED_COL;break;case 3:break;case 6:let prevTEXT_COL1=ui.t.TEXT_COL;let prevACCENT_COL=ui.t.ACCENT_COL;let prevACCENT_HOVER_COL=ui.t.ACCENT_HOVER_COL;let color5=element.color_text;let defaultColor5=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color5!=null?color5:defaultColor5;let color6=element.color;let defaultColor6=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.ACCENT_COL=color6!=null?color6:defaultColor6;let color7=element.color_hover;let defaultColor7=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.ACCENT_HOVER_COL=color7!=null?color7:defaultColor7;ui.check(armory_ui_Canvas.h.nest(element.id),element.text);ui.t.TEXT_COL=prevTEXT_COL1;ui.t.ACCENT_COL=prevACCENT_COL;ui.t.ACCENT_HOVER_COL=prevACCENT_HOVER_COL;break;case 7:let prevTEXT_COL2=ui.t.TEXT_COL;let prevACCENT_COL1=ui.t.ACCENT_COL;let prevACCENT_HOVER_COL1=ui.t.ACCENT_HOVER_COL;let color8=element.color_text;let defaultColor8=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color8!=null?color8:defaultColor8;let color9=element.color;let defaultColor9=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.ACCENT_COL=color9!=null?color9:defaultColor9;let color10=element.color_hover;let defaultColor10=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.ACCENT_HOVER_COL=color10!=null?color10:defaultColor10;zui_Ext.inlineRadio(ui,armory_ui_Canvas.h.nest(element.id),element.text.split(";"));ui.t.TEXT_COL=prevTEXT_COL2;ui.t.ACCENT_COL=prevACCENT_COL1;ui.t.ACCENT_HOVER_COL=prevACCENT_HOVER_COL1;break;case 8:let prevTEXT_COL3=ui.t.TEXT_COL;let prevLABEL_COL=ui.t.LABEL_COL;let prevACCENT_COL2=ui.t.ACCENT_COL;let prevSEPARATOR_COL=ui.t.SEPARATOR_COL;let prevACCENT_HOVER_COL2=ui.t.ACCENT_HOVER_COL;let color11=element.color_text;let defaultColor11=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color11!=null?color11:defaultColor11;let color12=element.color_text;let defaultColor12=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.LABEL_COL=color12!=null?color12:defaultColor12;let color13=element.color;let defaultColor13=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.ACCENT_COL=color13!=null?color13:defaultColor13;let color14=element.color;let defaultColor14=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.SEPARATOR_COL=color14!=null?color14:defaultColor14;let color15=element.color_hover;let defaultColor15=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.ACCENT_HOVER_COL=color15!=null?color15:defaultColor15;ui.combo(armory_ui_Canvas.h.nest(element.id),element.text.split(";"));ui.t.TEXT_COL=prevTEXT_COL3;ui.t.LABEL_COL=prevLABEL_COL;ui.t.ACCENT_COL=prevACCENT_COL2;ui.t.SEPARATOR_COL=prevSEPARATOR_COL;ui.t.ACCENT_HOVER_COL=prevACCENT_HOVER_COL2;break;case 9:let prevTEXT_COL4=ui.t.TEXT_COL;let prevLABEL_COL1=ui.t.LABEL_COL;let prevACCENT_COL3=ui.t.ACCENT_COL;let prevACCENT_HOVER_COL3=ui.t.ACCENT_HOVER_COL;let color16=element.color_text;let defaultColor16=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color16!=null?color16:defaultColor16;let color17=element.color_text;let defaultColor17=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.LABEL_COL=color17!=null?color17:defaultColor17;let color18=element.color;let defaultColor18=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.ACCENT_COL=color18!=null?color18:defaultColor18;let color19=element.color_hover;let defaultColor19=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.ACCENT_HOVER_COL=color19!=null?color19:defaultColor19;ui.slider(armory_ui_Canvas.h.nest(element.id),element.text,0,1,true,100,true,element.alignment);ui.t.TEXT_COL=prevTEXT_COL4;ui.t.LABEL_COL=prevLABEL_COL1;ui.t.ACCENT_COL=prevACCENT_COL3;ui.t.ACCENT_HOVER_COL=prevACCENT_HOVER_COL3;break;case 10:let prevTEXT_COL5=ui.t.TEXT_COL;let prevLABEL_COL2=ui.t.LABEL_COL;let prevACCENT_COL4=ui.t.ACCENT_COL;let prevACCENT_HOVER_COL4=ui.t.ACCENT_HOVER_COL;let color20=element.color_text;let defaultColor20=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color20!=null?color20:defaultColor20;let color21=element.color_text;let defaultColor21=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.LABEL_COL=color21!=null?color21:defaultColor21;let color22=element.color;let defaultColor22=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.ACCENT_COL=color22!=null?color22:defaultColor22;let color23=element.color_hover;let defaultColor23=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.ACCENT_HOVER_COL=color23!=null?color23:defaultColor23;ui.textInput(armory_ui_Canvas.h.nest(element.id),element.text,element.alignment);if(armory_ui_Canvas.h.nest(element.id).changed){let e=element.event;if(e!=null&&e!=""){armory_ui_Canvas.events.push(e)}}ui.t.TEXT_COL=prevTEXT_COL5;ui.t.LABEL_COL=prevLABEL_COL2;ui.t.ACCENT_COL=prevACCENT_COL4;ui.t.ACCENT_HOVER_COL=prevACCENT_HOVER_COL4;break;case 11:let prevTEXT_COL6=ui.t.TEXT_COL;let prevLABEL_COL3=ui.t.LABEL_COL;let prevACCENT_COL5=ui.t.ACCENT_COL;let prevACCENT_HOVER_COL5=ui.t.ACCENT_HOVER_COL;let color24=element.color_text;let defaultColor24=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color24!=null?color24:defaultColor24;let color25=element.color_text;let defaultColor25=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.LABEL_COL=color25!=null?color25:defaultColor25;let color26=element.color;let defaultColor26=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.ACCENT_COL=color26!=null?color26:defaultColor26;let color27=element.color_hover;let defaultColor27=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.ACCENT_HOVER_COL=color27!=null?color27:defaultColor27;armory_ui_Ext.keyInput(ui,armory_ui_Canvas.h.nest(element.id),element.text);ui.t.TEXT_COL=prevTEXT_COL6;ui.t.LABEL_COL=prevLABEL_COL3;ui.t.ACCENT_COL=prevACCENT_COL5;ui.t.ACCENT_HOVER_COL=prevACCENT_HOVER_COL5;break;case 12:let col=ui.g.get_color();let ui1=ui.g;let color28=element.color;let defaultColor28=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui1.set_color(color28!=null?color28:defaultColor28);ui.g.fillRect(ui._x,ui._y,ui._w,element.height*armory_ui_Canvas._ui.ops.scaleFactor|0);ui.g.set_color(col);break;case 13:let col1=ui.g.get_color();let ui2=ui.g;let color29=element.color;let defaultColor29=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui2.set_color(color29!=null?color29:defaultColor29);ui.g.drawRect(ui._x,ui._y,ui._w,element.height*armory_ui_Canvas._ui.ops.scaleFactor|0,element.strength);ui.g.set_color(col1);break;case 14:let col2=ui.g.get_color();let ui3=ui.g;let color30=element.color;let defaultColor30=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui3.set_color(color30!=null?color30:defaultColor30);zui_GraphicsExtension.fillCircle(ui.g,ui._x+(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._w/2);ui.g.set_color(col2);break;case 15:let col3=ui.g.get_color();let ui4=ui.g;let color31=element.color;let defaultColor31=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui4.set_color(color31!=null?color31:defaultColor31);zui_GraphicsExtension.drawCircle(ui.g,ui._x+(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._w/2,element.strength);ui.g.set_color(col3);break;case 16:let col4=ui.g.get_color();let ui5=ui.g;let color32=element.color;let defaultColor32=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui5.set_color(color32!=null?color32:defaultColor32);ui.g.fillTriangle(ui._x+ui._w/2,ui._y,ui._x,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0),ui._x+ui._w,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0));ui.g.set_color(col4);break;case 17:let col5=ui.g.get_color();let ui6=ui.g;let color33=element.color;let defaultColor33=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui6.set_color(color33!=null?color33:defaultColor33);ui.g.drawLine(ui._x+ui._w/2,ui._y,ui._x,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0),element.strength);ui.g.drawLine(ui._x,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0),ui._x+ui._w,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0),element.strength);ui.g.drawLine(ui._x+ui._w,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0),ui._x+ui._w/2,ui._y,element.strength);ui.g.set_color(col5);break;case 18:let col6=ui.g.get_color();let progress=element.progress_at;let totalprogress=element.progress_total;let ui7=ui.g;let color34=element.color_progress;let defaultColor34=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui7.set_color(color34!=null?color34:defaultColor34);ui.g.fillRect(ui._x,ui._y,ui._w/totalprogress*Math.min(progress,totalprogress),element.height*armory_ui_Canvas._ui.ops.scaleFactor|0);let ui8=ui.g;let color35=element.color;let defaultColor35=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui8.set_color(color35!=null?color35:defaultColor35);ui.g.drawRect(ui._x,ui._y,ui._w,element.height*armory_ui_Canvas._ui.ops.scaleFactor|0,element.strength);ui.g.set_color(col6);break;case 19:let col7=ui.g.get_color();let progress1=element.progress_at;let totalprogress1=element.progress_total;let ui9=ui.g;let color36=element.color_progress;let defaultColor36=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui9.set_color(color36!=null?color36:defaultColor36);zui_GraphicsExtension.drawArc(ui.g,ui._x+(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._w/2,-Math.PI/2,Math.PI*2/totalprogress1*progress1-Math.PI/2,element.strength);let ui10=ui.g;let color37=element.color;let defaultColor37=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui10.set_color(color37!=null?color37:defaultColor37);zui_GraphicsExtension.fillCircle(ui.g,ui._x+(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._y+(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2,ui._w/2-10);ui.g.set_color(col7);break;case 20:let prevTEXT_COL7=ui.t.TEXT_COL;let prevLABEL_COL4=ui.t.LABEL_COL;let prevACCENT_COL6=ui.t.ACCENT_COL;let prevACCENT_HOVER_COL6=ui.t.ACCENT_HOVER_COL;let color38=element.color_text;let defaultColor38=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.TEXT_COL=color38!=null?color38:defaultColor38;let color39=element.color_text;let defaultColor39=armory_ui_Canvas.getTheme(canvas.theme).TEXT_COL;ui.t.LABEL_COL=color39!=null?color39:defaultColor39;let color40=element.color;let defaultColor40=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_COL;ui.t.ACCENT_COL=color40!=null?color40:defaultColor40;let color41=element.color_hover;let defaultColor41=armory_ui_Canvas.getTheme(canvas.theme).BUTTON_HOVER_COL;ui.t.ACCENT_HOVER_COL=color41!=null?color41:defaultColor41;if(element.editable==null){element.editable=true}zui_Ext.textArea(ui,armory_ui_Canvas.h.nest(element.id),element.alignment,element.editable,element.text,true);if(armory_ui_Canvas.h.nest(element.id).changed){let e=element.event;if(e!=null&&e!=""){armory_ui_Canvas.events.push(e)}}ui.t.TEXT_COL=prevTEXT_COL7;ui.t.LABEL_COL=prevLABEL_COL4;ui.t.ACCENT_COL=prevACCENT_COL6;ui.t.ACCENT_HOVER_COL=prevACCENT_HOVER_COL6;break}ui.ops.font=font;if(element.children!=null){let _g=0;let _g1=element.children;while(_g<_g1.length){let id=_g1[_g];++_g;armory_ui_Canvas.drawElement(ui,canvas,armory_ui_Canvas.elemById(canvas,id),(element.x*armory_ui_Canvas._ui.ops.scaleFactor|0)+px,(element.y*armory_ui_Canvas._ui.ops.scaleFactor|0)+py)}}if(rotated){ui.g.popTransformation()}}static parseCanvasFromBlob(blob){let raw=JSON.parse(blob.toString());if(!Object.prototype.hasOwnProperty.call(raw,"visible")){raw["visible"]=true}return raw}static getAsset(canvas,asset){let _g=0;let _g1=canvas.assets;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==asset){return armory_ui_Canvas.assetMap.h[a.id]}}return null}static elemById(canvas,id){let _g=0;let _g1=canvas.elements;while(_g<_g1.length){let e=_g1[_g];++_g;if(e.id==id){return e}}return null}static getTheme(theme){let _g=0;let _g1=armory_ui_Canvas.themes;while(_g<_g1.length){let t=_g1[_g];++_g;if(t.NAME==theme){return t}}return null}static getAnchorOffset(canvas,element){let boxWidth;let boxHeight;let offsetX=0;let offsetY=0;if(element.parent==null){boxWidth=canvas.width;boxHeight=canvas.height}else{let parent=armory_ui_Canvas.elemById(canvas,element.parent);boxWidth=parent.width*armory_ui_Canvas._ui.ops.scaleFactor|0;boxHeight=parent.height*armory_ui_Canvas._ui.ops.scaleFactor|0}switch(element.anchor){case 1:offsetX+=boxWidth/2-(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2;break;case 2:offsetX+=boxWidth-(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0);break;case 3:offsetY+=boxHeight/2-(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2;break;case 4:offsetX+=boxWidth/2-(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2;offsetY+=boxHeight/2-(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2;break;case 5:offsetX+=boxWidth-(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0);offsetY+=boxHeight/2-(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0)/2;break;case 6:offsetY+=boxHeight-(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0);break;case 7:offsetX+=boxWidth/2-(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0)/2;offsetY+=boxHeight-(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0);break;case 8:offsetX+=boxWidth-(element.width*armory_ui_Canvas._ui.ops.scaleFactor|0);offsetY+=boxHeight-(element.height*armory_ui_Canvas._ui.ops.scaleFactor|0);break}return[offsetX,offsetY]}}$hxClasses["armory.ui.Canvas"]=armory_ui_Canvas;armory_ui_Canvas.__name__="armory.ui.Canvas";class armory_ui_Ext{static keyInput(ui,handle,label,align){if(align==null){align=0}if(label==null){label=""}if(!ui.isVisible(ui.t.ELEMENT_H*ui.ops.scaleFactor)){ui.endElement();return handle.value|0}let hover=ui.getHover();if(hover&&zui_Zui.onTextHover!=null){zui_Zui.onTextHover()}ui.g.set_color(hover?ui.t.ACCENT_HOVER_COL:ui.t.ACCENT_COL);let g=ui.g;let fill=ui.t.FILL_ACCENT_BG;let x=ui._x+ui.buttonOffsetY;let y=ui._y+ui.buttonOffsetY;let w=ui._w-ui.buttonOffsetY*2;let h=ui.t.BUTTON_H*ui.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!ui.enabled){ui.fadeColor()}if(fill){g.fillRect(x,y-1,w,h+1)}else{g.drawRect(x,y,w,h,strength)}let startEdit=ui.getReleased()||ui.tabPressed;if(ui.textSelectedHandle!=handle&&startEdit){ui.startTextEdit(handle)}if(ui.textSelectedHandle==handle){armory_ui_Ext.listenToKey(ui,handle)}else{handle.changed=false}if(label!=""){ui.g.set_color(ui.t.LABEL_COL);let labelAlign=align==2?0:2;let xOffset=labelAlign==0?7:0;ui.drawString(ui.g,label,xOffset,0,labelAlign)}handle.text=armory_ui_Ext.keycodeToString(handle.value|0);ui.g.set_color(ui.t.TEXT_COL);if(ui.textSelectedHandle!=handle){ui.drawString(ui.g,handle.text,null,0,align)}else{ui.drawString(ui.g,ui.textSelected,null,0,align)}ui.endElement();return handle.value|0}static listenToKey(ui,handle){if(ui.isKeyDown){handle.value=ui.key;handle.changed=ui.changed=true;ui.textSelectedHandle=null;ui.isTyping=false;if(kha_input_Keyboard.get()!=null){kha_input_Keyboard.get().hide()}}else{ui.textSelected="Press a key..."}}static keycodeToString(keycode){switch(keycode){case-1:return"None";case 0:return"Unknown";case 1:return"Back";case 3:return"Cancel";case 6:return"Help";case 8:return"Backspace";case 9:return"Tab";case 12:return"Clear";case 13:return"Return";case 16:return"Shift";case 17:return"Ctrl";case 18:return"Alt";case 19:return"Pause";case 20:return"CapsLock";case 21:return"Kana";case 22:return"Eisu";case 23:return"Junja";case 24:return"Final";case 25:return"Hanja";case 27:return"Esc";case 28:return"Convert";case 29:return"NonConvert";case 30:return"Accept";case 31:return"ModeChange";case 32:return"Space";case 33:return"PageUp";case 34:return"PageDown";case 35:return"End";case 36:return"Home";case 37:return"Left";case 38:return"Up";case 39:return"Right";case 40:return"Down";case 41:return"Select";case 42:return"Print";case 43:return"Execute";case 44:return"PrintScreen";case 45:return"Insert";case 46:return"Delete";case 58:return"Colon";case 59:return"Semicolon";case 60:return"LessThan";case 61:return"Equals";case 62:return"GreaterThan";case 63:return"QuestionMark";case 64:return"At";case 91:return"Win";case 93:return"ContextMenu";case 95:return"Sleep";case 96:return"Numpad0";case 97:return"Numpad1";case 98:return"Numpad2";case 99:return"Numpad3";case 100:return"Numpad4";case 101:return"Numpad5";case 102:return"Numpad6";case 103:return"Numpad7";case 104:return"Numpad8";case 105:return"Numpad9";case 106:return"Multiply";case 107:return"Add";case 108:return"Separator";case 109:return"Subtract";case 110:return"Decimal";case 111:return"Divide";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 124:return"F13";case 125:return"F14";case 126:return"F15";case 127:return"F16";case 128:return"F17";case 129:return"F18";case 130:return"F19";case 131:return"F20";case 132:return"F21";case 133:return"F22";case 134:return"F23";case 135:return"F24";case 144:return"NumLock";case 145:return"ScrollLock";case 146:return"WinOemFjJisho";case 147:return"WinOemFjMasshou";case 148:return"WinOemFjTouroku";case 149:return"WinOemFjLoya";case 150:return"WinOemFjRoya";case 160:return"Circumflex";case 161:return"Exclamation";case 162:return"DoubleQuote";case 163:return"Hash";case 164:return"Dollar";case 165:return"Percent";case 166:return"Ampersand";case 167:return"Underscore";case 168:return"OpenParen";case 169:return"CloseParen";case 170:return"Asterisk";case 171:return"Plus";case 172:return"Pipe";case 173:return"HyphenMinus";case 174:return"OpenCurlyBracket";case 175:return"CloseCurlyBracket";case 176:return"Tilde";case 181:return"VolumeMute";case 182:return"VolumeDown";case 183:return"VolumeUp";case 188:return"Comma";case 190:return"Period";case 191:return"Slash";case 192:return"BackQuote";case 219:return"OpenBracket";case 220:return"BackSlash";case 221:return"CloseBracket";case 222:return"Quote";case 224:return"Meta";case 225:return"AltGr";case 227:return"WinIcoHelp";case 228:return"WinIco00";case 230:return"WinIcoClear";case 233:return"WinOemReset";case 234:return"WinOemJump";case 235:return"WinOemPA1";case 236:return"WinOemPA2";case 237:return"WinOemPA3";case 238:return"WinOemWSCTRL";case 239:return"WinOemCUSEL";case 240:return"WinOemATTN";case 241:return"WinOemFinish";case 242:return"WinOemCopy";case 243:return"WinOemAuto";case 244:return"WinOemENLW";case 245:return"WinOemBackTab";case 246:return"ATTN";case 247:return"CRSEL";case 248:return"EXSEL";case 249:return"EREOF";case 250:return"Play";case 251:return"Zoom";case 253:return"PA1";case 254:return"WinOemClear";default:return String.fromCodePoint(keycode)}}}$hxClasses["armory.ui.Ext"]=armory_ui_Ext;armory_ui_Ext.__name__="armory.ui.Ext";class armory_ui_Themes{}$hxClasses["armory.ui.Themes"]=armory_ui_Themes;armory_ui_Themes.__name__="armory.ui.Themes";class haxe_IMap{}$hxClasses["haxe.IMap"]=haxe_IMap;haxe_IMap.__name__="haxe.IMap";haxe_IMap.__isInterface__=true;Object.assign(haxe_IMap.prototype,{__class__:haxe_IMap,set:null,keys:null,clear:null});class haxe_Log{static formatOutput(v,infos){let str=Std.string(v);if(infos==null){return str}let pstr=infos.fileName+":"+infos.lineNumber;if(infos.customParams!=null){let _g=0;let _g1=infos.customParams;while(_g<_g1.length){let v=_g1[_g];++_g;str+=", "+Std.string(v)}}return pstr+": "+str}static trace(v,infos){let str=haxe_Log.formatOutput(v,infos);if(typeof console!="undefined"&&console.log!=null){console.log(str)}}}$hxClasses["haxe.Log"]=haxe_Log;haxe_Log.__name__="haxe.Log";class haxe__$Unserializer_DefaultResolver{constructor(){}resolveClass(name){return $hxClasses[name]}resolveEnum(name){return $hxEnums[name]}}$hxClasses["haxe._Unserializer.DefaultResolver"]=haxe__$Unserializer_DefaultResolver;haxe__$Unserializer_DefaultResolver.__name__="haxe._Unserializer.DefaultResolver";Object.assign(haxe__$Unserializer_DefaultResolver.prototype,{__class__:haxe__$Unserializer_DefaultResolver});class haxe_Unserializer{constructor(buf){this.buf=buf;this.length=this.buf.length;this.pos=0;this.scache=[];this.cache=[];let r=haxe_Unserializer.DEFAULT_RESOLVER;if(r==null){r=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.DEFAULT_RESOLVER=r}this.resolver=r}readDigits(){let k=0;let s=false;let fpos=this.pos;while(true){let c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c==45){if(this.pos!=fpos){break}s=true;this.pos++;continue}if(c<48||c>57){break}k=k*10+(c-48);this.pos++}if(s){k*=-1}return k}readFloat(){let p1=this.pos;while(true){let c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c>=43&&c<58||c==101||c==69){this.pos++}else{break}}return parseFloat(HxOverrides.substr(this.buf,p1,this.pos-p1))}unserializeObject(o){while(true){if(this.pos>=this.length){throw haxe_Exception.thrown("Invalid object")}if(this.buf.charCodeAt(this.pos)==103){break}let k=this.unserialize();if(typeof k!="string"){throw haxe_Exception.thrown("Invalid object key")}let v=this.unserialize();o[k]=v}this.pos++}unserializeEnum(edecl,tag){if(this.buf.charCodeAt(this.pos++)!=58){throw haxe_Exception.thrown("Invalid enum format")}let nargs=this.readDigits();if(nargs==0){return Type.createEnum(edecl,tag)}let args=[];while(nargs-- >0)args.push(this.unserialize());return Type.createEnum(edecl,tag,args)}unserialize(){switch(this.buf.charCodeAt(this.pos++)){case 65:let name=this.unserialize();let cl=this.resolver.resolveClass(name);if(cl==null){throw haxe_Exception.thrown("Class not found "+name)}return cl;case 66:let name1=this.unserialize();let e=this.resolver.resolveEnum(name1);if(e==null){throw haxe_Exception.thrown("Enum not found "+name1)}return e;case 67:let name2=this.unserialize();let cl1=this.resolver.resolveClass(name2);if(cl1==null){throw haxe_Exception.thrown("Class not found "+name2)}let o=Object.create(cl1.prototype);this.cache.push(o);o.hxUnserialize(this);if(this.buf.charCodeAt(this.pos++)!=103){throw haxe_Exception.thrown("Invalid custom data")}return o;case 77:let h=new haxe_ds_ObjectMap;this.cache.push(h);let buf=this.buf;while(this.buf.charCodeAt(this.pos)!=104){let s=this.unserialize();h.set(s,this.unserialize())}this.pos++;return h;case 82:let n=this.readDigits();if(n<0||n>=this.scache.length){throw haxe_Exception.thrown("Invalid string reference")}return this.scache[n];case 97:let buf1=this.buf;let a=[];this.cache.push(a);while(true){let c=this.buf.charCodeAt(this.pos);if(c==104){this.pos++;break}if(c==117){this.pos++;let n=this.readDigits();a[a.length+n-1]=null}else{a.push(this.unserialize())}}return a;case 98:let h1=new haxe_ds_StringMap;this.cache.push(h1);let buf2=this.buf;while(this.buf.charCodeAt(this.pos)!=104){let s=this.unserialize();let value=this.unserialize();h1.h[s]=value}this.pos++;return h1;case 99:let name3=this.unserialize();let cl2=this.resolver.resolveClass(name3);if(cl2==null){throw haxe_Exception.thrown("Class not found "+name3)}let o1=Object.create(cl2.prototype);this.cache.push(o1);this.unserializeObject(o1);return o1;case 100:return this.readFloat();case 102:return false;case 105:return this.readDigits();case 106:let name4=this.unserialize();let edecl=this.resolver.resolveEnum(name4);if(edecl==null){throw haxe_Exception.thrown("Enum not found "+name4)}this.pos++;let index=this.readDigits();let _this=edecl.__constructs__;let result=new Array(_this.length);let _g=0;let _g1=_this.length;while(_g<_g1){let i=_g++;result[i]=_this[i]._hx_name}let tag=result[index];if(tag==null){throw haxe_Exception.thrown("Unknown enum index "+name4+"@"+index)}let e1=this.unserializeEnum(edecl,tag);this.cache.push(e1);return e1;case 107:return NaN;case 108:let l=new haxe_ds_List;this.cache.push(l);let buf3=this.buf;while(this.buf.charCodeAt(this.pos)!=104)l.add(this.unserialize());this.pos++;return l;case 109:return-Infinity;case 110:return null;case 111:let o2={};this.cache.push(o2);this.unserializeObject(o2);return o2;case 112:return Infinity;case 113:let h2=new haxe_ds_IntMap;this.cache.push(h2);let buf4=this.buf;let c=this.buf.charCodeAt(this.pos++);while(c==58){let i=this.readDigits();let value=this.unserialize();h2.h[i]=value;c=this.buf.charCodeAt(this.pos++)}if(c!=104){throw haxe_Exception.thrown("Invalid IntMap format")}return h2;case 114:let n1=this.readDigits();if(n1<0||n1>=this.cache.length){throw haxe_Exception.thrown("Invalid reference")}return this.cache[n1];case 115:let len=this.readDigits();let buf5=this.buf;if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len){throw haxe_Exception.thrown("Invalid bytes length")}let codes=haxe_Unserializer.CODES;if(codes==null){codes=haxe_Unserializer.initCodes();haxe_Unserializer.CODES=codes}let i=this.pos;let rest=len&3;let size=(len>>2)*3+(rest>=2?rest-1:0);let max=i+(len-rest);let bytes=new haxe_io_Bytes(new ArrayBuffer(size));let bpos=0;while(i<max){let c1=codes[buf5.charCodeAt(i++)];let c2=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c1<<2|c2>>4;let c3=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c2<<4|c3>>2;let c4=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c3<<6|c4}if(rest>=2){let c1=codes[buf5.charCodeAt(i++)];let c2=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c1<<2|c2>>4;if(rest==3){let c3=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c2<<4|c3>>2}}this.pos+=len;this.cache.push(bytes);return bytes;case 116:return true;case 118:let d;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&this.buf.charCodeAt(this.pos+4)==45){d=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));this.pos+=19}else{d=new Date(this.readFloat())}this.cache.push(d);return d;case 119:let name5=this.unserialize();let edecl1=this.resolver.resolveEnum(name5);if(edecl1==null){throw haxe_Exception.thrown("Enum not found "+name5)}let e2=this.unserializeEnum(edecl1,this.unserialize());this.cache.push(e2);return e2;case 120:throw haxe_Exception.thrown(this.unserialize());case 121:let len1=this.readDigits();if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len1){throw haxe_Exception.thrown("Invalid string length")}let s=HxOverrides.substr(this.buf,this.pos,len1);this.pos+=len1;s=decodeURIComponent(s.split("+").join(" "));this.scache.push(s);return s;case 122:return 0;default:}this.pos--;throw haxe_Exception.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)}static initCodes(){let codes=[];let _g=0;let _g1=haxe_Unserializer.BASE64.length;while(_g<_g1){let i=_g++;codes[haxe_Unserializer.BASE64.charCodeAt(i)]=i}return codes}static run(v){return new haxe_Unserializer(v).unserialize()}}$hxClasses["haxe.Unserializer"]=haxe_Unserializer;haxe_Unserializer.__name__="haxe.Unserializer";Object.assign(haxe_Unserializer.prototype,{__class__:haxe_Unserializer,buf:null,pos:null,length:null,cache:null,scache:null,resolver:null});class haxe_ValueException extends haxe_Exception{constructor(value,previous,native){super(String(value),previous,native);this.value=value}unwrap(){return this.value}}$hxClasses["haxe.ValueException"]=haxe_ValueException;haxe_ValueException.__name__="haxe.ValueException";haxe_ValueException.__super__=haxe_Exception;Object.assign(haxe_ValueException.prototype,{__class__:haxe_ValueException,value:null});class haxe_ds_IntMap{constructor(){this.h={}}set(key,value){this.h[key]=value}keys(){let a=[];for(var key in this.h)if(this.h.hasOwnProperty(key))a.push(+key);return new haxe_iterators_ArrayIterator(a)}clear(){this.h={}}}$hxClasses["haxe.ds.IntMap"]=haxe_ds_IntMap;haxe_ds_IntMap.__name__="haxe.ds.IntMap";haxe_ds_IntMap.__interfaces__=[haxe_IMap];Object.assign(haxe_ds_IntMap.prototype,{__class__:haxe_ds_IntMap,h:null});class haxe_ds_List{constructor(){this.length=0}add(item){let x=new haxe_ds__$List_ListNode(item,null);if(this.h==null){this.h=x}else{this.q.next=x}this.q=x;this.length++}}$hxClasses["haxe.ds.List"]=haxe_ds_List;haxe_ds_List.__name__="haxe.ds.List";Object.assign(haxe_ds_List.prototype,{__class__:haxe_ds_List,h:null,q:null,length:null});class haxe_ds__$List_ListNode{constructor(item,next){this.item=item;this.next=next}}$hxClasses["haxe.ds._List.ListNode"]=haxe_ds__$List_ListNode;haxe_ds__$List_ListNode.__name__="haxe.ds._List.ListNode";Object.assign(haxe_ds__$List_ListNode.prototype,{__class__:haxe_ds__$List_ListNode,item:null,next:null});class haxe_ds_ObjectMap{constructor(){this.h={__keys__:{}}}set(key,value){let id=key.__id__;if(id==null){id=key.__id__=$global.$haxeUID++}this.h[id]=value;this.h.__keys__[id]=key}keys(){let a=[];for(var key in this.h.__keys__){if(this.h.hasOwnProperty(key)){a.push(this.h.__keys__[key])}}return new haxe_iterators_ArrayIterator(a)}clear(){this.h={__keys__:{}}}}$hxClasses["haxe.ds.ObjectMap"]=haxe_ds_ObjectMap;haxe_ds_ObjectMap.__name__="haxe.ds.ObjectMap";haxe_ds_ObjectMap.__interfaces__=[haxe_IMap];Object.assign(haxe_ds_ObjectMap.prototype,{__class__:haxe_ds_ObjectMap,h:null});class haxe_ds_StringMap{constructor(){this.h=Object.create(null)}set(key,value){this.h[key]=value}keys(){return new haxe_ds__$StringMap_StringMapKeyIterator(this.h)}clear(){this.h=Object.create(null)}}$hxClasses["haxe.ds.StringMap"]=haxe_ds_StringMap;haxe_ds_StringMap.__name__="haxe.ds.StringMap";haxe_ds_StringMap.__interfaces__=[haxe_IMap];Object.assign(haxe_ds_StringMap.prototype,{__class__:haxe_ds_StringMap,h:null});class haxe_ds__$StringMap_StringMapKeyIterator{constructor(h){this.h=h;this.keys=Object.keys(h);this.length=this.keys.length;this.current=0}hasNext(){return this.current<this.length}next(){return this.keys[this.current++]}}$hxClasses["haxe.ds._StringMap.StringMapKeyIterator"]=haxe_ds__$StringMap_StringMapKeyIterator;haxe_ds__$StringMap_StringMapKeyIterator.__name__="haxe.ds._StringMap.StringMapKeyIterator";Object.assign(haxe_ds__$StringMap_StringMapKeyIterator.prototype,{__class__:haxe_ds__$StringMap_StringMapKeyIterator,h:null,keys:null,length:null,current:null});class haxe_exceptions_NotImplementedException extends haxe_exceptions_PosException{constructor(message,previous,pos){if(message==null){message="Not implemented"}super(message,previous,pos)}}$hxClasses["haxe.exceptions.NotImplementedException"]=haxe_exceptions_NotImplementedException;haxe_exceptions_NotImplementedException.__name__="haxe.exceptions.NotImplementedException";haxe_exceptions_NotImplementedException.__super__=haxe_exceptions_PosException;Object.assign(haxe_exceptions_NotImplementedException.prototype,{__class__:haxe_exceptions_NotImplementedException});class haxe_io_Bytes{constructor(data){this.length=data.byteLength;this.b=new Uint8Array(data);this.b.bufferValue=data;data.hxBytes=this;data.bytes=this.b}sub(pos,len){if(pos<0||len<0||pos+len>this.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}return new haxe_io_Bytes(this.b.buffer.slice(pos+this.b.byteOffset,pos+this.b.byteOffset+len))}getFloat(pos){if(this.data==null){this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)}return this.data.getFloat32(pos,true)}getString(pos,len,encoding){if(pos<0||len<0||pos+len>this.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(encoding==null){encoding=haxe_io_Encoding.UTF8}let s="";let b=this.b;let i=pos;let max=pos+len;switch(encoding._hx_index){case 0:let debug=pos>0;while(i<max){let c=b[i++];if(c<128){if(c==0){break}s+=String.fromCodePoint(c)}else if(c<224){let code=(c&63)<<6|b[i++]&127;s+=String.fromCodePoint(code)}else if(c<240){let c2=b[i++];let code=(c&31)<<12|(c2&127)<<6|b[i++]&127;s+=String.fromCodePoint(code)}else{let c2=b[i++];let c3=b[i++];let u=(c&15)<<18|(c2&127)<<12|(c3&127)<<6|b[i++]&127;s+=String.fromCodePoint(u)}}break;case 1:while(i<max){let c=b[i++]|b[i++]<<8;s+=String.fromCodePoint(c)}break}return s}toString(){return this.getString(0,this.length)}static ofData(b){let hb=b.hxBytes;if(hb!=null){return hb}return new haxe_io_Bytes(b)}}$hxClasses["haxe.io.Bytes"]=haxe_io_Bytes;haxe_io_Bytes.__name__="haxe.io.Bytes";Object.assign(haxe_io_Bytes.prototype,{__class__:haxe_io_Bytes,length:null,b:null,data:null});class haxe_io_Input{readByte(){throw new haxe_exceptions_NotImplementedException(null,null,{fileName:"haxe/io/Input.hx",lineNumber:53,className:"haxe.io.Input",methodName:"readByte"})}readBytes(s,pos,len){let k=len;let b=s.b;if(pos<0||len<0||pos+len>s.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}try{while(k>0){b[pos]=this.readByte();++pos;--k}}catch(_g){if(!(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof)){throw _g}}return len-k}set_bigEndian(b){this.bigEndian=b;return b}readFullBytes(s,pos,len){while(len>0){let k=this.readBytes(s,pos,len);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}pos+=k;len-=k}}read(nbytes){let s=new haxe_io_Bytes(new ArrayBuffer(nbytes));let p=0;while(nbytes>0){let k=this.readBytes(s,p,nbytes);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}p+=k;nbytes-=k}return s}readFloat(){return haxe_io_FPHelper.i32ToFloat(this.readInt32())}readInt8(){let n=this.readByte();if(n>=128){return n-256}return n}readInt16(){let ch1=this.readByte();let ch2=this.readByte();let n=this.bigEndian?ch2|ch1<<8:ch1|ch2<<8;if((n&32768)!=0){return n-65536}return n}readUInt16(){let ch1=this.readByte();let ch2=this.readByte();if(this.bigEndian){return ch2|ch1<<8}else{return ch1|ch2<<8}}readInt32(){let ch1=this.readByte();let ch2=this.readByte();let ch3=this.readByte();let ch4=this.readByte();if(this.bigEndian){return ch4|ch3<<8|ch2<<16|ch1<<24}else{return ch1|ch2<<8|ch3<<16|ch4<<24}}readString(len,encoding){let b=new haxe_io_Bytes(new ArrayBuffer(len));this.readFullBytes(b,0,len);return b.getString(0,len,encoding)}}$hxClasses["haxe.io.Input"]=haxe_io_Input;haxe_io_Input.__name__="haxe.io.Input";Object.assign(haxe_io_Input.prototype,{__class__:haxe_io_Input,bigEndian:null,__properties__:{set_bigEndian:"set_bigEndian"}});class haxe_io_BytesInput extends haxe_io_Input{constructor(b,pos,len){super();if(pos==null){pos=0}if(len==null){len=b.length-pos}if(pos<0||len<0||pos+len>b.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}this.b=b.b;this.pos=pos;this.len=len;this.totlen=len}set_position(p){if(p<0){p=0}else if(p>this.totlen){p=this.totlen}this.len=this.totlen-p;return this.pos=p}readByte(){if(this.len==0){throw haxe_Exception.thrown(new haxe_io_Eof)}this.len--;return this.b[this.pos++]}readBytes(buf,pos,len){if(pos<0||len<0||pos+len>buf.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(this.len==0&&len>0){throw haxe_Exception.thrown(new haxe_io_Eof)}if(this.len<len){len=this.len}let b1=this.b;let b2=buf.b;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;b2[pos+i]=b1[this.pos+i]}this.pos+=len;this.len-=len;return len}}$hxClasses["haxe.io.BytesInput"]=haxe_io_BytesInput;haxe_io_BytesInput.__name__="haxe.io.BytesInput";haxe_io_BytesInput.__super__=haxe_io_Input;Object.assign(haxe_io_BytesInput.prototype,{__class__:haxe_io_BytesInput,b:null,pos:null,len:null,totlen:null,__properties__:Object.assign({},haxe_io_Input.prototype.__properties__,{set_position:"set_position"})});var haxe_io_Encoding=$hxEnums["haxe.io.Encoding"]={__ename__:true,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}};haxe_io_Encoding.__constructs__=[haxe_io_Encoding.UTF8,haxe_io_Encoding.RawNative];class haxe_io_Eof{constructor(){}toString(){return"Eof"}}$hxClasses["haxe.io.Eof"]=haxe_io_Eof;haxe_io_Eof.__name__="haxe.io.Eof";Object.assign(haxe_io_Eof.prototype,{__class__:haxe_io_Eof});var haxe_io_Error=$hxEnums["haxe.io.Error"]={__ename__:true,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:($_=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}},$_._hx_name="Custom",$_.__params__=["e"],$_)};haxe_io_Error.__constructs__=[haxe_io_Error.Blocked,haxe_io_Error.Overflow,haxe_io_Error.OutsideBounds,haxe_io_Error.Custom];class haxe_io_FPHelper{static i32ToFloat(i){haxe_io_FPHelper.helper.setInt32(0,i,true);return haxe_io_FPHelper.helper.getFloat32(0,true)}}$hxClasses["haxe.io.FPHelper"]=haxe_io_FPHelper;haxe_io_FPHelper.__name__="haxe.io.FPHelper";class haxe_iterators_ArrayIterator{constructor(array){this.current=0;this.array=array}hasNext(){return this.current<this.array.length}next(){return this.array[this.current++]}}$hxClasses["haxe.iterators.ArrayIterator"]=haxe_iterators_ArrayIterator;haxe_iterators_ArrayIterator.__name__="haxe.iterators.ArrayIterator";Object.assign(haxe_iterators_ArrayIterator.prototype,{__class__:haxe_iterators_ArrayIterator,array:null,current:null});class haxe_rtti_Meta{static getType(t){let meta=haxe_rtti_Meta.getMeta(t);if(meta==null||meta.obj==null){return{}}else{return meta.obj}}static getMeta(t){return t.__meta__}}$hxClasses["haxe.rtti.Meta"]=haxe_rtti_Meta;haxe_rtti_Meta.__name__="haxe.rtti.Meta";class iron_App{constructor(done){done();kha_System.notifyOnFrames(iron_App.render);kha_Scheduler.addTimeTask(iron_App.update,0,iron_system_Time.get_step())}static w(){return kha_System.windowWidth()}static h(){return kha_System.windowHeight()}static x(){return 0}static y(){return 0}static init(done){new iron_App(done)}static update(){if(iron_Scene.active==null||!iron_Scene.active.ready){return}iron_system_Time.update();if(iron_App.lastw==-1){iron_App.lastw=iron_App.w();iron_App.lasth=iron_App.h()}if(iron_App.lastw!=iron_App.w()||iron_App.lasth!=iron_App.h()){if(iron_App.onResize!=null){iron_App.onResize()}else if(iron_Scene.active!=null&&iron_Scene.active.camera!=null){iron_Scene.active.camera.buildProjection()}}iron_App.lastw=iron_App.w();iron_App.lasth=iron_App.h();if(iron_App.pauseUpdates){return}iron_Scene.active.updateFrame();iron_App.time+=iron_system_Time.get_delta();while(iron_App.time>=iron_system_Time.get_fixedStep()){let _g=0;let _g1=iron_App.traitFixedUpdates;while(_g<_g1.length){let f=_g1[_g];++_g;f()}iron_App.time-=iron_system_Time.get_fixedStep()}let i=0;let l=iron_App.traitUpdates.length;while(i<l){if(iron_App.traitInits.length>0){let _g=0;let _g1=iron_App.traitInits;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitInits.length>0){f()}else{break}}iron_App.traitInits.splice(0,iron_App.traitInits.length)}iron_App.traitUpdates[i]();if(l<=iron_App.traitUpdates.length){++i}else{l=iron_App.traitUpdates.length}}i=0;l=iron_App.traitLateUpdates.length;while(i<l){iron_App.traitLateUpdates[i]();if(l<=iron_App.traitLateUpdates.length){++i}else{l=iron_App.traitLateUpdates.length}}if(iron_App.onEndFrames!=null){let _g=0;let _g1=iron_App.onEndFrames;while(_g<_g1.length){let f=_g1[_g];++_g;f()}}}static render(frames){let frame=frames[0];iron_App.framebuffer=frame;iron_system_Time.render();if(iron_Scene.active==null||!iron_Scene.active.ready){iron_App.render2D(frame);return}if(iron_App.traitInits.length>0){let _g=0;let _g1=iron_App.traitInits;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitInits.length>0){f()}else{break}}iron_App.traitInits.splice(0,iron_App.traitInits.length)}iron_Scene.active.renderFrame(frame.get_g4());let _g=0;let _g1=iron_App.traitRenders;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitRenders.length>0){f(frame.get_g4())}else{break}}iron_App.render2D(frame)}static render2D(frame){if(iron_App.traitRenders2D.length>0){frame.get_g2().begin(false);let _g=0;let _g1=iron_App.traitRenders2D;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitRenders2D.length>0){f(frame.get_g2())}else{break}}frame.get_g2().end()}}static notifyOnInit(f){iron_App.traitInits.push(f)}static removeInit(f){HxOverrides.remove(iron_App.traitInits,f)}static notifyOnUpdate(f){iron_App.traitUpdates.push(f)}static removeUpdate(f){HxOverrides.remove(iron_App.traitUpdates,f)}static removeLateUpdate(f){HxOverrides.remove(iron_App.traitLateUpdates,f)}static removeFixedUpdate(f){HxOverrides.remove(iron_App.traitFixedUpdates,f)}static removeRender(f){HxOverrides.remove(iron_App.traitRenders,f)}static notifyOnRender2D(f){iron_App.traitRenders2D.push(f)}static removeRender2D(f){HxOverrides.remove(iron_App.traitRenders2D,f)}static notifyOnReset(f){if(iron_App.onResets==null){iron_App.onResets=[]}iron_App.onResets.push(f)}static notifyOnEndFrame(f){if(iron_App.onEndFrames==null){iron_App.onEndFrames=[]}iron_App.onEndFrames.push(f)}}$hxClasses["iron.App"]=iron_App;iron_App.__name__="iron.App";Object.assign(iron_App.prototype,{__class__:iron_App});class iron_RenderPath{constructor(){this.loading=0;this.lastFrameTime=0;this.viewportScaled=false;this.scissorSet=false;this.lastH=0;this.lastW=0;this.depthToRenderTarget=new haxe_ds_StringMap;this.renderTargets=new haxe_ds_StringMap;this.setupDepthTexture=null;this.commands=null;this.paused=false;this.drawOrder=0;this.currentG=null;this.isProbe=false;this.isProbeCube=false;this.isProbePlanar=false;this.point=null;this.sun=null;this.light=null;this.currentTarget=null;this.frame=0;this.frameTime=0;this.frameScissorH=0;this.frameScissorW=0;this.frameScissorY=0;this.frameScissorX=0;this.frameScissor=false}get_ready(){return this.loading==0}renderFrame(g){if(!this.get_ready()||this.paused||iron_App.w()==0||iron_App.h()==0){return}if(this.lastW>0&&(this.lastW!=iron_App.w()||this.lastH!=iron_App.h())){this.resize()}this.lastW=iron_App.w();this.lastH=iron_App.h();this.frameTime=kha_Scheduler.time()-this.lastFrameTime;this.lastFrameTime=kha_Scheduler.time();let cam=iron_Scene.active.camera;this.isProbePlanar=cam!=null&&cam.renderTarget!=null;this.isProbeCube=cam!=null&&cam.renderTargetCube!=null;this.isProbe=this.isProbePlanar||this.isProbeCube;if(this.isProbePlanar){this.frameG=cam.renderTarget.get_g4()}else if(this.isProbeCube){this.frameG=cam.renderTargetCube.get_g4()}else{this.frameG=g}this.currentW=iron_App.w();this.currentH=iron_App.h();this.currentD=1;this.currentFace=-1;this.meshesSorted=false;let _g=0;let _g1=iron_Scene.active.lights;while(_g<_g1.length){let l=_g1[_g];++_g;if(l.visible){l.buildMatrix(iron_Scene.active.camera)}if(l.data.raw.type=="sun"){this.sun=l}else{this.point=l}}this.light=iron_Scene.active.lights[0];this.commands();if(!this.isProbe){this.frame++}}setTarget(target,additional,viewportScale){if(viewportScale==null){viewportScale=1}if(target==""){this.currentD=1;this.currentTarget=null;this.currentFace=-1;if(this.isProbeCube){this.currentW=iron_Scene.active.camera.renderTargetCube.get_width();this.currentH=iron_Scene.active.camera.renderTargetCube.get_height();let g=this.frameG;let additionalRenderTargets=null;let face=iron_Scene.active.camera.currentFace;if(face==null){face=-1}if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=g;this.additionalTargets=additionalRenderTargets;if(face>=0){g.beginFace(face)}else{g.begin(additionalRenderTargets)}}else{this.currentW=iron_App.w();this.currentH=iron_App.h();if(this.frameScissor){this.setFrameScissor()}let g=this.frameG;let additionalRenderTargets=null;if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=g;this.additionalTargets=additionalRenderTargets;g.begin(additionalRenderTargets);if(!this.isProbe){this.setCurrentViewport(iron_App.w(),iron_App.h());this.setCurrentScissor(iron_App.w(),iron_App.h())}}}else{let rt=this.renderTargets.h[target];this.currentTarget=rt;let additionalImages=null;if(additional!=null){additionalImages=[];let _g=0;while(_g<additional.length){let s=additional[_g];++_g;let t=this.renderTargets.h[s];additionalImages.push(t.image)}}let targetG=rt.isCubeMap?rt.cubeMap.get_g4():rt.image.get_g4();this.currentW=rt.isCubeMap?rt.cubeMap.get_width():rt.image.get_width();this.currentH=rt.isCubeMap?rt.cubeMap.get_height():rt.image.get_height();if(rt.is3D){this.currentD=rt.image.get_depth()}let face=this.currentFace;if(face==null){face=-1}if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=targetG;this.additionalTargets=additionalImages;if(face>=0){targetG.beginFace(face)}else{targetG.begin(additionalImages)}}if(viewportScale!=1){this.viewportScaled=true;let viewW=this.currentW*viewportScale|0;let viewH=this.currentH*viewportScale|0;this.currentG.viewport(0,viewH,viewW,viewH);this.currentG.scissor(0,viewH,viewW,viewH)}else if(this.viewportScaled){this.viewportScaled=false;this.setCurrentViewport(this.currentW,this.currentH);this.setCurrentScissor(this.currentW,this.currentH)}this.bindParams=null}setCurrentViewport(viewW,viewH){this.currentG.viewport(iron_App.x(),this.currentH-(viewH-iron_App.y()),viewW,viewH)}setCurrentScissor(viewW,viewH){this.currentG.scissor(iron_App.x(),this.currentH-(viewH-iron_App.y()),viewW,viewH);this.scissorSet=true}setFrameScissor(){this.frameG.scissor(this.frameScissorX,this.currentH-(this.frameScissorH-this.frameScissorY),this.frameScissorW,this.frameScissorH)}clearTarget(colorFlag,depthFlag){if(colorFlag==-1){if(iron_Scene.active.world!=null){colorFlag=iron_Scene.active.world.raw.background_color}else if(iron_Scene.active.camera!=null){let cc=iron_Scene.active.camera.data.raw.clear_color;if(cc!=null){colorFlag=kha_Color.fromFloats(cc.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),cc.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),cc.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN))}}}this.currentG.clear(colorFlag,depthFlag,null)}drawMeshes(context){let isShadows=context=="shadowmap";if(isShadows){if(this.light==null||!this.light.data.raw.cast_shadow||!this.light.visible||this.light.data.raw.strength==0){return}}if(this.currentFace>=0&&this.light!=null){this.light.setCubeFace(this.currentFace,iron_Scene.active.camera)}let drawn=false;if(!drawn){this.submitDraw(context)}if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}submitDraw(context){let camera=iron_Scene.active.camera;let meshes=iron_Scene.active.meshes;iron_object_MeshObject.lastPipeline=null;if(!this.meshesSorted&&camera!=null){let camX=camera.transform.world.self._30;let camY=camera.transform.world.self._31;let camZ=camera.transform.world.self._32;let _g=0;while(_g<meshes.length){let mesh=meshes[_g];++_g;let vx=camX-mesh.transform.world.self._30;let vy=camY-mesh.transform.world.self._31;let vz=camZ-mesh.transform.world.self._32;mesh.cameraDistance=Math.sqrt(vx*vx+vy*vy+vz*vz)}if(this.drawOrder==1){iron_RenderPath.sortMeshesIndex(meshes)}else{iron_RenderPath.sortMeshesDistance(meshes)}this.meshesSorted=true}let g=this.currentG;let _bindParams=this.bindParams;let _g=0;while(_g<meshes.length){let m=meshes[_g];++_g;m.render(g,context,_bindParams)}}bindTarget(target,uniform){if(this.bindParams!=null){this.bindParams.push(target);this.bindParams.push(uniform)}else{this.bindParams=[target,uniform]}}resize(){if(kha_System.windowWidth()==0||kha_System.windowHeight()==0){return}let h=this.renderTargets.h;let rt_h=h;let rt_keys=Object.keys(h);let rt_length=rt_keys.length;let rt_current=0;while(rt_current<rt_length){let rt=rt_h[rt_keys[rt_current++]];if(rt==null||rt.raw.width>0||rt.depthStencilFrom==""||rt==this.depthToRenderTarget.h[rt.depthStencilFrom]){continue}let nodepth=null;let h=this.renderTargets.h;let rt2_h=h;let rt2_keys=Object.keys(h);let rt2_length=rt2_keys.length;let rt2_current=0;while(rt2_current<rt2_length){let rt2=rt2_h[rt2_keys[rt2_current++]];if(rt2==null||rt2.raw.width>0||rt2.depthStencilFrom!=""||this.depthToRenderTarget.h[rt2.raw.depth_buffer]!=null||rt2.raw.is_image==true){continue}nodepth=rt2;break}if(nodepth!=null){rt.image.setDepthStencilFrom(nodepth.image)}}let h1=this.renderTargets.h;let rt_h1=h1;let rt_keys1=Object.keys(h1);let rt_length1=rt_keys1.length;let rt_current1=0;while(rt_current1<rt_length1){let rt=rt_h1[rt_keys1[rt_current1++]];if(rt!=null&&rt.raw.width==0){iron_App.notifyOnInit(($_=rt.image,$bind($_,$_.unload)));rt.image=this.createImage(rt.raw,rt.depthStencil)}}let h2=this.renderTargets.h;let rt_h2=h2;let rt_keys2=Object.keys(h2);let rt_length2=rt_keys2.length;let rt_current2=0;while(rt_current2<rt_length2){let rt=rt_h2[rt_keys2[rt_current2++]];if(rt!=null&&rt.depthStencilFrom!=""){rt.image.setDepthStencilFrom(this.depthToRenderTarget.h[rt.depthStencilFrom].image)}}}createImage(t,depthStencil){let width=t.width==0?iron_App.w():t.width;let height=t.height==0?iron_App.h():t.height;let depth=t.depth!=null?t.depth:0;if(t.displayp!=null){if(width>height){width=width*(t.displayp/height)|0;height=t.displayp}else{height=height*(t.displayp/width)|0;width=t.displayp}}if(t.scale!=null){width=width*t.scale|0;height=height*t.scale|0;depth=depth*t.scale|0}if(width<1){width=1}if(height<1){height=1}if(t.depth!=null&&t.depth>1){let img;if(t.format!=null){switch(t.format){case"DEPTH16":img=3;break;case"R16":img=6;break;case"R32":img=5;break;case"R8":img=1;break;case"RGBA128":img=2;break;case"RGBA32":img=0;break;case"RGBA64":img=4;break;default:img=0}}else{img=0}let img1=kha_Image.create3D(width,height,depth,img);if(t.mipmaps){img1.generateMipmaps(1e3)}return img1}else if(t.is_image!=null&&t.is_image){let img;if(t.format!=null){switch(t.format){case"DEPTH16":img=3;break;case"R16":img=6;break;case"R32":img=5;break;case"R8":img=1;break;case"RGBA128":img=2;break;case"RGBA32":img=0;break;case"RGBA64":img=4;break;default:img=0}}else{img=0}let img1=kha_Image.create(width,height,img);if(t.mipmaps){img1.generateMipmaps(1e3)}return img1}else{let tmp;if(t.format!=null){switch(t.format){case"DEPTH16":tmp=3;break;case"R16":tmp=6;break;case"R32":tmp=5;break;case"R8":tmp=1;break;case"RGBA128":tmp=2;break;case"RGBA32":tmp=0;break;case"RGBA64":tmp=4;break;default:tmp=0}}else{tmp=0}return kha_Image.createRenderTarget(width,height,tmp,depthStencil)}}static setActive(renderPath){iron_RenderPath.active=renderPath}static sortMeshesDistance(meshes){meshes.sort(function(a,b){if(a.cameraDistance>=b.cameraDistance){return 1}else{return-1}})}static sortMeshesIndex(meshes){meshes.sort(function(a,b){if(a.data.sortingIndex!=b.data.sortingIndex){if(a.data.sortingIndex>b.data.sortingIndex){return 1}else{return-1}}if(a.data.name>=b.data.name){return 1}else{return-1}})}}$hxClasses["iron.RenderPath"]=iron_RenderPath;iron_RenderPath.__name__="iron.RenderPath";Object.assign(iron_RenderPath.prototype,{__class__:iron_RenderPath,frameScissor:null,frameScissorX:null,frameScissorY:null,frameScissorW:null,frameScissorH:null,frameTime:null,frame:null,currentTarget:null,currentFace:null,light:null,sun:null,point:null,isProbePlanar:null,isProbeCube:null,isProbe:null,currentG:null,frameG:null,drawOrder:null,paused:null,ready:null,commands:null,setupDepthTexture:null,renderTargets:null,depthToRenderTarget:null,currentW:null,currentH:null,currentD:null,lastW:null,lastH:null,bindParams:null,meshesSorted:null,scissorSet:null,viewportScaled:null,lastFrameTime:null,loading:null,additionalTargets:null,__properties__:{get_ready:"get_ready"}});class iron_RenderTargetRaw{constructor(){this.is_image=null;this.depth=null;this.mipmaps=null;this.depth_buffer=null;this.displayp=null;this.scale=null;this.format=null}}$hxClasses["iron.RenderTargetRaw"]=iron_RenderTargetRaw;iron_RenderTargetRaw.__name__="iron.RenderTargetRaw";Object.assign(iron_RenderTargetRaw.prototype,{__class__:iron_RenderTargetRaw,name:null,width:null,height:null,format:null,scale:null,displayp:null,depth_buffer:null,mipmaps:null,depth:null,is_image:null});class iron_RenderTarget{constructor(raw){this.isCubeMap=false;this.is3D=false;this.cubeMap=null;this.image=null;this.depthStencilFrom="";this.raw=raw}}$hxClasses["iron.RenderTarget"]=iron_RenderTarget;iron_RenderTarget.__name__="iron.RenderTarget";Object.assign(iron_RenderTarget.prototype,{__class__:iron_RenderTarget,raw:null,depthStencil:null,depthStencilFrom:null,image:null,cubeMap:null,is3D:null,isCubeMap:null});class iron_Scene{constructor(){this.traitRemoves=[];this.traitInits=[];this.groups=null;this.uid=iron_Scene.uidCounter++;this.meshes=[];this.lights=[];this.cameras=[];this.empties=[];this.animations=[];this.tilesheets=[];this.armatures=[];this.embedded=new haxe_ds_StringMap;this.root=new iron_object_Object;this.root.name="Root";this.traitInits=[];this.traitRemoves=[];this.initializing=true;if(iron_Scene.global==null){iron_Scene.global=new iron_object_Object}}remove(){let _g=0;let _g1=this.traitRemoves;while(_g<_g1.length){let f=_g1[_g];++_g;f()}let _g2=0;let _g3=this.meshes;while(_g2<_g3.length){let o=_g3[_g2];++_g2;o.remove()}let _g4=0;let _g5=this.lights;while(_g4<_g5.length){let o=_g5[_g4];++_g4;o.remove()}let _g6=0;let _g7=this.cameras;while(_g6<_g7.length){let o=_g7[_g6];++_g6;o.remove()}let _g8=0;let _g9=this.empties;while(_g8<_g9.length){let o=_g9[_g8];++_g8;o.remove()}this.groups=null;this.root.remove()}updateFrame(){if(!this.ready){return}let _g=0;let _g1=this.animations;while(_g<_g1.length){let anim=_g1[_g];++_g;anim.update(iron_system_Time.get_delta())}let _g2=0;let _g3=this.empties;while(_g2<_g3.length){let e=_g3[_g2];++_g2;if(e!=null&&e.parent!=null){e.transform.update()}}}renderFrame(g){if(!this.ready||iron_RenderPath.active==null){return}iron_Scene.framePassed=true;let _g=0;let _g1=this.tilesheets;while(_g<_g1.length){let tilesheet=_g1[_g];++_g;tilesheet.update()}if(this.camera!=null){this.camera.renderFrame(g)}else{iron_RenderPath.active.renderFrame(g)}}addObject(parent){let object=new iron_object_Object;if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}getChild(name){return this.root.getChild(name)}getTrait(c){if(this.root.children.length>0){return this.root.children[0].getTrait(c)}else{return null}}getCamera(name){let _g=0;let _g1=this.cameras;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.name==name){return c}}return null}addMeshObject(data,materials,parent){let object=new iron_object_MeshObject(data,materials);if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}addLightObject(data,parent){let object=new iron_object_LightObject(data);if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}addCameraObject(data,parent){let object=new iron_object_CameraObject(data);if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}addScene(sceneName,parent,done){if(parent==null){parent=this.addObject();parent.name=sceneName}let _gthis=this;iron_data_Data.getSceneRaw(sceneName,function(format){_gthis.loadEmbeddedData(format.embedded_datas,function(){let objectsTraversed=0;let objectsCount=_gthis.getObjectsCount(format.objects);let traverseObjects=null;traverseObjects=function(parent,objects,parentObject,done){if(objects==null){return}let _g=0;let _g1=objects.length;while(_g<_g1){let i=_g++;let o=objects[i];if(o.spawn!=null&&o.spawn==false){if((objectsTraversed+=1)==objectsCount){done()}continue}_gthis.createObject(o,format,parent,parentObject,function(object){traverseObjects(object,o.children,o,done);if((objectsTraversed+=1)==objectsCount){done()}})}};if(format.objects==null||format.objects.length==0){iron_Scene.createTraits(format.traits,parent);done(parent)}else{traverseObjects(parent,format.objects,null,function(){iron_Scene.createTraits(format.traits,parent);done(parent)})}})})}getObjectsCount(objects,discardNoSpawn){if(discardNoSpawn==null){discardNoSpawn=true}if(objects==null){return 0}let result=objects.length;let _g=0;while(_g<objects.length){let o=objects[_g];++_g;if(discardNoSpawn&&o.spawn!=null&&o.spawn==false){continue}if(o.children!=null){result+=this.getObjectsCount(o.children)}}return result}spawnObject(name,parent,done,spawnChildren,srcRaw){if(spawnChildren==null){spawnChildren=true}if(srcRaw==null){srcRaw=this.raw}let objectsTraversed=0;let obj=iron_Scene.getRawObjectByName(srcRaw,name);let objectsCount=spawnChildren?this.getObjectsCount([obj],false):1;let rootId=-1;let spawnObjectTree=null;let _gthis=this;spawnObjectTree=function(obj,parent,parentObject,done){_gthis.createObject(obj,srcRaw,parent,parentObject,function(object){if(rootId==-1){rootId=object.uid}if(spawnChildren&&obj.children!=null){let _g=0;let _g1=obj.children;while(_g<_g1.length){let child=_g1[_g];++_g;spawnObjectTree(child,object,obj,done)}}if((objectsTraversed+=1)==objectsCount&&done!=null){while(object.uid!=rootId)object=object.parent;done(object)}})};spawnObjectTree(obj,parent,null,done)}createObject(o,format,parent,parentObject,done){let sceneName=format.name;let _gthis=this;if(o.type=="camera_object"){iron_data_Data.getCamera(sceneName,o.data_ref,function(b){let object=_gthis.addCameraObject(b,parent);_gthis.returnObject(object,o,done)})}else if(o.type=="light_object"){iron_data_Data.getLight(sceneName,o.data_ref,function(b){let object=_gthis.addLightObject(b,parent);_gthis.returnObject(object,o,done)})}else if(o.type=="mesh_object"){if(o.material_refs==null||o.material_refs.length==0){this.createMeshObject(o,format,parent,parentObject,null,done)}else{let this1=new Array(o.material_refs.length);let materials=this1;let materialsLoaded=0;let _g=0;let _g1=o.material_refs.length;while(_g<_g1){let i=_g++;let ref=o.material_refs[i];iron_data_Data.getMaterial(sceneName,ref,function(mat){materials[i]=mat;materialsLoaded+=1;if(materialsLoaded==o.material_refs.length){_gthis.createMeshObject(o,format,parent,parentObject,materials,done)}})}}}else if(o.type=="object"){let object=this.addObject(parent);this.returnObject(object,o,function(ro){if(o.group_ref!=null){_gthis.spawnGroup(format,o.group_ref,ro,function(){done(ro)},function(){done(ro)})}else{done(ro)}})}else{done(null)}}spawnGroup(format,groupRef,groupOwner,done,failed){let spawned=0;let object_refs=this.getGroupObjectRefs(groupRef,format);let _gthis=this;if(object_refs==null){haxe_Log.trace('Failed to spawn group "'+groupRef+"\", group doesn't exist",{fileName:"Sources/iron/Scene.hx",lineNumber:586,className:"iron.Scene",methodName:"spawnGroup"});if(failed!=null){failed()}}else if(object_refs.length==0){done()}else{let _g=0;while(_g<object_refs.length){let object_ref=object_refs[_g];++_g;this.spawnObject(object_ref,groupOwner,function(spawnedObject){if(!_gthis.isObjectInGroup(groupRef,spawnedObject.parent,format)){let _g=0;let _g1=format.groups;while(_g<_g1.length){let group=_g1[_g];++_g;if(group.name==groupRef){spawnedObject.transform.applyParent();spawnedObject.transform.translate(-group.instance_offset.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),-group.instance_offset.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),-group.instance_offset.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN));break}}}if((spawned+=1)==object_refs.length){groupOwner.transform.reset();done()}},true,format)}}}getGroupObjectRefs(group_ref,format){let _g=0;let _g1=format.groups;while(_g<_g1.length){let g=_g1[_g];++_g;if(g.name==group_ref){return g.object_refs}}return null}getGroupObjectsRaw(groupRef,format){let objectRefs=this.getGroupObjectRefs(groupRef,format);let objects=[];if(objectRefs==null){return objects}let _g=0;while(_g<objectRefs.length){let objRef=objectRefs[_g];++_g;let rawObj=iron_Scene.getRawObjectByName(format,objRef);objects.push(rawObj);let childRefs=this.getChildObjectsRaw(rawObj);objects=objects.concat(childRefs)}return objects}getChildObjectsRaw(rawObj,recursive){if(recursive==null){recursive=true}let children=rawObj.children;if(children==null){return[]}children=children.slice();if(recursive){let _g=0;let _g1=rawObj.children;while(_g<_g1.length){let child=_g1[_g];++_g;let childRefs=this.getChildObjectsRaw(child);children=children.concat(childRefs)}}return children}isObjectInGroup(groupRef,object,format){let _g=0;let _g1=this.getGroupObjectsRaw(groupRef,format);while(_g<_g1.length){let obj=_g1[_g];++_g;if(obj.name==object.name){return true}}return false}createMeshObject(o,format,parent,parentObject,materials,done){let ref=o.data_ref.split("/");let object_file="";let data_ref="";let sceneName=format.name;if(ref.length==2){object_file=ref[0];data_ref=ref[1]}else{object_file=sceneName;data_ref=o.data_ref}let _gthis=this;if(parentObject!=null&&parentObject.bone_actions!=null){let bactions=[];let _g=0;let _g1=parentObject.bone_actions;while(_g<_g1.length){let ref=_g1[_g];++_g;iron_data_Data.getSceneRaw(ref,function(action){bactions.push(action);if(bactions.length==parentObject.bone_actions.length){let armature=null;let _g=0;let _g1=_gthis.armatures;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.uid==parent.uid){armature=a;break}}if(armature==null){let _g=0;let _g1=_gthis.armatures;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==parent.name){parent.name+="."+parent.uid;break}}armature=new iron_data_Armature(parent.uid,parent.name,bactions);_gthis.armatures.push(armature)}_gthis.returnMeshObject(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done)}})}}else{this.returnMeshObject(object_file,data_ref,sceneName,null,materials,parent,parentObject,o,done)}}returnMeshObject(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done){let _gthis=this;iron_data_Data.getMesh(object_file,data_ref,function(mesh){if(mesh.isSkinned){let g=mesh.geom;if(armature!=null){g.addArmature(armature)}else{g.addAction(mesh.format.objects,"none")}}let object=_gthis.addMeshObject(mesh,materials,parent);if(o.particle_refs!=null){js_Boot.__cast(object,iron_object_MeshObject).render_emitter=o.render_emitter;let _g=0;let _g1=o.particle_refs;while(_g<_g1.length){let ref=_g1[_g];++_g;js_Boot.__cast(object,iron_object_MeshObject).setupParticleSystem(sceneName,ref)}}if(o.tilesheet_ref!=null){js_Boot.__cast(object,iron_object_MeshObject).setupTilesheet(sceneName,o.tilesheet_ref,o.tilesheet_action_ref)}if(o.camera_list!=null){js_Boot.__cast(object,iron_object_MeshObject).cameraList=o.camera_list}_gthis.returnObject(object,o,done)})}returnObject(object,o,done){let _gthis=this;if(object!=null&&o.object_actions!=null){let oactions=[];while(oactions.length<o.object_actions.length)oactions.push(null);let actionsLoaded=0;let _g=0;let _g1=o.object_actions.length;while(_g<_g1){let i=_g++;let ref=o.object_actions[i];if(ref=="null"){actionsLoaded+=1;continue}iron_data_Data.getSceneRaw(ref,function(action){oactions[i]=action;actionsLoaded+=1;if(actionsLoaded==o.object_actions.length){_gthis.returnObjectLoaded(object,o,oactions,done)}})}}else{this.returnObjectLoaded(object,o,null,done)}}returnObjectLoaded(object,o,oactions,done){if(object!=null){object.raw=o;object.name=o.name;if(o.visible!=null){object.visible=o.visible}if(o.visible_mesh!=null){object.visibleMesh=o.visible_mesh}if(o.visible_shadow!=null){object.visibleShadow=o.visible_shadow}iron_Scene.createConstraints(o.constraints,object);iron_Scene.generateTransform(o,object.transform);object.setupAnimation(oactions);object.setupMorphTargets();if(o.properties!=null){object.properties=new haxe_ds_StringMap;let _g=0;let _g1=o.properties;while(_g<_g1.length){let p=_g1[_g];++_g;object.properties.h[p.name]=p.value}}if(o.vertex_groups!=null){object.vertex_groups=new haxe_ds_StringMap;let _g=0;let _g1=o.vertex_groups;while(_g<_g1.length){let p=_g1[_g];++_g;let verts=[];let _g2=0;let _g3=p.value.length/3|0;while(_g2<_g3){let i=_g2++;let x=parseFloat(p.value[i*3]);let y=parseFloat(p.value[i*3+1]);let z=parseFloat(p.value[i*3+2]);verts.push(new iron_math_Vec4(x,y,z,1))}object.vertex_groups.h[p.name]=verts}}if(!iron_Scene.active.initializing){iron_Scene.createTraits(o.traits,object)}}done(object)}loadEmbeddedData(datas,done){if(datas==null){done();return}let loaded=0;let _g=0;while(_g<datas.length){let file=datas[_g];++_g;this.embedData(file,function(){loaded+=1;if(loaded==datas.length){done()}})}}embedData(file,done){let _gthis=this;if(file.endsWith(".raw")){iron_data_Data.getBlob(file,function(blob){let b=blob.toBytes();let w=(Math.pow(b.length,.3333333333333333)|0)+1;let image=kha_Image.fromBytes3D(b,w,w,w,1);_gthis.embedded.h[file]=image;done()})}else{iron_data_Data.getImage(file,function(image){_gthis.embedded.h[file]=image;done()})}}notifyOnInit(f){if(this.ready){f()}else{this.traitInits.push(f)}}static create(format,done){iron_Scene.active=new iron_Scene;iron_Scene.active.ready=false;iron_Scene.active.raw=format;iron_data_Data.getWorld(format.name,format.world_ref,function(world){iron_Scene.active.world=world;iron_Scene.active.addScene(format.name,null,function(sceneObject){let _g=0;let _g1=sceneObject.getChildren(true);while(_g<_g1.length){let object=_g1[_g];++_g;iron_Scene.createTraits(object.raw.traits,object)}if(iron_Scene.active.cameras.length==0){haxe_Log.trace('No camera found for scene "'+format.name+'"',{fileName:"Sources/iron/Scene.hx",lineNumber:138,className:"iron.Scene",methodName:"create"})}iron_Scene.active.camera=iron_Scene.active.getCamera(format.camera_ref);iron_Scene.active.sceneParent=sceneObject;iron_Scene.active.ready=true;let _g2=0;let _g3=iron_Scene.active.traitInits;while(_g2<_g3.length){let f=_g3[_g2];++_g2;f()}iron_Scene.active.traitInits=[];iron_Scene.active.initializing=false;done(sceneObject)})})}static setActive(sceneName,done){if(!iron_Scene.framePassed){return}iron_Scene.framePassed=false;let removeWorldShader=null;if(iron_Scene.active!=null){iron_Scene.active.remove()}iron_data_Data.getSceneRaw(sceneName,function(format){iron_Scene.create(format,function(o){if(done!=null){done(o)}})})}static getRawObjectByName(format,name){return iron_Scene.traverseObjs(format.objects,name)}static traverseObjs(children,name){let _g=0;while(_g<children.length){let o=children[_g];++_g;if(o.name==name){return o}if(o.children!=null){let res=iron_Scene.traverseObjs(o.children,name);if(res!=null){return res}}}return null}static generateTransform(object,transform){let tmp;if(object.transform!=null){let a=object.transform.values;tmp=new iron_math_Mat4(a.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN))}else{tmp=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}transform.world=tmp;let _this=transform.world;let loc=transform.loc;let quat=transform.rot;let scale=transform.scale;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;let _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;let _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);let _this3=iron_math_Mat4.helpVec;_this3.x=_this.self._10;_this3.y=_this.self._11;_this3.z=_this.self._12;_this3.w=1;let _this4=_this3;scale.y=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this.self._20;_this5.y=_this.self._21;_this5.z=_this.self._22;_this5.w=1;let _this6=_this5;scale.z=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=_this.self;let m3=_this7._12;let m4=_this7._22;let m5=_this7._32;let m6=_this7._13;let m7=_this7._23;let m8=_this7._33;let c00=_this7._11*(m4*m8-m5*m7)-_this7._21*(m3*m8-m5*m6)+_this7._31*(m3*m7-m4*m6);let m31=_this7._12;let m41=_this7._22;let m51=_this7._32;let m61=_this7._13;let m71=_this7._23;let m81=_this7._33;let c01=_this7._10*(m41*m81-m51*m71)-_this7._20*(m31*m81-m51*m61)+_this7._30*(m31*m71-m41*m61);let m32=_this7._11;let m42=_this7._21;let m52=_this7._31;let m62=_this7._13;let m72=_this7._23;let m82=_this7._33;let c02=_this7._10*(m42*m82-m52*m72)-_this7._20*(m32*m82-m52*m62)+_this7._30*(m32*m72-m42*m62);let m33=_this7._11;let m43=_this7._21;let m53=_this7._31;let m63=_this7._12;let m73=_this7._22;let m83=_this7._32;let c03=_this7._10*(m43*m83-m53*m73)-_this7._20*(m33*m83-m53*m63)+_this7._30*(m33*m73-m43*m63);if(_this7._00*c00-_this7._01*c01+_this7._02*c02-_this7._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;let m=iron_math_Mat4.helpMat;let m11=m.self._00;let m12=m.self._10;let m13=m.self._20;let m21=m.self._01;let m22=m.self._11;let m23=m.self._21;let m311=m.self._02;let m321=m.self._12;let m331=m.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}if(object.local_only!=null){transform.localOnly=object.local_only}if(transform.object.parent!=null){transform.update()}}static createTraits(traits,object){if(traits==null){return}let _g=0;while(_g<traits.length){let t=traits[_g];++_g;if(t.type=="Script"){let args=[];if(t.parameters!=null){let _g=0;let _g1=t.parameters;while(_g<_g1.length){let param=_g1[_g];++_g;args.push(iron_Scene.parseArg(param))}}let traitInst=iron_Scene.createTraitClassInstance(t.class_name,args);if(traitInst==null){haxe_Log.trace("Error: Trait '"+t.class_name+"' referenced in object '"+object.name+"' not found",{fileName:"Sources/iron/Scene.hx",lineNumber:893,className:"iron.Scene",methodName:"createTraits"});continue}if(t.props!=null){let _g=0;let _g1=t.props.length/3|0;while(_g<_g1){let i=_g++;let pname=t.props[i*3];let ptype=t.props[i*3+1];let pval=t.props[i*3+2];if(ptype.endsWith("Object")&&pval!=""){Reflect.setProperty(traitInst,pname,iron_Scene.active.getChild(pval))}else if(ptype=="TSceneFormat"&&pval!=""&&pval!=null){iron_data_Data.getSceneRaw(pval,function(r){Reflect.setProperty(traitInst,pname,r)})}else{switch(ptype){case"Vec2":let pVec=pval;Reflect.setProperty(traitInst,pname,new iron_math_Vec2(pVec.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)));break;case"Vec3":let pVec1=pval;Reflect.setProperty(traitInst,pname,new iron_math_Vec3(pVec1.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec1.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec1.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)));break;case"Vec4":let pVec2=pval;Reflect.setProperty(traitInst,pname,new iron_math_Vec4(pVec2.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec2.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec2.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec2.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN)));break;default:Reflect.setProperty(traitInst,pname,pval)}}}}object.addTrait(traitInst)}}}static parseArg(str){if(str=="true"){return true}else if(str=="false"){return false}else if(str=="null"){return null}else if(str.charAt(0)=="'"){return StringTools.replace(str,"'","")}else if(str.charAt(0)=='"'){return StringTools.replace(str,'"',"")}else if(str.charAt(0)=="["){str=StringTools.replace(str,"[","");str=StringTools.replace(str,"]","");str=StringTools.replace(str," ","");let ar=[];let vals=str.split(",");let _g=0;while(_g<vals.length){let v=vals[_g];++_g;ar.push(iron_Scene.parseArg(v))}return ar}else if(str.charAt(0)=="{"){return JSON.parse(str)}else{let f=parseFloat(str);let i=Std.parseInt(str);if(f==i){return i}else{return f}}}static createConstraints(constraints,object){if(constraints==null){return}object.constraints=[];let _g=0;while(_g<constraints.length){let c=constraints[_g];++_g;let constr=new iron_object_Constraint(c);object.constraints.push(constr)}}static createTraitClassInstance(traitName,args){let cname=$hxClasses[traitName];if(cname==null){return null}return Type.createInstance(cname,args)}}$hxClasses["iron.Scene"]=iron_Scene;iron_Scene.__name__="iron.Scene";Object.assign(iron_Scene.prototype,{__class__:iron_Scene,uid:null,raw:null,root:null,sceneParent:null,camera:null,world:null,meshes:null,lights:null,cameras:null,empties:null,animations:null,tilesheets:null,armatures:null,groups:null,embedded:null,ready:null,traitInits:null,traitRemoves:null,initializing:null});class iron_data_Armature{constructor(uid,name,actions){this.matsReady=false;this.actions=[];this.uid=uid;this.name=name;let _g=0;while(_g<actions.length){let a=actions[_g];++_g;let _g1=0;let _g2=a.objects;while(_g1<_g2.length){let o=_g2[_g1];++_g1;iron_data_Armature.setParents(o)}let bones=[];iron_data_Armature.traverseBones(a.objects,function(object){bones.push(object)});this.actions.push({name:a.name,bones:bones,mats:null})}}initMats(){if(this.matsReady){return}this.matsReady=true;let _g=0;let _g1=this.actions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.mats!=null){continue}a.mats=[];let _g2=0;let _g3=a.bones;while(_g2<_g3.length){let b=_g3[_g2];++_g2;let a1=b.transform.values;a.mats.push(new iron_math_Mat4(a1.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN)))}}}getAction(name){let _g=0;let _g1=this.actions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==name){return a}}return null}static setParents(object){if(object.children==null){return}let _g=0;let _g1=object.children;while(_g<_g1.length){let o=_g1[_g];++_g;o.parent=object;iron_data_Armature.setParents(o)}}static traverseBones(objects,callback){let _g=0;let _g1=objects.length;while(_g<_g1){let i=_g++;iron_data_Armature.traverseBonesStep(objects[i],callback)}}static traverseBonesStep(object,callback){if(object.type=="bone_object"){callback(object)}if(object.children==null){return}let _g=0;let _g1=object.children.length;while(_g<_g1){let i=_g++;iron_data_Armature.traverseBonesStep(object.children[i],callback)}}}$hxClasses["iron.data.Armature"]=iron_data_Armature;iron_data_Armature.__name__="iron.data.Armature";Object.assign(iron_data_Armature.prototype,{__class__:iron_data_Armature,uid:null,name:null,actions:null,matsReady:null});class iron_data_CameraData{constructor(raw,done){this.raw=raw;this.name=raw.name;done(this)}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getCameraRawByName(format.camera_datas,id);if(raw==null){haxe_Log.trace('Camera data "'+id+'" not found!',{fileName:"Sources/iron/data/CameraData.hx",lineNumber:20,className:"iron.data.CameraData",methodName:"parse"});done(null)}new iron_data_CameraData(raw,done)})}}$hxClasses["iron.data.CameraData"]=iron_data_CameraData;iron_data_CameraData.__name__="iron.data.CameraData";Object.assign(iron_data_CameraData.prototype,{__class__:iron_data_CameraData,name:null,raw:null});class iron_data_Data{static getMesh(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedMeshes.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingMeshes.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingMeshes.h[handle]=[done];iron_data_MeshData.parse(file,name,function(b){iron_data_Data.cachedMeshes.h[handle]=b;b.handle=handle;let _g=0;let _g1=iron_data_Data.loadingMeshes.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingMeshes;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getLight(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedLights.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingLights.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingLights.h[handle]=[done];iron_data_LightData.parse(file,name,function(b){iron_data_Data.cachedLights.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingLights.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingLights;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getCamera(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedCameras.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingCameras.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingCameras.h[handle]=[done];iron_data_CameraData.parse(file,name,function(b){iron_data_Data.cachedCameras.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingCameras.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingCameras;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getMaterial(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedMaterials.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingMaterials.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingMaterials.h[handle]=[done];iron_data_MaterialData.parse(file,name,function(b){iron_data_Data.cachedMaterials.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingMaterials.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingMaterials;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getParticle(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedParticles.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingParticles.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingParticles.h[handle]=[done];iron_data_ParticleData.parse(file,name,function(b){iron_data_Data.cachedParticles.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingParticles.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingParticles;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getWorld(file,name,done){if(name==null){done(null);return}let handle=file+name;let cached=iron_data_Data.cachedWorlds.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingWorlds.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingWorlds.h[handle]=[done];iron_data_WorldData.parse(file,name,function(b){iron_data_Data.cachedWorlds.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingWorlds.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingWorlds;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getShader(file,name,done,overrideContext){let cacheName=name;if(overrideContext!=null){cacheName+="2"}let cached=iron_data_Data.cachedShaders.h[cacheName];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingShaders.h[cacheName];if(loading!=null){loading.push(done);return}iron_data_Data.loadingShaders.h[cacheName]=[done];iron_data_ShaderData.parse(file,name,function(b){iron_data_Data.cachedShaders.h[cacheName]=b;let _g=0;let _g1=iron_data_Data.loadingShaders.h[cacheName];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingShaders;if(Object.prototype.hasOwnProperty.call(_this.h,cacheName)){delete _this.h[cacheName]}},overrideContext)}static getSceneRaw(file,done){let cached=iron_data_Data.cachedSceneRaws.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingSceneRaws.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingSceneRaws.h[file]=[done];let compressed=file.endsWith(".lz4");let isJson=file.endsWith(".json");let ext=compressed||isJson||file.endsWith(".arm")?"":".arm";iron_data_Data.getBlob(file+ext,function(b){let parsed=null;if(isJson){let s=b.toString();if(s.charAt(0)=="{"){parsed=JSON.parse(s)}else{let i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);parsed=iron_system_ArmPack.read(i)}}else{let i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);parsed=iron_system_ArmPack.read(i)}iron_data_Data.returnSceneRaw(file,parsed)})}static returnSceneRaw(file,parsed){iron_data_Data.cachedSceneRaws.h[file]=parsed;let _g=0;let _g1=iron_data_Data.loadingSceneRaws.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(parsed)}let _this=iron_data_Data.loadingSceneRaws;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}}static getMeshRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getLightRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getCameraRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getMaterialRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getParticleRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getWorldRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getShaderRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getBlob(file,done){let cached=iron_data_Data.cachedBlobs.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingBlobs.h[file];if(loading!=null){loading.push(done)}iron_data_Data.loadingBlobs.h[file]=[done];kha_Assets.loadBlobFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,function(b){iron_data_Data.cachedBlobs.h[file]=b;let _g=0;let _g1=iron_data_Data.loadingBlobs.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingBlobs;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:424,className:"iron.data.Data",methodName:"getBlob"})}static getImage(file,done,readable,format){if(format==null){format="RGBA32"}if(readable==null){readable=false}let cached=iron_data_Data.cachedImages.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingImages.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingImages.h[file]=[done];kha_Assets.loadImageFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,readable,function(b){iron_data_Data.cachedImages.h[file]=b;let _g=0;let _g1=iron_data_Data.loadingImages.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingImages;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:473,className:"iron.data.Data",methodName:"getImage"})}static getFont(file,done){let cached=iron_data_Data.cachedFonts.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingFonts.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingFonts.h[file]=[done];kha_Assets.loadFontFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,function(b){iron_data_Data.cachedFonts.h[file]=b;let _g=0;let _g1=iron_data_Data.loadingFonts.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingFonts;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:585,className:"iron.data.Data",methodName:"getFont"})}static isAbsolute(file){if(!(file.charAt(0)=="/"||file.charAt(1)==":"||file.charAt(4)==":")){if(file.charAt(0)=="\\"){return file.charAt(1)=="\\"}else{return false}}else{return true}}}$hxClasses["iron.data.Data"]=iron_data_Data;iron_data_Data.__name__="iron.data.Data";class iron_data_Geometry{constructor(data,indices,materialIndices,usage){this.mats=null;this.actions=null;this.skeletonBoneLens=null;this.skeletonBoneRefs=null;this.skeletonTransformsI=null;this.skinBoneWeights=null;this.skinBoneIndices=null;this.skinBoneCounts=null;this.instanceCount=0;this.instanced=false;this.instancedVB=null;this.numTris=0;this.ready=false;this.name="";this.count=-1;this.start=0;this.vertexBufferMap=new haxe_ds_StringMap;if(usage==null){usage=0}this.indices=indices;this.materialIndices=materialIndices;this.usage=usage;this.vertexArrays=data.raw.vertex_arrays;this.positions=this.getVArray("pos");this.normals=this.getVArray("nor");this.uvs=this.getVArray("tex");this.cols=this.getVArray("col");this.data=data;this.struct=iron_data_Geometry.getVertexStructure(this.vertexArrays);this.structLength=this.struct.byteSize()/2|0;this.structStr="";let _g=0;let _g1=this.struct.elements;while(_g<_g1.length){let e=_g1[_g];++_g;this.structStr+=e.name}}getVArray(name){let _g=0;let _g1=this.vertexArrays.length;while(_g<_g1){let i=_g++;if(this.vertexArrays[i].attrib==name){return this.vertexArrays[i]}}return null}setupInstanced(data,instancedType,usage){let structure=new kha_graphics4_VertexStructure;structure.instanced=true;this.instanced=true;structure.add("ipos",2);if(instancedType==2||instancedType==4){structure.add("irot",2)}if(instancedType==3||instancedType==4){structure.add("iscl",2)}this.instanceCount=(data.byteLength>>2)/(structure.byteSize()/4|0)|0;this.instancedVB=new kha_graphics4_VertexBuffer(this.instanceCount,structure,usage,1);let vertices=this.instancedVB.lock();let _g=0;let _g1=vertices.byteLength/4|0;while(_g<_g1){let i=_g++;vertices.setFloat32(i*4,data.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN),true)}this.instancedVB.unlock()}get(vs){let key="";let _g=0;while(_g<vs.length){let e=vs[_g];++_g;key+=e.name}let vb=this.vertexBufferMap.h[key];if(vb==null){let nVertexArrays=[];let atex=false;let texOffset=-1;let acol=false;let _g=0;let _g1=vs.length;while(_g<_g1){let e=_g++;if(vs[e].name=="tex"){atex=true;texOffset=e}if(vs[e].name=="col"){acol=true}let _g1=0;let _g2=this.vertexArrays.length;while(_g1<_g2){let va=_g1++;if(vs[e].name==this.vertexArrays[va].attrib){nVertexArrays.push(this.vertexArrays[va])}}}let struct=iron_data_Geometry.getVertexStructure(nVertexArrays);vb=new kha_graphics4_VertexBuffer((this.positions.values.byteLength>>1)/this.positions.size|0,struct,this.usage);this.vertices=vb.lock();iron_data_Geometry.buildVertices(this.vertices,nVertexArrays,0,atex&&this.uvs==null,texOffset);vb.unlock();this.vertexBufferMap.h[key]=vb;if(atex&&this.uvs==null){haxe_Log.trace("Armory Warning: Geometry "+this.name+" is missing UV map",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:228,className:"iron.data.Geometry",methodName:"get"})}if(acol&&this.cols==null){haxe_Log.trace("Armory Warning: Geometry "+this.name+" is missing vertex colors",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:229,className:"iron.data.Geometry",methodName:"get"})}}return vb}build(){if(this.ready){return}this.vertexBuffer=new kha_graphics4_VertexBuffer((this.positions.values.byteLength>>1)/this.positions.size|0,this.struct,this.usage);this.vertices=this.vertexBuffer.lock();iron_data_Geometry.buildVertices(this.vertices,this.vertexArrays);this.vertexBuffer.unlock();this.vertexBufferMap.h[this.structStr]=this.vertexBuffer;this.indexBuffers=[];let _g=0;let _g1=this.indices;while(_g<_g1.length){let id=_g1[_g];++_g;if(id.byteLength>>2==0){continue}let indexBuffer=new kha_graphics4_IndexBuffer(id.byteLength>>2,this.usage);this.numTris+=(id.byteLength>>2)/3|0;let indicesA=indexBuffer.lock();let _g2=0;let _g3=indicesA.byteLength>>2;while(_g2<_g3){let i=_g2++;indicesA.setUint32(i*4,id.getUint32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=i*4}indexBuffer.unlock();this.indexBuffers.push(indexBuffer)}if(this.data.raw.instanced_data!=null){this.setupInstanced(this.data.raw.instanced_data,this.data.raw.instanced_type,this.usage)}this.ready=true}addArmature(armature){let _g=0;let _g1=armature.actions;while(_g<_g1.length){let a=_g1[_g];++_g;this.addAction(a.bones,a.name)}}addAction(bones,name){if(bones==null){return}if(this.actions==null){this.actions=new haxe_ds_StringMap;this.mats=new haxe_ds_StringMap}if(this.actions.h[name]!=null){return}let actionBones=[];let _g=0;let _g1=this.skeletonBoneRefs;while(_g<_g1.length){let s=_g1[_g];++_g;let _g2=0;while(_g2<bones.length){let b=bones[_g2];++_g2;if(b.name==s){actionBones.push(b)}}}this.actions.h[name]=actionBones;let actionMats=[];let _g2=0;while(_g2<actionBones.length){let b=actionBones[_g2];++_g2;let a=b.transform.values;actionMats.push(new iron_math_Mat4(a.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN)))}this.mats.h[name]=actionMats}initSkeletonTransforms(transformsI){this.skeletonTransformsI=[];let _g=0;while(_g<transformsI.length){let t=transformsI[_g];++_g;let mi=new iron_math_Mat4(t.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN));this.skeletonTransformsI.push(mi)}}static getVertexStructure(vertexArrays){let structure=new kha_graphics4_VertexStructure;let _g=0;let _g1=vertexArrays.length;while(_g<_g1){let i=_g++;structure.add(vertexArrays[i].attrib,iron_data_Geometry.getVertexData(vertexArrays[i].data))}return structure}static getVertexData(data){switch(data){case"short2norm":return 23;case"short4norm":return 27;default:return 27}}static buildVertices(vertices,vertexArrays,offset,fakeUVs,uvsIndex){if(uvsIndex==null){uvsIndex=-1}if(fakeUVs==null){fakeUVs=false}if(offset==null){offset=0}let arr=vertexArrays[0];let numVertices=(arr.values.byteLength>>1)/arr.size|0;let di=-1+offset;let _g=0;let _g1=numVertices;while(_g<_g1){let i=_g++;let _g1=0;let _g2=vertexArrays.length;while(_g1<_g2){let va=_g1++;let l=vertexArrays[va].size;if(fakeUVs&&va==uvsIndex){let _g=0;let _g1=l;while(_g<_g1){let j=_g++;vertices.setInt16(++di*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN)}continue}let _g=0;let _g2=l;while(_g<_g2){let o=_g++;vertices.setInt16(++di*2,vertexArrays[va].values.getInt16((i*l+o)*2,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN)}if(vertexArrays[va].padding!=null){if(vertexArrays[va].padding==1){vertices.setInt16(++di*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN)}}}}}}$hxClasses["iron.data.Geometry"]=iron_data_Geometry;iron_data_Geometry.__name__="iron.data.Geometry";Object.assign(iron_data_Geometry.prototype,{__class__:iron_data_Geometry,vertexBuffer:null,vertexBufferMap:null,indexBuffers:null,start:null,count:null,name:null,ready:null,vertices:null,indices:null,numTris:null,materialIndices:null,struct:null,structLength:null,structStr:null,usage:null,instancedVB:null,instanced:null,instanceCount:null,positions:null,normals:null,uvs:null,cols:null,vertexArrays:null,data:null,skinBoneCounts:null,skinBoneIndices:null,skinBoneWeights:null,skeletonTransformsI:null,skeletonBoneRefs:null,skeletonBoneLens:null,actions:null,mats:null});class iron_data_LightData{constructor(raw,done){this.raw=raw;this.name=raw.name;done(this)}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getLightRawByName(format.light_datas,id);if(raw==null){haxe_Log.trace('Light data "'+id+'" not found!',{fileName:"Sources/iron/data/LightData.hx",lineNumber:30,className:"iron.data.LightData",methodName:"parse"});done(null)}new iron_data_LightData(raw,done)})}}$hxClasses["iron.data.LightData"]=iron_data_LightData;iron_data_LightData.__name__="iron.data.LightData";Object.assign(iron_data_LightData.prototype,{__class__:iron_data_LightData,name:null,raw:null});class iron_data_MaterialData{constructor(raw,done,file){if(file==null){file=""}this.contexts=null;this.uid=++iron_data_MaterialData.uidCounter;this.raw=raw;this.name=raw.name;let ref=raw.shader.split("/");let object_file="";let data_ref="";if(ref.length==2){object_file=ref[0];data_ref=ref[1]}else{object_file=file;data_ref=raw.shader}let _gthis=this;iron_data_Data.getShader(object_file,data_ref,function(b){_gthis.shader=b;_gthis.contexts=[];while(_gthis.contexts.length<raw.contexts.length)_gthis.contexts.push(null);let contextsLoaded=0;let _g=0;let _g1=raw.contexts.length;while(_g<_g1){let i=_g++;let c=raw.contexts[i];new iron_data_MaterialContext(c,function(self){_gthis.contexts[i]=self;contextsLoaded+=1;if(contextsLoaded==raw.contexts.length){done(_gthis)}})}},raw.override_context)}getContext(name){let _g=0;let _g1=this.contexts;while(_g<_g1.length){let c=_g1[_g];++_g;if(HxOverrides.substr(c.raw.name,0,name.length)==name){return c}}return null}static parse(file,name,done){iron_data_Data.getSceneRaw(file,function(format){let raw=iron_data_Data.getMaterialRawByName(format.material_datas,name);if(raw==null){haxe_Log.trace('Material data "'+name+'" not found!',{fileName:"Sources/iron/data/MaterialData.hx",lineNumber:58,className:"iron.data.MaterialData",methodName:"parse"});done(null)}new iron_data_MaterialData(raw,done,file)})}}$hxClasses["iron.data.MaterialData"]=iron_data_MaterialData;iron_data_MaterialData.__name__="iron.data.MaterialData";Object.assign(iron_data_MaterialData.prototype,{__class__:iron_data_MaterialData,uid:null,name:null,raw:null,shader:null,contexts:null});class iron_data_MaterialContext{constructor(raw,done){this.id=0;this.textures=null;this.raw=raw;this.id=iron_data_MaterialContext.num++;let _gthis=this;if(raw.bind_textures!=null&&raw.bind_textures.length>0){let this1=new Array(raw.bind_textures.length);this.textures=this1;let texturesLoaded=0;let _g=0;let _g1=raw.bind_textures.length;while(_g<_g1){let i=_g++;let tex=raw.bind_textures[i];if(tex.file==""||tex.source=="movie"){texturesLoaded+=1;if(texturesLoaded==raw.bind_textures.length){done(this)}continue}iron_data_Data.getImage(tex.file,function(image){_gthis.textures[i]=image;texturesLoaded+=1;if(tex.mipmaps!=null){let mipmaps=[];while(mipmaps.length<tex.mipmaps.length)mipmaps.push(null);let mipmapsLoaded=0;let _g=0;let _g1=tex.mipmaps.length;while(_g<_g1){let j=_g++;let name=tex.mipmaps[j];iron_data_Data.getImage(name,function(mipimg){mipmaps[j]=mipimg;mipmapsLoaded+=1;if(mipmapsLoaded==tex.mipmaps.length){image.setMipmaps(mipmaps);tex.mipmaps=null;tex.generate_mipmaps=false;if(texturesLoaded==raw.bind_textures.length){done(_gthis)}}})}}else if(tex.generate_mipmaps==true&&image!=null){image.generateMipmaps(1e3);tex.mipmaps=null;tex.generate_mipmaps=false;if(texturesLoaded==raw.bind_textures.length){done(_gthis)}}else if(texturesLoaded==raw.bind_textures.length){done(_gthis)}},false,tex.format!=null?tex.format:"RGBA32")}}else{done(this)}}setTextureParameters(g,textureIndex,context,unitIndex){context.setTextureParameters(g,unitIndex,this.raw.bind_textures[textureIndex])}}$hxClasses["iron.data.MaterialContext"]=iron_data_MaterialContext;iron_data_MaterialContext.__name__="iron.data.MaterialContext";Object.assign(iron_data_MaterialContext.prototype,{__class__:iron_data_MaterialContext,raw:null,textures:null,id:null});class iron_data_MeshData{constructor(raw,done){this.scaleTex=1;this.scalePos=1;this.refcount=0;this.raw=raw;this.name=raw.name;this.sortingIndex=raw.sorting_index;if(raw.scale_pos!=null){this.scalePos=raw.scale_pos}if(raw.scale_tex!=null){this.scaleTex=raw.scale_tex}let indices=[];let materialIndices=[];let _g=0;let _g1=raw.index_arrays;while(_g<_g1.length){let ind=_g1[_g];++_g;indices.push(ind.values);materialIndices.push(ind.material)}this.isSkinned=raw.skin!=null;let vertexArrays=raw.vertex_arrays;if(this.isSkinned){vertexArrays.push({attrib:"bone",values:null,data:"short4norm"});vertexArrays.push({attrib:"weight",values:null,data:"short4norm"})}let _g2=0;let _g3=vertexArrays.length;while(_g2<_g3){let i=_g2++;let padding=vertexArrays[i].padding;vertexArrays[i].size=this.getVertexSize(vertexArrays[i].data,padding!=null?padding:0)}let parsedUsage=0;if(raw.dynamic_usage!=null&&raw.dynamic_usage==true){parsedUsage=1}let usage=parsedUsage;if(this.isSkinned){let bonea=null;let weighta=null;let vertex_length=(vertexArrays[0].values.byteLength>>1)/vertexArrays[0].size|0;let l=vertex_length*4;bonea=kha_arrays_Int16Array._new(l);weighta=kha_arrays_Int16Array._new(l);let index=0;let ai=0;let _g=0;let _g1=vertex_length;while(_g<_g1){let i=_g++;let boneCount=raw.skin.bone_count_array.getInt16(i*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let _g1=index;let _g2=index+boneCount;while(_g1<_g2){let j=_g1++;bonea.setInt16(ai*2,raw.skin.bone_index_array.getInt16(j*2,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=ai*2;weighta.setInt16(ai*2,raw.skin.bone_weight_array.getInt16(j*2,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=ai*2;++ai}let _g3=boneCount;let _g4=4;while(_g3<_g4){let j=_g3++;bonea.setInt16(ai*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=ai*2;weighta.setInt16(ai*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=ai*2;++ai}index+=boneCount}vertexArrays[vertexArrays.length-2].values=bonea;vertexArrays[vertexArrays.length-1].values=weighta}this.geom=new iron_data_Geometry(this,indices,materialIndices,usage);this.geom.name=this.name;done(this)}getVertexSize(vertex_data,padding){if(padding==null){padding=0}switch(vertex_data){case"short2norm":return 2-padding;case"short4norm":return 4-padding;default:return 0}}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getMeshRawByName(format.mesh_datas,id);if(raw==null){haxe_Log.trace('Mesh data "'+id+'" not found!',{fileName:"Sources/iron/data/MeshData.hx",lineNumber:102,className:"iron.data.MeshData",methodName:"parse"});done(null)}new iron_data_MeshData(raw,function(dat){dat.format=format;if(raw.skin!=null){dat.geom.skinBoneCounts=raw.skin.bone_count_array;dat.geom.skinBoneIndices=raw.skin.bone_index_array;dat.geom.skinBoneWeights=raw.skin.bone_weight_array;dat.geom.skeletonBoneRefs=raw.skin.bone_ref_array;dat.geom.skeletonBoneLens=raw.skin.bone_len_array;dat.geom.initSkeletonTransforms(raw.skin.transformsI)}done(dat)})})}}$hxClasses["iron.data.MeshData"]=iron_data_MeshData;iron_data_MeshData.__name__="iron.data.MeshData";Object.assign(iron_data_MeshData.prototype,{__class__:iron_data_MeshData,name:null,sortingIndex:null,raw:null,format:null,geom:null,refcount:null,handle:null,scalePos:null,scaleTex:null,isSkinned:null});class iron_data_ParticleData{constructor(raw,done){this.raw=raw;this.name=raw.name;done(this)}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getParticleRawByName(format.particle_datas,id);if(raw==null){haxe_Log.trace('Particle data "'+id+'" not found!',{fileName:"Sources/iron/data/ParticleData.hx",lineNumber:21,className:"iron.data.ParticleData",methodName:"parse"});done(null)}new iron_data_ParticleData(raw,done)})}}$hxClasses["iron.data.ParticleData"]=iron_data_ParticleData;iron_data_ParticleData.__name__="iron.data.ParticleData";Object.assign(iron_data_ParticleData.prototype,{__class__:iron_data_ParticleData,name:null,raw:null});class iron_data_ShaderData{constructor(raw,done,overrideContext){this.contexts=[];this.raw=raw;this.name=raw.name;this.nextPass=raw.next_pass;let _g=0;let _g1=raw.contexts;while(_g<_g1.length){let c=_g1[_g];++_g;this.contexts.push(null)}let contextsLoaded=0;let _gthis=this;let _g2=0;let _g3=raw.contexts.length;while(_g2<_g3){let i=_g2++;let c=raw.contexts[i];new iron_data_ShaderContext(c,function(con){_gthis.contexts[i]=con;contextsLoaded+=1;if(contextsLoaded==raw.contexts.length){done(_gthis)}},overrideContext)}}getContext(name){let _g=0;let _g1=this.contexts;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.raw.name==name){return c}}return null}static parse(file,name,done,overrideContext){iron_data_Data.getSceneRaw(file,function(format){let raw=iron_data_Data.getShaderRawByName(format.shader_datas,name);if(raw==null){haxe_Log.trace('Shader data "'+name+'" not found!',{fileName:"Sources/iron/data/ShaderData.hx",lineNumber:56,className:"iron.data.ShaderData",methodName:"parse"});done(null)}new iron_data_ShaderData(raw,done,overrideContext)})}}$hxClasses["iron.data.ShaderData"]=iron_data_ShaderData;iron_data_ShaderData.__name__="iron.data.ShaderData";Object.assign(iron_data_ShaderData.prototype,{__class__:iron_data_ShaderData,name:null,nextPass:null,raw:null,contexts:null});class iron_data_ShaderContext{constructor(raw,done,overrideContext){this.instancingType=0;this.raw=raw;if(raw.name=="voxel"){done(this);return}this.overrideContext=overrideContext;this.parseVertexStructure();this.compile(done)}compile(done){if(this.pipeState!=null){this.pipeState.delete()}this.pipeState=new kha_graphics4_PipelineState;this.constants=[];this.textureUnits=[];if(this.instancingType>0){let instStruct=new kha_graphics4_VertexStructure;instStruct.add("ipos",2);if(this.instancingType==2||this.instancingType==4){instStruct.add("irot",2)}if(this.instancingType==3||this.instancingType==4){instStruct.add("iscl",2)}instStruct.instanced=true;this.pipeState.inputLayout=[this.structure,instStruct]}else{this.pipeState.inputLayout=[this.structure]}this.pipeState.depthWrite=this.raw.depth_write;this.pipeState.depthMode=this.getCompareMode(this.raw.compare_mode);this.pipeState.cullMode=this.getCullMode(this.raw.cull_mode);if(this.raw.blend_source!=null){this.pipeState.blendSource=this.getBlendingFactor(this.raw.blend_source)}if(this.raw.blend_destination!=null){this.pipeState.blendDestination=this.getBlendingFactor(this.raw.blend_destination)}if(this.raw.blend_operation!=null){this.pipeState.blendOperation=this.getBlendingOperation(this.raw.blend_operation)}if(this.raw.alpha_blend_source!=null){this.pipeState.alphaBlendSource=this.getBlendingFactor(this.raw.alpha_blend_source)}if(this.raw.alpha_blend_destination!=null){this.pipeState.alphaBlendDestination=this.getBlendingFactor(this.raw.alpha_blend_destination)}if(this.raw.alpha_blend_operation!=null){this.pipeState.alphaBlendOperation=this.getBlendingOperation(this.raw.alpha_blend_operation)}if(this.raw.color_writes_red!=null){let _g=0;let _g1=this.raw.color_writes_red.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksRed[i]=this.raw.color_writes_red[i]}}if(this.raw.color_writes_green!=null){let _g=0;let _g1=this.raw.color_writes_green.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksGreen[i]=this.raw.color_writes_green[i]}}if(this.raw.color_writes_blue!=null){let _g=0;let _g1=this.raw.color_writes_blue.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksBlue[i]=this.raw.color_writes_blue[i]}}if(this.raw.color_writes_alpha!=null){let _g=0;let _g1=this.raw.color_writes_alpha.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksAlpha[i]=this.raw.color_writes_alpha[i]}}if(this.raw.color_attachments!=null){this.pipeState.colorAttachmentCount=this.raw.color_attachments.length;let _g=0;let _g1=this.raw.color_attachments.length;while(_g<_g1){let i=_g++;this.pipeState.colorAttachments[i]=this.getTextureFormat(this.raw.color_attachments[i])}}let tmp=this.raw.depth_attachment!=null;if(this.raw.conservative_raster!=null){this.pipeState.conservativeRasterization=this.raw.conservative_raster}if(this.raw.shader_from_source){this.pipeState.vertexShader=kha_graphics4_VertexShader.fromSource(this.raw.vertex_shader);this.pipeState.fragmentShader=kha_graphics4_FragmentShader.fromSource(this.raw.fragment_shader);if(this.pipeState.vertexShader.shader==null||this.pipeState.fragmentShader.shader==null){done(null);return}this.finishCompile(done)}else{let tmp=StringTools.replace(this.raw.fragment_shader,".","_");this.pipeState.fragmentShader=Reflect.field(kha_Shaders,tmp);let tmp1=StringTools.replace(this.raw.vertex_shader,".","_");this.pipeState.vertexShader=Reflect.field(kha_Shaders,tmp1);if(this.raw.geometry_shader!=null){let tmp=StringTools.replace(this.raw.geometry_shader,".","_");this.pipeState.geometryShader=Reflect.field(kha_Shaders,tmp)}if(this.raw.tesscontrol_shader!=null){let tmp=StringTools.replace(this.raw.tesscontrol_shader,".","_");this.pipeState.tessellationControlShader=Reflect.field(kha_Shaders,tmp)}if(this.raw.tesseval_shader!=null){let tmp=StringTools.replace(this.raw.tesseval_shader,".","_");this.pipeState.tessellationEvaluationShader=Reflect.field(kha_Shaders,tmp)}this.finishCompile(done)}}finishCompile(done){if(this.overrideContext!=null){if(this.overrideContext.cull_mode!=null){this.pipeState.cullMode=this.getCullMode(this.overrideContext.cull_mode)}}this.pipeState.compile();if(this.raw.constants!=null){let _g=0;let _g1=this.raw.constants;while(_g<_g1.length){let c=_g1[_g];++_g;this.addConstant(c)}}if(this.raw.texture_units!=null){let _g=0;let _g1=this.raw.texture_units;while(_g<_g1.length){let tu=_g1[_g];++_g;this.addTexture(tu)}}done(this)}parseVertexStructure(){this.structure=new kha_graphics4_VertexStructure;let ipos=false;let irot=false;let iscl=false;let _g=0;let _g1=this.raw.vertex_elements;while(_g<_g1.length){let elem=_g1[_g];++_g;if(elem.name=="ipos"){ipos=true;continue}if(elem.name=="irot"){irot=true;continue}if(elem.name=="iscl"){iscl=true;continue}this.structure.add(elem.name,iron_data_ShaderContext.parseData(elem.data))}if(ipos&&!irot&&!iscl){this.instancingType=1}else if(ipos&&irot&&!iscl){this.instancingType=2}else if(ipos&&!irot&&iscl){this.instancingType=3}else if(ipos&&irot&&iscl){this.instancingType=4}}getCompareMode(s){switch(s){case"always":return 0;case"equal":return 2;case"greater":return 6;case"greater_equal":return 7;case"less":return 4;case"less_equal":return 5;case"never":return 1;case"not_equal":return 3;default:return 4}}getCullMode(s){switch(s){case"clockwise":return 0;case"none":return 2;default:return 1}}getBlendingOperation(s){switch(s){case"add":return 0;case"max":return 4;case"min":return 3;case"reverse_subtract":return 2;case"subtract":return 1;default:return 0}}getBlendingFactor(s){switch(s){case"blend_one":return 1;case"blend_zero":return 2;case"destination_alpha":return 4;case"destination_color":return 8;case"inverse_destination_alpha":return 6;case"inverse_destination_color":return 10;case"inverse_source_alpha":return 5;case"inverse_source_color":return 9;case"source_alpha":return 3;case"source_color":return 7;default:return 0}}getTextureAddresing(s){switch(s){case"mirror":return 1;case"repeat":return 0;default:return 2}}getTextureFilter(s){switch(s){case"linear":return 1;case"point":return 0;default:return 2}}getMipmapFilter(s){switch(s){case"no":return 0;case"point":return 1;default:return 2}}getTextureFormat(s){switch(s){case"DEPTH16":return 3;case"R16":return 6;case"R32":return 5;case"R8":return 1;case"RGBA128":return 2;case"RGBA32":return 0;case"RGBA64":return 4;default:return 0}}addConstant(c){this.constants.push(this.pipeState.getConstantLocation(c.name))}addTexture(tu){let unit=this.pipeState.getTextureUnit(tu.name);this.textureUnits.push(unit)}setTextureParameters(g,unitIndex,tex){let unit=this.textureUnits[unitIndex];g.setTextureParameters(unit,tex.u_addressing==null?0:this.getTextureAddresing(tex.u_addressing),tex.v_addressing==null?0:this.getTextureAddresing(tex.v_addressing),tex.min_filter==null?1:this.getTextureFilter(tex.min_filter),tex.mag_filter==null?1:this.getTextureFilter(tex.mag_filter),tex.mipmap_filter==null?0:this.getMipmapFilter(tex.mipmap_filter))}static parseData(data){if(data=="float1"){return 0}else if(data=="float2"){return 1}else if(data=="float3"){return 2}else if(data=="float4"){return 3}else if(data=="short2norm"){return 23}else if(data=="short4norm"){return 27}return 0}}$hxClasses["iron.data.ShaderContext"]=iron_data_ShaderContext;iron_data_ShaderContext.__name__="iron.data.ShaderContext";Object.assign(iron_data_ShaderContext.prototype,{__class__:iron_data_ShaderContext,raw:null,pipeState:null,constants:null,textureUnits:null,overrideContext:null,structure:null,instancingType:null});class iron_data_WorldData{constructor(raw,done){this.raw=raw;this.name=raw.name;let _gthis=this;if(raw.probe!=null){new iron_data_Probe(raw.probe,function(self){_gthis.probe=self;_gthis.loadEnvmap(done)})}else{this.loadEnvmap(done)}}loadEnvmap(done){let _gthis=this;if(this.raw.envmap!=null){iron_data_Data.getImage(this.raw.envmap,function(image){_gthis.envmap=image;done(_gthis)})}else{done(this)}}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getWorldRawByName(format.world_datas,id);if(raw==null){haxe_Log.trace('World data "'+id+'" not found!',{fileName:"Sources/iron/data/WorldData.hx",lineNumber:57,className:"iron.data.WorldData",methodName:"parse"});done(null)}new iron_data_WorldData(raw,done)})}static getEmptyIrradiance(){if(iron_data_WorldData.emptyIrr==null){iron_data_WorldData.emptyIrr=kha_arrays_Float32Array._new(28);let _g=0;let _g1=iron_data_WorldData.emptyIrr.byteLength>>2;while(_g<_g1){let i=_g++;iron_data_WorldData.emptyIrr.setFloat32(i*4,0,true)}}return iron_data_WorldData.emptyIrr}}$hxClasses["iron.data.WorldData"]=iron_data_WorldData;iron_data_WorldData.__name__="iron.data.WorldData";Object.assign(iron_data_WorldData.prototype,{__class__:iron_data_WorldData,name:null,raw:null,envmap:null,probe:null});class iron_data_Probe{constructor(raw,done){this.radianceMipmaps=[];this.raw=raw;let _gthis=this;this.setIrradiance(function(irr){_gthis.irradiance=irr;if(raw.radiance!=null){iron_data_Data.getImage(raw.radiance,function(rad){_gthis.radiance=rad;while(_gthis.radianceMipmaps.length<raw.radiance_mipmaps)_gthis.radianceMipmaps.push(null);let dot=raw.radiance.lastIndexOf(".");let ext=raw.radiance.substring(dot);let base=raw.radiance.substring(0,dot);let mipsLoaded=0;let _g=0;let _g1=raw.radiance_mipmaps;while(_g<_g1){let i=_g++;iron_data_Data.getImage(base+"_"+i+ext,function(mipimg){_gthis.radianceMipmaps[i]=mipimg;mipsLoaded+=1;if(mipsLoaded==raw.radiance_mipmaps){_gthis.radiance.setMipmaps(_gthis.radianceMipmaps);done(_gthis)}},true)}})}else{done(_gthis)}})}setIrradiance(done){if(this.raw.irradiance==null){done(iron_data_WorldData.getEmptyIrradiance())}else{let ext=this.raw.irradiance.endsWith(".json")?"":".arm";iron_data_Data.getBlob(this.raw.irradiance+ext,function(b){let irradianceParsed;if(ext==""){irradianceParsed=JSON.parse(b.toString())}else{let i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);irradianceParsed=iron_system_ArmPack.read(i)}let irr=kha_arrays_Float32Array._new(28);let v=irradianceParsed.irradiance.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(0,v,true);let v1=irradianceParsed.irradiance.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(4,v1,true);let v2=irradianceParsed.irradiance.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(8,v2,true);let v3=irradianceParsed.irradiance.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(12,v3,true);let v4=irradianceParsed.irradiance.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(16,v4,true);let v5=irradianceParsed.irradiance.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(20,v5,true);let v6=irradianceParsed.irradiance.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(24,v6,true);let v7=irradianceParsed.irradiance.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(28,v7,true);let v8=irradianceParsed.irradiance.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(32,v8,true);let v9=irradianceParsed.irradiance.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(36,v9,true);let v10=irradianceParsed.irradiance.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(40,v10,true);let v11=irradianceParsed.irradiance.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(44,v11,true);let v12=irradianceParsed.irradiance.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(48,v12,true);let v13=irradianceParsed.irradiance.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(52,v13,true);let v14=irradianceParsed.irradiance.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(56,v14,true);let v15=irradianceParsed.irradiance.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(60,v15,true);let v16=irradianceParsed.irradiance.getFloat32(64,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(64,v16,true);let v17=irradianceParsed.irradiance.getFloat32(68,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(68,v17,true);let v18=irradianceParsed.irradiance.getFloat32(72,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(72,v18,true);let v19=irradianceParsed.irradiance.getFloat32(76,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(76,v19,true);let v20=irradianceParsed.irradiance.getFloat32(80,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(80,v20,true);let v21=irradianceParsed.irradiance.getFloat32(84,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(84,v21,true);let v22=irradianceParsed.irradiance.getFloat32(88,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(88,v22,true);let v23=irradianceParsed.irradiance.getFloat32(92,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(92,v23,true);let v24=irradianceParsed.irradiance.getFloat32(96,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(96,v24,true);let v25=irradianceParsed.irradiance.getFloat32(100,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(100,v25,true);let v26=irradianceParsed.irradiance.getFloat32(104,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(104,v26,true);done(irr)})}}}$hxClasses["iron.data.Probe"]=iron_data_Probe;iron_data_Probe.__name__="iron.data.Probe";Object.assign(iron_data_Probe.prototype,{__class__:iron_data_Probe,raw:null,radiance:null,radianceMipmaps:null,irradiance:null});class iron_math_Mat3{constructor(_00,_10,_20,_01,_11,_21,_02,_12,_22){this.self=new kha_math_FastMatrix3(_00,_10,_20,_01,_11,_21,_02,_12,_22)}}$hxClasses["iron.math.Mat3"]=iron_math_Mat3;iron_math_Mat3.__name__="iron.math.Mat3";Object.assign(iron_math_Mat3.prototype,{__class__:iron_math_Mat3,self:null});class kha_math_FastMatrix4{constructor(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33){this._00=_00;this._10=_10;this._20=_20;this._30=_30;this._01=_01;this._11=_11;this._21=_21;this._31=_31;this._02=_02;this._12=_12;this._22=_22;this._32=_32;this._03=_03;this._13=_13;this._23=_23;this._33=_33}}$hxClasses["kha.math.FastMatrix4"]=kha_math_FastMatrix4;kha_math_FastMatrix4.__name__="kha.math.FastMatrix4";Object.assign(kha_math_FastMatrix4.prototype,{__class__:kha_math_FastMatrix4,_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null});class iron_math_Vec4{constructor(x,y,z,w){if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z;this.w=w}}$hxClasses["iron.math.Vec4"]=iron_math_Vec4;iron_math_Vec4.__name__="iron.math.Vec4";Object.assign(iron_math_Vec4.prototype,{__class__:iron_math_Vec4,x:null,y:null,z:null,w:null});class iron_math_Mat4{constructor(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33){this.self=new kha_math_FastMatrix4(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33)}}$hxClasses["iron.math.Mat4"]=iron_math_Mat4;iron_math_Mat4.__name__="iron.math.Mat4";Object.assign(iron_math_Mat4.prototype,{__class__:iron_math_Mat4,self:null});class iron_math_Quat{constructor(x,y,z,w){if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z;this.w=w}}$hxClasses["iron.math.Quat"]=iron_math_Quat;iron_math_Quat.__name__="iron.math.Quat";Object.assign(iron_math_Quat.prototype,{__class__:iron_math_Quat,x:null,y:null,z:null,w:null});class iron_math_Vec2{constructor(x,y){if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y}}$hxClasses["iron.math.Vec2"]=iron_math_Vec2;iron_math_Vec2.__name__="iron.math.Vec2";Object.assign(iron_math_Vec2.prototype,{__class__:iron_math_Vec2,x:null,y:null});class iron_object_Animation{constructor(){if(iron_object_Animation._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this.markerEvents=null;this.lastFrameIndex=-1;this.blendFactor=0;this.blendAction="";this.blendCurrent=0;this.blendTime=0;this.frameTime=.016666666666666666;this.paused=false;this.onComplete=null;this.frameIndex=0;this.loop=true;this.speed=1;this.time=0;this.action="";iron_Scene.active.animations.push(this);if(iron_Scene.active.raw.frame_time!=null){this.frameTime=iron_Scene.active.raw.frame_time}this.play()}play(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=0}if(action==null){action=""}if(blendTime>0){this.blendTime=blendTime;this.blendCurrent=0;this.blendAction=this.action;this.frameIndex=0;this.time=0}else{this.frameIndex=-1}this.action=action;this.onComplete=onComplete;this.speed=speed;this.loop=loop;this.paused=false}remove(){HxOverrides.remove(iron_Scene.active.animations,this)}update(delta){if(this.paused||this.speed==0){return}this.time+=delta*this.speed*iron_system_Time.scale;if(this.blendTime>0&&this.blendFactor==0){this.blendCurrent+=delta;if(this.blendCurrent>=this.blendTime){this.blendTime=0}}}isTrackEnd(track){if(this.speed>0){return this.frameIndex>=(track.frames.byteLength>>2)-1}else{return this.frameIndex<=0}}rewind(track){this.frameIndex=this.speed>0?0:(track.frames.byteLength>>2)-1;this.time=track.frames.getUint32(this.frameIndex*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime}updateTrack(anim){if(anim==null){return}let track=anim.tracks[0];if(this.frameIndex==-1){this.rewind(track)}let sign=this.speed>0?1:-1;while(true){let frameValues=track.frames;if(!(this.speed>0?this.frameIndex+1<frameValues.byteLength>>2&&this.time>frameValues.getUint32((this.frameIndex+1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime:this.frameIndex-1>-1&&this.time<frameValues.getUint32((this.frameIndex-1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime)){break}this.frameIndex+=sign}if(this.markerEvents!=null&&anim.marker_names!=null&&this.frameIndex!=this.lastFrameIndex){let _g=0;let _g1=anim.marker_frames.byteLength>>2;while(_g<_g1){let i=_g++;if(this.frameIndex==anim.marker_frames.getUint32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN)){let ar=this.markerEvents.h[anim.marker_names[i]];if(ar!=null){let _g=0;while(_g<ar.length){let f=ar[_g];++_g;f()}}}else{let _g=0;let _g1=this.frameIndex-this.lastFrameIndex;while(_g<_g1){let j=_g++;if(this.lastFrameIndex+j+1==anim.marker_frames.getUint32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN)){let ar=this.markerEvents.h[anim.marker_names[i]];if(ar!=null){let _g=0;while(_g<ar.length){let f=ar[_g];++_g;f()}}}}}}this.lastFrameIndex=this.frameIndex}if(this.isTrackEnd(track)){if(this.loop||this.blendTime>0){this.rewind(track)}else{this.frameIndex-=sign;this.paused=true}if(this.onComplete!=null&&this.blendTime==0){this.onComplete()}}}updateAnimSampled(anim,m){if(anim==null){return}let track=anim.tracks[0];let sign=this.speed>0?1:-1;let t=this.time;let ti=this.frameIndex;let t1=track.frames.getUint32(ti*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let t2=track.frames.getUint32((ti+sign)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let s=(t-t1)/(t2-t1);let _this=iron_object_Animation.m1;let a=track.values;let offset=ti*16;if(offset==null){offset=0}_this.self._00=a.getFloat32(offset*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._10=a.getFloat32((1+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._20=a.getFloat32((2+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._30=a.getFloat32((3+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._01=a.getFloat32((4+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._11=a.getFloat32((5+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._21=a.getFloat32((6+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._31=a.getFloat32((7+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._02=a.getFloat32((8+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._12=a.getFloat32((9+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._22=a.getFloat32((10+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._32=a.getFloat32((11+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._03=a.getFloat32((12+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._13=a.getFloat32((13+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._23=a.getFloat32((14+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._33=a.getFloat32((15+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let _this1=iron_object_Animation.m2;let a1=track.values;let offset1=(ti+sign)*16;if(offset1==null){offset1=0}_this1.self._00=a1.getFloat32(offset1*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._10=a1.getFloat32((1+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._20=a1.getFloat32((2+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._30=a1.getFloat32((3+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._01=a1.getFloat32((4+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._11=a1.getFloat32((5+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._21=a1.getFloat32((6+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._31=a1.getFloat32((7+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._02=a1.getFloat32((8+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._12=a1.getFloat32((9+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._22=a1.getFloat32((10+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._32=a1.getFloat32((11+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._03=a1.getFloat32((12+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._13=a1.getFloat32((13+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._23=a1.getFloat32((14+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._33=a1.getFloat32((15+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let _this2=iron_object_Animation.m1;let loc=iron_object_Animation.vpos;let quat=iron_object_Animation.q1;let scale=iron_object_Animation.vscl;loc.x=_this2.self._30;loc.y=_this2.self._31;loc.z=_this2.self._32;let _this3=iron_math_Mat4.helpVec;_this3.x=_this2.self._00;_this3.y=_this2.self._01;_this3.z=_this2.self._02;_this3.w=1;let _this4=_this3;scale.x=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this2.self._10;_this5.y=_this2.self._11;_this5.z=_this2.self._12;_this5.w=1;let _this6=_this5;scale.y=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=iron_math_Mat4.helpVec;_this7.x=_this2.self._20;_this7.y=_this2.self._21;_this7.z=_this2.self._22;_this7.w=1;let _this8=_this7;scale.z=Math.sqrt(_this8.x*_this8.x+_this8.y*_this8.y+_this8.z*_this8.z);let _this9=_this2.self;let m3=_this9._12;let m4=_this9._22;let m5=_this9._32;let m6=_this9._13;let m7=_this9._23;let m8=_this9._33;let c00=_this9._11*(m4*m8-m5*m7)-_this9._21*(m3*m8-m5*m6)+_this9._31*(m3*m7-m4*m6);let m31=_this9._12;let m41=_this9._22;let m51=_this9._32;let m61=_this9._13;let m71=_this9._23;let m81=_this9._33;let c01=_this9._10*(m41*m81-m51*m71)-_this9._20*(m31*m81-m51*m61)+_this9._30*(m31*m71-m41*m61);let m32=_this9._11;let m42=_this9._21;let m52=_this9._31;let m62=_this9._13;let m72=_this9._23;let m82=_this9._33;let c02=_this9._10*(m42*m82-m52*m72)-_this9._20*(m32*m82-m52*m62)+_this9._30*(m32*m72-m42*m62);let m33=_this9._11;let m43=_this9._21;let m53=_this9._31;let m63=_this9._12;let m73=_this9._22;let m83=_this9._32;let c03=_this9._10*(m43*m83-m53*m73)-_this9._20*(m33*m83-m53*m63)+_this9._30*(m33*m73-m43*m63);if(_this9._00*c00-_this9._01*c01+_this9._02*c02-_this9._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this2.self._00*invs;iron_math_Mat4.helpMat.self._01=_this2.self._01*invs;iron_math_Mat4.helpMat.self._02=_this2.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this2.self._10*invs;iron_math_Mat4.helpMat.self._11=_this2.self._11*invs;iron_math_Mat4.helpMat.self._12=_this2.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this2.self._20*invs;iron_math_Mat4.helpMat.self._21=_this2.self._21*invs;iron_math_Mat4.helpMat.self._22=_this2.self._22*invs;let m1=iron_math_Mat4.helpMat;let m11=m1.self._00;let m12=m1.self._10;let m13=m1.self._20;let m21=m1.self._01;let m22=m1.self._11;let m23=m1.self._21;let m311=m1.self._02;let m321=m1.self._12;let m331=m1.self._22;let tr=m11+m22+m331;let s1=0;if(tr>0){s1=.5/Math.sqrt(tr+1);quat.w=.25/s1;quat.x=(m321-m23)*s1;quat.y=(m13-m311)*s1;quat.z=(m21-m12)*s1}else if(m11>m22&&m11>m331){s1=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s1;quat.x=.25*s1;quat.y=(m12+m21)/s1;quat.z=(m13+m311)/s1}else if(m22>m331){s1=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s1;quat.x=(m12+m21)/s1;quat.y=.25*s1;quat.z=(m23+m321)/s1}else{s1=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s1;quat.x=(m13+m311)/s1;quat.y=(m23+m321)/s1;quat.z=.25*s1}let _this10=iron_object_Animation.m2;let loc1=iron_object_Animation.vpos2;let quat1=iron_object_Animation.q2;let scale1=iron_object_Animation.vscl2;loc1.x=_this10.self._30;loc1.y=_this10.self._31;loc1.z=_this10.self._32;let _this11=iron_math_Mat4.helpVec;_this11.x=_this10.self._00;_this11.y=_this10.self._01;_this11.z=_this10.self._02;_this11.w=1;let _this12=_this11;scale1.x=Math.sqrt(_this12.x*_this12.x+_this12.y*_this12.y+_this12.z*_this12.z);let _this13=iron_math_Mat4.helpVec;_this13.x=_this10.self._10;_this13.y=_this10.self._11;_this13.z=_this10.self._12;_this13.w=1;let _this14=_this13;scale1.y=Math.sqrt(_this14.x*_this14.x+_this14.y*_this14.y+_this14.z*_this14.z);let _this15=iron_math_Mat4.helpVec;_this15.x=_this10.self._20;_this15.y=_this10.self._21;_this15.z=_this10.self._22;_this15.w=1;let _this16=_this15;scale1.z=Math.sqrt(_this16.x*_this16.x+_this16.y*_this16.y+_this16.z*_this16.z);let _this17=_this10.self;let m34=_this17._12;let m44=_this17._22;let m54=_this17._32;let m64=_this17._13;let m74=_this17._23;let m84=_this17._33;let c001=_this17._11*(m44*m84-m54*m74)-_this17._21*(m34*m84-m54*m64)+_this17._31*(m34*m74-m44*m64);let m35=_this17._12;let m45=_this17._22;let m55=_this17._32;let m65=_this17._13;let m75=_this17._23;let m85=_this17._33;let c011=_this17._10*(m45*m85-m55*m75)-_this17._20*(m35*m85-m55*m65)+_this17._30*(m35*m75-m45*m65);let m36=_this17._11;let m46=_this17._21;let m56=_this17._31;let m66=_this17._13;let m76=_this17._23;let m86=_this17._33;let c021=_this17._10*(m46*m86-m56*m76)-_this17._20*(m36*m86-m56*m66)+_this17._30*(m36*m76-m46*m66);let m37=_this17._11;let m47=_this17._21;let m57=_this17._31;let m67=_this17._12;let m77=_this17._22;let m87=_this17._32;let c031=_this17._10*(m47*m87-m57*m77)-_this17._20*(m37*m87-m57*m67)+_this17._30*(m37*m77-m47*m67);if(_this17._00*c001-_this17._01*c011+_this17._02*c021-_this17._03*c031<0){scale1.x=-scale1.x}let invs1=1/scale1.x;iron_math_Mat4.helpMat.self._00=_this10.self._00*invs1;iron_math_Mat4.helpMat.self._01=_this10.self._01*invs1;iron_math_Mat4.helpMat.self._02=_this10.self._02*invs1;invs1=1/scale1.y;iron_math_Mat4.helpMat.self._10=_this10.self._10*invs1;iron_math_Mat4.helpMat.self._11=_this10.self._11*invs1;iron_math_Mat4.helpMat.self._12=_this10.self._12*invs1;invs1=1/scale1.z;iron_math_Mat4.helpMat.self._20=_this10.self._20*invs1;iron_math_Mat4.helpMat.self._21=_this10.self._21*invs1;iron_math_Mat4.helpMat.self._22=_this10.self._22*invs1;let m2=iron_math_Mat4.helpMat;let m111=m2.self._00;let m121=m2.self._10;let m131=m2.self._20;let m211=m2.self._01;let m221=m2.self._11;let m231=m2.self._21;let m312=m2.self._02;let m322=m2.self._12;let m332=m2.self._22;let tr1=m111+m221+m332;let s2=0;if(tr1>0){s2=.5/Math.sqrt(tr1+1);quat1.w=.25/s2;quat1.x=(m322-m231)*s2;quat1.y=(m131-m312)*s2;quat1.z=(m211-m121)*s2}else if(m111>m221&&m111>m332){s2=2*Math.sqrt(1+m111-m221-m332);quat1.w=(m322-m231)/s2;quat1.x=.25*s2;quat1.y=(m121+m211)/s2;quat1.z=(m131+m312)/s2}else if(m221>m332){s2=2*Math.sqrt(1+m221-m111-m332);quat1.w=(m131-m312)/s2;quat1.x=(m121+m211)/s2;quat1.y=.25*s2;quat1.z=(m231+m322)/s2}else{s2=2*Math.sqrt(1+m332-m111-m221);quat1.w=(m211-m121)/s2;quat1.x=(m131+m312)/s2;quat1.y=(m231+m322)/s2;quat1.z=.25*s2}let _this18=iron_object_Animation.vp;let from=iron_object_Animation.vpos;let to=iron_object_Animation.vpos2;_this18.x=from.x+(to.x-from.x)*s;_this18.y=from.y+(to.y-from.y)*s;_this18.z=from.z+(to.z-from.z)*s;let _this19=iron_object_Animation.vs;let from1=iron_object_Animation.vscl;let to1=iron_object_Animation.vscl2;_this19.x=from1.x+(to1.x-from1.x)*s;_this19.y=from1.y+(to1.y-from1.y)*s;_this19.z=from1.z+(to1.z-from1.z)*s;let _this20=iron_object_Animation.q3;let from2=iron_object_Animation.q1;let to2=iron_object_Animation.q2;let fromx=from2.x;let fromy=from2.y;let fromz=from2.z;let fromw=from2.w;let dot=from2.x*to2.x+from2.y*to2.y+from2.z*to2.z+from2.w*to2.w;if(dot<0){fromx=-fromx;fromy=-fromy;fromz=-fromz;fromw=-fromw}_this20.x=fromx+(to2.x-fromx)*s;_this20.y=fromy+(to2.y-fromy)*s;_this20.z=fromz+(to2.z-fromz)*s;_this20.w=fromw+(to2.w-fromw)*s;let l=Math.sqrt(_this20.x*_this20.x+_this20.y*_this20.y+_this20.z*_this20.z+_this20.w*_this20.w);if(l==0){_this20.x=0;_this20.y=0;_this20.z=0;_this20.w=0}else{l=1/l;_this20.x*=l;_this20.y*=l;_this20.z*=l;_this20.w*=l}let q=iron_object_Animation.q3;let x=q.x;let y=q.y;let z=q.z;let w=q.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;m.self._00=1-(yy+zz);m.self._10=xy-wz;m.self._20=xz+wy;m.self._01=xy+wz;m.self._11=1-(xx+zz);m.self._21=yz-wx;m.self._02=xz-wy;m.self._12=yz+wx;m.self._22=1-(xx+yy);m.self._03=0;m.self._13=0;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1;let v=iron_object_Animation.vs;let x1=v.x;let y1=v.y;let z1=v.z;m.self._00*=x1;m.self._01*=x1;m.self._02*=x1;m.self._03*=x1;m.self._10*=y1;m.self._11*=y1;m.self._12*=y1;m.self._13*=y1;m.self._20*=z1;m.self._21*=z1;m.self._22*=z1;m.self._23*=z1;m.self._30=iron_object_Animation.vp.x;m.self._31=iron_object_Animation.vp.y;m.self._32=iron_object_Animation.vp.z}}$hxClasses["iron.object.Animation"]=iron_object_Animation;iron_object_Animation.__name__="iron.object.Animation";Object.assign(iron_object_Animation.prototype,{__class__:iron_object_Animation,isSkinned:null,isSampled:null,action:null,armature:null,time:null,speed:null,loop:null,frameIndex:null,onComplete:null,paused:null,frameTime:null,blendTime:null,blendCurrent:null,blendAction:null,blendFactor:null,lastFrameIndex:null,markerEvents:null});class iron_object_BoneAnimation extends iron_object_Animation{constructor(armatureName){iron_object_Animation._hx_skip_constructor=true;super();iron_object_Animation._hx_skip_constructor=false;this._hx_constructor(armatureName)}_hx_constructor(armatureName){if(armatureName==null){armatureName=""}this.onUpdates=null;this.relativeBoneConstraints=false;this.constraintMats=null;this.constraintTargetsI=null;this.constraintTargets=null;this.boneChildren=null;this.matsFastBlendSort=[];this.matsFastBlend=[];this.matsFastSort=[];this.matsFast=[];this.applyParent=null;this.absMats=null;this.skeletonMatsBlend=null;this.skeletonBonesBlend=null;this.skeletonMats=null;this.skeletonBones=null;super._hx_constructor();this.isSampled=false;let _g=0;let _g1=iron_Scene.active.armatures;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==armatureName){this.armature=a;break}}}setSkin(mo){this.object=mo;this.data=mo!=null?mo.data:null;this.isSkinned=this.data!=null&&this.data.isSkinned;let _gthis=this;if(this.isSkinned){let boneSize=8;this.skinBuffer=kha_arrays_Float32Array._new(iron_object_BoneAnimation.skinMaxBones*boneSize);let _g=0;let _g1=this.skinBuffer.byteLength>>2;while(_g<_g1){let i=_g++;this.skinBuffer.setFloat32(i*4,0,true)}let _this=this.object.transform.rot;_this.x=0;_this.y=0;_this.z=0;_this.w=1;this.object.transform.buildMatrix();let refs=mo.parent.raw.bone_actions;if(refs!=null&&refs.length>0){iron_data_Data.getSceneRaw(refs[0],function(action){_gthis.play(action.name)})}}if(this.object.parent.raw.relative_bone_constraints){this.relativeBoneConstraints=true}}addBoneChild(bone,o){if(this.boneChildren==null){this.boneChildren=new haxe_ds_StringMap}let ar=this.boneChildren.h[bone];if(ar==null){ar=[];this.boneChildren.h[bone]=ar}ar.push(o)}updateBoneChildren(bone,bm){let ar=this.boneChildren.h[bone.name];if(ar==null){return}let _g=0;while(_g<ar.length){let o=ar[_g];++_g;let t=o.transform;if(t.boneParent==null){t.boneParent=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}if(o.raw.parent_bone_tail!=null){if(o.raw.parent_bone_connected||this.isSkinned){let v=o.raw.parent_bone_tail;let _this=t.boneParent;let x=v.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);let y=v.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=v.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=x;_this.self._31=y;_this.self._32=z;_this.self._33=1;let _this1=t.boneParent;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=bm.self._00;let b1=bm.self._10;let b2=bm.self._20;let b3=bm.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._01;b1=bm.self._11;b2=bm.self._21;b3=bm.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._02;b1=bm.self._12;b2=bm.self._22;b3=bm.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._03;b1=bm.self._13;b2=bm.self._23;b3=bm.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3}else{let v=o.raw.parent_bone_tail_pose;let _this=t.boneParent;_this.self._00=bm.self._00;_this.self._01=bm.self._01;_this.self._02=bm.self._02;_this.self._03=bm.self._03;_this.self._10=bm.self._10;_this.self._11=bm.self._11;_this.self._12=bm.self._12;_this.self._13=bm.self._13;_this.self._20=bm.self._20;_this.self._21=bm.self._21;_this.self._22=bm.self._22;_this.self._23=bm.self._23;_this.self._30=bm.self._30;_this.self._31=bm.self._31;_this.self._32=bm.self._32;_this.self._33=bm.self._33;let _this1=t.boneParent;let x=v.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);let y=v.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=v.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._00+=x*_this1.self._03;_this1.self._01+=y*_this1.self._03;_this1.self._02+=z*_this1.self._03;_this1.self._10+=x*_this1.self._13;_this1.self._11+=y*_this1.self._13;_this1.self._12+=z*_this1.self._13;_this1.self._20+=x*_this1.self._23;_this1.self._21+=y*_this1.self._23;_this1.self._22+=z*_this1.self._23;_this1.self._30+=x*_this1.self._33;_this1.self._31+=y*_this1.self._33;_this1.self._32+=z*_this1.self._33}}else{let _this=t.boneParent;_this.self._00=bm.self._00;_this.self._01=bm.self._01;_this.self._02=bm.self._02;_this.self._03=bm.self._03;_this.self._10=bm.self._10;_this.self._11=bm.self._11;_this.self._12=bm.self._12;_this.self._13=bm.self._13;_this.self._20=bm.self._20;_this.self._21=bm.self._21;_this.self._22=bm.self._22;_this.self._23=bm.self._23;_this.self._30=bm.self._30;_this.self._31=bm.self._31;_this.self._32=bm.self._32;_this.self._33=bm.self._33}t.buildMatrix()}}numParents(b){let i=0;let p=b.parent;while(p!=null){++i;p=p.parent}return i}setMats(){while(this.matsFast.length<this.skeletonBones.length){this.matsFast.push(new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));this.matsFastSort.push(this.matsFastSort.length)}let _gthis=this;this.matsFastSort.sort(function(a,b){let i=_gthis.numParents(_gthis.skeletonBones[a]);let j=_gthis.numParents(_gthis.skeletonBones[b]);if(i<j){return-1}else if(i>j){return 1}else{return 0}});if(this.skeletonBonesBlend!=null){while(this.matsFastBlend.length<this.skeletonBonesBlend.length){this.matsFastBlend.push(new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));this.matsFastBlendSort.push(this.matsFastBlendSort.length)}this.matsFastBlendSort.sort(function(a,b){let i=_gthis.numParents(_gthis.skeletonBonesBlend[a]);let j=_gthis.numParents(_gthis.skeletonBonesBlend[b]);if(i<j){return-1}else if(i>j){return 1}else{return 0}})}}setAction(action){if(this.isSkinned){this.skeletonBones=this.data.geom.actions.h[action];this.skeletonMats=this.data.geom.mats.h[action];this.skeletonBonesBlend=null;this.skeletonMatsBlend=null}else{this.armature.initMats();let a=this.armature.getAction(action);this.skeletonBones=a.bones;this.skeletonMats=a.mats}this.setMats()}setActionBlend(action){if(this.isSkinned){this.skeletonBonesBlend=this.skeletonBones;this.skeletonMatsBlend=this.skeletonMats;this.skeletonBones=this.data.geom.actions.h[action];this.skeletonMats=this.data.geom.mats.h[action]}else{this.armature.initMats();let a=this.armature.getAction(action);this.skeletonBones=a.bones;this.skeletonMats=a.mats}this.setMats()}play(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=.2}if(action==null){action=""}super.play(action,onComplete,blendTime,speed,loop);if(action!=""){if(blendTime>0){this.setActionBlend(action)}else{this.setAction(action)}}this.blendFactor=0}update(delta){if(!this.isSkinned&&this.skeletonBones==null){this.setAction(this.armature.actions[0].name)}if(this.object!=null&&(!this.object.visible||this.object.culled)){return}if(this.skeletonBones==null||this.skeletonBones.length==0){return}super.update(delta);if(this.paused||this.speed==0){return}let lastBones=this.skeletonBones;let _g=0;let _g1=this.skeletonBones;while(_g<_g1.length){let b=_g1[_g];++_g;if(b.anim!=null){this.updateTrack(b.anim);break}}if(lastBones!=this.skeletonBones){return}let _g2=0;let _g3=this.skeletonBones.length;while(_g2<_g3){let i=_g2++;if(!this.skeletonBones[i].is_ik_fk_only){this.updateAnimSampled(this.skeletonBones[i].anim,this.skeletonMats[i])}}if(this.blendTime>0&&this.skeletonBonesBlend!=null){let _g=0;let _g1=this.skeletonBonesBlend;while(_g<_g1.length){let b=_g1[_g];++_g;if(b.anim!=null){this.updateTrack(b.anim);break}}let _g2=0;let _g3=this.skeletonBonesBlend.length;while(_g2<_g3){let i=_g2++;this.updateAnimSampled(this.skeletonBonesBlend[i].anim,this.skeletonMatsBlend[i])}}this.updateConstraints();if(this.onUpdates!=null){let i=0;let l=this.onUpdates.length;while(i<l){this.onUpdates[i]();if(l<=this.onUpdates.length){++i}else{l=this.onUpdates.length}}}let _g4=0;let _g5=this.skeletonBones.length;while(_g4<_g5){let i=_g4++;this.multParent(this.matsFastSort[i],this.matsFast,this.skeletonBones,this.skeletonMats)}if(this.skeletonBonesBlend!=null){let _g=0;let _g1=this.skeletonBonesBlend.length;while(_g<_g1){let i=_g++;this.multParent(this.matsFastBlendSort[i],this.matsFastBlend,this.skeletonBonesBlend,this.skeletonMatsBlend)}}if(this.isSkinned){this.updateSkinGpu()}else{this.updateBonesOnly()}}multParent(i,fasts,bones,mats){let f=fasts[i];if(this.applyParent!=null&&!this.applyParent[i]){let m=mats[i];f.self._00=m.self._00;f.self._01=m.self._01;f.self._02=m.self._02;f.self._03=m.self._03;f.self._10=m.self._10;f.self._11=m.self._11;f.self._12=m.self._12;f.self._13=m.self._13;f.self._20=m.self._20;f.self._21=m.self._21;f.self._22=m.self._22;f.self._23=m.self._23;f.self._30=m.self._30;f.self._31=m.self._31;f.self._32=m.self._32;f.self._33=m.self._33;return}let p=bones[i].parent;let bi=this.getBoneIndex(p,bones);if(p==null||bi==-1){let m=mats[i];f.self._00=m.self._00;f.self._01=m.self._01;f.self._02=m.self._02;f.self._03=m.self._03;f.self._10=m.self._10;f.self._11=m.self._11;f.self._12=m.self._12;f.self._13=m.self._13;f.self._20=m.self._20;f.self._21=m.self._21;f.self._22=m.self._22;f.self._23=m.self._23;f.self._30=m.self._30;f.self._31=m.self._31;f.self._32=m.self._32;f.self._33=m.self._33}else{let b=fasts[bi];let a=mats[i];let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;f.self._00=a00*b0+a01*b1+a02*b2+a03*b3;f.self._10=a10*b0+a11*b1+a12*b2+a13*b3;f.self._20=a20*b0+a21*b1+a22*b2+a23*b3;f.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;f.self._01=a00*b0+a01*b1+a02*b2+a03*b3;f.self._11=a10*b0+a11*b1+a12*b2+a13*b3;f.self._21=a20*b0+a21*b1+a22*b2+a23*b3;f.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;f.self._02=a00*b0+a01*b1+a02*b2+a03*b3;f.self._12=a10*b0+a11*b1+a12*b2+a13*b3;f.self._22=a20*b0+a21*b1+a22*b2+a23*b3;f.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;f.self._03=a00*b0+a01*b1+a02*b2+a03*b3;f.self._13=a10*b0+a11*b1+a12*b2+a13*b3;f.self._23=a20*b0+a21*b1+a22*b2+a23*b3;f.self._33=a30*b0+a31*b1+a32*b2+a33*b3}}getConstraintsFromScene(cs){if(this.constraintTargets==null){this.constraintTargets=[];this.constraintTargetsI=[];let _g=0;while(_g<cs.length){let c=cs[_g];++_g;let o=iron_Scene.active.getChild(c.target);this.constraintTargets.push(o);let m=null;if(o!=null){let _this=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);let m1=o.transform.world;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;m=_this;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){m.self._00=1;m.self._01=0;m.self._02=0;m.self._03=0;m.self._10=0;m.self._11=1;m.self._12=0;m.self._13=0;m.self._20=0;m.self._21=0;m.self._22=1;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1}else{det=1/det;m.self._00=(a11*b11-a12*b10+a13*b09)*det;m.self._01=(a02*b10-a01*b11-a03*b09)*det;m.self._02=(a31*b05-a32*b04+a33*b03)*det;m.self._03=(a22*b04-a21*b05-a23*b03)*det;m.self._10=(a12*b08-a10*b11-a13*b07)*det;m.self._11=(a00*b11-a02*b08+a03*b07)*det;m.self._12=(a32*b02-a30*b05-a33*b01)*det;m.self._13=(a20*b05-a22*b02+a23*b01)*det;m.self._20=(a10*b10-a11*b08+a13*b06)*det;m.self._21=(a01*b08-a00*b10-a03*b06)*det;m.self._22=(a30*b04-a31*b02+a33*b00)*det;m.self._23=(a21*b02-a20*b04-a23*b00)*det;m.self._30=(a11*b07-a10*b09-a12*b06)*det;m.self._31=(a00*b09-a01*b07+a02*b06)*det;m.self._32=(a31*b01-a30*b03-a32*b00)*det;m.self._33=(a20*b03-a21*b01+a22*b00)*det}}this.constraintTargetsI.push(m)}this.constraintMats=new haxe_ds_ObjectMap}}getConstraintsFromParentRelative(cs){if(this.constraintTargets==null){this.constraintTargets=[];this.constraintTargetsI=[];let conParent=this.object.parent.parent;if(conParent==null){return}let _g=0;while(_g<cs.length){let c=cs[_g];++_g;let o=conParent.getChild(c.target);this.constraintTargets.push(o);let m=null;if(o!=null){let _this=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);let m1=o.transform.world;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;m=_this;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){m.self._00=1;m.self._01=0;m.self._02=0;m.self._03=0;m.self._10=0;m.self._11=1;m.self._12=0;m.self._13=0;m.self._20=0;m.self._21=0;m.self._22=1;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1}else{det=1/det;m.self._00=(a11*b11-a12*b10+a13*b09)*det;m.self._01=(a02*b10-a01*b11-a03*b09)*det;m.self._02=(a31*b05-a32*b04+a33*b03)*det;m.self._03=(a22*b04-a21*b05-a23*b03)*det;m.self._10=(a12*b08-a10*b11-a13*b07)*det;m.self._11=(a00*b11-a02*b08+a03*b07)*det;m.self._12=(a32*b02-a30*b05-a33*b01)*det;m.self._13=(a20*b05-a22*b02+a23*b01)*det;m.self._20=(a10*b10-a11*b08+a13*b06)*det;m.self._21=(a01*b08-a00*b10-a03*b06)*det;m.self._22=(a30*b04-a31*b02+a33*b00)*det;m.self._23=(a21*b02-a20*b04-a23*b00)*det;m.self._30=(a11*b07-a10*b09-a12*b06)*det;m.self._31=(a00*b09-a01*b07+a02*b06)*det;m.self._32=(a31*b01-a30*b03-a32*b00)*det;m.self._33=(a20*b03-a21*b01+a22*b00)*det}}this.constraintTargetsI.push(m)}this.constraintMats=new haxe_ds_ObjectMap}}updateConstraints(){if(this.data==null){return}let cs=this.data.raw.skin.constraints;if(cs==null){return}if(this.relativeBoneConstraints){this.getConstraintsFromParentRelative(cs)}else{this.getConstraintsFromScene(cs)}let _g=0;let _g1=cs.length;while(_g<_g1){let i=_g++;let c=cs[i];let bone=this.getBone(c.bone);if(bone==null){continue}let o=this.constraintTargets[i];if(o==null){continue}if(c.type=="CHILD_OF"){let m=this.constraintMats.h[bone.__id__];if(m==null){m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.constraintMats.set(bone,m)}let m1=this.object.parent.transform.world;m.self._00=m1.self._00;m.self._01=m1.self._01;m.self._02=m1.self._02;m.self._03=m1.self._03;m.self._10=m1.self._10;m.self._11=m1.self._11;m.self._12=m1.self._12;m.self._13=m1.self._13;m.self._20=m1.self._20;m.self._21=m1.self._21;m.self._22=m1.self._22;m.self._23=m1.self._23;m.self._30=m1.self._30;m.self._31=m1.self._31;m.self._32=m1.self._32;m.self._33=m1.self._33;let m2=this.constraintTargetsI[i];let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;m.self._00=a00*b0+a01*b1+a02*b2+a03*b3;m.self._10=a10*b0+a11*b1+a12*b2+a13*b3;m.self._20=a20*b0+a21*b1+a22*b2+a23*b3;m.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;m.self._01=a00*b0+a01*b1+a02*b2+a03*b3;m.self._11=a10*b0+a11*b1+a12*b2+a13*b3;m.self._21=a20*b0+a21*b1+a22*b2+a23*b3;m.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;m.self._02=a00*b0+a01*b1+a02*b2+a03*b3;m.self._12=a10*b0+a11*b1+a12*b2+a13*b3;m.self._22=a20*b0+a21*b1+a22*b2+a23*b3;m.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;m.self._03=a00*b0+a01*b1+a02*b2+a03*b3;m.self._13=a10*b0+a11*b1+a12*b2+a13*b3;m.self._23=a20*b0+a21*b1+a22*b2+a23*b3;m.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let m3=o.transform.world;let a001=m.self._00;let a011=m.self._01;let a021=m.self._02;let a031=m.self._03;let a101=m.self._10;let a111=m.self._11;let a121=m.self._12;let a131=m.self._13;let a201=m.self._20;let a211=m.self._21;let a221=m.self._22;let a231=m.self._23;let a301=m.self._30;let a311=m.self._31;let a321=m.self._32;let a331=m.self._33;let b01=m3.self._00;let b11=m3.self._10;let b21=m3.self._20;let b31=m3.self._30;m.self._00=a001*b01+a011*b11+a021*b21+a031*b31;m.self._10=a101*b01+a111*b11+a121*b21+a131*b31;m.self._20=a201*b01+a211*b11+a221*b21+a231*b31;m.self._30=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._01;b11=m3.self._11;b21=m3.self._21;b31=m3.self._31;m.self._01=a001*b01+a011*b11+a021*b21+a031*b31;m.self._11=a101*b01+a111*b11+a121*b21+a131*b31;m.self._21=a201*b01+a211*b11+a221*b21+a231*b31;m.self._31=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._02;b11=m3.self._12;b21=m3.self._22;b31=m3.self._32;m.self._02=a001*b01+a011*b11+a021*b21+a031*b31;m.self._12=a101*b01+a111*b11+a121*b21+a131*b31;m.self._22=a201*b01+a211*b11+a221*b21+a231*b31;m.self._32=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._03;b11=m3.self._13;b21=m3.self._23;b31=m3.self._33;m.self._03=a001*b01+a011*b11+a021*b21+a031*b31;m.self._13=a101*b01+a111*b11+a121*b21+a131*b31;m.self._23=a201*b01+a211*b11+a221*b21+a231*b31;m.self._33=a301*b01+a311*b11+a321*b21+a331*b31;let _this=iron_object_BoneAnimation.m1;let m4=this.object.parent.transform.world;let a002=m4.self._00;let a012=m4.self._01;let a022=m4.self._02;let a032=m4.self._03;let a102=m4.self._10;let a112=m4.self._11;let a122=m4.self._12;let a132=m4.self._13;let a202=m4.self._20;let a212=m4.self._21;let a222=m4.self._22;let a232=m4.self._23;let a302=m4.self._30;let a312=m4.self._31;let a322=m4.self._32;let a332=m4.self._33;let b00=a002*a112-a012*a102;let b011=a002*a122-a022*a102;let b02=a002*a132-a032*a102;let b03=a012*a122-a022*a112;let b04=a012*a132-a032*a112;let b05=a022*a132-a032*a122;let b06=a202*a312-a212*a302;let b07=a202*a322-a222*a302;let b08=a202*a332-a232*a302;let b09=a212*a322-a222*a312;let b10=a212*a332-a232*a312;let b111=a222*a332-a232*a322;let det=b00*b111-b011*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a112*b111-a122*b10+a132*b09)*det;_this.self._01=(a022*b10-a012*b111-a032*b09)*det;_this.self._02=(a312*b05-a322*b04+a332*b03)*det;_this.self._03=(a222*b04-a212*b05-a232*b03)*det;_this.self._10=(a122*b08-a102*b111-a132*b07)*det;_this.self._11=(a002*b111-a022*b08+a032*b07)*det;_this.self._12=(a322*b02-a302*b05-a332*b011)*det;_this.self._13=(a202*b05-a222*b02+a232*b011)*det;_this.self._20=(a102*b10-a112*b08+a132*b06)*det;_this.self._21=(a012*b08-a002*b10-a032*b06)*det;_this.self._22=(a302*b04-a312*b02+a332*b00)*det;_this.self._23=(a212*b02-a202*b04-a232*b00)*det;_this.self._30=(a112*b07-a102*b09-a122*b06)*det;_this.self._31=(a002*b09-a012*b07+a022*b06)*det;_this.self._32=(a312*b011-a302*b03-a322*b00)*det;_this.self._33=(a202*b03-a212*b011+a222*b00)*det}let m5=iron_object_BoneAnimation.m1;let a003=m.self._00;let a013=m.self._01;let a023=m.self._02;let a033=m.self._03;let a103=m.self._10;let a113=m.self._11;let a123=m.self._12;let a133=m.self._13;let a203=m.self._20;let a213=m.self._21;let a223=m.self._22;let a233=m.self._23;let a303=m.self._30;let a313=m.self._31;let a323=m.self._32;let a333=m.self._33;let b010=m5.self._00;let b12=m5.self._10;let b22=m5.self._20;let b32=m5.self._30;m.self._00=a003*b010+a013*b12+a023*b22+a033*b32;m.self._10=a103*b010+a113*b12+a123*b22+a133*b32;m.self._20=a203*b010+a213*b12+a223*b22+a233*b32;m.self._30=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._01;b12=m5.self._11;b22=m5.self._21;b32=m5.self._31;m.self._01=a003*b010+a013*b12+a023*b22+a033*b32;m.self._11=a103*b010+a113*b12+a123*b22+a133*b32;m.self._21=a203*b010+a213*b12+a223*b22+a233*b32;m.self._31=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._02;b12=m5.self._12;b22=m5.self._22;b32=m5.self._32;m.self._02=a003*b010+a013*b12+a023*b22+a033*b32;m.self._12=a103*b010+a113*b12+a123*b22+a133*b32;m.self._22=a203*b010+a213*b12+a223*b22+a233*b32;m.self._32=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._03;b12=m5.self._13;b22=m5.self._23;b32=m5.self._33;m.self._03=a003*b010+a013*b12+a023*b22+a033*b32;m.self._13=a103*b010+a113*b12+a123*b22+a133*b32;m.self._23=a203*b010+a213*b12+a223*b22+a233*b32;m.self._33=a303*b010+a313*b12+a323*b22+a333*b32}}}updateBonesOnly(){if(this.boneChildren!=null){let _g=0;let _g1=this.skeletonBones.length;while(_g<_g1){let i=_g++;let b=this.skeletonBones[i];let _this=iron_object_BoneAnimation.m;let m=this.matsFast[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;this.updateBoneChildren(b,iron_object_BoneAnimation.m)}}}updateSkinGpu(){let bones=this.skeletonBones;let s=this.blendCurrent/this.blendTime;s=s*s*(3-2*s);if(this.blendFactor!=0){s=1-this.blendFactor}let _g=0;let _g1=bones.length;while(_g<_g1){let i=_g++;if(this.constraintMats!=null){let m=this.constraintMats.h[bones[i].__id__];if(m!=null){this.updateSkinBuffer(m,i);continue}}let _this=iron_object_BoneAnimation.m;let m=this.matsFast[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;if(this.blendTime>0&&this.skeletonBonesBlend!=null){let _this=iron_object_BoneAnimation.m1;let m=this.matsFastBlend[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;let _this1=iron_object_BoneAnimation.m1;let loc=iron_object_BoneAnimation.vpos;let quat=iron_object_BoneAnimation.q1;let scale=iron_object_BoneAnimation.vscl;loc.x=_this1.self._30;loc.y=_this1.self._31;loc.z=_this1.self._32;let _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._00;_this2.y=_this1.self._01;_this2.z=_this1.self._02;_this2.w=1;let _this3=_this2;scale.x=Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);let _this4=iron_math_Mat4.helpVec;_this4.x=_this1.self._10;_this4.y=_this1.self._11;_this4.z=_this1.self._12;_this4.w=1;let _this5=_this4;scale.y=Math.sqrt(_this5.x*_this5.x+_this5.y*_this5.y+_this5.z*_this5.z);let _this6=iron_math_Mat4.helpVec;_this6.x=_this1.self._20;_this6.y=_this1.self._21;_this6.z=_this1.self._22;_this6.w=1;let _this7=_this6;scale.z=Math.sqrt(_this7.x*_this7.x+_this7.y*_this7.y+_this7.z*_this7.z);let _this8=_this1.self;let m3=_this8._12;let m4=_this8._22;let m5=_this8._32;let m6=_this8._13;let m7=_this8._23;let m8=_this8._33;let c00=_this8._11*(m4*m8-m5*m7)-_this8._21*(m3*m8-m5*m6)+_this8._31*(m3*m7-m4*m6);let m31=_this8._12;let m41=_this8._22;let m51=_this8._32;let m61=_this8._13;let m71=_this8._23;let m81=_this8._33;let c01=_this8._10*(m41*m81-m51*m71)-_this8._20*(m31*m81-m51*m61)+_this8._30*(m31*m71-m41*m61);let m32=_this8._11;let m42=_this8._21;let m52=_this8._31;let m62=_this8._13;let m72=_this8._23;let m82=_this8._33;let c02=_this8._10*(m42*m82-m52*m72)-_this8._20*(m32*m82-m52*m62)+_this8._30*(m32*m72-m42*m62);let m33=_this8._11;let m43=_this8._21;let m53=_this8._31;let m63=_this8._12;let m73=_this8._22;let m83=_this8._32;let c03=_this8._10*(m43*m83-m53*m73)-_this8._20*(m33*m83-m53*m63)+_this8._30*(m33*m73-m43*m63);if(_this8._00*c00-_this8._01*c01+_this8._02*c02-_this8._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this1.self._00*invs;iron_math_Mat4.helpMat.self._01=_this1.self._01*invs;iron_math_Mat4.helpMat.self._02=_this1.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this1.self._10*invs;iron_math_Mat4.helpMat.self._11=_this1.self._11*invs;iron_math_Mat4.helpMat.self._12=_this1.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this1.self._20*invs;iron_math_Mat4.helpMat.self._21=_this1.self._21*invs;iron_math_Mat4.helpMat.self._22=_this1.self._22*invs;let m1=iron_math_Mat4.helpMat;let m11=m1.self._00;let m12=m1.self._10;let m13=m1.self._20;let m21=m1.self._01;let m22=m1.self._11;let m23=m1.self._21;let m311=m1.self._02;let m321=m1.self._12;let m331=m1.self._22;let tr=m11+m22+m331;let s1=0;if(tr>0){s1=.5/Math.sqrt(tr+1);quat.w=.25/s1;quat.x=(m321-m23)*s1;quat.y=(m13-m311)*s1;quat.z=(m21-m12)*s1}else if(m11>m22&&m11>m331){s1=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s1;quat.x=.25*s1;quat.y=(m12+m21)/s1;quat.z=(m13+m311)/s1}else if(m22>m331){s1=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s1;quat.x=(m12+m21)/s1;quat.y=.25*s1;quat.z=(m23+m321)/s1}else{s1=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s1;quat.x=(m13+m311)/s1;quat.y=(m23+m321)/s1;quat.z=.25*s1}let _this9=iron_object_BoneAnimation.m;let loc1=iron_object_BoneAnimation.vpos2;let quat1=iron_object_BoneAnimation.q2;let scale1=iron_object_BoneAnimation.vscl2;loc1.x=_this9.self._30;loc1.y=_this9.self._31;loc1.z=_this9.self._32;let _this10=iron_math_Mat4.helpVec;_this10.x=_this9.self._00;_this10.y=_this9.self._01;_this10.z=_this9.self._02;_this10.w=1;let _this11=_this10;scale1.x=Math.sqrt(_this11.x*_this11.x+_this11.y*_this11.y+_this11.z*_this11.z);let _this12=iron_math_Mat4.helpVec;_this12.x=_this9.self._10;_this12.y=_this9.self._11;_this12.z=_this9.self._12;_this12.w=1;let _this13=_this12;scale1.y=Math.sqrt(_this13.x*_this13.x+_this13.y*_this13.y+_this13.z*_this13.z);let _this14=iron_math_Mat4.helpVec;_this14.x=_this9.self._20;_this14.y=_this9.self._21;_this14.z=_this9.self._22;_this14.w=1;let _this15=_this14;scale1.z=Math.sqrt(_this15.x*_this15.x+_this15.y*_this15.y+_this15.z*_this15.z);let _this16=_this9.self;let m34=_this16._12;let m44=_this16._22;let m54=_this16._32;let m64=_this16._13;let m74=_this16._23;let m84=_this16._33;let c001=_this16._11*(m44*m84-m54*m74)-_this16._21*(m34*m84-m54*m64)+_this16._31*(m34*m74-m44*m64);let m35=_this16._12;let m45=_this16._22;let m55=_this16._32;let m65=_this16._13;let m75=_this16._23;let m85=_this16._33;let c011=_this16._10*(m45*m85-m55*m75)-_this16._20*(m35*m85-m55*m65)+_this16._30*(m35*m75-m45*m65);let m36=_this16._11;let m46=_this16._21;let m56=_this16._31;let m66=_this16._13;let m76=_this16._23;let m86=_this16._33;let c021=_this16._10*(m46*m86-m56*m76)-_this16._20*(m36*m86-m56*m66)+_this16._30*(m36*m76-m46*m66);let m37=_this16._11;let m47=_this16._21;let m57=_this16._31;let m67=_this16._12;let m77=_this16._22;let m87=_this16._32;let c031=_this16._10*(m47*m87-m57*m77)-_this16._20*(m37*m87-m57*m67)+_this16._30*(m37*m77-m47*m67);if(_this16._00*c001-_this16._01*c011+_this16._02*c021-_this16._03*c031<0){scale1.x=-scale1.x}let invs1=1/scale1.x;iron_math_Mat4.helpMat.self._00=_this9.self._00*invs1;iron_math_Mat4.helpMat.self._01=_this9.self._01*invs1;iron_math_Mat4.helpMat.self._02=_this9.self._02*invs1;invs1=1/scale1.y;iron_math_Mat4.helpMat.self._10=_this9.self._10*invs1;iron_math_Mat4.helpMat.self._11=_this9.self._11*invs1;iron_math_Mat4.helpMat.self._12=_this9.self._12*invs1;invs1=1/scale1.z;iron_math_Mat4.helpMat.self._20=_this9.self._20*invs1;iron_math_Mat4.helpMat.self._21=_this9.self._21*invs1;iron_math_Mat4.helpMat.self._22=_this9.self._22*invs1;let m2=iron_math_Mat4.helpMat;let m111=m2.self._00;let m121=m2.self._10;let m131=m2.self._20;let m211=m2.self._01;let m221=m2.self._11;let m231=m2.self._21;let m312=m2.self._02;let m322=m2.self._12;let m332=m2.self._22;let tr1=m111+m221+m332;let s2=0;if(tr1>0){s2=.5/Math.sqrt(tr1+1);quat1.w=.25/s2;quat1.x=(m322-m231)*s2;quat1.y=(m131-m312)*s2;quat1.z=(m211-m121)*s2}else if(m111>m221&&m111>m332){s2=2*Math.sqrt(1+m111-m221-m332);quat1.w=(m322-m231)/s2;quat1.x=.25*s2;quat1.y=(m121+m211)/s2;quat1.z=(m131+m312)/s2}else if(m221>m332){s2=2*Math.sqrt(1+m221-m111-m332);quat1.w=(m131-m312)/s2;quat1.x=(m121+m211)/s2;quat1.y=.25*s2;quat1.z=(m231+m322)/s2}else{s2=2*Math.sqrt(1+m332-m111-m221);quat1.w=(m211-m121)/s2;quat1.x=(m131+m312)/s2;quat1.y=(m231+m322)/s2;quat1.z=.25*s2}let _this17=iron_object_BoneAnimation.v1;let from=iron_object_BoneAnimation.vpos;let to=iron_object_BoneAnimation.vpos2;_this17.x=from.x+(to.x-from.x)*s;_this17.y=from.y+(to.y-from.y)*s;_this17.z=from.z+(to.z-from.z)*s;let _this18=iron_object_BoneAnimation.v2;let from1=iron_object_BoneAnimation.vscl;let to1=iron_object_BoneAnimation.vscl2;_this18.x=from1.x+(to1.x-from1.x)*s;_this18.y=from1.y+(to1.y-from1.y)*s;_this18.z=from1.z+(to1.z-from1.z)*s;let _this19=iron_object_BoneAnimation.q3;let from2=iron_object_BoneAnimation.q1;let to2=iron_object_BoneAnimation.q2;let fromx=from2.x;let fromy=from2.y;let fromz=from2.z;let fromw=from2.w;let dot=from2.x*to2.x+from2.y*to2.y+from2.z*to2.z+from2.w*to2.w;if(dot<0){fromx=-fromx;fromy=-fromy;fromz=-fromz;fromw=-fromw}_this19.x=fromx+(to2.x-fromx)*s;_this19.y=fromy+(to2.y-fromy)*s;_this19.z=fromz+(to2.z-fromz)*s;_this19.w=fromw+(to2.w-fromw)*s;let l=Math.sqrt(_this19.x*_this19.x+_this19.y*_this19.y+_this19.z*_this19.z+_this19.w*_this19.w);if(l==0){_this19.x=0;_this19.y=0;_this19.z=0;_this19.w=0}else{l=1/l;_this19.x*=l;_this19.y*=l;_this19.z*=l;_this19.w*=l}let _this20=iron_object_BoneAnimation.m;let q=iron_object_BoneAnimation.q3;let x=q.x;let y=q.y;let z=q.z;let w=q.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this20.self._00=1-(yy+zz);_this20.self._10=xy-wz;_this20.self._20=xz+wy;_this20.self._01=xy+wz;_this20.self._11=1-(xx+zz);_this20.self._21=yz-wx;_this20.self._02=xz-wy;_this20.self._12=yz+wx;_this20.self._22=1-(xx+yy);_this20.self._03=0;_this20.self._13=0;_this20.self._23=0;_this20.self._30=0;_this20.self._31=0;_this20.self._32=0;_this20.self._33=1;let _this21=iron_object_BoneAnimation.m;let v=iron_object_BoneAnimation.v2;let x1=v.x;let y1=v.y;let z1=v.z;_this21.self._00*=x1;_this21.self._01*=x1;_this21.self._02*=x1;_this21.self._03*=x1;_this21.self._10*=y1;_this21.self._11*=y1;_this21.self._12*=y1;_this21.self._13*=y1;_this21.self._20*=z1;_this21.self._21*=z1;_this21.self._22*=z1;_this21.self._23*=z1;iron_object_BoneAnimation.m.self._30=iron_object_BoneAnimation.v1.x;iron_object_BoneAnimation.m.self._31=iron_object_BoneAnimation.v1.y;iron_object_BoneAnimation.m.self._32=iron_object_BoneAnimation.v1.z}if(this.absMats!=null&&i<this.absMats.length){let _this=this.absMats[i];let m=iron_object_BoneAnimation.m;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}if(this.boneChildren!=null){this.updateBoneChildren(bones[i],iron_object_BoneAnimation.m)}let _this1=iron_object_BoneAnimation.m;let b=iron_object_BoneAnimation.m;let a=this.data.geom.skeletonTransformsI[i];let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;this.updateSkinBuffer(iron_object_BoneAnimation.m,i)}}updateSkinBuffer(m,i){let loc=iron_object_BoneAnimation.vpos;let quat=iron_object_BoneAnimation.q1;let scale=iron_object_BoneAnimation.vscl;loc.x=m.self._30;loc.y=m.self._31;loc.z=m.self._32;let _this=iron_math_Mat4.helpVec;_this.x=m.self._00;_this.y=m.self._01;_this.z=m.self._02;_this.w=1;let _this1=_this;scale.x=Math.sqrt(_this1.x*_this1.x+_this1.y*_this1.y+_this1.z*_this1.z);let _this2=iron_math_Mat4.helpVec;_this2.x=m.self._10;_this2.y=m.self._11;_this2.z=m.self._12;_this2.w=1;let _this3=_this2;scale.y=Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);let _this4=iron_math_Mat4.helpVec;_this4.x=m.self._20;_this4.y=m.self._21;_this4.z=m.self._22;_this4.w=1;let _this5=_this4;scale.z=Math.sqrt(_this5.x*_this5.x+_this5.y*_this5.y+_this5.z*_this5.z);let _this6=m.self;let m3=_this6._12;let m4=_this6._22;let m5=_this6._32;let m6=_this6._13;let m7=_this6._23;let m8=_this6._33;let c00=_this6._11*(m4*m8-m5*m7)-_this6._21*(m3*m8-m5*m6)+_this6._31*(m3*m7-m4*m6);let m31=_this6._12;let m41=_this6._22;let m51=_this6._32;let m61=_this6._13;let m71=_this6._23;let m81=_this6._33;let c01=_this6._10*(m41*m81-m51*m71)-_this6._20*(m31*m81-m51*m61)+_this6._30*(m31*m71-m41*m61);let m32=_this6._11;let m42=_this6._21;let m52=_this6._31;let m62=_this6._13;let m72=_this6._23;let m82=_this6._33;let c02=_this6._10*(m42*m82-m52*m72)-_this6._20*(m32*m82-m52*m62)+_this6._30*(m32*m72-m42*m62);let m33=_this6._11;let m43=_this6._21;let m53=_this6._31;let m63=_this6._12;let m73=_this6._22;let m83=_this6._32;let c03=_this6._10*(m43*m83-m53*m73)-_this6._20*(m33*m83-m53*m63)+_this6._30*(m33*m73-m43*m63);if(_this6._00*c00-_this6._01*c01+_this6._02*c02-_this6._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=m.self._00*invs;iron_math_Mat4.helpMat.self._01=m.self._01*invs;iron_math_Mat4.helpMat.self._02=m.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=m.self._10*invs;iron_math_Mat4.helpMat.self._11=m.self._11*invs;iron_math_Mat4.helpMat.self._12=m.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=m.self._20*invs;iron_math_Mat4.helpMat.self._21=m.self._21*invs;iron_math_Mat4.helpMat.self._22=m.self._22*invs;let m1=iron_math_Mat4.helpMat;let m11=m1.self._00;let m12=m1.self._10;let m13=m1.self._20;let m21=m1.self._01;let m22=m1.self._11;let m23=m1.self._21;let m311=m1.self._02;let m321=m1.self._12;let m331=m1.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}let _this7=iron_object_BoneAnimation.q1;let l=Math.sqrt(_this7.x*_this7.x+_this7.y*_this7.y+_this7.z*_this7.z+_this7.w*_this7.w);if(l==0){_this7.x=0;_this7.y=0;_this7.z=0;_this7.w=0}else{l=1/l;_this7.x*=l;_this7.y*=l;_this7.z*=l;_this7.w*=l}let _this8=iron_object_BoneAnimation.q2;_this8.x=iron_object_BoneAnimation.vpos.x;_this8.y=iron_object_BoneAnimation.vpos.y;_this8.z=iron_object_BoneAnimation.vpos.z;_this8.w=0;let _this9=iron_object_BoneAnimation.q2;let q1=iron_object_BoneAnimation.q2;let q2=iron_object_BoneAnimation.q1;let q1x=q1.x;let q1y=q1.y;let q1z=q1.z;let q1w=q1.w;let q2x=q2.x;let q2y=q2.y;let q2z=q2.z;let q2w=q2.w;_this9.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this9.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this9.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this9.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;let v=iron_object_BoneAnimation.q1.x;this.skinBuffer.setFloat32(i*8*4,v,true);let v1=iron_object_BoneAnimation.q1.y;this.skinBuffer.setFloat32((i*8+1)*4,v1,true);let v2=iron_object_BoneAnimation.q1.z;this.skinBuffer.setFloat32((i*8+2)*4,v2,true);let v3=iron_object_BoneAnimation.q1.w;this.skinBuffer.setFloat32((i*8+3)*4,v3,true);let v4=iron_object_BoneAnimation.q2.x*.5;this.skinBuffer.setFloat32((i*8+4)*4,v4,true);let v5=iron_object_BoneAnimation.q2.y*.5;this.skinBuffer.setFloat32((i*8+5)*4,v5,true);let v6=iron_object_BoneAnimation.q2.z*.5;this.skinBuffer.setFloat32((i*8+6)*4,v6,true);let v7=iron_object_BoneAnimation.q2.w*.5;this.skinBuffer.setFloat32((i*8+7)*4,v7,true)}getBone(name){if(this.skeletonBones==null){return null}let _g=0;let _g1=this.skeletonBones;while(_g<_g1.length){let b=_g1[_g];++_g;if(b.name==name){return b}}return null}getBoneIndex(bone,bones){if(bones==null){bones=this.skeletonBones}if(bones!=null){let _g=0;let _g1=bones.length;while(_g<_g1){let i=_g++;if(bones[i]==bone){return i}}}return-1}}$hxClasses["iron.object.BoneAnimation"]=iron_object_BoneAnimation;iron_object_BoneAnimation.__name__="iron.object.BoneAnimation";iron_object_BoneAnimation.__super__=iron_object_Animation;Object.assign(iron_object_BoneAnimation.prototype,{__class__:iron_object_BoneAnimation,object:null,data:null,skinBuffer:null,skeletonBones:null,skeletonMats:null,skeletonBonesBlend:null,skeletonMatsBlend:null,absMats:null,applyParent:null,matsFast:null,matsFastSort:null,matsFastBlend:null,matsFastBlendSort:null,boneChildren:null,constraintTargets:null,constraintTargetsI:null,constraintMats:null,relativeBoneConstraints:null,onUpdates:null});class iron_object_Object{constructor(){if(iron_object_Object._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this.isEmpty=false;this.properties=null;this.vertex_groups=null;this.culledShadow=false;this.culledMesh=false;this.culled=false;this.visibleShadow=true;this.visibleMesh=true;this.visible=true;this.animation=null;this.lods=null;this.children=[];this.parent=null;this.traits=[];this.constraints=null;this.name="";this.raw=null;this.uid=iron_object_Object.uidCounter++;this.urandom=iron_object_Object.seededRandom();this.transform=new iron_object_Transform(this);this.isEmpty=js_Boot.getClass(this)==iron_object_Object;if(this.isEmpty&&iron_Scene.active!=null){iron_Scene.active.empties.push(this)}}setParent(parentObject,parentInverse,keepTransform){if(keepTransform==null){keepTransform=false}if(parentInverse==null){parentInverse=false}if(parentObject==this||parentObject==this.parent){return}if(this.parent!=null){HxOverrides.remove(this.parent.children,this);if(keepTransform){this.transform.applyParent()}this.parent=null;this.transform.buildMatrix()}if(parentObject==null){parentObject=iron_Scene.active.sceneParent}this.parent=parentObject;this.parent.children.push(this);if(parentInverse){this.transform.applyParentInverse()}}remove(){if(this.isEmpty&&iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.empties,this)}if(this.animation!=null){this.animation.remove()}while(this.children.length>0)this.children[0].remove();while(this.traits.length>0)this.traits[0].remove();if(this.parent!=null){HxOverrides.remove(this.parent.children,this);this.parent=null}}getChild(name){if(this.name==name){return this}else{let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let r=c.getChild(name);if(r!=null){return r}}}return null}getChildren(recursive){if(recursive==null){recursive=false}if(!recursive){return this.children}let retChildren=this.children.slice();let _g=0;let _g1=this.children;while(_g<_g1.length){let child=_g1[_g];++_g;retChildren=retChildren.concat(child.getChildren(recursive))}return retChildren}addTrait(t){this.traits.push(t);t.object=this;if(t._add!=null){let _g=0;let _g1=t._add;while(_g<_g1.length){let f=_g1[_g];++_g;f()}t._add=null}}removeTrait(t){if(t._init!=null){let _g=0;let _g1=t._init;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeInit(f)}t._init=null}if(t._fixedUpdate!=null){let _g=0;let _g1=t._fixedUpdate;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeFixedUpdate(f)}t._fixedUpdate=null}if(t._update!=null){let _g=0;let _g1=t._update;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeUpdate(f)}t._update=null}if(t._lateUpdate!=null){let _g=0;let _g1=t._lateUpdate;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeLateUpdate(f)}t._lateUpdate=null}if(t._render!=null){let _g=0;let _g1=t._render;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeRender(f)}t._render=null}if(t._render2D!=null){let _g=0;let _g1=t._render2D;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeRender2D(f)}t._render2D=null}if(t._remove!=null){let _g=0;let _g1=t._remove;while(_g<_g1.length){let f=_g1[_g];++_g;f()}t._remove=null}HxOverrides.remove(this.traits,t)}getTrait(c){let _g=0;let _g1=this.traits;while(_g<_g1.length){let t=_g1[_g];++_g;if(js_Boot.getClass(t)==c){return t}}return null}getParentArmature(name){let _g=0;let _g1=iron_Scene.active.animations;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.armature!=null&&a.armature.name==name){return a}}return null}setupAnimation(oactions){let _gthis=this;if(this.raw.parent_bone!=null){iron_Scene.active.notifyOnInit(function(){let banim=_gthis.getParentArmature(_gthis.parent.name);if(banim!=null){banim.addBoneChild(_gthis.raw.parent_bone,_gthis)}})}if(oactions==null){return}this.animation=new iron_object_ObjectAnimation(this,oactions)}setupMorphTargets(){}static seededRandom(){iron_object_Object.seed=(iron_object_Object.seed*9301+49297)%233280;return iron_object_Object.seed/233280}}$hxClasses["iron.object.Object"]=iron_object_Object;iron_object_Object.__name__="iron.object.Object";Object.assign(iron_object_Object.prototype,{__class__:iron_object_Object,uid:null,urandom:null,raw:null,name:null,transform:null,constraints:null,traits:null,parent:null,children:null,lods:null,animation:null,visible:null,visibleMesh:null,visibleShadow:null,culled:null,culledMesh:null,culledShadow:null,vertex_groups:null,properties:null,isEmpty:null});class iron_object_CameraObject extends iron_object_Object{constructor(data){iron_object_Object._hx_skip_constructor=true;super();iron_object_Object._hx_skip_constructor=false;this._hx_constructor(data)}_hx_constructor(data){this.currentFace=0;this.renderTargetCube=null;this.renderTarget=null;this.frustumPlanes=null;this.prevV=null;super._hx_constructor();this.data=data;this.buildProjection();this.V=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.VP=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);if(data.raw.frustum_culling){this.frustumPlanes=[];this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane)}iron_Scene.active.cameras.push(this)}buildProjection(screenAspect){if(this.data.raw.ortho!=null){let left=this.data.raw.ortho.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);let right=this.data.raw.ortho.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let bottom=this.data.raw.ortho.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);let top=this.data.raw.ortho.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN);let near=this.data.raw.near_plane;let far=this.data.raw.far_plane;let rl=right-left;let tb=top-bottom;let fn=far-near;let tx=-(right+left)/rl;let ty=-(top+bottom)/tb;let tz=-(far+near)/fn;this.P=new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1)}else{if(screenAspect==null){screenAspect=iron_App.w()/iron_App.h()}let aspect=this.data.raw.aspect!=null?this.data.raw.aspect:screenAspect;let zn=this.data.raw.near_plane;let zf=this.data.raw.far_plane;let uh=1/Math.tan(this.data.raw.fov/2);let uw=uh/aspect;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}}remove(){HxOverrides.remove(iron_Scene.active.cameras,this);super.remove()}renderFrame(g){this.buildMatrix();iron_RenderPath.active.renderFrame(g);let _this=this.prevV;let m=this.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}buildMatrix(){this.transform.buildMatrix();let _this=this.transform.world;let x=Math.sqrt(_this.self._00*_this.self._00+_this.self._10*_this.self._10+_this.self._20*_this.self._20);let y=Math.sqrt(_this.self._01*_this.self._01+_this.self._11*_this.self._11+_this.self._21*_this.self._21);let z=Math.sqrt(_this.self._02*_this.self._02+_this.self._12*_this.self._12+_this.self._22*_this.self._22);if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let sc_x=x;let sc_y=y;let sc_z=z;let sc_w=1;if(sc_x!=1||sc_y!=1||sc_z!=1){let _this=iron_object_CameraObject.temp;_this.x=1/sc_x;_this.y=1/sc_y;_this.z=1/sc_z;_this.w=1;let _this1=this.transform.world;let v=iron_object_CameraObject.temp;let x=v.x;let y=v.y;let z=v.z;_this1.self._00*=x;_this1.self._01*=x;_this1.self._02*=x;_this1.self._03*=x;_this1.self._10*=y;_this1.self._11*=y;_this1.self._12*=y;_this1.self._13*=y;_this1.self._20*=z;_this1.self._21*=z;_this1.self._22*=z;_this1.self._23*=z}let _this1=this.V;let m=this.transform.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this1.self._00=1;_this1.self._01=0;_this1.self._02=0;_this1.self._03=0;_this1.self._10=0;_this1.self._11=1;_this1.self._12=0;_this1.self._13=0;_this1.self._20=0;_this1.self._21=0;_this1.self._22=1;_this1.self._23=0;_this1.self._30=0;_this1.self._31=0;_this1.self._32=0;_this1.self._33=1}else{det=1/det;_this1.self._00=(a11*b11-a12*b10+a13*b09)*det;_this1.self._01=(a02*b10-a01*b11-a03*b09)*det;_this1.self._02=(a31*b05-a32*b04+a33*b03)*det;_this1.self._03=(a22*b04-a21*b05-a23*b03)*det;_this1.self._10=(a12*b08-a10*b11-a13*b07)*det;_this1.self._11=(a00*b11-a02*b08+a03*b07)*det;_this1.self._12=(a32*b02-a30*b05-a33*b01)*det;_this1.self._13=(a20*b05-a22*b02+a23*b01)*det;_this1.self._20=(a10*b10-a11*b08+a13*b06)*det;_this1.self._21=(a01*b08-a00*b10-a03*b06)*det;_this1.self._22=(a30*b04-a31*b02+a33*b00)*det;_this1.self._23=(a21*b02-a20*b04-a23*b00)*det;_this1.self._30=(a11*b07-a10*b09-a12*b06)*det;_this1.self._31=(a00*b09-a01*b07+a02*b06)*det;_this1.self._32=(a31*b01-a30*b03-a32*b00)*det;_this1.self._33=(a20*b03-a21*b01+a22*b00)*det}let _this2=this.VP;let b=this.P;let a=this.V;let a001=a.self._00;let a011=a.self._01;let a021=a.self._02;let a031=a.self._03;let a101=a.self._10;let a111=a.self._11;let a121=a.self._12;let a131=a.self._13;let a201=a.self._20;let a211=a.self._21;let a221=a.self._22;let a231=a.self._23;let a301=a.self._30;let a311=a.self._31;let a321=a.self._32;let a331=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this2.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this2.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this2.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this2.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._33=a301*b0+a311*b1+a321*b2+a331*b3;let _this3=this.VP;let b4=this.P;let a1=this.V;let a002=a1.self._00;let a012=a1.self._01;let a022=a1.self._02;let a032=a1.self._03;let a102=a1.self._10;let a112=a1.self._11;let a122=a1.self._12;let a132=a1.self._13;let a202=a1.self._20;let a212=a1.self._21;let a222=a1.self._22;let a232=a1.self._23;let a302=a1.self._30;let a312=a1.self._31;let a322=a1.self._32;let a332=a1.self._33;let b010=b4.self._00;let b12=b4.self._10;let b21=b4.self._20;let b31=b4.self._30;_this3.self._00=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._10=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._20=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._30=a302*b010+a312*b12+a322*b21+a332*b31;b010=b4.self._01;b12=b4.self._11;b21=b4.self._21;b31=b4.self._31;_this3.self._01=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._11=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._21=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._31=a302*b010+a312*b12+a322*b21+a332*b31;b010=b4.self._02;b12=b4.self._12;b21=b4.self._22;b31=b4.self._32;_this3.self._02=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._12=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._22=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._32=a302*b010+a312*b12+a322*b21+a332*b31;b010=b4.self._03;b12=b4.self._13;b21=b4.self._23;b31=b4.self._33;_this3.self._03=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._13=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._23=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._33=a302*b010+a312*b12+a322*b21+a332*b31;if(this.data.raw.frustum_culling){iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes)}if(this.prevV==null){this.prevV=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);let _this=this.prevV;let m=this.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}}static buildViewFrustum(VP,frustumPlanes){let _this=frustumPlanes[0];let _this1=_this.normal;_this1.x=VP.self._03+VP.self._00;_this1.y=VP.self._13+VP.self._10;_this1.z=VP.self._23+VP.self._20;_this1.w=1;_this.constant=VP.self._33+VP.self._30;let _this2=frustumPlanes[1];let _this3=_this2.normal;_this3.x=VP.self._03-VP.self._00;_this3.y=VP.self._13-VP.self._10;_this3.z=VP.self._23-VP.self._20;_this3.w=1;_this2.constant=VP.self._33-VP.self._30;let _this4=frustumPlanes[2];let _this5=_this4.normal;_this5.x=VP.self._03-VP.self._01;_this5.y=VP.self._13-VP.self._11;_this5.z=VP.self._23-VP.self._21;_this5.w=1;_this4.constant=VP.self._33-VP.self._31;let _this6=frustumPlanes[3];let _this7=_this6.normal;_this7.x=VP.self._03+VP.self._01;_this7.y=VP.self._13+VP.self._11;_this7.z=VP.self._23+VP.self._21;_this7.w=1;_this6.constant=VP.self._33+VP.self._31;let _this8=frustumPlanes[4];let _this9=_this8.normal;_this9.x=VP.self._02;_this9.y=VP.self._12;_this9.z=VP.self._22;_this9.w=1;_this8.constant=VP.self._32;let _this10=frustumPlanes[5];let _this11=_this10.normal;_this11.x=VP.self._03-VP.self._02;_this11.y=VP.self._13-VP.self._12;_this11.z=VP.self._23-VP.self._22;_this11.w=1;_this10.constant=VP.self._33-VP.self._32;let _g=0;while(_g<frustumPlanes.length){let plane=frustumPlanes[_g];++_g;plane.normalize()}}static sphereInFrustum(frustumPlanes,t,radiusScale,offsetX,offsetY,offsetZ){if(offsetZ==null){offsetZ=0}if(offsetY==null){offsetY=0}if(offsetX==null){offsetX=0}if(radiusScale==null){radiusScale=1}let radius=t.radius*radiusScale;let _g=0;while(_g<frustumPlanes.length){let plane=frustumPlanes[_g];++_g;let _this=iron_object_CameraObject.sphereCenter;_this.x=t.world.self._30+offsetX;_this.y=t.world.self._31+offsetY;_this.z=t.world.self._32+offsetZ;_this.w=1;if(plane.distanceToSphere(iron_object_CameraObject.sphereCenter,radius)+radius*2<0){return false}}return true}static setCubeFace(m,eye,face,flip){if(flip==null){flip=false}let _this=iron_object_CameraObject.vcenter;_this.x=eye.x;_this.y=eye.y;_this.z=eye.z;_this.w=eye.w;let f=flip?-1:1;switch(face){case 0:let _this1=iron_object_CameraObject.vcenter;_this1.x+=f;_this1.y+=0;_this1.z+=0;let _this2=iron_object_CameraObject.vup;_this2.x=0;_this2.y=-1*f;_this2.z=0;_this2.w=1;break;case 1:let _this3=iron_object_CameraObject.vcenter;_this3.x+=-1*f;_this3.y+=0;_this3.z+=0;let _this4=iron_object_CameraObject.vup;_this4.x=0;_this4.y=-1*f;_this4.z=0;_this4.w=1;break;case 2:let _this5=iron_object_CameraObject.vcenter;_this5.x+=0;_this5.y+=f;_this5.z+=0;let _this6=iron_object_CameraObject.vup;_this6.x=0;_this6.y=0;_this6.z=f;_this6.w=1;break;case 3:let _this7=iron_object_CameraObject.vcenter;_this7.x+=0;_this7.y+=-1*f;_this7.z+=0;let _this8=iron_object_CameraObject.vup;_this8.x=0;_this8.y=0;_this8.z=-1*f;_this8.w=1;break;case 4:let _this9=iron_object_CameraObject.vcenter;_this9.x+=0;_this9.y+=0;_this9.z+=f;let _this10=iron_object_CameraObject.vup;_this10.x=0;_this10.y=-1*f;_this10.z=0;_this10.w=1;break;case 5:let _this11=iron_object_CameraObject.vcenter;_this11.x+=0;_this11.y+=0;_this11.z+=-1*f;let _this12=iron_object_CameraObject.vup;_this12.x=0;_this12.y=-1*f;_this12.z=0;_this12.w=1;break}let center=iron_object_CameraObject.vcenter;let up=iron_object_CameraObject.vup;let f0=center.x-eye.x;let f1=center.y-eye.y;let f2=center.z-eye.z;let n=1/Math.sqrt(f0*f0+f1*f1+f2*f2);f0*=n;f1*=n;f2*=n;let s0=f1*up.z-f2*up.y;let s1=f2*up.x-f0*up.z;let s2=f0*up.y-f1*up.x;n=1/Math.sqrt(s0*s0+s1*s1+s2*s2);s0*=n;s1*=n;s2*=n;let u0=s1*f2-s2*f1;let u1=s2*f0-s0*f2;let u2=s0*f1-s1*f0;let d0=-eye.x*s0-eye.y*s1-eye.z*s2;let d1=-eye.x*u0-eye.y*u1-eye.z*u2;let d2=eye.x*f0+eye.y*f1+eye.z*f2;m.self._00=s0;m.self._10=s1;m.self._20=s2;m.self._30=d0;m.self._01=u0;m.self._11=u1;m.self._21=u2;m.self._31=d1;m.self._02=-f0;m.self._12=-f1;m.self._22=-f2;m.self._32=d2;m.self._03=0;m.self._13=0;m.self._23=0;m.self._33=1}}$hxClasses["iron.object.CameraObject"]=iron_object_CameraObject;iron_object_CameraObject.__name__="iron.object.CameraObject";iron_object_CameraObject.__super__=iron_object_Object;Object.assign(iron_object_CameraObject.prototype,{__class__:iron_object_CameraObject,data:null,P:null,V:null,prevV:null,VP:null,frustumPlanes:null,renderTarget:null,renderTargetCube:null,currentFace:null});class iron_object_FrustumPlane{constructor(){this.constant=0;this.normal=new iron_math_Vec4(1,0,0)}normalize(){let _this=this.normal;let inverseNormalLength=1/Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);let _this1=this.normal;_this1.x*=inverseNormalLength;_this1.y*=inverseNormalLength;_this1.z*=inverseNormalLength;this.constant*=inverseNormalLength}distanceToSphere(sphereCenter,sphereRadius){let _this=this.normal;return _this.x*sphereCenter.x+_this.y*sphereCenter.y+_this.z*sphereCenter.z+this.constant-sphereRadius}}$hxClasses["iron.object.FrustumPlane"]=iron_object_FrustumPlane;iron_object_FrustumPlane.__name__="iron.object.FrustumPlane";Object.assign(iron_object_FrustumPlane.prototype,{__class__:iron_object_FrustumPlane,normal:null,constant:null});class iron_object_Constraint{constructor(constr){this.target=null;this.raw=constr}apply(transform){if(this.target==null&&this.raw.target!=null){this.target=iron_Scene.active.getChild(this.raw.target).transform}if(this.raw.type=="COPY_LOCATION"){if(this.raw.use_x){transform.world.self._30=this.target.loc.x;if(this.raw.use_offset){transform.world.self._30+=transform.loc.x}}if(this.raw.use_y){transform.world.self._31=this.target.loc.y;if(this.raw.use_offset){transform.world.self._31+=transform.loc.y}}if(this.raw.use_z){transform.world.self._32=this.target.loc.z;if(this.raw.use_offset){transform.world.self._32+=transform.loc.z}}}}}$hxClasses["iron.object.Constraint"]=iron_object_Constraint;iron_object_Constraint.__name__="iron.object.Constraint";Object.assign(iron_object_Constraint.prototype,{__class__:iron_object_Constraint,raw:null,target:null});class iron_object_LightObject extends iron_object_Object{constructor(data){iron_object_Object._hx_skip_constructor=true;super();iron_object_Object._hx_skip_constructor=false;this._hx_constructor(data)}_hx_constructor(data){this.frustumPlanes=null;this.VP=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.P=null;this.V=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);super._hx_constructor();this.data=data;let type=data.raw.type;let fov=data.raw.fov;if(type=="sun"){let near=data.raw.near_plane;let far=data.raw.far_plane;let rl=2;let tb=2;let fn=far-near;let tx=0/rl;let ty=0/tb;let tz=-(far+near)/fn;this.P=new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1)}else if(type=="point"||type=="area"){let zn=data.raw.near_plane;let zf=data.raw.far_plane;let uh=1/Math.tan(fov/2);let uw=uh/1;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}else if(type=="spot"){let zn=data.raw.near_plane;let zf=data.raw.far_plane;let uh=1/Math.tan(fov/2);let uw=uh/1;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}iron_Scene.active.lights.push(this)}remove(){if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.lights,this)}let rp=iron_RenderPath.active;if(rp.light==this){rp.light=null}if(rp.point==this){rp.point=null}else if(rp.sun==this){rp.sun=null}super.remove()}buildMatrix(camera){this.transform.buildMatrix();if(this.data.raw.type=="sun"){let _this=this.V;let m=this.transform.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}this.updateViewFrustum(camera)}else{let _this=this.V;let m=this.transform.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}this.updateViewFrustum(camera)}}updateViewFrustum(camera){let _this=this.VP;let b=this.P;let a=this.V;let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;if(camera.data.raw.frustum_culling){if(this.frustumPlanes==null){this.frustumPlanes=[];this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane)}iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes)}}setCubeFace(face,camera){let _this=iron_object_LightObject.eye;_this.x=this.transform.world.self._30;_this.y=this.transform.world.self._31;_this.z=this.transform.world.self._32;_this.w=1;let flip=false;iron_object_CameraObject.setCubeFace(this.V,iron_object_LightObject.eye,face,flip);this.updateViewFrustum(camera)}}$hxClasses["iron.object.LightObject"]=iron_object_LightObject;iron_object_LightObject.__name__="iron.object.LightObject";iron_object_LightObject.__super__=iron_object_Object;Object.assign(iron_object_LightObject.prototype,{__class__:iron_object_LightObject,data:null,V:null,P:null,VP:null,frustumPlanes:null});class iron_object_MeshObject extends iron_object_Object{constructor(data,materials){iron_object_Object._hx_skip_constructor=true;super();iron_object_Object._hx_skip_constructor=false;this._hx_constructor(data,materials)}_hx_constructor(data,materials){this.morphTarget=null;this.force_context=null;this.skip_context=null;this.tilesheets=null;this.activeTilesheet=null;this.frustumCulling=true;this.screenSize=0;this.cameraList=null;this.particleIndex=-1;this.particleChildren=null;this.particleOwner=null;this.render_emitter=true;this.particleSystems=null;this.materialIndex=0;this.data=null;super._hx_constructor();this.materials=materials;this.setData(data);iron_Scene.active.meshes.push(this)}setData(data){this.data=data;data.refcount++;data.geom.build();this.transform.scaleWorld=data.scalePos}remove(){if(this.particleChildren!=null){let _g=0;let _g1=this.particleChildren;while(_g<_g1.length){let c=_g1[_g];++_g;c.remove()}this.particleChildren=null}if(this.particleSystems!=null){let _g=0;let _g1=this.particleSystems;while(_g<_g1.length){let psys=_g1[_g];++_g;psys.remove()}this.particleSystems=null}if(this.activeTilesheet!=null){this.activeTilesheet.remove()}if(this.tilesheets!=null){let _g=0;let _g1=this.tilesheets;while(_g<_g1.length){let ts=_g1[_g];++_g;ts.remove()}}if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.meshes,this)}this.data.refcount--;super.remove()}setupAnimation(oactions){let hasAction=this.parent!=null&&this.parent.raw!=null&&this.parent.raw.bone_actions!=null;if(hasAction){let armatureName=this.parent.name;this.animation=this.getParentArmature(armatureName);if(this.animation==null){this.animation=new iron_object_BoneAnimation(armatureName)}if(this.data.isSkinned){js_Boot.__cast(this.animation,iron_object_BoneAnimation).setSkin(this)}}super.setupAnimation(oactions)}setupMorphTargets(){if(this.data.raw.morph_target!=null){this.morphTarget=new iron_object_MorphTarget(this.data.raw.morph_target)}}setupParticleSystem(sceneName,pref){if(this.particleSystems==null){this.particleSystems=[]}let psys=new iron_object_ParticleSystemGPU(sceneName,pref,this);this.particleSystems.push(psys)}setupTilesheet(sceneName,tilesheet_ref,tilesheet_action_ref){this.activeTilesheet=new iron_object_Tilesheet(sceneName,tilesheet_ref,tilesheet_action_ref);if(this.tilesheets==null){this.tilesheets=[]}this.tilesheets.push(this.activeTilesheet)}setCulled(isShadow,b){if(isShadow){this.culledShadow=b}else{this.culledMesh=b}this.culled=this.culledMesh&&this.culledShadow;return b}cullMaterial(context){let mats=this.materials;if(!(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true)&&!this.validContext(mats,context)){return true}let isShadow=context=="shadowmap";if(!this.visibleMesh&&!isShadow){return this.setCulled(isShadow,true)}if(!this.visibleShadow&&isShadow){return this.setCulled(isShadow,true)}if(this.skip_context==context){return this.setCulled(isShadow,true)}if(this.force_context!=null&&this.force_context!=context){return this.setCulled(isShadow,true)}return this.setCulled(isShadow,false)}cullMesh(context,camera,light){if(camera==null){return false}if(camera.data.raw.frustum_culling&&this.frustumCulling){let radiusScale=this.data.isSkinned?2:1;if(this.particleSystems!=null||this.particleOwner!=null){radiusScale*=1e3}if(context=="voxel"){radiusScale*=100}if(this.data.geom.instanced){radiusScale*=100}let isShadow=context=="shadowmap";let frustumPlanes=isShadow?light.frustumPlanes:camera.frustumPlanes;if(isShadow&&light.data.raw.type!="sun"){light.transform.radius=light.data.raw.far_plane;if(!iron_object_CameraObject.sphereInFrustum(camera.frustumPlanes,light.transform)){return this.setCulled(isShadow,true)}}if(!iron_object_CameraObject.sphereInFrustum(frustumPlanes,this.transform,radiusScale)){return this.setCulled(isShadow,true)}}this.culled=false;return this.culled}skipContext(context,mat){if(mat.raw.skip_context!=null&&mat.raw.skip_context==context){return true}return false}getContexts(context,materials,materialContexts,shaderContexts){let _g=0;while(_g<materials.length){let mat=materials[_g];++_g;let found=false;let _g1=0;let _g2=mat.raw.contexts.length;while(_g1<_g2){let i=_g1++;if(HxOverrides.substr(mat.raw.contexts[i].name,0,context.length)==context){materialContexts.push(mat.contexts[i]);shaderContexts.push(mat.shader.getContext(context));found=true;break}}if(!found){materialContexts.push(null);shaderContexts.push(null)}}}render(g,context,bindParams){if(this.data==null||!this.data.geom.ready){return}if(!this.visible){return}if(this.cullMesh(context,iron_Scene.active.camera,iron_RenderPath.active.light)){return}let meshContext=this.raw!=null&&context=="mesh";if(this.cameraList!=null&&this.cameraList.indexOf(iron_Scene.active.camera.name)<0){return}if(this.raw!=null&&this.raw.is_particle&&this.particleOwner==null){return}let _gthis=this;if(this.particleSystems!=null&&meshContext){if(this.particleChildren==null){this.particleChildren=[];let _g=0;let _g1=this.particleSystems;while(_g<_g1.length){let psys=_g1[_g];++_g;iron_Scene.active.spawnObject(psys.data.raw.instance_object,null,function(o){if(o!=null){let c=o;c.cameraList=_gthis.cameraList;_gthis.particleChildren.push(c);c.particleOwner=_gthis;c.particleIndex=_gthis.particleChildren.length-1}})}}let _g=0;let _g1=this.particleSystems.length;while(_g<_g1){let i=_g++;this.particleSystems[i].update(this.particleChildren[i])}}if(this.particleSystems!=null&&this.particleSystems.length>0&&!this.render_emitter){return}if(this.particleSystems==null&&this.cullMaterial(context)){return}let mats=this.materials;let lod=this;if(this.raw!=null&&this.raw.lods!=null&&this.raw.lods.length>0){let camera=iron_Scene.active.camera;let tr=this.transform;let volume=tr.dim.x*tr.dim.y*tr.dim.z;this.screenSize=volume*(1/this.cameraDistance);this.screenSize=this.screenSize>1?1:this.screenSize;if(this.lods==null){this.lods=[];let _g=0;let _g1=this.raw.lods;while(_g<_g1.length){let l=_g1[_g];++_g;if(l.object_ref==""){this.lods.push(null)}else{this.lods.push(iron_Scene.active.getChild(l.object_ref))}}}if(context=="voxel"){lod=this.lods[this.lods.length-1]}else{let _g=0;let _g1=this.raw.lods.length;while(_g<_g1){let i=_g++;if(this.screenSize>this.raw.lods[i].screen_size){break}lod=this.lods[i];if(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true){mats=lod.materials}}}if(lod==null){return}}if(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true&&!this.validContext(mats,context)){return}let materialContexts=[];let shaderContexts=[];this.getContexts(context,mats,materialContexts,shaderContexts);iron_object_Uniforms.posUnpack=this.data.scalePos;iron_object_Uniforms.texUnpack=this.data.scaleTex;this.transform.update();let ldata=lod.data;this.renderNextPass(g,context,bindParams,lod);let _g=0;let _g1=ldata.geom.indexBuffers.length;while(_g<_g1){let i=_g++;let mi=ldata.geom.materialIndices[i];if(shaderContexts.length<=mi||shaderContexts[mi]==null){continue}this.materialIndex=mi;if(this.materials.length>mi&&this.skipContext(context,this.materials[mi])){continue}let scontext=shaderContexts[mi];if(scontext==null){continue}let elems=scontext.raw.vertex_elements;if(scontext.pipeState!=iron_object_MeshObject.lastPipeline){g.setPipeline(scontext.pipeState);iron_object_MeshObject.lastPipeline=scontext.pipeState}iron_object_Uniforms.setContextConstants(g,scontext,bindParams);iron_object_Uniforms.setObjectConstants(g,scontext,this);if(materialContexts.length>mi){iron_object_Uniforms.setMaterialConstants(g,scontext,materialContexts[mi])}if(ldata.geom.instancedVB!=null){g.setVertexBuffers([ldata.geom.get(elems),ldata.geom.instancedVB])}else{g.setVertexBuffer(ldata.geom.get(elems))}g.setIndexBuffer(ldata.geom.indexBuffers[i]);if(ldata.geom.instanced){g.drawIndexedVerticesInstanced(ldata.geom.instanceCount,ldata.geom.start,ldata.geom.count)}else{g.drawIndexedVertices(ldata.geom.start,ldata.geom.count)}}}validContext(mats,context){let _g=0;while(_g<mats.length){let mat=mats[_g];++_g;if(mat.getContext(context)!=null){return true}}return false}renderNextPass(g,context,bindParams,lod){let ldata=lod.data;let _g=0;let _g1=ldata.geom.indexBuffers.length;while(_g<_g1){let i=_g++;let mi=ldata.geom.materialIndices[i];if(mi>=this.materials.length){continue}let currentMaterial=this.materials[mi];if(currentMaterial==null||currentMaterial.shader==null){continue}let nextPassName=currentMaterial.shader.nextPass;if(nextPassName==null||nextPassName==""){continue}let nextMaterial=null;let _g1=0;let _g2=this.materials;while(_g1<_g2.length){let mat=_g2[_g1];++_g1;if(mat.name==nextPassName){nextMaterial=mat;break}if(mat.name.indexOf("_")>0&&HxOverrides.substr(mat.name,mat.name.length-6,null)==".blend"){let baseName=mat.name.substring(0,mat.name.indexOf("_"));if(baseName==nextPassName){nextMaterial=mat;break}}}if(nextMaterial==null){continue}let nextMaterialContext=null;let nextShaderContext=null;let _g3=0;let _g4=nextMaterial.raw.contexts.length;while(_g3<_g4){let j=_g3++;if(HxOverrides.substr(nextMaterial.raw.contexts[j].name,0,context.length)==context){nextMaterialContext=nextMaterial.contexts[j];nextShaderContext=nextMaterial.shader.getContext(context);break}}if(nextShaderContext==null){continue}if(this.skipContext(context,nextMaterial)){continue}let elems=nextShaderContext.raw.vertex_elements;if(nextShaderContext.pipeState!=iron_object_MeshObject.lastPipeline){g.setPipeline(nextShaderContext.pipeState);iron_object_MeshObject.lastPipeline=nextShaderContext.pipeState}iron_object_Uniforms.setContextConstants(g,nextShaderContext,bindParams);iron_object_Uniforms.setObjectConstants(g,nextShaderContext,this);iron_object_Uniforms.setMaterialConstants(g,nextShaderContext,nextMaterialContext);if(ldata.geom.instancedVB!=null){g.setVertexBuffers([ldata.geom.get(elems),ldata.geom.instancedVB])}else{g.setVertexBuffer(ldata.geom.get(elems))}g.setIndexBuffer(ldata.geom.indexBuffers[i]);if(ldata.geom.instanced){g.drawIndexedVerticesInstanced(ldata.geom.instanceCount,ldata.geom.start,ldata.geom.count)}else{g.drawIndexedVertices(ldata.geom.start,ldata.geom.count)}}}}$hxClasses["iron.object.MeshObject"]=iron_object_MeshObject;iron_object_MeshObject.__name__="iron.object.MeshObject";iron_object_MeshObject.__super__=iron_object_Object;Object.assign(iron_object_MeshObject.prototype,{__class__:iron_object_MeshObject,data:null,materials:null,materialIndex:null,particleSystems:null,render_emitter:null,particleOwner:null,particleChildren:null,particleIndex:null,cameraDistance:null,cameraList:null,screenSize:null,frustumCulling:null,activeTilesheet:null,tilesheets:null,skip_context:null,force_context:null,morphTarget:null});class iron_object_MorphTarget{constructor(data){this.morphMap=null;this.morphBlockSize=0;this.morphImageSize=0;this.numMorphTargets=0;let defaults=data.morph_target_defaults;this.morphWeights=kha_arrays_Float32Array._new(defaults.byteLength>>2);let _g=0;let _g1=this.morphWeights.byteLength>>2;while(_g<_g1){let i=_g++;let v=defaults.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);this.morphWeights.setFloat32(i*4,v,true)}this.scaling=data.morph_scale;this.offset=data.morph_offset;this.numMorphTargets=data.num_morph_targets;this.morphImageSize=data.morph_img_size;this.morphBlockSize=data.morph_block_size;let _gthis=this;iron_data_Data.getImage(data.morph_target_data_file+"_morph_pos.png",function(img){if(img!=null){_gthis.morphDataPos=img}});iron_data_Data.getImage(data.morph_target_data_file+"_morph_nor.png",function(img){if(img!=null){_gthis.morphDataNor=img}});this.morphMap=new haxe_ds_StringMap;let i=0;let _g2=0;let _g3=data.morph_target_ref;while(_g2<_g3.length){let name=_g3[_g2];++_g2;this.morphMap.h[name]=i;++i}}}$hxClasses["iron.object.MorphTarget"]=iron_object_MorphTarget;iron_object_MorphTarget.__name__="iron.object.MorphTarget";Object.assign(iron_object_MorphTarget.prototype,{__class__:iron_object_MorphTarget,numMorphTargets:null,morphImageSize:null,morphBlockSize:null,scaling:null,offset:null,morphWeights:null,morphDataPos:null,morphDataNor:null,morphMap:null});class iron_object_ObjectAnimation extends iron_object_Animation{constructor(object,oactions){iron_object_Animation._hx_skip_constructor=true;super();iron_object_Animation._hx_skip_constructor=false;this._hx_constructor(object,oactions)}_hx_constructor(object,oactions){this.object=object;this.oactions=oactions;this.isSkinned=false;super._hx_constructor()}getAction(action){let _g=0;let _g1=this.oactions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a!=null&&a.objects[0].name==action){return a.objects[0]}}return null}play(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=0}if(action==null){action=""}super.play(action,onComplete,blendTime,speed,loop);if(this.action==""&&this.oactions[0]!=null){this.action=this.oactions[0].objects[0].name}this.oaction=this.getAction(this.action);if(this.oaction!=null){this.isSampled=this.oaction.sampled!=null&&this.oaction.sampled}}update(delta){if(!this.object.visible||this.object.culled||this.oaction==null){return}super.update(delta);if(this.paused){return}if(!this.isSkinned){this.updateObjectAnim()}}updateObjectAnim(){this.updateTransformAnim(this.oaction.anim,this.object.transform);this.object.transform.buildMatrix()}isTrackEnd(track){if(this.speed>0){return this.frameIndex>=(track.frames.byteLength>>2)-2}else{return this.frameIndex<=0}}updateTransformAnim(anim,transform){if(anim==null){return}let total=anim.end*this.frameTime-anim.begin*this.frameTime;if(anim.has_delta){let t=transform;if(t.dloc==null){t.dloc=new iron_math_Vec4;t.drot=new iron_math_Quat;t.dscale=new iron_math_Vec4}let _this=t.dloc;_this.x=0;_this.y=0;_this.z=0;_this.w=1;let _this1=t.dscale;_this1.x=0;_this1.y=0;_this1.z=0;_this1.w=1;t._deulerX=t._deulerY=t._deulerZ=0}let _g=0;let _g1=anim.tracks;while(_g<_g1.length){let track=_g1[_g];++_g;if(this.frameIndex==-1){this.rewind(track)}let sign=this.speed>0?1:-1;let t=this.time+anim.begin*this.frameTime;while(true){let frameValues=track.frames;if(!(this.speed>0?this.frameIndex<(frameValues.byteLength>>2)-2&&t>frameValues.getUint32((this.frameIndex+1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime:this.frameIndex>1&&t>frameValues.getUint32((this.frameIndex-1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime)){break}this.frameIndex+=sign}if(this.frameIndex>=track.frames.byteLength>>2){continue}if(this.time>total){if(this.onComplete!=null){this.onComplete()}if(this.loop){this.rewind(track)}else{this.frameIndex-=sign;this.paused=true}return}let ti=this.frameIndex;let t1=track.frames.getUint32(ti*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let t2=track.frames.getUint32((ti+sign)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let v1=track.values.getFloat32(ti*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let v2=track.values.getFloat32((ti+sign)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let s=(t-t1)/(t2-t1);let value=(1-s)*v1+s*v2;switch(track.target){case"dqwrot":transform.drot.w=value;break;case"dqxrot":transform.drot.x=value;break;case"dqyrot":transform.drot.y=value;break;case"dqzrot":transform.drot.z=value;break;case"dxloc":transform.dloc.x=value;break;case"dxrot":transform._deulerX=value;break;case"dxscl":transform.dscale.x=value;break;case"dyloc":transform.dloc.y=value;break;case"dyrot":transform._deulerY=value;break;case"dyscl":transform.dscale.y=value;break;case"dzloc":transform.dloc.z=value;break;case"dzrot":transform._deulerZ=value;break;case"dzscl":transform.dscale.z=value;break;case"qwrot":transform.rot.w=value;break;case"qxrot":transform.rot.x=value;break;case"qyrot":transform.rot.y=value;break;case"qzrot":transform.rot.z=value;break;case"xloc":transform.loc.x=value;break;case"xrot":transform.setRotation(value,transform._eulerY,transform._eulerZ);break;case"xscl":transform.scale.x=value;break;case"yloc":transform.loc.y=value;break;case"yrot":transform.setRotation(transform._eulerX,value,transform._eulerZ);break;case"yscl":transform.scale.y=value;break;case"zloc":transform.loc.z=value;break;case"zrot":transform.setRotation(transform._eulerX,transform._eulerY,value);break;case"zscl":transform.scale.z=value;break}}}}$hxClasses["iron.object.ObjectAnimation"]=iron_object_ObjectAnimation;iron_object_ObjectAnimation.__name__="iron.object.ObjectAnimation";iron_object_ObjectAnimation.__super__=iron_object_Animation;Object.assign(iron_object_ObjectAnimation.prototype,{__class__:iron_object_ObjectAnimation,object:null,oactions:null,oaction:null});class iron_object_ParticleSystemGPU{constructor(sceneName,pref,mo){this.random=0;this.ownerScl=new iron_math_Vec4;this.ownerRot=new iron_math_Quat;this.ownerLoc=new iron_math_Vec4;this.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.lapTime=0;this.lap=0;this.count=0;this.seed=0;this.spawnRate=0;this.time=0;this.animtime=0;this.looptime=0;this.lifetime=0;this.frameRate=24;this.currentSpeed=0;this.speed=1;this.seed=pref.seed;this.currentSpeed=this.speed;this.speed=0;this.particles=[];this.ready=false;let _gthis=this;iron_data_Data.getParticle(sceneName,pref.particle,function(b){_gthis.data=b;_gthis.r=_gthis.data.raw;_gthis.owner=mo;if(iron_Scene.active.raw.gravity!=null){_gthis.gx=iron_Scene.active.raw.gravity.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*_gthis.r.weight_gravity;_gthis.gy=iron_Scene.active.raw.gravity.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*_gthis.r.weight_gravity;_gthis.gz=iron_Scene.active.raw.gravity.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*_gthis.r.weight_gravity}else{_gthis.gx=0;_gthis.gy=0;_gthis.gz=-9.81*_gthis.r.weight_gravity}_gthis.alignx=_gthis.r.object_align_factor.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);_gthis.aligny=_gthis.r.object_align_factor.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);_gthis.alignz=_gthis.r.object_align_factor.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);_gthis.looptime=(_gthis.r.frame_end-_gthis.r.frame_start)/_gthis.frameRate;_gthis.lifetime=_gthis.r.lifetime/_gthis.frameRate;_gthis.animtime=_gthis.r.loop?_gthis.looptime:_gthis.looptime+_gthis.lifetime;_gthis.spawnRate=(_gthis.r.frame_end-_gthis.r.frame_start)/_gthis.r.count/_gthis.frameRate;let _g=0;let _g1=_gthis.r.count;while(_g<_g1){let i=_g++;_gthis.particles.push(new iron_object_Particle(i))}_gthis.ready=true;if(_gthis.r.auto_start){_gthis.start()}})}start(){if(this.r.is_unique){this.random=Math.random()}this.lifetime=this.r.lifetime/this.frameRate;this.time=0;this.lap=0;this.lapTime=0;this.speed=this.currentSpeed}end(){this.lifetime=0;this.speed=0;this.lap=0}update(object){if(!this.ready||object==null||this.speed==0){return}if(iron_App.pauseUpdates){return}let prevLap=this.lap;let _this=this.owner.transform.world;let loc=this.ownerLoc;let quat=this.ownerRot;let scale=this.ownerScl;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;let _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;let _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);let _this3=iron_math_Mat4.helpVec;_this3.x=_this.self._10;_this3.y=_this.self._11;_this3.z=_this.self._12;_this3.w=1;let _this4=_this3;scale.y=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this.self._20;_this5.y=_this.self._21;_this5.z=_this.self._22;_this5.w=1;let _this6=_this5;scale.z=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=_this.self;let m3=_this7._12;let m4=_this7._22;let m5=_this7._32;let m6=_this7._13;let m7=_this7._23;let m8=_this7._33;let c00=_this7._11*(m4*m8-m5*m7)-_this7._21*(m3*m8-m5*m6)+_this7._31*(m3*m7-m4*m6);let m31=_this7._12;let m41=_this7._22;let m51=_this7._32;let m61=_this7._13;let m71=_this7._23;let m81=_this7._33;let c01=_this7._10*(m41*m81-m51*m71)-_this7._20*(m31*m81-m51*m61)+_this7._30*(m31*m71-m41*m61);let m32=_this7._11;let m42=_this7._21;let m52=_this7._31;let m62=_this7._13;let m72=_this7._23;let m82=_this7._33;let c02=_this7._10*(m42*m82-m52*m72)-_this7._20*(m32*m82-m52*m62)+_this7._30*(m32*m72-m42*m62);let m33=_this7._11;let m43=_this7._21;let m53=_this7._31;let m63=_this7._12;let m73=_this7._22;let m83=_this7._32;let c03=_this7._10*(m43*m83-m53*m73)-_this7._20*(m33*m83-m53*m63)+_this7._30*(m33*m73-m43*m63);if(_this7._00*c00-_this7._01*c01+_this7._02*c02-_this7._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;let m=iron_math_Mat4.helpMat;let m11=m.self._00;let m12=m.self._10;let m13=m.self._20;let m21=m.self._01;let m22=m.self._11;let m23=m.self._21;let m311=m.self._02;let m321=m.self._12;let m331=m.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}object.transform.loc=this.ownerLoc;object.transform.rot=this.ownerRot;object.transform.scale=new iron_math_Vec4(this.r.particle_size,this.r.particle_size,this.r.particle_size,1);object.transform.buildMatrix();this.owner.transform.buildMatrix();let _this8=object.transform.dim;let v=this.owner.transform.dim;_this8.x=v.x;_this8.y=v.y;_this8.z=v.z;_this8.w=v.w;this.dimx=object.transform.dim.x;this.dimy=object.transform.dim.y;if(object.activeTilesheet!=null){this.tilesx=object.activeTilesheet.raw.tilesx;this.tilesy=object.activeTilesheet.raw.tilesy;this.tilesFramerate=object.activeTilesheet.raw.framerate}this.time+=iron_system_Time.get_renderDelta()*this.speed;this.lap=this.time/this.animtime|0;this.lapTime=this.time-this.lap*this.animtime;this.count=this.lapTime/this.spawnRate|0;if(this.lap>prevLap&&!this.r.loop){this.end()}this.updateGpu(object)}getData(){let hair=this.r.type==1;this.m.self._00=this.animtime;this.m.self._01=hair?1/this.particles.length:this.spawnRate;this.m.self._02=hair?1:this.lifetime;this.m.self._03=this.particles.length;this.m.self._10=hair?0:this.alignx;this.m.self._11=hair?0:this.aligny;this.m.self._12=hair?0:this.alignz;this.m.self._13=hair?0:this.r.factor_random;this.m.self._20=hair?0:this.gx;this.m.self._21=hair?0:this.gy;this.m.self._22=hair?0:this.gz;this.m.self._23=hair?0:this.r.lifetime_random;this.m.self._30=this.tilesx;this.m.self._31=this.tilesy;this.m.self._32=1/this.tilesFramerate;this.m.self._33=hair?1:this.lapTime;return this.m}getSizeRandom(){return this.r.size_random}getRandom(){return this.random}getSize(){return this.r.particle_size}updateGpu(object){if(!object.data.geom.instanced){this.setupGeomGpu(object)}}setupGeomGpu(object){let instancedData=kha_arrays_Float32Array._new(this.particles.length*3);let i=0;let normFactor=3051850947599719e-20;let scalePosOwner=this.owner.data.scalePos;let scalePosParticle=object.data.scalePos;let particleSize=this.r.particle_size;let scaleFactor_x=0;let scaleFactor_y=0;let scaleFactor_z=0;let scaleFactor_w=1;let v=this.owner.transform.scale;scaleFactor_x=v.x;scaleFactor_y=v.y;scaleFactor_z=v.z;scaleFactor_w=v.w;let f=scalePosOwner/(particleSize*scalePosParticle);scaleFactor_x*=f;scaleFactor_y*=f;scaleFactor_z*=f;switch(this.r.emit_from){case 0:let pa=this.owner.data.geom.positions;let _g=0;let _g1=this.particles;while(_g<_g1.length){let p=_g1[_g];++_g;let j=this.fhash(i)*((pa.values.byteLength>>1)/pa.size)|0;let v=pa.values.getInt16(j*pa.size*2,kha_arrays_ByteArray.LITTLE_ENDIAN)*normFactor*scaleFactor_x;instancedData.setFloat32(i*4,v,true);++i;let v1=pa.values.getInt16((j*pa.size+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN)*normFactor*scaleFactor_y;instancedData.setFloat32(i*4,v1,true);++i;let v2=pa.values.getInt16((j*pa.size+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN)*normFactor*scaleFactor_z;instancedData.setFloat32(i*4,v2,true);++i}break;case 1:let positions=this.owner.data.geom.positions.values;let _g2=0;let _g3=this.particles;while(_g2<_g3.length){let p=_g3[_g2];++_g2;let ia=this.owner.data.geom.indices[Std.random(this.owner.data.geom.indices.length)];let faceIndex=Std.random((ia.byteLength>>2)/3|0);let i0=ia.getUint32(faceIndex*3*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let i1=ia.getUint32((faceIndex*3+1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let i2=ia.getUint32((faceIndex*3+2)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let x=positions.getInt16(i0*4*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let y=positions.getInt16((i0*4+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=positions.getInt16((i0*4+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let pos_x=x;let pos_y=y;let pos_z=z;let x1=positions.getInt16(i1*4*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let y1=positions.getInt16((i1*4+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let z1=positions.getInt16((i1*4+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let v_x=x1;let v_y=y1;let v_z=z1;let x2=positions.getInt16(i2*4*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let y2=positions.getInt16((i2*4+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let z2=positions.getInt16((i2*4+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z2==null){z2=0}if(y2==null){y2=0}if(x2==null){x2=0}let v_x1=x2;let v_y1=y2;let v_z1=z2;let x3=Math.random();let y3=Math.random();if(x3+y3>1){x3=1-x3;y3=1-y3}v_x-=pos_x;v_y-=pos_y;v_z-=pos_z;v_x1-=pos_x;v_y1-=pos_y;v_z1-=pos_z;v_x*=x3;v_y*=x3;v_z*=x3;v_x1*=y3;v_y1*=y3;v_z1*=y3;v_x+=v_x1;v_y+=v_y1;v_z+=v_z1;pos_x+=v_x;pos_y+=v_y;pos_z+=v_z;let v=pos_x*normFactor*scaleFactor_x;instancedData.setFloat32(i*4,v,true);++i;let v1=pos_y*normFactor*scaleFactor_y;instancedData.setFloat32(i*4,v1,true);++i;let v2=pos_z*normFactor*scaleFactor_z;instancedData.setFloat32(i*4,v2,true);++i}break;case 2:let scaleFactorVolume_x=0;let scaleFactorVolume_y=0;let scaleFactorVolume_z=0;let scaleFactorVolume_w=1;let v1=object.transform.dim;scaleFactorVolume_x=v1.x;scaleFactorVolume_y=v1.y;scaleFactorVolume_z=v1.z;scaleFactorVolume_w=v1.w;let f1=.5/(particleSize*scalePosParticle);scaleFactorVolume_x*=f1;scaleFactorVolume_y*=f1;scaleFactorVolume_z*=f1;let _g4=0;let _g5=this.particles;while(_g4<_g5.length){let p=_g5[_g4];++_g4;let v=(Math.random()*2-1)*scaleFactorVolume_x;instancedData.setFloat32(i*4,v,true);++i;let v1=(Math.random()*2-1)*scaleFactorVolume_y;instancedData.setFloat32(i*4,v1,true);++i;let v2=(Math.random()*2-1)*scaleFactorVolume_z;instancedData.setFloat32(i*4,v2,true);++i}break}object.data.geom.setupInstanced(instancedData,1,0)}fhash(n){let s=n+1;s*=9301%s;s=(s*9301+49297)%233280;return s/233280}remove(){}}$hxClasses["iron.object.ParticleSystemGPU"]=iron_object_ParticleSystemGPU;iron_object_ParticleSystemGPU.__name__="iron.object.ParticleSystemGPU";Object.assign(iron_object_ParticleSystemGPU.prototype,{__class__:iron_object_ParticleSystemGPU,data:null,speed:null,currentSpeed:null,particles:null,ready:null,frameRate:null,lifetime:null,looptime:null,animtime:null,time:null,spawnRate:null,seed:null,r:null,gx:null,gy:null,gz:null,alignx:null,aligny:null,alignz:null,dimx:null,dimy:null,tilesx:null,tilesy:null,tilesFramerate:null,count:null,lap:null,lapTime:null,m:null,owner:null,ownerLoc:null,ownerRot:null,ownerScl:null,random:null});class iron_object_Particle{constructor(i){this.i=i}}$hxClasses["iron.object.Particle"]=iron_object_Particle;iron_object_Particle.__name__="iron.object.Particle";Object.assign(iron_object_Particle.prototype,{__class__:iron_object_Particle,i:null});class iron_object_Tilesheet{constructor(sceneName,tilesheet_ref,tilesheet_action_ref){this.onActionComplete=null;this.time=0;this.frame=0;this.paused=false;this.action=null;this.tileY=0;this.tileX=0;this.ready=false;let _gthis=this;iron_data_Data.getSceneRaw(sceneName,function(format){let _g=0;let _g1=format.tilesheet_datas;while(_g<_g1.length){let ts=_g1[_g];++_g;if(ts.name==tilesheet_ref){_gthis.raw=ts;iron_Scene.active.tilesheets.push(_gthis);_gthis.play(tilesheet_action_ref);_gthis.ready=true;break}}})}play(action_ref,onActionComplete){this.onActionComplete=onActionComplete;let _g=0;let _g1=this.raw.actions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==action_ref){this.action=a;break}}this.setFrame(this.action.start);this.paused=false;this.time=0}remove(){HxOverrides.remove(iron_Scene.active.tilesheets,this)}update(){if(!this.ready||this.paused||this.action.start>=this.action.end){return}this.time+=iron_system_Time.get_renderDelta();let frameTime=1/this.raw.framerate;let framesToAdvance=0;while(this.time>=frameTime){this.time-=frameTime;++framesToAdvance}if(framesToAdvance!=0){this.setFrame(this.frame+framesToAdvance)}}setFrame(f){this.frame=f;if(this.frame>this.action.end&&this.action.start<this.action.end){if(this.onActionComplete!=null){this.onActionComplete()}if(this.action.loop){this.setFrame(this.action.start)}else{this.paused=true}return}let tx=this.frame%this.raw.tilesx;let ty=this.frame/this.raw.tilesx|0;this.tileX=tx*(1/this.raw.tilesx);this.tileY=ty*(1/this.raw.tilesy)}}$hxClasses["iron.object.Tilesheet"]=iron_object_Tilesheet;iron_object_Tilesheet.__name__="iron.object.Tilesheet";Object.assign(iron_object_Tilesheet.prototype,{__class__:iron_object_Tilesheet,tileX:null,tileY:null,raw:null,action:null,ready:null,paused:null,frame:null,time:null,onActionComplete:null});class iron_object_Transform{constructor(object){this.dscale=null;this.drot=null;this.dloc=null;this.boneParent=null;this.scaleWorld=1;this.localOnly=false;this.object=object;this.reset()}reset(){this.world=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.worldUnpack=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.local=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.loc=new iron_math_Vec4;this.rot=new iron_math_Quat;this.scale=new iron_math_Vec4(1,1,1);this.dim=new iron_math_Vec4(2,2,2);this.radius=1;this.dirty=true}update(){if(this.dirty){this.buildMatrix()}}composeDelta(){let _this=this.dloc;let a=this.loc;let b=this.dloc;_this.x=a.x+b.x;_this.y=a.y+b.y;_this.z=a.z+b.z;let _this1=this.dscale;let a1=this.dscale;let b1=this.scale;_this1.x=a1.x+b1.x;_this1.y=a1.y+b1.y;_this1.z=a1.z+b1.z;let _this2=this.drot;let f=this._deulerX/2;let c1=Math.cos(f);let s1=Math.sin(f);f=this._deulerY/2;let c2=Math.cos(f);let s2=Math.sin(f);f=this._deulerZ/2;let c3=Math.cos(f);let s3=Math.sin(f);_this2.x=s1*c2*c3+c1*s2*s3;_this2.y=c1*s2*c3+s1*c2*s3;_this2.z=c1*c2*s3-s1*s2*c3;_this2.w=c1*c2*c3-s1*s2*s3;let _this3=this.drot;let q1=this.rot;let q2=this.drot;let q1x=q1.x;let q1y=q1.y;let q1z=q1.z;let q1w=q1.w;let q2x=q2.x;let q2y=q2.y;let q2z=q2.z;let q2w=q2.w;_this3.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this3.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this3.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this3.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;let _this4=this.local;let loc=this.dloc;let quat=this.drot;let sc=this.dscale;let x=quat.x;let y=quat.y;let z=quat.z;let w=quat.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this4.self._00=1-(yy+zz);_this4.self._10=xy-wz;_this4.self._20=xz+wy;_this4.self._01=xy+wz;_this4.self._11=1-(xx+zz);_this4.self._21=yz-wx;_this4.self._02=xz-wy;_this4.self._12=yz+wx;_this4.self._22=1-(xx+yy);_this4.self._03=0;_this4.self._13=0;_this4.self._23=0;_this4.self._30=0;_this4.self._31=0;_this4.self._32=0;_this4.self._33=1;let x1=sc.x;let y1=sc.y;let z1=sc.z;_this4.self._00*=x1;_this4.self._01*=x1;_this4.self._02*=x1;_this4.self._03*=x1;_this4.self._10*=y1;_this4.self._11*=y1;_this4.self._12*=y1;_this4.self._13*=y1;_this4.self._20*=z1;_this4.self._21*=z1;_this4.self._22*=z1;_this4.self._23*=z1;_this4.self._30=loc.x;_this4.self._31=loc.y;_this4.self._32=loc.z}buildMatrix(){if(this.dloc==null){let _this=this.local;let loc=this.loc;let quat=this.rot;let sc=this.scale;let x=quat.x;let y=quat.y;let z=quat.z;let w=quat.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this.self._00=1-(yy+zz);_this.self._10=xy-wz;_this.self._20=xz+wy;_this.self._01=xy+wz;_this.self._11=1-(xx+zz);_this.self._21=yz-wx;_this.self._02=xz-wy;_this.self._12=yz+wx;_this.self._22=1-(xx+yy);_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1;let x1=sc.x;let y1=sc.y;let z1=sc.z;_this.self._00*=x1;_this.self._01*=x1;_this.self._02*=x1;_this.self._03*=x1;_this.self._10*=y1;_this.self._11*=y1;_this.self._12*=y1;_this.self._13*=y1;_this.self._20*=z1;_this.self._21*=z1;_this.self._22*=z1;_this.self._23*=z1;_this.self._30=loc.x;_this.self._31=loc.y;_this.self._32=loc.z}else{this.composeDelta()}if(this.boneParent!=null){let _this=this.local;let b=this.boneParent;let a=this.local;let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3}if(this.object.parent!=null&&!this.localOnly){let swapMult=this.object.raw!=null&&this.object.parent.raw!=null&&this.object.parent.raw.group_ref!=null&&this.object.parent.raw.group_ref!="";let a=swapMult?this.object.parent.transform.world:this.local;let b=swapMult?this.local:this.object.parent.transform.world;let _this=this.world;let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._33=1}else{let _this=this.world;let m=this.local;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=this.worldUnpack;let m=this.world;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;if(this.scaleWorld!=1){this.worldUnpack.self._00*=this.scaleWorld;this.worldUnpack.self._01*=this.scaleWorld;this.worldUnpack.self._02*=this.scaleWorld;this.worldUnpack.self._03*=this.scaleWorld;this.worldUnpack.self._10*=this.scaleWorld;this.worldUnpack.self._11*=this.scaleWorld;this.worldUnpack.self._12*=this.scaleWorld;this.worldUnpack.self._13*=this.scaleWorld;this.worldUnpack.self._20*=this.scaleWorld;this.worldUnpack.self._21*=this.scaleWorld;this.worldUnpack.self._22*=this.scaleWorld;this.worldUnpack.self._23*=this.scaleWorld}if(this.object.constraints!=null){let _g=0;let _g1=this.object.constraints;while(_g<_g1.length){let c=_g1[_g];++_g;c.apply(this)}}this.computeDim();let _g=0;let _g1=this.object.children;while(_g<_g1.length){let n=_g1[_g];++_g;n.transform.buildMatrix()}this.dirty=false}translate(x,y,z){this.loc.x+=x;this.loc.y+=y;this.loc.z+=z;this.buildMatrix()}decompose(){let _this=this.local;let loc=this.loc;let quat=this.rot;let scale=this.scale;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;let _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;let _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);let _this3=iron_math_Mat4.helpVec;_this3.x=_this.self._10;_this3.y=_this.self._11;_this3.z=_this.self._12;_this3.w=1;let _this4=_this3;scale.y=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this.self._20;_this5.y=_this.self._21;_this5.z=_this.self._22;_this5.w=1;let _this6=_this5;scale.z=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=_this.self;let m3=_this7._12;let m4=_this7._22;let m5=_this7._32;let m6=_this7._13;let m7=_this7._23;let m8=_this7._33;let c00=_this7._11*(m4*m8-m5*m7)-_this7._21*(m3*m8-m5*m6)+_this7._31*(m3*m7-m4*m6);let m31=_this7._12;let m41=_this7._22;let m51=_this7._32;let m61=_this7._13;let m71=_this7._23;let m81=_this7._33;let c01=_this7._10*(m41*m81-m51*m71)-_this7._20*(m31*m81-m51*m61)+_this7._30*(m31*m71-m41*m61);let m32=_this7._11;let m42=_this7._21;let m52=_this7._31;let m62=_this7._13;let m72=_this7._23;let m82=_this7._33;let c02=_this7._10*(m42*m82-m52*m72)-_this7._20*(m32*m82-m52*m62)+_this7._30*(m32*m72-m42*m62);let m33=_this7._11;let m43=_this7._21;let m53=_this7._31;let m63=_this7._12;let m73=_this7._22;let m83=_this7._32;let c03=_this7._10*(m43*m83-m53*m73)-_this7._20*(m33*m83-m53*m63)+_this7._30*(m33*m73-m43*m63);if(_this7._00*c00-_this7._01*c01+_this7._02*c02-_this7._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;let m=iron_math_Mat4.helpMat;let m11=m.self._00;let m12=m.self._10;let m13=m.self._20;let m21=m.self._01;let m22=m.self._11;let m23=m.self._21;let m311=m.self._02;let m321=m.self._12;let m331=m.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}}setRotation(x,y,z){let _this=this.rot;let f=x/2;let c1=Math.cos(f);let s1=Math.sin(f);f=y/2;let c2=Math.cos(f);let s2=Math.sin(f);f=z/2;let c3=Math.cos(f);let s3=Math.sin(f);_this.x=s1*c2*c3+c1*s2*s3;_this.y=c1*s2*c3+s1*c2*s3;_this.z=c1*c2*s3-s1*s2*c3;_this.w=c1*c2*c3-s1*s2*s3;this._eulerX=x;this._eulerY=y;this._eulerZ=z;this.dirty=true}computeRadius(){this.radius=Math.sqrt(this.dim.x*this.dim.x+this.dim.y*this.dim.y+this.dim.z*this.dim.z)}computeDim(){if(this.object.raw==null){this.computeRadius();return}let d=this.object.raw.dimensions;if(d==null){let _this=this.dim;_this.x=2*this.scale.x;_this.y=2*this.scale.y;_this.z=2*this.scale.z;_this.w=1}else{let _this=this.dim;let y=d.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.scale.y;let z=d.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.scale.z;_this.x=d.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.scale.x;_this.y=y;_this.z=z;_this.w=1}this.computeRadius()}applyParentInverse(){let pt=this.object.parent.transform;pt.buildMatrix();let _this=iron_object_Transform.temp;let m=pt.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}let _this1=this.local;let m1=iron_object_Transform.temp;let a001=_this1.self._00;let a011=_this1.self._01;let a021=_this1.self._02;let a031=_this1.self._03;let a101=_this1.self._10;let a111=_this1.self._11;let a121=_this1.self._12;let a131=_this1.self._13;let a201=_this1.self._20;let a211=_this1.self._21;let a221=_this1.self._22;let a231=_this1.self._23;let a301=_this1.self._30;let a311=_this1.self._31;let a321=_this1.self._32;let a331=_this1.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this1.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this1.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this1.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this1.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._33=a301*b0+a311*b1+a321*b2+a331*b3;this.decompose();this.buildMatrix()}applyParent(){let pt=this.object.parent.transform;pt.buildMatrix();let _this=this.local;let m=pt.world;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m.self._00;let b1=m.self._10;let b2=m.self._20;let b3=m.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._01;b1=m.self._11;b2=m.self._21;b3=m.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._02;b1=m.self._12;b2=m.self._22;b3=m.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._03;b1=m.self._13;b2=m.self._23;b3=m.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;this.decompose();this.buildMatrix()}}$hxClasses["iron.object.Transform"]=iron_object_Transform;iron_object_Transform.__name__="iron.object.Transform";Object.assign(iron_object_Transform.prototype,{__class__:iron_object_Transform,world:null,localOnly:null,local:null,loc:null,rot:null,scale:null,scaleWorld:null,worldUnpack:null,dirty:null,object:null,dim:null,radius:null,boneParent:null,_eulerX:null,_eulerY:null,_eulerZ:null,dloc:null,drot:null,dscale:null,_deulerX:null,_deulerY:null,_deulerZ:null});class kha_math_FastMatrix3{constructor(_00,_10,_20,_01,_11,_21,_02,_12,_22){this._00=_00;this._10=_10;this._20=_20;this._01=_01;this._11=_11;this._21=_21;this._02=_02;this._12=_12;this._22=_22}}$hxClasses["kha.math.FastMatrix3"]=kha_math_FastMatrix3;kha_math_FastMatrix3.__name__="kha.math.FastMatrix3";Object.assign(kha_math_FastMatrix3.prototype,{__class__:kha_math_FastMatrix3,_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null});class iron_object_Uniforms{static setContextConstants(g,context,bindParams){if(context.raw.constants!=null){let _g=0;let _g1=context.raw.constants.length;while(_g<_g1){let i=_g++;let c=context.raw.constants[i];iron_object_Uniforms.setContextConstant(g,context.constants[i],c)}}if(bindParams!=null){let _g=0;let _g1=bindParams.length/2|0;while(_g<_g1){let i=_g++;let pos=i*2;let rtID=bindParams[pos];let samplerID=bindParams[pos+1];let attachDepth=false;let char=rtID.charAt(0);if(char=="_"){attachDepth=true;rtID=HxOverrides.substr(rtID,1,null)}let rt=attachDepth?iron_RenderPath.active.depthToRenderTarget.h[rtID]:iron_RenderPath.active.renderTargets.h[rtID];iron_object_Uniforms.bindRenderTarget(g,rt,context,samplerID,attachDepth)}}if(context.raw.texture_units!=null){let _g=0;let _g1=context.raw.texture_units.length;while(_g<_g1){let j=_g++;let tulink=context.raw.texture_units[j].link;if(tulink==null){continue}if(tulink.charAt(0)=="$"){g.setTexture(context.textureUnits[j],iron_Scene.active.embedded.h[HxOverrides.substr(tulink,1,null)]);if(tulink.endsWith(".raw")){g.setTexture3DParameters(context.textureUnits[j],0,0,0,1,1,0)}else{g.setTextureParameters(context.textureUnits[j],0,0,1,1,0)}}else{switch(tulink){case"_envmap":let w=iron_Scene.active.world;if(w!=null){g.setTexture(context.textureUnits[j],w.envmap);g.setTextureParameters(context.textureUnits[j],0,0,1,1,0)}break;case"_envmapRadiance":let w1=iron_Scene.active.world;if(w1!=null){g.setTexture(context.textureUnits[j],w1.probe.radiance);g.setTextureParameters(context.textureUnits[j],0,0,1,1,2)}break}}}}}static setObjectConstants(g,context,object){if(context.raw.constants!=null){let _g=0;let _g1=context.raw.constants.length;while(_g<_g1){let i=_g++;let c=context.raw.constants[i];iron_object_Uniforms.setObjectConstant(g,object,context.constants[i],c)}}if(iron_object_Uniforms.externalTextureLinks!=null){if(context.raw.texture_units!=null){let _g=0;let _g1=context.raw.texture_units.length;while(_g<_g1){let j=_g++;let tu=context.raw.texture_units[j];if(tu.link==null){continue}let tuAddrU;switch(tu.addressing_u){case"clamp":tuAddrU=2;break;case"mirror":tuAddrU=1;break;default:tuAddrU=0}let tuAddrV;switch(tu.addressing_v){case"clamp":tuAddrV=2;break;case"mirror":tuAddrV=1;break;default:tuAddrV=0}let tuFilterMin;switch(tu.filter_min){case"anisotropic":tuFilterMin=2;break;case"point":tuFilterMin=0;break;default:tuFilterMin=1}let tuFilterMag;switch(tu.filter_mag){case"anisotropic":tuFilterMag=2;break;case"point":tuFilterMag=0;break;default:tuFilterMag=1}let tuMipMapFilter;switch(tu.mipmap_filter){case"linear":tuMipMapFilter=2;break;case"point":tuMipMapFilter=1;break;default:tuMipMapFilter=0}let _g1=0;let _g2=iron_object_Uniforms.externalTextureLinks;while(_g1<_g2.length){let f=_g2[_g1];++_g1;let image=f(object,iron_object_Uniforms.currentMat(object),tu.link);if(image!=null){if(tu.link.endsWith("_depth")){g.setTextureDepth(context.textureUnits[j],image)}else{g.setTexture(context.textureUnits[j],image)}g.setTextureParameters(context.textureUnits[j],tuAddrU,tuAddrV,tuFilterMin,tuFilterMag,tuMipMapFilter);break}}}}}}static bindRenderTarget(g,rt,context,samplerID,attachDepth){if(rt!=null){let tus=context.raw.texture_units;let _g=0;let _g1=tus.length;while(_g<_g1){let j=_g++;if(samplerID==tus[j].name){let isImage=tus[j].is_image!=null&&tus[j].is_image;let paramsSet=false;if(rt.raw.depth>1){g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,2,0);paramsSet=true}if(isImage){g.setImageTexture(context.textureUnits[j],rt.image);if(rt.raw.name.startsWith("voxels_")){g.setTextureParameters(context.textureUnits[j],2,2,1,1,0)}else if(rt.raw.name.startsWith("voxels")){g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,1,0)}else{g.setTextureParameters(context.textureUnits[j],2,2,1,1,2)}paramsSet=true}else if(rt.isCubeMap){if(attachDepth){g.setCubeMapDepth(context.textureUnits[j],rt.cubeMap)}else{g.setCubeMap(context.textureUnits[j],rt.cubeMap)}}else if(attachDepth){g.setTextureDepth(context.textureUnits[j],rt.image)}else{g.setTexture(context.textureUnits[j],rt.image)}if(!paramsSet&&rt.raw.mipmaps!=null&&rt.raw.mipmaps==true&&!isImage){g.setTextureParameters(context.textureUnits[j],2,2,1,1,2);paramsSet=true}if(!paramsSet){if(rt.raw.name.startsWith("bloom")){g.setTextureParameters(context.textureUnits[j],2,2,1,1,2)}if(samplerID.startsWith("shadowMap")){if(rt.isCubeMap){g.setCubeMapCompareMode(context.textureUnits[j],true)}else{g.setTextureParameters(context.textureUnits[j],2,2,1,1,0);g.setTextureCompareMode(context.textureUnits[j],true)}paramsSet=true}else if(attachDepth){g.setTextureParameters(context.textureUnits[j],2,2,0,0,0);paramsSet=true}}if(!paramsSet){let oc=context.overrideContext;let allowParams=oc==null||oc.shared_sampler==null||oc.shared_sampler==samplerID;if(allowParams){let addressing=oc!=null&&oc.addressing=="repeat"?0:2;let filter=oc!=null&&oc.filter=="point"?0:iron_object_Uniforms.defaultFilter;g.setTextureParameters(context.textureUnits[j],addressing,addressing,filter,filter,0)}paramsSet=true}}}}}static setContextConstant(g,location,c){if(c.link==null){return true}let camera=iron_Scene.active.camera;let light=iron_RenderPath.active.light;if(c.type=="mat4"){let m=null;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_biasLightViewProjectionMatrix":if(light!=null){let _this=iron_object_Uniforms.helpMat;let m1=light.VP;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;let _this1=iron_object_Uniforms.helpMat;let m2=iron_object_Uniforms.biasMat;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_inverseProjectionMatrix":let _this=iron_object_Uniforms.helpMat;let m1=camera.P;let a00=m1.self._00;let a01=m1.self._01;let a02=m1.self._02;let a03=m1.self._03;let a10=m1.self._10;let a11=m1.self._11;let a12=m1.self._12;let a13=m1.self._13;let a20=m1.self._20;let a21=m1.self._21;let a22=m1.self._22;let a23=m1.self._23;let a30=m1.self._30;let a31=m1.self._31;let a32=m1.self._32;let a33=m1.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}m=iron_object_Uniforms.helpMat;break;case"_inverseViewProjectionMatrix":let _this1=iron_object_Uniforms.helpMat;let m2=camera.V;_this1.self._00=m2.self._00;_this1.self._01=m2.self._01;_this1.self._02=m2.self._02;_this1.self._03=m2.self._03;_this1.self._10=m2.self._10;_this1.self._11=m2.self._11;_this1.self._12=m2.self._12;_this1.self._13=m2.self._13;_this1.self._20=m2.self._20;_this1.self._21=m2.self._21;_this1.self._22=m2.self._22;_this1.self._23=m2.self._23;_this1.self._30=m2.self._30;_this1.self._31=m2.self._31;_this1.self._32=m2.self._32;_this1.self._33=m2.self._33;let _this2=iron_object_Uniforms.helpMat;let m3=camera.P;let a001=_this2.self._00;let a011=_this2.self._01;let a021=_this2.self._02;let a031=_this2.self._03;let a101=_this2.self._10;let a111=_this2.self._11;let a121=_this2.self._12;let a131=_this2.self._13;let a201=_this2.self._20;let a211=_this2.self._21;let a221=_this2.self._22;let a231=_this2.self._23;let a301=_this2.self._30;let a311=_this2.self._31;let a321=_this2.self._32;let a331=_this2.self._33;let b0=m3.self._00;let b1=m3.self._10;let b2=m3.self._20;let b3=m3.self._30;_this2.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._01;b1=m3.self._11;b2=m3.self._21;b3=m3.self._31;_this2.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._02;b1=m3.self._12;b2=m3.self._22;b3=m3.self._32;_this2.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._03;b1=m3.self._13;b2=m3.self._23;b3=m3.self._33;_this2.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._33=a301*b0+a311*b1+a321*b2+a331*b3;let _this3=iron_object_Uniforms.helpMat;let m4=iron_object_Uniforms.helpMat;let a002=m4.self._00;let a012=m4.self._01;let a022=m4.self._02;let a032=m4.self._03;let a102=m4.self._10;let a112=m4.self._11;let a122=m4.self._12;let a132=m4.self._13;let a202=m4.self._20;let a212=m4.self._21;let a222=m4.self._22;let a232=m4.self._23;let a302=m4.self._30;let a312=m4.self._31;let a322=m4.self._32;let a332=m4.self._33;let b001=a002*a112-a012*a102;let b011=a002*a122-a022*a102;let b021=a002*a132-a032*a102;let b031=a012*a122-a022*a112;let b041=a012*a132-a032*a112;let b051=a022*a132-a032*a122;let b061=a202*a312-a212*a302;let b071=a202*a322-a222*a302;let b081=a202*a332-a232*a302;let b091=a212*a322-a222*a312;let b101=a212*a332-a232*a312;let b111=a222*a332-a232*a322;let det1=b001*b111-b011*b101+b021*b091+b031*b081-b041*b071+b051*b061;if(det1==0){_this3.self._00=1;_this3.self._01=0;_this3.self._02=0;_this3.self._03=0;_this3.self._10=0;_this3.self._11=1;_this3.self._12=0;_this3.self._13=0;_this3.self._20=0;_this3.self._21=0;_this3.self._22=1;_this3.self._23=0;_this3.self._30=0;_this3.self._31=0;_this3.self._32=0;_this3.self._33=1}else{det1=1/det1;_this3.self._00=(a112*b111-a122*b101+a132*b091)*det1;_this3.self._01=(a022*b101-a012*b111-a032*b091)*det1;_this3.self._02=(a312*b051-a322*b041+a332*b031)*det1;_this3.self._03=(a222*b041-a212*b051-a232*b031)*det1;_this3.self._10=(a122*b081-a102*b111-a132*b071)*det1;_this3.self._11=(a002*b111-a022*b081+a032*b071)*det1;_this3.self._12=(a322*b021-a302*b051-a332*b011)*det1;_this3.self._13=(a202*b051-a222*b021+a232*b011)*det1;_this3.self._20=(a102*b101-a112*b081+a132*b061)*det1;_this3.self._21=(a012*b081-a002*b101-a032*b061)*det1;_this3.self._22=(a302*b041-a312*b021+a332*b001)*det1;_this3.self._23=(a212*b021-a202*b041-a232*b001)*det1;_this3.self._30=(a112*b071-a102*b091-a122*b061)*det1;_this3.self._31=(a002*b091-a012*b071+a022*b061)*det1;_this3.self._32=(a312*b011-a302*b031-a322*b001)*det1;_this3.self._33=(a202*b031-a212*b011+a222*b001)*det1}m=iron_object_Uniforms.helpMat;break;case"_lightViewProjectionMatrix":if(light!=null){m=light.VP}break;case"_prevViewProjectionMatrix":let _this4=iron_object_Uniforms.helpMat;let m5=camera.prevV;_this4.self._00=m5.self._00;_this4.self._01=m5.self._01;_this4.self._02=m5.self._02;_this4.self._03=m5.self._03;_this4.self._10=m5.self._10;_this4.self._11=m5.self._11;_this4.self._12=m5.self._12;_this4.self._13=m5.self._13;_this4.self._20=m5.self._20;_this4.self._21=m5.self._21;_this4.self._22=m5.self._22;_this4.self._23=m5.self._23;_this4.self._30=m5.self._30;_this4.self._31=m5.self._31;_this4.self._32=m5.self._32;_this4.self._33=m5.self._33;let _this5=iron_object_Uniforms.helpMat;let m6=camera.P;let a003=_this5.self._00;let a013=_this5.self._01;let a023=_this5.self._02;let a033=_this5.self._03;let a103=_this5.self._10;let a113=_this5.self._11;let a123=_this5.self._12;let a133=_this5.self._13;let a203=_this5.self._20;let a213=_this5.self._21;let a223=_this5.self._22;let a233=_this5.self._23;let a303=_this5.self._30;let a313=_this5.self._31;let a323=_this5.self._32;let a333=_this5.self._33;let b010=m6.self._00;let b12=m6.self._10;let b21=m6.self._20;let b31=m6.self._30;_this5.self._00=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._10=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._20=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._30=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._01;b12=m6.self._11;b21=m6.self._21;b31=m6.self._31;_this5.self._01=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._11=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._21=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._31=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._02;b12=m6.self._12;b21=m6.self._22;b31=m6.self._32;_this5.self._02=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._12=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._22=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._32=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._03;b12=m6.self._13;b21=m6.self._23;b31=m6.self._33;_this5.self._03=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._13=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._23=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._33=a303*b010+a313*b12+a323*b21+a333*b31;m=iron_object_Uniforms.helpMat;break;case"_projectionMatrix":m=camera.P;break;case"_skydomeMatrix":let tr=camera.transform;let _this6=iron_object_Uniforms.helpVec;_this6.x=tr.world.self._30;_this6.y=tr.world.self._31;_this6.z=tr.world.self._32-3.5;_this6.w=1;let bounds=camera.data.raw.far_plane*.95;let _this7=iron_object_Uniforms.helpVec2;_this7.x=bounds;_this7.y=bounds;_this7.z=bounds;_this7.w=1;let _this8=iron_object_Uniforms.helpMat;let loc=iron_object_Uniforms.helpVec;let quat=iron_object_Uniforms.helpQuat;let sc=iron_object_Uniforms.helpVec2;let x=quat.x;let y=quat.y;let z=quat.z;let w=quat.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this8.self._00=1-(yy+zz);_this8.self._10=xy-wz;_this8.self._20=xz+wy;_this8.self._01=xy+wz;_this8.self._11=1-(xx+zz);_this8.self._21=yz-wx;_this8.self._02=xz-wy;_this8.self._12=yz+wx;_this8.self._22=1-(xx+yy);_this8.self._03=0;_this8.self._13=0;_this8.self._23=0;_this8.self._30=0;_this8.self._31=0;_this8.self._32=0;_this8.self._33=1;let x1=sc.x;let y1=sc.y;let z1=sc.z;_this8.self._00*=x1;_this8.self._01*=x1;_this8.self._02*=x1;_this8.self._03*=x1;_this8.self._10*=y1;_this8.self._11*=y1;_this8.self._12*=y1;_this8.self._13*=y1;_this8.self._20*=z1;_this8.self._21*=z1;_this8.self._22*=z1;_this8.self._23*=z1;_this8.self._30=loc.x;_this8.self._31=loc.y;_this8.self._32=loc.z;let _this9=iron_object_Uniforms.helpMat;let m7=camera.V;let a004=_this9.self._00;let a014=_this9.self._01;let a024=_this9.self._02;let a034=_this9.self._03;let a104=_this9.self._10;let a114=_this9.self._11;let a124=_this9.self._12;let a134=_this9.self._13;let a204=_this9.self._20;let a214=_this9.self._21;let a224=_this9.self._22;let a234=_this9.self._23;let a304=_this9.self._30;let a314=_this9.self._31;let a324=_this9.self._32;let a334=_this9.self._33;let b012=m7.self._00;let b13=m7.self._10;let b22=m7.self._20;let b32=m7.self._30;_this9.self._00=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._10=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._20=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._30=a304*b012+a314*b13+a324*b22+a334*b32;b012=m7.self._01;b13=m7.self._11;b22=m7.self._21;b32=m7.self._31;_this9.self._01=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._11=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._21=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._31=a304*b012+a314*b13+a324*b22+a334*b32;b012=m7.self._02;b13=m7.self._12;b22=m7.self._22;b32=m7.self._32;_this9.self._02=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._12=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._22=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._32=a304*b012+a314*b13+a324*b22+a334*b32;b012=m7.self._03;b13=m7.self._13;b22=m7.self._23;b32=m7.self._33;_this9.self._03=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._13=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._23=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._33=a304*b012+a314*b13+a324*b22+a334*b32;let _this10=iron_object_Uniforms.helpMat;let m8=camera.P;let a005=_this10.self._00;let a015=_this10.self._01;let a025=_this10.self._02;let a035=_this10.self._03;let a105=_this10.self._10;let a115=_this10.self._11;let a125=_this10.self._12;let a135=_this10.self._13;let a205=_this10.self._20;let a215=_this10.self._21;let a225=_this10.self._22;let a235=_this10.self._23;let a305=_this10.self._30;let a315=_this10.self._31;let a325=_this10.self._32;let a335=_this10.self._33;let b013=m8.self._00;let b14=m8.self._10;let b23=m8.self._20;let b33=m8.self._30;_this10.self._00=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._10=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._20=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._30=a305*b013+a315*b14+a325*b23+a335*b33;b013=m8.self._01;b14=m8.self._11;b23=m8.self._21;b33=m8.self._31;_this10.self._01=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._11=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._21=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._31=a305*b013+a315*b14+a325*b23+a335*b33;b013=m8.self._02;b14=m8.self._12;b23=m8.self._22;b33=m8.self._32;_this10.self._02=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._12=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._22=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._32=a305*b013+a315*b14+a325*b23+a335*b33;b013=m8.self._03;b14=m8.self._13;b23=m8.self._23;b33=m8.self._33;_this10.self._03=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._13=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._23=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._33=a305*b013+a315*b14+a325*b23+a335*b33;m=iron_object_Uniforms.helpMat;break;case"_transposeViewMatrix":let _this11=iron_object_Uniforms.helpMat;let m9=camera.V;_this11.self._00=m9.self._00;_this11.self._01=m9.self._01;_this11.self._02=m9.self._02;_this11.self._03=m9.self._03;_this11.self._10=m9.self._10;_this11.self._11=m9.self._11;_this11.self._12=m9.self._12;_this11.self._13=m9.self._13;_this11.self._20=m9.self._20;_this11.self._21=m9.self._21;_this11.self._22=m9.self._22;_this11.self._23=m9.self._23;_this11.self._30=m9.self._30;_this11.self._31=m9.self._31;_this11.self._32=m9.self._32;_this11.self._33=m9.self._33;let _this12=iron_object_Uniforms.helpMat;let f=_this12.self._01;_this12.self._01=_this12.self._10;_this12.self._10=f;f=_this12.self._02;_this12.self._02=_this12.self._20;_this12.self._20=f;f=_this12.self._12;_this12.self._12=_this12.self._21;_this12.self._21=f;m=iron_object_Uniforms.helpMat;break;case"_viewMatrix":m=camera.V;break;case"_viewProjectionMatrix":m=camera.VP;break;default:return false}}g.setMatrix(location,m!=null?m.self:new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));return true}else if(c.type=="vec4"){let v=null;let _this=iron_object_Uniforms.helpVec;let w=0;if(w==null){w=1}_this.x=0;_this.y=0;_this.z=0;_this.w=w;let _g=c.link;return false}else if(c.type=="vec3"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_backgroundCol":if(camera.data.raw.clear_color!=null){let _this=iron_object_Uniforms.helpVec;let y=camera.data.raw.clear_color.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=camera.data.raw.clear_color.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.x=camera.data.raw.clear_color.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.y=y;_this.z=z;_this.w=1}v=iron_object_Uniforms.helpVec;break;case"_cameraLook":let _this1=new iron_math_Vec4(-camera.transform.world.self._20,-camera.transform.world.self._21,-camera.transform.world.self._22);let n=Math.sqrt(_this1.x*_this1.x+_this1.y*_this1.y+_this1.z*_this1.z);if(n>0){let invN=1/n;_this1.x*=invN;_this1.y*=invN;_this1.z*=invN}iron_object_Uniforms.helpVec=_this1;v=iron_object_Uniforms.helpVec;break;case"_cameraPosition":let _this2=iron_object_Uniforms.helpVec;_this2.x=camera.transform.world.self._30;_this2.y=camera.transform.world.self._31;_this2.z=camera.transform.world.self._32;_this2.w=1;v=iron_object_Uniforms.helpVec;break;case"_cameraRight":let _this3=new iron_math_Vec4(camera.transform.world.self._00,camera.transform.world.self._01,camera.transform.world.self._02);let n1=Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);if(n1>0){let invN=1/n1;_this3.x*=invN;_this3.y*=invN;_this3.z*=invN}iron_object_Uniforms.helpVec=_this3;v=iron_object_Uniforms.helpVec;break;case"_cameraUp":let _this4=new iron_math_Vec4(camera.transform.world.self._10,camera.transform.world.self._11,camera.transform.world.self._12);let n2=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);if(n2>0){let invN=1/n2;_this4.x*=invN;_this4.y*=invN;_this4.z*=invN}iron_object_Uniforms.helpVec=_this4;v=iron_object_Uniforms.helpVec;break;case"_hosekSunDirection":let w=iron_Scene.active.world;if(w!=null){let _this=iron_object_Uniforms.helpVec;let y=w.raw.sun_direction.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=w.raw.sun_direction.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)>0?w.raw.sun_direction.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN):0;_this.x=w.raw.sun_direction.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_lightDirection":if(light!=null){let _this=new iron_math_Vec4(light.V.self._02,light.V.self._12,light.V.self._22);let n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){let invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec}break;case"_lightPosition":if(light!=null){let _this=iron_object_Uniforms.helpVec;_this.x=light.transform.world.self._30;_this.y=light.transform.world.self._31;_this.z=light.transform.world.self._32;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_pointColor":let point=iron_RenderPath.active.point;if(point!=null){let str=point.visible?point.data.raw.strength:0;let _this=iron_object_Uniforms.helpVec;let y=point.data.raw.color.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;let z=point.data.raw.color.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.x=point.data.raw.color.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_pointPosition":let point1=iron_RenderPath.active.point;if(point1!=null){let _this=iron_object_Uniforms.helpVec;_this.x=point1.transform.world.self._30;_this.y=point1.transform.world.self._31;_this.z=point1.transform.world.self._32;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_sunColor":let sun=iron_RenderPath.active.sun;if(sun!=null){let str=sun.visible?sun.data.raw.strength:0;let _this=iron_object_Uniforms.helpVec;let y=sun.data.raw.color.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;let z=sun.data.raw.color.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.x=sun.data.raw.color.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_sunDirection":let sun1=iron_RenderPath.active.sun;if(sun1!=null){let _this=new iron_math_Vec4(sun1.V.self._02,sun1.V.self._12,sun1.V.self._22);let n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){let invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec}break;default:return false}}if(v!=null){g.setFloat3(location,v.x,v.y,v.z)}else{g.setFloat3(location,0,0,0)}return true}else if(c.type=="vec2"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_aspectRatio":v=iron_object_Uniforms.helpVec;v.x=iron_RenderPath.active.currentH/iron_RenderPath.active.currentW;v.y=iron_RenderPath.active.currentW/iron_RenderPath.active.currentH;v.x=v.x>1?1:v.x;v.y=v.y>1?1:v.y;break;case"_cameraPlane":v=iron_object_Uniforms.helpVec;v.x=camera.data.raw.near_plane;v.y=camera.data.raw.far_plane;break;case"_cameraPlaneProj":let near=camera.data.raw.near_plane;let far=camera.data.raw.far_plane;v=iron_object_Uniforms.helpVec;v.x=far/(far-near);v.y=-far*near/(far-near);break;case"_lightPlane":if(light!=null){v=iron_object_Uniforms.helpVec;v.x=light.data.raw.near_plane;v.y=light.data.raw.far_plane}break;case"_lightPlaneProj":if(light!=null){let near=light.data.raw.near_plane;let far=light.data.raw.far_plane;let a=far+near;let b=far-near;let f2=2;let c=f2*far*near;v=iron_object_Uniforms.helpVec;v.x=a/b;v.y=c/b}break;case"_screenSize":v=iron_object_Uniforms.helpVec;v.x=iron_RenderPath.active.currentW;v.y=iron_RenderPath.active.currentH;break;case"_screenSizeInv":v=iron_object_Uniforms.helpVec;v.x=1/iron_RenderPath.active.currentW;v.y=1/iron_RenderPath.active.currentH;break;case"_shadowMapSize":if(light!=null&&light.data.raw.cast_shadow){v=iron_object_Uniforms.helpVec;v.x=v.y=light.data.raw.shadowmap_size}break;case"_vec2x":v=iron_object_Uniforms.helpVec;v.x=1;v.y=0;break;case"_vec2x2":v=iron_object_Uniforms.helpVec;v.x=2;v.y=0;break;case"_vec2x2Inv":v=iron_object_Uniforms.helpVec;v.x=2/iron_RenderPath.active.currentW;v.y=0;break;case"_vec2xInv":v=iron_object_Uniforms.helpVec;v.x=1/iron_RenderPath.active.currentW;v.y=0;break;case"_vec2y":v=iron_object_Uniforms.helpVec;v.x=0;v.y=1;break;case"_vec2y2":v=iron_object_Uniforms.helpVec;v.x=0;v.y=2;break;case"_vec2y2Inv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=2/iron_RenderPath.active.currentH;break;case"_vec2y3":v=iron_object_Uniforms.helpVec;v.x=0;v.y=3;break;case"_vec2y3Inv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=3/iron_RenderPath.active.currentH;break;case"_vec2yInv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=1/iron_RenderPath.active.currentH;break;case"_windowSize":v=iron_object_Uniforms.helpVec;v.x=iron_App.w();v.y=iron_App.h();break;default:return false}}if(v!=null){g.setFloat2(location,v.x,v.y)}else{g.setFloat2(location,0,0)}return true}else if(c.type=="float"){let f=null;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_aspectRatioF":f=iron_RenderPath.active.currentW/iron_RenderPath.active.currentH;break;case"_aspectRatioWindowF":f=iron_App.w()/iron_App.h();break;case"_envmapStrength":f=iron_Scene.active.world==null?0:iron_Scene.active.world.probe.raw.strength;break;case"_fieldOfView":f=camera.data.raw.fov;break;case"_frameScale":f=iron_RenderPath.active.frameTime/iron_system_Time.get_delta();break;case"_pointShadowsBias":let point=iron_RenderPath.active.point;f=point==null?0:point.data.raw.shadows_bias;break;case"_sunShadowsBias":let sun=iron_RenderPath.active.sun;f=sun==null?0:sun.data.raw.shadows_bias;break;case"_time":f=kha_Scheduler.time();break;default:return false}}g.setFloat(location,f!=null?f:0);return true}else if(c.type=="floats"){let fa=null;if(c.link=="_envmapIrradiance"){fa=iron_Scene.active.world==null?iron_data_WorldData.getEmptyIrradiance():iron_Scene.active.world.probe.irradiance}if(fa!=null){g.setFloats(location,fa);return true}}else if(c.type=="int"){let i=null;let _g=c.link;if(_g==null){return false}else if(_g=="_envmapNumMipmaps"){let w=iron_Scene.active.world;i=w!=null?w.probe.raw.radiance_mipmaps+1-2:1}else{return false}g.setInt(location,i!=null?i:0);return true}return false}static setObjectConstant(g,object,location,c){if(c.link==null){return}let camera=iron_Scene.active.camera;let light=iron_RenderPath.active.light;if(c.type=="mat4"){let m=null;switch(c.link){case"_biasLightWorldViewProjectionMatrix":if(light!=null){if(object==null){let _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{let _this=iron_object_Uniforms.helpMat;let m=object.transform.worldUnpack;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=iron_object_Uniforms.helpMat;let m1=light.VP;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let _this1=iron_object_Uniforms.helpMat;let m2=iron_object_Uniforms.biasMat;let a001=_this1.self._00;let a011=_this1.self._01;let a021=_this1.self._02;let a031=_this1.self._03;let a101=_this1.self._10;let a111=_this1.self._11;let a121=_this1.self._12;let a131=_this1.self._13;let a201=_this1.self._20;let a211=_this1.self._21;let a221=_this1.self._22;let a231=_this1.self._23;let a301=_this1.self._30;let a311=_this1.self._31;let a321=_this1.self._32;let a331=_this1.self._33;let b01=m2.self._00;let b11=m2.self._10;let b21=m2.self._20;let b31=m2.self._30;_this1.self._00=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._10=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._20=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._30=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._01;b11=m2.self._11;b21=m2.self._21;b31=m2.self._31;_this1.self._01=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._11=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._21=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._31=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._02;b11=m2.self._12;b21=m2.self._22;b31=m2.self._32;_this1.self._02=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._12=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._22=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._32=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._03;b11=m2.self._13;b21=m2.self._23;b31=m2.self._33;_this1.self._03=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._13=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._23=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._33=a301*b01+a311*b11+a321*b21+a331*b31;m=iron_object_Uniforms.helpMat}break;case"_biasLightWorldViewProjectionMatrixSun":let _g=0;let _g1=iron_Scene.active.lights;while(_g<_g1.length){let l=_g1[_g];++_g;if(l.data.raw.type=="sun"){if(object==null){let _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{let _this=iron_object_Uniforms.helpMat;let m=object.transform.worldUnpack;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=iron_object_Uniforms.helpMat;let m1=l.VP;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let _this1=iron_object_Uniforms.helpMat;let m2=iron_object_Uniforms.biasMat;let a001=_this1.self._00;let a011=_this1.self._01;let a021=_this1.self._02;let a031=_this1.self._03;let a101=_this1.self._10;let a111=_this1.self._11;let a121=_this1.self._12;let a131=_this1.self._13;let a201=_this1.self._20;let a211=_this1.self._21;let a221=_this1.self._22;let a231=_this1.self._23;let a301=_this1.self._30;let a311=_this1.self._31;let a321=_this1.self._32;let a331=_this1.self._33;let b01=m2.self._00;let b11=m2.self._10;let b21=m2.self._20;let b31=m2.self._30;_this1.self._00=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._10=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._20=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._30=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._01;b11=m2.self._11;b21=m2.self._21;b31=m2.self._31;_this1.self._01=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._11=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._21=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._31=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._02;b11=m2.self._12;b21=m2.self._22;b31=m2.self._32;_this1.self._02=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._12=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._22=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._32=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._03;b11=m2.self._13;b21=m2.self._23;b31=m2.self._33;_this1.self._03=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._13=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._23=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._33=a301*b01+a311*b11+a321*b21+a331*b31;m=iron_object_Uniforms.helpMat;break}}break;case"_inverseWorldMatrix":let _this=iron_object_Uniforms.helpMat;let m1=object.transform.worldUnpack;let a00=m1.self._00;let a01=m1.self._01;let a02=m1.self._02;let a03=m1.self._03;let a10=m1.self._10;let a11=m1.self._11;let a12=m1.self._12;let a13=m1.self._13;let a20=m1.self._20;let a21=m1.self._21;let a22=m1.self._22;let a23=m1.self._23;let a30=m1.self._30;let a31=m1.self._31;let a32=m1.self._32;let a33=m1.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}m=iron_object_Uniforms.helpMat;break;case"_lightWorldViewProjectionMatrix":if(light!=null){if(object==null){let _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{let _this=iron_object_Uniforms.helpMat;let m=object.transform.worldUnpack;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=iron_object_Uniforms.helpMat;let m1=light.VP;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_lightWorldViewProjectionMatrixCylinder":if(light!=null){let _this=iron_object_Uniforms.helpMat;let m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;let _this1=iron_object_Uniforms.helpMat;let m2=camera.V;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._22=1;let _this2=iron_object_Uniforms.helpMat2;let m3=camera.V;let a001=m3.self._00;let a011=m3.self._01;let a021=m3.self._02;let a031=m3.self._03;let a101=m3.self._10;let a111=m3.self._11;let a121=m3.self._12;let a131=m3.self._13;let a201=m3.self._20;let a211=m3.self._21;let a221=m3.self._22;let a231=m3.self._23;let a301=m3.self._30;let a311=m3.self._31;let a321=m3.self._32;let a331=m3.self._33;let b00=a001*a111-a011*a101;let b01=a001*a121-a021*a101;let b02=a001*a131-a031*a101;let b03=a011*a121-a021*a111;let b04=a011*a131-a031*a111;let b05=a021*a131-a031*a121;let b06=a201*a311-a211*a301;let b07=a201*a321-a221*a301;let b08=a201*a331-a231*a301;let b09=a211*a321-a221*a311;let b10=a211*a331-a231*a311;let b11=a221*a331-a231*a321;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this2.self._00=1;_this2.self._01=0;_this2.self._02=0;_this2.self._03=0;_this2.self._10=0;_this2.self._11=1;_this2.self._12=0;_this2.self._13=0;_this2.self._20=0;_this2.self._21=0;_this2.self._22=1;_this2.self._23=0;_this2.self._30=0;_this2.self._31=0;_this2.self._32=0;_this2.self._33=1}else{det=1/det;_this2.self._00=(a111*b11-a121*b10+a131*b09)*det;_this2.self._01=(a021*b10-a011*b11-a031*b09)*det;_this2.self._02=(a311*b05-a321*b04+a331*b03)*det;_this2.self._03=(a221*b04-a211*b05-a231*b03)*det;_this2.self._10=(a121*b08-a101*b11-a131*b07)*det;_this2.self._11=(a001*b11-a021*b08+a031*b07)*det;_this2.self._12=(a321*b02-a301*b05-a331*b01)*det;_this2.self._13=(a201*b05-a221*b02+a231*b01)*det;_this2.self._20=(a101*b10-a111*b08+a131*b06)*det;_this2.self._21=(a011*b08-a001*b10-a031*b06)*det;_this2.self._22=(a301*b04-a311*b02+a331*b00)*det;_this2.self._23=(a211*b02-a201*b04-a231*b00)*det;_this2.self._30=(a111*b07-a101*b09-a121*b06)*det;_this2.self._31=(a001*b09-a011*b07+a021*b06)*det;_this2.self._32=(a311*b01-a301*b03-a321*b00)*det;_this2.self._33=(a201*b03-a211*b01+a221*b00)*det}let _this3=iron_object_Uniforms.helpMat;let m4=iron_object_Uniforms.helpMat2;let a002=_this3.self._00;let a012=_this3.self._01;let a022=_this3.self._02;let a032=_this3.self._03;let a102=_this3.self._10;let a112=_this3.self._11;let a122=_this3.self._12;let a132=_this3.self._13;let a202=_this3.self._20;let a212=_this3.self._21;let a222=_this3.self._22;let a232=_this3.self._23;let a302=_this3.self._30;let a312=_this3.self._31;let a322=_this3.self._32;let a332=_this3.self._33;let b010=m4.self._00;let b12=m4.self._10;let b21=m4.self._20;let b31=m4.self._30;_this3.self._00=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._10=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._20=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._30=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._01;b12=m4.self._11;b21=m4.self._21;b31=m4.self._31;_this3.self._01=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._11=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._21=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._31=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._02;b12=m4.self._12;b21=m4.self._22;b31=m4.self._32;_this3.self._02=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._12=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._22=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._32=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._03;b12=m4.self._13;b21=m4.self._23;b31=m4.self._33;_this3.self._03=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._13=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._23=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._33=a302*b010+a312*b12+a322*b21+a332*b31;let _this4=iron_object_Uniforms.helpMat;let m5=light.VP;let a003=_this4.self._00;let a013=_this4.self._01;let a023=_this4.self._02;let a033=_this4.self._03;let a103=_this4.self._10;let a113=_this4.self._11;let a123=_this4.self._12;let a133=_this4.self._13;let a203=_this4.self._20;let a213=_this4.self._21;let a223=_this4.self._22;let a233=_this4.self._23;let a303=_this4.self._30;let a313=_this4.self._31;let a323=_this4.self._32;let a333=_this4.self._33;let b011=m5.self._00;let b13=m5.self._10;let b22=m5.self._20;let b32=m5.self._30;_this4.self._00=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._10=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._20=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._30=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._01;b13=m5.self._11;b22=m5.self._21;b32=m5.self._31;_this4.self._01=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._11=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._21=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._31=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._02;b13=m5.self._12;b22=m5.self._22;b32=m5.self._32;_this4.self._02=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._12=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._22=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._32=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._03;b13=m5.self._13;b22=m5.self._23;b32=m5.self._33;_this4.self._03=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._13=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._23=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._33=a303*b011+a313*b13+a323*b22+a333*b32;m=iron_object_Uniforms.helpMat}break;case"_lightWorldViewProjectionMatrixSphere":if(light!=null){let _this=iron_object_Uniforms.helpMat;let m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;let _this1=iron_object_Uniforms.helpMat;let m2=camera.V;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._10=0;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._11=1;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._12=0;iron_object_Uniforms.helpMat.self._22=1;let _this2=iron_object_Uniforms.helpMat2;let m3=camera.V;let a001=m3.self._00;let a011=m3.self._01;let a021=m3.self._02;let a031=m3.self._03;let a101=m3.self._10;let a111=m3.self._11;let a121=m3.self._12;let a131=m3.self._13;let a201=m3.self._20;let a211=m3.self._21;let a221=m3.self._22;let a231=m3.self._23;let a301=m3.self._30;let a311=m3.self._31;let a321=m3.self._32;let a331=m3.self._33;let b00=a001*a111-a011*a101;let b01=a001*a121-a021*a101;let b02=a001*a131-a031*a101;let b03=a011*a121-a021*a111;let b04=a011*a131-a031*a111;let b05=a021*a131-a031*a121;let b06=a201*a311-a211*a301;let b07=a201*a321-a221*a301;let b08=a201*a331-a231*a301;let b09=a211*a321-a221*a311;let b10=a211*a331-a231*a311;let b11=a221*a331-a231*a321;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this2.self._00=1;_this2.self._01=0;_this2.self._02=0;_this2.self._03=0;_this2.self._10=0;_this2.self._11=1;_this2.self._12=0;_this2.self._13=0;_this2.self._20=0;_this2.self._21=0;_this2.self._22=1;_this2.self._23=0;_this2.self._30=0;_this2.self._31=0;_this2.self._32=0;_this2.self._33=1}else{det=1/det;_this2.self._00=(a111*b11-a121*b10+a131*b09)*det;_this2.self._01=(a021*b10-a011*b11-a031*b09)*det;_this2.self._02=(a311*b05-a321*b04+a331*b03)*det;_this2.self._03=(a221*b04-a211*b05-a231*b03)*det;_this2.self._10=(a121*b08-a101*b11-a131*b07)*det;_this2.self._11=(a001*b11-a021*b08+a031*b07)*det;_this2.self._12=(a321*b02-a301*b05-a331*b01)*det;_this2.self._13=(a201*b05-a221*b02+a231*b01)*det;_this2.self._20=(a101*b10-a111*b08+a131*b06)*det;_this2.self._21=(a011*b08-a001*b10-a031*b06)*det;_this2.self._22=(a301*b04-a311*b02+a331*b00)*det;_this2.self._23=(a211*b02-a201*b04-a231*b00)*det;_this2.self._30=(a111*b07-a101*b09-a121*b06)*det;_this2.self._31=(a001*b09-a011*b07+a021*b06)*det;_this2.self._32=(a311*b01-a301*b03-a321*b00)*det;_this2.self._33=(a201*b03-a211*b01+a221*b00)*det}let _this3=iron_object_Uniforms.helpMat;let m4=iron_object_Uniforms.helpMat2;let a002=_this3.self._00;let a012=_this3.self._01;let a022=_this3.self._02;let a032=_this3.self._03;let a102=_this3.self._10;let a112=_this3.self._11;let a122=_this3.self._12;let a132=_this3.self._13;let a202=_this3.self._20;let a212=_this3.self._21;let a222=_this3.self._22;let a232=_this3.self._23;let a302=_this3.self._30;let a312=_this3.self._31;let a322=_this3.self._32;let a332=_this3.self._33;let b010=m4.self._00;let b12=m4.self._10;let b21=m4.self._20;let b31=m4.self._30;_this3.self._00=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._10=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._20=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._30=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._01;b12=m4.self._11;b21=m4.self._21;b31=m4.self._31;_this3.self._01=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._11=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._21=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._31=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._02;b12=m4.self._12;b21=m4.self._22;b31=m4.self._32;_this3.self._02=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._12=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._22=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._32=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._03;b12=m4.self._13;b21=m4.self._23;b31=m4.self._33;_this3.self._03=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._13=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._23=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._33=a302*b010+a312*b12+a322*b21+a332*b31;let _this4=iron_object_Uniforms.helpMat;let m5=light.VP;let a003=_this4.self._00;let a013=_this4.self._01;let a023=_this4.self._02;let a033=_this4.self._03;let a103=_this4.self._10;let a113=_this4.self._11;let a123=_this4.self._12;let a133=_this4.self._13;let a203=_this4.self._20;let a213=_this4.self._21;let a223=_this4.self._22;let a233=_this4.self._23;let a303=_this4.self._30;let a313=_this4.self._31;let a323=_this4.self._32;let a333=_this4.self._33;let b011=m5.self._00;let b13=m5.self._10;let b22=m5.self._20;let b32=m5.self._30;_this4.self._00=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._10=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._20=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._30=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._01;b13=m5.self._11;b22=m5.self._21;b32=m5.self._31;_this4.self._01=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._11=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._21=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._31=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._02;b13=m5.self._12;b22=m5.self._22;b32=m5.self._32;_this4.self._02=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._12=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._22=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._32=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._03;b13=m5.self._13;b22=m5.self._23;b32=m5.self._33;_this4.self._03=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._13=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._23=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._33=a303*b011+a313*b13+a323*b22+a333*b32;m=iron_object_Uniforms.helpMat}break;case"_particleData":let mo=js_Boot.__cast(object,iron_object_MeshObject);if(mo.particleOwner!=null&&mo.particleOwner.particleSystems!=null){m=mo.particleOwner.particleSystems[mo.particleIndex].getData()}break;case"_sunWorldMatrix":let sun=iron_RenderPath.active.sun;if(sun!=null){let _this=iron_object_Uniforms.helpMat;let m1=sun.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;m=iron_object_Uniforms.helpMat}break;case"_worldMatrix":m=object.transform.worldUnpack;break;case"_worldViewMatrix":let _this1=iron_object_Uniforms.helpMat;let m2=object.transform.worldUnpack;_this1.self._00=m2.self._00;_this1.self._01=m2.self._01;_this1.self._02=m2.self._02;_this1.self._03=m2.self._03;_this1.self._10=m2.self._10;_this1.self._11=m2.self._11;_this1.self._12=m2.self._12;_this1.self._13=m2.self._13;_this1.self._20=m2.self._20;_this1.self._21=m2.self._21;_this1.self._22=m2.self._22;_this1.self._23=m2.self._23;_this1.self._30=m2.self._30;_this1.self._31=m2.self._31;_this1.self._32=m2.self._32;_this1.self._33=m2.self._33;let _this2=iron_object_Uniforms.helpMat;let m3=camera.V;let a001=_this2.self._00;let a011=_this2.self._01;let a021=_this2.self._02;let a031=_this2.self._03;let a101=_this2.self._10;let a111=_this2.self._11;let a121=_this2.self._12;let a131=_this2.self._13;let a201=_this2.self._20;let a211=_this2.self._21;let a221=_this2.self._22;let a231=_this2.self._23;let a301=_this2.self._30;let a311=_this2.self._31;let a321=_this2.self._32;let a331=_this2.self._33;let b0=m3.self._00;let b1=m3.self._10;let b2=m3.self._20;let b3=m3.self._30;_this2.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._01;b1=m3.self._11;b2=m3.self._21;b3=m3.self._31;_this2.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._02;b1=m3.self._12;b2=m3.self._22;b3=m3.self._32;_this2.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._03;b1=m3.self._13;b2=m3.self._23;b3=m3.self._33;_this2.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._33=a301*b0+a311*b1+a321*b2+a331*b3;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrix":let _this3=iron_object_Uniforms.helpMat;let m4=object.transform.worldUnpack;_this3.self._00=m4.self._00;_this3.self._01=m4.self._01;_this3.self._02=m4.self._02;_this3.self._03=m4.self._03;_this3.self._10=m4.self._10;_this3.self._11=m4.self._11;_this3.self._12=m4.self._12;_this3.self._13=m4.self._13;_this3.self._20=m4.self._20;_this3.self._21=m4.self._21;_this3.self._22=m4.self._22;_this3.self._23=m4.self._23;_this3.self._30=m4.self._30;_this3.self._31=m4.self._31;_this3.self._32=m4.self._32;_this3.self._33=m4.self._33;let _this4=iron_object_Uniforms.helpMat;let m5=camera.V;let a002=_this4.self._00;let a012=_this4.self._01;let a022=_this4.self._02;let a032=_this4.self._03;let a102=_this4.self._10;let a112=_this4.self._11;let a122=_this4.self._12;let a132=_this4.self._13;let a202=_this4.self._20;let a212=_this4.self._21;let a222=_this4.self._22;let a232=_this4.self._23;let a302=_this4.self._30;let a312=_this4.self._31;let a322=_this4.self._32;let a332=_this4.self._33;let b010=m5.self._00;let b12=m5.self._10;let b21=m5.self._20;let b31=m5.self._30;_this4.self._00=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._10=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._20=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._30=a302*b010+a312*b12+a322*b21+a332*b31;b010=m5.self._01;b12=m5.self._11;b21=m5.self._21;b31=m5.self._31;_this4.self._01=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._11=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._21=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._31=a302*b010+a312*b12+a322*b21+a332*b31;b010=m5.self._02;b12=m5.self._12;b21=m5.self._22;b31=m5.self._32;_this4.self._02=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._12=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._22=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._32=a302*b010+a312*b12+a322*b21+a332*b31;b010=m5.self._03;b12=m5.self._13;b21=m5.self._23;b31=m5.self._33;_this4.self._03=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._13=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._23=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._33=a302*b010+a312*b12+a322*b21+a332*b31;let _this5=iron_object_Uniforms.helpMat;let m6=camera.P;let a003=_this5.self._00;let a013=_this5.self._01;let a023=_this5.self._02;let a033=_this5.self._03;let a103=_this5.self._10;let a113=_this5.self._11;let a123=_this5.self._12;let a133=_this5.self._13;let a203=_this5.self._20;let a213=_this5.self._21;let a223=_this5.self._22;let a233=_this5.self._23;let a303=_this5.self._30;let a313=_this5.self._31;let a323=_this5.self._32;let a333=_this5.self._33;let b011=m6.self._00;let b13=m6.self._10;let b22=m6.self._20;let b32=m6.self._30;_this5.self._00=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._10=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._20=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._30=a303*b011+a313*b13+a323*b22+a333*b32;b011=m6.self._01;b13=m6.self._11;b22=m6.self._21;b32=m6.self._31;_this5.self._01=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._11=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._21=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._31=a303*b011+a313*b13+a323*b22+a333*b32;b011=m6.self._02;b13=m6.self._12;b22=m6.self._22;b32=m6.self._32;_this5.self._02=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._12=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._22=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._32=a303*b011+a313*b13+a323*b22+a333*b32;b011=m6.self._03;b13=m6.self._13;b22=m6.self._23;b32=m6.self._33;_this5.self._03=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._13=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._23=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._33=a303*b011+a313*b13+a323*b22+a333*b32;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrixCylinder":let t=object.transform;let _this6=iron_object_Uniforms.helpMat;let m7=t.worldUnpack;_this6.self._00=m7.self._00;_this6.self._01=m7.self._01;_this6.self._02=m7.self._02;_this6.self._03=m7.self._03;_this6.self._10=m7.self._10;_this6.self._11=m7.self._11;_this6.self._12=m7.self._12;_this6.self._13=m7.self._13;_this6.self._20=m7.self._20;_this6.self._21=m7.self._21;_this6.self._22=m7.self._22;_this6.self._23=m7.self._23;_this6.self._30=m7.self._30;_this6.self._31=m7.self._31;_this6.self._32=m7.self._32;_this6.self._33=m7.self._33;let _this7=iron_object_Uniforms.helpMat;let m8=camera.V;let a004=_this7.self._00;let a014=_this7.self._01;let a024=_this7.self._02;let a034=_this7.self._03;let a104=_this7.self._10;let a114=_this7.self._11;let a124=_this7.self._12;let a134=_this7.self._13;let a204=_this7.self._20;let a214=_this7.self._21;let a224=_this7.self._22;let a234=_this7.self._23;let a304=_this7.self._30;let a314=_this7.self._31;let a324=_this7.self._32;let a334=_this7.self._33;let b012=m8.self._00;let b14=m8.self._10;let b23=m8.self._20;let b33=m8.self._30;_this7.self._00=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._10=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._20=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._30=a304*b012+a314*b14+a324*b23+a334*b33;b012=m8.self._01;b14=m8.self._11;b23=m8.self._21;b33=m8.self._31;_this7.self._01=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._11=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._21=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._31=a304*b012+a314*b14+a324*b23+a334*b33;b012=m8.self._02;b14=m8.self._12;b23=m8.self._22;b33=m8.self._32;_this7.self._02=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._12=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._22=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._32=a304*b012+a314*b14+a324*b23+a334*b33;b012=m8.self._03;b14=m8.self._13;b23=m8.self._23;b33=m8.self._33;_this7.self._03=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._13=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._23=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._33=a304*b012+a314*b14+a324*b23+a334*b33;let x=t.scale.x;let y=t.scale.y;let z=t.scale.z;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let scl_x=x;let scl_y=y;let scl_z=z;let scl_w=1;let f=t.scaleWorld;scl_x*=f;scl_y*=f;scl_z*=f;iron_object_Uniforms.helpMat.self._00=scl_x;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._22=scl_y;let _this8=iron_object_Uniforms.helpMat;let m9=camera.P;let a005=_this8.self._00;let a015=_this8.self._01;let a025=_this8.self._02;let a035=_this8.self._03;let a105=_this8.self._10;let a115=_this8.self._11;let a125=_this8.self._12;let a135=_this8.self._13;let a205=_this8.self._20;let a215=_this8.self._21;let a225=_this8.self._22;let a235=_this8.self._23;let a305=_this8.self._30;let a315=_this8.self._31;let a325=_this8.self._32;let a335=_this8.self._33;let b013=m9.self._00;let b15=m9.self._10;let b24=m9.self._20;let b34=m9.self._30;_this8.self._00=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._10=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._20=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._30=a305*b013+a315*b15+a325*b24+a335*b34;b013=m9.self._01;b15=m9.self._11;b24=m9.self._21;b34=m9.self._31;_this8.self._01=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._11=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._21=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._31=a305*b013+a315*b15+a325*b24+a335*b34;b013=m9.self._02;b15=m9.self._12;b24=m9.self._22;b34=m9.self._32;_this8.self._02=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._12=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._22=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._32=a305*b013+a315*b15+a325*b24+a335*b34;b013=m9.self._03;b15=m9.self._13;b24=m9.self._23;b34=m9.self._33;_this8.self._03=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._13=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._23=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._33=a305*b013+a315*b15+a325*b24+a335*b34;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrixSphere":let t1=object.transform;let _this9=iron_object_Uniforms.helpMat;let m10=t1.worldUnpack;_this9.self._00=m10.self._00;_this9.self._01=m10.self._01;_this9.self._02=m10.self._02;_this9.self._03=m10.self._03;_this9.self._10=m10.self._10;_this9.self._11=m10.self._11;_this9.self._12=m10.self._12;_this9.self._13=m10.self._13;_this9.self._20=m10.self._20;_this9.self._21=m10.self._21;_this9.self._22=m10.self._22;_this9.self._23=m10.self._23;_this9.self._30=m10.self._30;_this9.self._31=m10.self._31;_this9.self._32=m10.self._32;_this9.self._33=m10.self._33;let _this10=iron_object_Uniforms.helpMat;let m11=camera.V;let a006=_this10.self._00;let a016=_this10.self._01;let a026=_this10.self._02;let a036=_this10.self._03;let a106=_this10.self._10;let a116=_this10.self._11;let a126=_this10.self._12;let a136=_this10.self._13;let a206=_this10.self._20;let a216=_this10.self._21;let a226=_this10.self._22;let a236=_this10.self._23;let a306=_this10.self._30;let a316=_this10.self._31;let a326=_this10.self._32;let a336=_this10.self._33;let b014=m11.self._00;let b16=m11.self._10;let b25=m11.self._20;let b35=m11.self._30;_this10.self._00=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._10=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._20=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._30=a306*b014+a316*b16+a326*b25+a336*b35;b014=m11.self._01;b16=m11.self._11;b25=m11.self._21;b35=m11.self._31;_this10.self._01=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._11=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._21=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._31=a306*b014+a316*b16+a326*b25+a336*b35;b014=m11.self._02;b16=m11.self._12;b25=m11.self._22;b35=m11.self._32;_this10.self._02=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._12=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._22=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._32=a306*b014+a316*b16+a326*b25+a336*b35;b014=m11.self._03;b16=m11.self._13;b25=m11.self._23;b35=m11.self._33;_this10.self._03=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._13=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._23=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._33=a306*b014+a316*b16+a326*b25+a336*b35;let x1=t1.scale.x;let y1=t1.scale.y;let z1=t1.scale.z;if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let scl_x1=x1;let scl_y1=y1;let scl_z1=z1;let scl_w1=1;let f1=t1.scaleWorld;scl_x1*=f1;scl_y1*=f1;scl_z1*=f1;iron_object_Uniforms.helpMat.self._00=scl_x1;iron_object_Uniforms.helpMat.self._10=0;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._11=scl_y1;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._12=0;iron_object_Uniforms.helpMat.self._22=scl_z1;let _this11=iron_object_Uniforms.helpMat;let m12=camera.P;let a007=_this11.self._00;let a017=_this11.self._01;let a027=_this11.self._02;let a037=_this11.self._03;let a107=_this11.self._10;let a117=_this11.self._11;let a127=_this11.self._12;let a137=_this11.self._13;let a207=_this11.self._20;let a217=_this11.self._21;let a227=_this11.self._22;let a237=_this11.self._23;let a307=_this11.self._30;let a317=_this11.self._31;let a327=_this11.self._32;let a337=_this11.self._33;let b015=m12.self._00;let b17=m12.self._10;let b26=m12.self._20;let b36=m12.self._30;_this11.self._00=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._10=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._20=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._30=a307*b015+a317*b17+a327*b26+a337*b36;b015=m12.self._01;b17=m12.self._11;b26=m12.self._21;b36=m12.self._31;_this11.self._01=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._11=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._21=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._31=a307*b015+a317*b17+a327*b26+a337*b36;b015=m12.self._02;b17=m12.self._12;b26=m12.self._22;b36=m12.self._32;_this11.self._02=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._12=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._22=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._32=a307*b015+a317*b17+a327*b26+a337*b36;b015=m12.self._03;b17=m12.self._13;b26=m12.self._23;b36=m12.self._33;_this11.self._03=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._13=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._23=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._33=a307*b015+a317*b17+a327*b26+a337*b36;m=iron_object_Uniforms.helpMat;break}let tmp=m==null;if(m==null&&iron_object_Uniforms.externalMat4Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalMat4Links;while(_g<_g1.length){let fn=_g1[_g];++_g;m=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(m!=null){break}}}if(m==null){return}g.setMatrix(location,m.self)}else if(c.type=="mat3"){let m=null;switch(c.link){case"_normalMatrix":let _this=iron_object_Uniforms.helpMat;let m1=object.transform.world;let a00=m1.self._00;let a01=m1.self._01;let a02=m1.self._02;let a03=m1.self._03;let a10=m1.self._10;let a11=m1.self._11;let a12=m1.self._12;let a13=m1.self._13;let a20=m1.self._20;let a21=m1.self._21;let a22=m1.self._22;let a23=m1.self._23;let a30=m1.self._30;let a31=m1.self._31;let a32=m1.self._32;let a33=m1.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}let _this1=iron_object_Uniforms.helpMat;let f=_this1.self._01;_this1.self._01=_this1.self._10;_this1.self._10=f;f=_this1.self._02;_this1.self._02=_this1.self._20;_this1.self._20=f;f=_this1.self._12;_this1.self._12=_this1.self._21;_this1.self._21=f;let _this2=iron_object_Uniforms.helpMat3;let m2=iron_object_Uniforms.helpMat;_this2.self._00=m2.self._00;_this2.self._01=m2.self._01;_this2.self._02=m2.self._02;_this2.self._10=m2.self._10;_this2.self._11=m2.self._11;_this2.self._12=m2.self._12;_this2.self._20=m2.self._20;_this2.self._21=m2.self._21;_this2.self._22=m2.self._22;m=iron_object_Uniforms.helpMat3;break;case"_normalMatrixCylinder":let _this3=iron_object_Uniforms.helpMat;let m3=object.transform.world;_this3.self._00=m3.self._00;_this3.self._01=m3.self._01;_this3.self._02=m3.self._02;_this3.self._03=m3.self._03;_this3.self._10=m3.self._10;_this3.self._11=m3.self._11;_this3.self._12=m3.self._12;_this3.self._13=m3.self._13;_this3.self._20=m3.self._20;_this3.self._21=m3.self._21;_this3.self._22=m3.self._22;_this3.self._23=m3.self._23;_this3.self._30=m3.self._30;_this3.self._31=m3.self._31;_this3.self._32=m3.self._32;_this3.self._33=m3.self._33;let _this4=iron_object_Uniforms.helpMat;let m4=camera.V;let a001=_this4.self._00;let a011=_this4.self._01;let a021=_this4.self._02;let a031=_this4.self._03;let a101=_this4.self._10;let a111=_this4.self._11;let a121=_this4.self._12;let a131=_this4.self._13;let a201=_this4.self._20;let a211=_this4.self._21;let a221=_this4.self._22;let a231=_this4.self._23;let a301=_this4.self._30;let a311=_this4.self._31;let a321=_this4.self._32;let a331=_this4.self._33;let b0=m4.self._00;let b1=m4.self._10;let b2=m4.self._20;let b3=m4.self._30;_this4.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this4.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this4.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this4.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=m4.self._01;b1=m4.self._11;b2=m4.self._21;b3=m4.self._31;_this4.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this4.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this4.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this4.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=m4.self._02;b1=m4.self._12;b2=m4.self._22;b3=m4.self._32;_this4.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this4.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this4.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this4.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=m4.self._03;b1=m4.self._13;b2=m4.self._23;b3=m4.self._33;_this4.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this4.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this4.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this4.self._33=a301*b0+a311*b1+a321*b2+a331*b3;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._22=1;let _this5=iron_object_Uniforms.helpMat2;let m5=camera.V;let a002=m5.self._00;let a012=m5.self._01;let a022=m5.self._02;let a032=m5.self._03;let a102=m5.self._10;let a112=m5.self._11;let a122=m5.self._12;let a132=m5.self._13;let a202=m5.self._20;let a212=m5.self._21;let a222=m5.self._22;let a232=m5.self._23;let a302=m5.self._30;let a312=m5.self._31;let a322=m5.self._32;let a332=m5.self._33;let b001=a002*a112-a012*a102;let b011=a002*a122-a022*a102;let b021=a002*a132-a032*a102;let b031=a012*a122-a022*a112;let b041=a012*a132-a032*a112;let b051=a022*a132-a032*a122;let b061=a202*a312-a212*a302;let b071=a202*a322-a222*a302;let b081=a202*a332-a232*a302;let b091=a212*a322-a222*a312;let b101=a212*a332-a232*a312;let b111=a222*a332-a232*a322;let det1=b001*b111-b011*b101+b021*b091+b031*b081-b041*b071+b051*b061;if(det1==0){_this5.self._00=1;_this5.self._01=0;_this5.self._02=0;_this5.self._03=0;_this5.self._10=0;_this5.self._11=1;_this5.self._12=0;_this5.self._13=0;_this5.self._20=0;_this5.self._21=0;_this5.self._22=1;_this5.self._23=0;_this5.self._30=0;_this5.self._31=0;_this5.self._32=0;_this5.self._33=1}else{det1=1/det1;_this5.self._00=(a112*b111-a122*b101+a132*b091)*det1;_this5.self._01=(a022*b101-a012*b111-a032*b091)*det1;_this5.self._02=(a312*b051-a322*b041+a332*b031)*det1;_this5.self._03=(a222*b041-a212*b051-a232*b031)*det1;_this5.self._10=(a122*b081-a102*b111-a132*b071)*det1;_this5.self._11=(a002*b111-a022*b081+a032*b071)*det1;_this5.self._12=(a322*b021-a302*b051-a332*b011)*det1;_this5.self._13=(a202*b051-a222*b021+a232*b011)*det1;_this5.self._20=(a102*b101-a112*b081+a132*b061)*det1;_this5.self._21=(a012*b081-a002*b101-a032*b061)*det1;_this5.self._22=(a302*b041-a312*b021+a332*b001)*det1;_this5.self._23=(a212*b021-a202*b041-a232*b001)*det1;_this5.self._30=(a112*b071-a102*b091-a122*b061)*det1;_this5.self._31=(a002*b091-a012*b071+a022*b061)*det1;_this5.self._32=(a312*b011-a302*b031-a322*b001)*det1;_this5.self._33=(a202*b031-a212*b011+a222*b001)*det1}let _this6=iron_object_Uniforms.helpMat;let m6=iron_object_Uniforms.helpMat2;let a003=_this6.self._00;let a013=_this6.self._01;let a023=_this6.self._02;let a033=_this6.self._03;let a103=_this6.self._10;let a113=_this6.self._11;let a123=_this6.self._12;let a133=_this6.self._13;let a203=_this6.self._20;let a213=_this6.self._21;let a223=_this6.self._22;let a233=_this6.self._23;let a303=_this6.self._30;let a313=_this6.self._31;let a323=_this6.self._32;let a333=_this6.self._33;let b010=m6.self._00;let b12=m6.self._10;let b21=m6.self._20;let b31=m6.self._30;_this6.self._00=a003*b010+a013*b12+a023*b21+a033*b31;_this6.self._10=a103*b010+a113*b12+a123*b21+a133*b31;_this6.self._20=a203*b010+a213*b12+a223*b21+a233*b31;_this6.self._30=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._01;b12=m6.self._11;b21=m6.self._21;b31=m6.self._31;_this6.self._01=a003*b010+a013*b12+a023*b21+a033*b31;_this6.self._11=a103*b010+a113*b12+a123*b21+a133*b31;_this6.self._21=a203*b010+a213*b12+a223*b21+a233*b31;_this6.self._31=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._02;b12=m6.self._12;b21=m6.self._22;b31=m6.self._32;_this6.self._02=a003*b010+a013*b12+a023*b21+a033*b31;_this6.self._12=a103*b010+a113*b12+a123*b21+a133*b31;_this6.self._22=a203*b010+a213*b12+a223*b21+a233*b31;_this6.self._32=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._03;b12=m6.self._13;b21=m6.self._23;b31=m6.self._33;_this6.self._03=a003*b010+a013*b12+a023*b21+a033*b31;_this6.self._13=a103*b010+a113*b12+a123*b21+a133*b31;_this6.self._23=a203*b010+a213*b12+a223*b21+a233*b31;_this6.self._33=a303*b010+a313*b12+a323*b21+a333*b31;let _this7=iron_object_Uniforms.helpMat2;let m7=iron_object_Uniforms.helpMat;let a004=m7.self._00;let a014=m7.self._01;let a024=m7.self._02;let a034=m7.self._03;let a104=m7.self._10;let a114=m7.self._11;let a124=m7.self._12;let a134=m7.self._13;let a204=m7.self._20;let a214=m7.self._21;let a224=m7.self._22;let a234=m7.self._23;let a304=m7.self._30;let a314=m7.self._31;let a324=m7.self._32;let a334=m7.self._33;let b002=a004*a114-a014*a104;let b012=a004*a124-a024*a104;let b022=a004*a134-a034*a104;let b032=a014*a124-a024*a114;let b042=a014*a134-a034*a114;let b052=a024*a134-a034*a124;let b062=a204*a314-a214*a304;let b072=a204*a324-a224*a304;let b082=a204*a334-a234*a304;let b092=a214*a324-a224*a314;let b102=a214*a334-a234*a314;let b112=a224*a334-a234*a324;let det2=b002*b112-b012*b102+b022*b092+b032*b082-b042*b072+b052*b062;if(det2==0){_this7.self._00=1;_this7.self._01=0;_this7.self._02=0;_this7.self._03=0;_this7.self._10=0;_this7.self._11=1;_this7.self._12=0;_this7.self._13=0;_this7.self._20=0;_this7.self._21=0;_this7.self._22=1;_this7.self._23=0;_this7.self._30=0;_this7.self._31=0;_this7.self._32=0;_this7.self._33=1}else{det2=1/det2;_this7.self._00=(a114*b112-a124*b102+a134*b092)*det2;_this7.self._01=(a024*b102-a014*b112-a034*b092)*det2;_this7.self._02=(a314*b052-a324*b042+a334*b032)*det2;_this7.self._03=(a224*b042-a214*b052-a234*b032)*det2;_this7.self._10=(a124*b082-a104*b112-a134*b072)*det2;_this7.self._11=(a004*b112-a024*b082+a034*b072)*det2;_this7.self._12=(a324*b022-a304*b052-a334*b012)*det2;_this7.self._13=(a204*b052-a224*b022+a234*b012)*det2;_this7.self._20=(a104*b102-a114*b082+a134*b062)*det2;_this7.self._21=(a014*b082-a004*b102-a034*b062)*det2;_this7.self._22=(a304*b042-a314*b022+a334*b002)*det2;_this7.self._23=(a214*b022-a204*b042-a234*b002)*det2;_this7.self._30=(a114*b072-a104*b092-a124*b062)*det2;_this7.self._31=(a004*b092-a014*b072+a024*b062)*det2;_this7.self._32=(a314*b012-a304*b032-a324*b002)*det2;_this7.self._33=(a204*b032-a214*b012+a224*b002)*det2}let _this8=iron_object_Uniforms.helpMat2;let f1=_this8.self._01;_this8.self._01=_this8.self._10;_this8.self._10=f1;f1=_this8.self._02;_this8.self._02=_this8.self._20;_this8.self._20=f1;f1=_this8.self._12;_this8.self._12=_this8.self._21;_this8.self._21=f1;let _this9=iron_object_Uniforms.helpMat3;let m8=iron_object_Uniforms.helpMat2;_this9.self._00=m8.self._00;_this9.self._01=m8.self._01;_this9.self._02=m8.self._02;_this9.self._10=m8.self._10;_this9.self._11=m8.self._11;_this9.self._12=m8.self._12;_this9.self._20=m8.self._20;_this9.self._21=m8.self._21;_this9.self._22=m8.self._22;m=iron_object_Uniforms.helpMat3;break;case"_normalMatrixSphere":let _this10=iron_object_Uniforms.helpMat;let m9=object.transform.world;_this10.self._00=m9.self._00;_this10.self._01=m9.self._01;_this10.self._02=m9.self._02;_this10.self._03=m9.self._03;_this10.self._10=m9.self._10;_this10.self._11=m9.self._11;_this10.self._12=m9.self._12;_this10.self._13=m9.self._13;_this10.self._20=m9.self._20;_this10.self._21=m9.self._21;_this10.self._22=m9.self._22;_this10.self._23=m9.self._23;_this10.self._30=m9.self._30;_this10.self._31=m9.self._31;_this10.self._32=m9.self._32;_this10.self._33=m9.self._33;let _this11=iron_object_Uniforms.helpMat;let m10=camera.V;let a005=_this11.self._00;let a015=_this11.self._01;let a025=_this11.self._02;let a035=_this11.self._03;let a105=_this11.self._10;let a115=_this11.self._11;let a125=_this11.self._12;let a135=_this11.self._13;let a205=_this11.self._20;let a215=_this11.self._21;let a225=_this11.self._22;let a235=_this11.self._23;let a305=_this11.self._30;let a315=_this11.self._31;let a325=_this11.self._32;let a335=_this11.self._33;let b013=m10.self._00;let b13=m10.self._10;let b22=m10.self._20;let b32=m10.self._30;_this11.self._00=a005*b013+a015*b13+a025*b22+a035*b32;_this11.self._10=a105*b013+a115*b13+a125*b22+a135*b32;_this11.self._20=a205*b013+a215*b13+a225*b22+a235*b32;_this11.self._30=a305*b013+a315*b13+a325*b22+a335*b32;b013=m10.self._01;b13=m10.self._11;b22=m10.self._21;b32=m10.self._31;_this11.self._01=a005*b013+a015*b13+a025*b22+a035*b32;_this11.self._11=a105*b013+a115*b13+a125*b22+a135*b32;_this11.self._21=a205*b013+a215*b13+a225*b22+a235*b32;_this11.self._31=a305*b013+a315*b13+a325*b22+a335*b32;b013=m10.self._02;b13=m10.self._12;b22=m10.self._22;b32=m10.self._32;_this11.self._02=a005*b013+a015*b13+a025*b22+a035*b32;_this11.self._12=a105*b013+a115*b13+a125*b22+a135*b32;_this11.self._22=a205*b013+a215*b13+a225*b22+a235*b32;_this11.self._32=a305*b013+a315*b13+a325*b22+a335*b32;b013=m10.self._03;b13=m10.self._13;b22=m10.self._23;b32=m10.self._33;_this11.self._03=a005*b013+a015*b13+a025*b22+a035*b32;_this11.self._13=a105*b013+a115*b13+a125*b22+a135*b32;_this11.self._23=a205*b013+a215*b13+a225*b22+a235*b32;_this11.self._33=a305*b013+a315*b13+a325*b22+a335*b32;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._10=0;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._11=1;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._12=0;iron_object_Uniforms.helpMat.self._22=1;let _this12=iron_object_Uniforms.helpMat2;let m11=camera.V;let a006=m11.self._00;let a016=m11.self._01;let a026=m11.self._02;let a036=m11.self._03;let a106=m11.self._10;let a116=m11.self._11;let a126=m11.self._12;let a136=m11.self._13;let a206=m11.self._20;let a216=m11.self._21;let a226=m11.self._22;let a236=m11.self._23;let a306=m11.self._30;let a316=m11.self._31;let a326=m11.self._32;let a336=m11.self._33;let b003=a006*a116-a016*a106;let b014=a006*a126-a026*a106;let b023=a006*a136-a036*a106;let b033=a016*a126-a026*a116;let b043=a016*a136-a036*a116;let b053=a026*a136-a036*a126;let b063=a206*a316-a216*a306;let b073=a206*a326-a226*a306;let b083=a206*a336-a236*a306;let b093=a216*a326-a226*a316;let b103=a216*a336-a236*a316;let b113=a226*a336-a236*a326;let det3=b003*b113-b014*b103+b023*b093+b033*b083-b043*b073+b053*b063;if(det3==0){_this12.self._00=1;_this12.self._01=0;_this12.self._02=0;_this12.self._03=0;_this12.self._10=0;_this12.self._11=1;_this12.self._12=0;_this12.self._13=0;_this12.self._20=0;_this12.self._21=0;_this12.self._22=1;_this12.self._23=0;_this12.self._30=0;_this12.self._31=0;_this12.self._32=0;_this12.self._33=1}else{det3=1/det3;_this12.self._00=(a116*b113-a126*b103+a136*b093)*det3;_this12.self._01=(a026*b103-a016*b113-a036*b093)*det3;_this12.self._02=(a316*b053-a326*b043+a336*b033)*det3;_this12.self._03=(a226*b043-a216*b053-a236*b033)*det3;_this12.self._10=(a126*b083-a106*b113-a136*b073)*det3;_this12.self._11=(a006*b113-a026*b083+a036*b073)*det3;_this12.self._12=(a326*b023-a306*b053-a336*b014)*det3;_this12.self._13=(a206*b053-a226*b023+a236*b014)*det3;_this12.self._20=(a106*b103-a116*b083+a136*b063)*det3;_this12.self._21=(a016*b083-a006*b103-a036*b063)*det3;_this12.self._22=(a306*b043-a316*b023+a336*b003)*det3;_this12.self._23=(a216*b023-a206*b043-a236*b003)*det3;_this12.self._30=(a116*b073-a106*b093-a126*b063)*det3;_this12.self._31=(a006*b093-a016*b073+a026*b063)*det3;_this12.self._32=(a316*b014-a306*b033-a326*b003)*det3;_this12.self._33=(a206*b033-a216*b014+a226*b003)*det3}let _this13=iron_object_Uniforms.helpMat;let m12=iron_object_Uniforms.helpMat2;let a007=_this13.self._00;let a017=_this13.self._01;let a027=_this13.self._02;let a037=_this13.self._03;let a107=_this13.self._10;let a117=_this13.self._11;let a127=_this13.self._12;let a137=_this13.self._13;let a207=_this13.self._20;let a217=_this13.self._21;let a227=_this13.self._22;let a237=_this13.self._23;let a307=_this13.self._30;let a317=_this13.self._31;let a327=_this13.self._32;let a337=_this13.self._33;let b015=m12.self._00;let b14=m12.self._10;let b23=m12.self._20;let b33=m12.self._30;_this13.self._00=a007*b015+a017*b14+a027*b23+a037*b33;_this13.self._10=a107*b015+a117*b14+a127*b23+a137*b33;_this13.self._20=a207*b015+a217*b14+a227*b23+a237*b33;_this13.self._30=a307*b015+a317*b14+a327*b23+a337*b33;b015=m12.self._01;b14=m12.self._11;b23=m12.self._21;b33=m12.self._31;_this13.self._01=a007*b015+a017*b14+a027*b23+a037*b33;_this13.self._11=a107*b015+a117*b14+a127*b23+a137*b33;_this13.self._21=a207*b015+a217*b14+a227*b23+a237*b33;_this13.self._31=a307*b015+a317*b14+a327*b23+a337*b33;b015=m12.self._02;b14=m12.self._12;b23=m12.self._22;b33=m12.self._32;_this13.self._02=a007*b015+a017*b14+a027*b23+a037*b33;_this13.self._12=a107*b015+a117*b14+a127*b23+a137*b33;_this13.self._22=a207*b015+a217*b14+a227*b23+a237*b33;_this13.self._32=a307*b015+a317*b14+a327*b23+a337*b33;b015=m12.self._03;b14=m12.self._13;b23=m12.self._23;b33=m12.self._33;_this13.self._03=a007*b015+a017*b14+a027*b23+a037*b33;_this13.self._13=a107*b015+a117*b14+a127*b23+a137*b33;_this13.self._23=a207*b015+a217*b14+a227*b23+a237*b33;_this13.self._33=a307*b015+a317*b14+a327*b23+a337*b33;let _this14=iron_object_Uniforms.helpMat2;let m13=iron_object_Uniforms.helpMat;let a008=m13.self._00;let a018=m13.self._01;let a028=m13.self._02;let a038=m13.self._03;let a108=m13.self._10;let a118=m13.self._11;let a128=m13.self._12;let a138=m13.self._13;let a208=m13.self._20;let a218=m13.self._21;let a228=m13.self._22;let a238=m13.self._23;let a308=m13.self._30;let a318=m13.self._31;let a328=m13.self._32;let a338=m13.self._33;let b004=a008*a118-a018*a108;let b016=a008*a128-a028*a108;let b024=a008*a138-a038*a108;let b034=a018*a128-a028*a118;let b044=a018*a138-a038*a118;let b054=a028*a138-a038*a128;let b064=a208*a318-a218*a308;let b074=a208*a328-a228*a308;let b084=a208*a338-a238*a308;let b094=a218*a328-a228*a318;let b104=a218*a338-a238*a318;let b114=a228*a338-a238*a328;let det4=b004*b114-b016*b104+b024*b094+b034*b084-b044*b074+b054*b064;if(det4==0){_this14.self._00=1;_this14.self._01=0;_this14.self._02=0;_this14.self._03=0;_this14.self._10=0;_this14.self._11=1;_this14.self._12=0;_this14.self._13=0;_this14.self._20=0;_this14.self._21=0;_this14.self._22=1;_this14.self._23=0;_this14.self._30=0;_this14.self._31=0;_this14.self._32=0;_this14.self._33=1}else{det4=1/det4;_this14.self._00=(a118*b114-a128*b104+a138*b094)*det4;_this14.self._01=(a028*b104-a018*b114-a038*b094)*det4;_this14.self._02=(a318*b054-a328*b044+a338*b034)*det4;_this14.self._03=(a228*b044-a218*b054-a238*b034)*det4;_this14.self._10=(a128*b084-a108*b114-a138*b074)*det4;_this14.self._11=(a008*b114-a028*b084+a038*b074)*det4;_this14.self._12=(a328*b024-a308*b054-a338*b016)*det4;_this14.self._13=(a208*b054-a228*b024+a238*b016)*det4;_this14.self._20=(a108*b104-a118*b084+a138*b064)*det4;_this14.self._21=(a018*b084-a008*b104-a038*b064)*det4;_this14.self._22=(a308*b044-a318*b024+a338*b004)*det4;_this14.self._23=(a218*b024-a208*b044-a238*b004)*det4;_this14.self._30=(a118*b074-a108*b094-a128*b064)*det4;_this14.self._31=(a008*b094-a018*b074+a028*b064)*det4;_this14.self._32=(a318*b016-a308*b034-a328*b004)*det4;_this14.self._33=(a208*b034-a218*b016+a228*b004)*det4}let _this15=iron_object_Uniforms.helpMat2;let f2=_this15.self._01;_this15.self._01=_this15.self._10;_this15.self._10=f2;f2=_this15.self._02;_this15.self._02=_this15.self._20;_this15.self._20=f2;f2=_this15.self._12;_this15.self._12=_this15.self._21;_this15.self._21=f2;let _this16=iron_object_Uniforms.helpMat3;let m14=iron_object_Uniforms.helpMat2;_this16.self._00=m14.self._00;_this16.self._01=m14.self._01;_this16.self._02=m14.self._02;_this16.self._10=m14.self._10;_this16.self._11=m14.self._11;_this16.self._12=m14.self._12;_this16.self._20=m14.self._20;_this16.self._21=m14.self._21;_this16.self._22=m14.self._22;m=iron_object_Uniforms.helpMat3;break;case"_viewMatrix3":let _this17=iron_object_Uniforms.helpMat3;let m15=camera.V;_this17.self._00=m15.self._00;_this17.self._01=m15.self._01;_this17.self._02=m15.self._02;_this17.self._10=m15.self._10;_this17.self._11=m15.self._11;_this17.self._12=m15.self._12;_this17.self._20=m15.self._20;_this17.self._21=m15.self._21;_this17.self._22=m15.self._22;m=iron_object_Uniforms.helpMat3;break}if(m==null){return}g.setMatrix3(location,m.self)}else if(c.type=="vec4"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;if(v==null&&iron_object_Uniforms.externalVec4Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalVec4Links;while(_g<_g1.length){let fn=_g1[_g];++_g;v=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){break}}}if(v==null){return}g.setFloat4(location,v.x,v.y,v.z,v.w)}else if(c.type=="vec3"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;switch(c.link){case"_dim":let d=object.transform.dim;let s=object.transform.scale;let _this1=iron_object_Uniforms.helpVec;_this1.x=d.x/s.x;_this1.y=d.y/s.y;_this1.z=d.z/s.z;_this1.w=1;v=iron_object_Uniforms.helpVec;break;case"_halfDim":let d1=object.transform.dim;let s1=object.transform.scale;let _this2=iron_object_Uniforms.helpVec;_this2.x=d1.x/s1.x/2;_this2.y=d1.y/s1.y/2;_this2.z=d1.z/s1.z/2;_this2.w=1;v=iron_object_Uniforms.helpVec;break}if(v==null&&iron_object_Uniforms.externalVec3Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalVec3Links;while(_g<_g1.length){let f=_g1[_g];++_g;v=f(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){break}}}if(v==null){return}g.setFloat3(location,v.x,v.y,v.z)}else if(c.type=="vec2"){let vx=null;let vy=null;switch(c.link){case"_morphDataDim":let mt=js_Boot.__cast(object,iron_object_MeshObject).morphTarget;vx=mt.numMorphTargets;vy=mt.morphBlockSize/mt.morphImageSize;break;case"_morphScaleOffset":let mt1=js_Boot.__cast(object,iron_object_MeshObject).morphTarget;vx=mt1.scaling;vy=mt1.offset;break;case"_tilesheetOffset":let ts=js_Boot.__cast(object,iron_object_MeshObject).activeTilesheet;vx=ts.tileX;vy=ts.tileY;break;case"_tilesheetTiles":let ts1=js_Boot.__cast(object,iron_object_MeshObject).activeTilesheet;vx=ts1.raw.tilesx;vy=ts1.raw.tilesy;break}if(vx==null&&iron_object_Uniforms.externalVec2Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalVec2Links;while(_g<_g1.length){let fn=_g1[_g];++_g;let v=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){vx=v.x;vy=v.y;break}}}if(vx==null){return}g.setFloat2(location,vx,vy)}else if(c.type=="float"){let f=null;switch(c.link){case"_objectInfoIndex":f=object.uid;break;case"_objectInfoMaterialIndex":f=iron_object_Uniforms.currentMat(object).uid;break;case"_objectInfoRandom":f=object.urandom;break;case"_particleRandom":let mo=js_Boot.__cast(object,iron_object_MeshObject);if(mo.particleOwner!=null&&mo.particleOwner.particleSystems!=null){f=mo.particleOwner.particleSystems[mo.particleIndex].getRandom()}break;case"_particleSize":let mo1=js_Boot.__cast(object,iron_object_MeshObject);if(mo1.particleOwner!=null&&mo1.particleOwner.particleSystems!=null){f=mo1.particleOwner.particleSystems[mo1.particleIndex].getSize()}break;case"_particleSizeRandom":let mo2=js_Boot.__cast(object,iron_object_MeshObject);if(mo2.particleOwner!=null&&mo2.particleOwner.particleSystems!=null){f=mo2.particleOwner.particleSystems[mo2.particleIndex].getSizeRandom()}break;case"_posUnpack":f=iron_object_Uniforms.posUnpack!=null?iron_object_Uniforms.posUnpack:1;break;case"_texUnpack":f=iron_object_Uniforms.texUnpack!=null?iron_object_Uniforms.texUnpack:1;break}if(f==null&&iron_object_Uniforms.externalFloatLinks!=null){let _g=0;let _g1=iron_object_Uniforms.externalFloatLinks;while(_g<_g1.length){let fn=_g1[_g];++_g;let res=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(res!=null){f=res;break}}}if(f==null){return}g.setFloat(location,f)}else if(c.type=="floats"){let fa=null;switch(c.link){case"_morphWeights":fa=js_Boot.__cast(object,iron_object_MeshObject).morphTarget.morphWeights;break;case"_skinBones":if(object.animation!=null){fa=js_Boot.__cast(object.animation,iron_object_BoneAnimation).skinBuffer}break}if(fa==null&&iron_object_Uniforms.externalFloatsLinks!=null){let _g=0;let _g1=iron_object_Uniforms.externalFloatsLinks;while(_g<_g1.length){let fn=_g1[_g];++_g;fa=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(fa!=null){break}}}if(fa==null){return}g.setFloats(location,fa)}else if(c.type=="int"){let i=null;if(c.link=="_uid"){i=object.uid}if(i==null&&iron_object_Uniforms.externalIntLinks!=null){let _g=0;let _g1=iron_object_Uniforms.externalIntLinks;while(_g<_g1.length){let fn=_g1[_g];++_g;let res=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(res!=null){i=res;break}}}if(i==null){return}g.setInt(location,i)}}static setMaterialConstants(g,context,materialContext){if(materialContext.raw.bind_constants!=null){let _g=0;let _g1=materialContext.raw.bind_constants.length;while(_g<_g1){let i=_g++;let matc=materialContext.raw.bind_constants[i];let pos=-1;let _g1=0;let _g2=context.raw.constants.length;while(_g1<_g2){let i=_g1++;if(context.raw.constants[i].name==matc.name){pos=i;break}}if(pos==-1){continue}let c=context.raw.constants[pos];iron_object_Uniforms.setMaterialConstant(g,context.constants[pos],c,matc)}}if(materialContext.textures!=null){let _g=0;let _g1=materialContext.textures.length;while(_g<_g1){let i=_g++;let mname=materialContext.raw.bind_textures[i].name;let _g1=0;let _g2=context.textureUnits.length;while(_g1<_g2){let j=_g1++;let sname=context.raw.texture_units[j].name;if(mname==sname){g.setTexture(context.textureUnits[j],materialContext.textures[i]);materialContext.setTextureParameters(g,i,context,j);break}}}}}static currentMat(object){if(object!=null&&object instanceof iron_object_MeshObject){let mo=js_Boot.__cast(object,iron_object_MeshObject);return mo.materials[mo.materialIndex]}return null}static setMaterialConstant(g,location,c,matc){switch(c.type){case"bool":g.setBool(location,matc.boolValue);break;case"float":g.setFloat(location,matc.floatValue);break;case"int":g.setInt(location,matc.intValue);break;case"vec2":g.setFloat2(location,matc.vec2Value.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec2Value.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN));break;case"vec3":g.setFloat3(location,matc.vec3Value.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec3Value.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec3Value.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN));break;case"vec4":g.setFloat4(location,matc.vec4Value.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec4Value.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec4Value.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec4Value.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN));break}}}$hxClasses["iron.object.Uniforms"]=iron_object_Uniforms;iron_object_Uniforms.__name__="iron.object.Uniforms";class iron_system_ArmPack{static read(i,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}try{let b=i.readByte();switch(b){case 192:return null;case 194:return false;case 195:return true;case 196:return i.read(i.readByte());case 197:return i.read(i.readUInt16());case 198:return i.read(i.readInt32());case 202:return i.readFloat();case 204:return i.readByte();case 205:return i.readUInt16();case 206:return i.readInt32();case 208:return i.readInt8();case 209:return i.readInt16();case 210:return i.readInt32();case 217:return i.readString(i.readByte());case 218:return i.readString(i.readUInt16());case 219:return i.readString(i.readInt32());case 220:return iron_system_ArmPack.readArray(i,i.readUInt16(),key,parentKey);case 221:return iron_system_ArmPack.readArray(i,i.readInt32(),key,parentKey);case 222:return iron_system_ArmPack.readMap(i,i.readUInt16(),key,parentKey);case 223:return iron_system_ArmPack.readMap(i,i.readInt32(),key,parentKey);default:if(b<128){return b}else if(b<144){return iron_system_ArmPack.readMap(i,15&b,key,parentKey)}else if(b<160){return iron_system_ArmPack.readArray(i,15&b,key,parentKey)}else if(b<192){return i.readString(31&b)}else if(b>223){return-256|b}}}catch(_g){if(!(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof)){throw _g}}return null}static readArray(i,length,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}let b=i.readByte();i.set_position(i.pos-1);if(b==202){i.set_position(i.pos+1);let a=kha_arrays_Float32Array._new(length);let _g=0;let _g1=length;while(_g<_g1){let x=_g++;let v=i.readFloat();a.setFloat32(x*4,v,true)}return a}else if(b==210){i.set_position(i.pos+1);let a=kha_arrays_Uint32Array._new(length);let _g=0;let _g1=length;while(_g<_g1){let x=_g++;a.setUint32(x*4,i.readInt32(),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=x*4}return a}else if(b==209){i.set_position(i.pos+1);let a=kha_arrays_Int16Array._new(length);let _g=0;let _g1=length;while(_g<_g1){let x=_g++;a.setInt16(x*2,i.readInt16(),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=x*2}return a}else{let a=[];let _g=0;let _g1=length;while(_g<_g1){let x=_g++;a.push(iron_system_ArmPack.read(i,key,parentKey))}return a}}static readMap(i,length,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}let out={};let _g=0;let _g1=length;while(_g<_g1){let n=_g++;let k=Std.string(iron_system_ArmPack.read(i));let v=iron_system_ArmPack.read(i,k,key);out[k]=v}return out}}$hxClasses["iron.system.ArmPack"]=iron_system_ArmPack;iron_system_ArmPack.__name__="iron.system.ArmPack";class iron_system_Input{static reset(){iron_system_Input.occupied=false;if(iron_system_Input.mouse!=null){iron_system_Input.mouse.reset()}if(iron_system_Input.pen!=null){iron_system_Input.pen.reset()}if(iron_system_Input.keyboard!=null){iron_system_Input.keyboard.reset()}let _g=0;let _g1=iron_system_Input.gamepads;while(_g<_g1.length){let gamepad=_g1[_g];++_g;gamepad.reset()}}static endFrame(){if(iron_system_Input.mouse!=null){iron_system_Input.mouse.endFrame()}if(iron_system_Input.pen!=null){iron_system_Input.pen.endFrame()}if(iron_system_Input.keyboard!=null){iron_system_Input.keyboard.endFrame()}let _g=0;let _g1=iron_system_Input.gamepads;while(_g<_g1.length){let gamepad=_g1[_g];++_g;gamepad.endFrame()}if(iron_system_Input.virtualButtons!=null){let h=iron_system_Input.virtualButtons.h;let vb_h=h;let vb_keys=Object.keys(h);let vb_length=vb_keys.length;let vb_current=0;while(vb_current<vb_length){let vb=vb_h[vb_keys[vb_current++]];vb.started=vb.released=false}}}static getMouse(){if(!iron_system_Input.registered){iron_system_Input.registered=true;iron_App.notifyOnEndFrame(iron_system_Input.endFrame);iron_App.notifyOnReset(iron_system_Input.reset);kha_System.notifyOnApplicationState(function(){iron_system_Input.getMouse().reset()},null,null,null,null)}if(iron_system_Input.mouse==null){iron_system_Input.mouse=new iron_system_Mouse}return iron_system_Input.mouse}static getPen(){if(!iron_system_Input.registered){iron_system_Input.registered=true;iron_App.notifyOnEndFrame(iron_system_Input.endFrame);iron_App.notifyOnReset(iron_system_Input.reset);kha_System.notifyOnApplicationState(function(){iron_system_Input.getMouse().reset()},null,null,null,null)}if(iron_system_Input.pen==null){iron_system_Input.pen=new iron_system_Pen}return iron_system_Input.pen}}$hxClasses["iron.system.Input"]=iron_system_Input;iron_system_Input.__name__="iron.system.Input";class iron_system_VirtualButton{constructor(){this.down=false;this.released=false;this.started=false}}$hxClasses["iron.system.VirtualButton"]=iron_system_VirtualButton;iron_system_VirtualButton.__name__="iron.system.VirtualButton";Object.assign(iron_system_VirtualButton.prototype,{__class__:iron_system_VirtualButton,started:null,released:null,down:null});class iron_system_VirtualInput{constructor(){if(iron_system_VirtualInput._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this.virtualButtons=null}downVirtual(button){if(this.virtualButtons!=null){let vb=this.virtualButtons.h[button];if(vb!=null){vb.down=true;vb.started=true}}}upVirtual(button){if(this.virtualButtons!=null){let vb=this.virtualButtons.h[button];if(vb!=null){vb.down=false;vb.released=true}}}}$hxClasses["iron.system.VirtualInput"]=iron_system_VirtualInput;iron_system_VirtualInput.__name__="iron.system.VirtualInput";Object.assign(iron_system_VirtualInput.prototype,{__class__:iron_system_VirtualInput,virtualButtons:null});class iron_system_Mouse extends iron_system_VirtualInput{constructor(){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.lastY=-1;this.lastX=-1;this.locked=false;this.wheelDelta=0;this.movementY=0;this.movementX=0;this.moved=false;this.y=0;this.x=0;this.buttonsReleased=[false,false,false,false,false];this.buttonsStarted=[false,false,false,false,false];this.buttonsDown=[false,false,false,false,false];super._hx_constructor();kha_input_Mouse.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener),$bind(this,this.wheelListener))}endFrame(){let tmp=this.buttonsStarted[1]=this.buttonsStarted[2]=this.buttonsStarted[3]=this.buttonsStarted[4]=false;this.buttonsStarted[0]=tmp;let tmp1=this.buttonsReleased[1]=this.buttonsReleased[2]=this.buttonsReleased[3]=this.buttonsReleased[4]=false;this.buttonsReleased[0]=tmp1;this.moved=false;this.movementX=0;this.movementY=0;this.wheelDelta=0}reset(){let tmp=this.buttonsDown[1]=this.buttonsDown[2]=this.buttonsDown[3]=this.buttonsDown[4]=false;this.buttonsDown[0]=tmp;this.endFrame()}buttonIndex(button){let _g=0;let _g1=iron_system_Mouse.buttons.length;while(_g<_g1){let i=_g++;if(iron_system_Mouse.buttons[i]==button){return i}}return 0}down(button){if(button==null){button="left"}return this.buttonsDown[this.buttonIndex(button)]}started(button){if(button==null){button="left"}return this.buttonsStarted[this.buttonIndex(button)]}downListener(index,x,y){if(iron_system_Input.getPen().inUse){return}this.buttonsDown[index]=true;this.buttonsStarted[index]=true;this.x=x;this.y=y;this.downVirtual(iron_system_Mouse.buttons[index])}upListener(index,x,y){if(iron_system_Input.getPen().inUse){return}this.buttonsDown[index]=false;this.buttonsReleased[index]=true;this.x=x;this.y=y;this.upVirtual(iron_system_Mouse.buttons[index])}moveListener(x,y,movementX,movementY){if(this.lastX==-1&&this.lastY==-1){this.lastX=x;this.lastY=y}if(this.locked){this.movementX+=movementX;this.movementY+=movementY}else{this.movementX+=x-this.lastX;this.movementY+=y-this.lastY}this.lastX=x;this.lastY=y;this.x=x;this.y=y;this.moved=true}wheelListener(delta){this.wheelDelta=delta}}$hxClasses["iron.system.Mouse"]=iron_system_Mouse;iron_system_Mouse.__name__="iron.system.Mouse";iron_system_Mouse.__super__=iron_system_VirtualInput;Object.assign(iron_system_Mouse.prototype,{__class__:iron_system_Mouse,buttonsDown:null,buttonsStarted:null,buttonsReleased:null,x:null,y:null,moved:null,movementX:null,movementY:null,wheelDelta:null,locked:null,lastX:null,lastY:null});class iron_system_Pen extends iron_system_VirtualInput{constructor(){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.lastY=-1;this.lastX=-1;this.inUse=false;this.connected=false;this.pressure=0;this.movementY=0;this.movementX=0;this.moved=false;this.y=0;this.x=0;this.buttonsReleased=[false];this.buttonsStarted=[false];this.buttonsDown=[false];super._hx_constructor();let pen=kha_input_Pen.get();if(pen!=null){pen.notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener))}}endFrame(){this.buttonsStarted[0]=false;this.buttonsReleased[0]=false;this.moved=false;this.movementX=0;this.movementY=0;this.inUse=false}reset(){this.buttonsDown[0]=false;this.endFrame()}downListener(x,y,pressure){this.buttonsDown[0]=true;this.buttonsStarted[0]=true;this.x=x;this.y=y;this.pressure=pressure;iron_system_Input.getMouse().downListener(0,x,y)}upListener(x,y,pressure){if(this.buttonsStarted[0]){this.buttonsStarted[0]=false;this.inUse=true;return}this.buttonsDown[0]=false;this.buttonsReleased[0]=true;this.x=x;this.y=y;this.pressure=pressure;iron_system_Input.getMouse().upListener(0,x,y);this.inUse=true}moveListener(x,y,pressure){if(this.lastX==-1&&this.lastY==-1){this.lastX=x;this.lastY=y}this.movementX=x-this.lastX;this.movementY=y-this.lastY;this.lastX=x;this.lastY=y;this.x=x;this.y=y;this.moved=true;this.pressure=pressure;this.connected=true}}$hxClasses["iron.system.Pen"]=iron_system_Pen;iron_system_Pen.__name__="iron.system.Pen";iron_system_Pen.__super__=iron_system_VirtualInput;Object.assign(iron_system_Pen.prototype,{__class__:iron_system_Pen,buttonsDown:null,buttonsStarted:null,buttonsReleased:null,x:null,y:null,moved:null,movementX:null,movementY:null,pressure:null,connected:null,inUse:null,lastX:null,lastY:null});class iron_system_Keyboard extends iron_system_VirtualInput{constructor(){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.repeatTime=0;this.repeatKey=false;this.keysFrame=[];this.keysReleased=new haxe_ds_StringMap;this.keysStarted=new haxe_ds_StringMap;this.keysDown=new haxe_ds_StringMap;super._hx_constructor();this.reset();kha_input_Keyboard.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.pressListener))}endFrame(){if(this.keysFrame.length>0){let _g=0;let _g1=this.keysFrame;while(_g<_g1.length){let s=_g1[_g];++_g;this.keysStarted.h[s]=false;this.keysReleased.h[s]=false}this.keysFrame.splice(0,this.keysFrame.length)}if(kha_Scheduler.time()-this.repeatTime>.05){this.repeatTime=kha_Scheduler.time();this.repeatKey=true}else{this.repeatKey=false}}reset(){let _g=0;let _g1=iron_system_Keyboard.keys;while(_g<_g1.length){let s=_g1[_g];++_g;this.keysDown.h[s]=false;this.keysStarted.h[s]=false;this.keysReleased.h[s]=false}this.endFrame()}downListener(code){let s=iron_system_Keyboard.keyCode(code);this.keysFrame.push(s);this.keysStarted.h[s]=true;this.keysDown.h[s]=true;this.repeatTime=kha_Scheduler.time()+.4;this.downVirtual(s)}upListener(code){let s=iron_system_Keyboard.keyCode(code);this.keysFrame.push(s);this.keysReleased.h[s]=true;this.keysDown.h[s]=false;this.upVirtual(s)}pressListener(char){}static keyCode(key){switch(key){case 1:return"back";case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 20:return"capslock";case 27:return"escape";case 32:return"space";case 37:return"left";case 38:return"up";case 39:return"right";case 40:return"down";case 46:return"delete";case 48:return"0";case 49:return"1";case 50:return"2";case 51:return"3";case 52:return"4";case 53:return"5";case 54:return"6";case 55:return"7";case 56:return"8";case 57:return"9";case 58:return":";case 59:return";";case 60:return"<";case 61:return"=";case 62:return">";case 63:return"?";case 64:return"@";case 91:return"win";case 96:return"0";case 97:return"1";case 98:return"2";case 99:return"3";case 100:return"4";case 101:return"5";case 102:return"6";case 103:return"7";case 104:return"8";case 105:return"9";case 106:return"*";case 107:return"+";case 109:return"-";case 110:return".";case 111:return"/";case 112:return"f1";case 113:return"f2";case 114:return"f3";case 115:return"f4";case 116:return"f5";case 117:return"f6";case 118:return"f7";case 119:return"f8";case 120:return"f9";case 121:return"f10";case 122:return"f11";case 123:return"f12";case 161:return"!";case 162:return'"';case 163:return"#";case 164:return"$";case 165:return"%";case 166:return"&";case 167:return"_";case 168:return"(";case 169:return")";case 170:return"*";case 171:return"+";case 172:return"|";case 173:return"-";case 174:return"{";case 175:return"}";case 176:return"~";case 188:return",";case 190:return".";case 191:return"/";case 192:return"`";case 219:return"[";case 220:return"\\";case 221:return"]";default:return String.fromCodePoint(key).toLowerCase()}}}$hxClasses["iron.system.Keyboard"]=iron_system_Keyboard;iron_system_Keyboard.__name__="iron.system.Keyboard";iron_system_Keyboard.__super__=iron_system_VirtualInput;Object.assign(iron_system_Keyboard.prototype,{__class__:iron_system_Keyboard,keysDown:null,keysStarted:null,keysReleased:null,keysFrame:null,repeatKey:null,repeatTime:null});class iron_system_GamepadStick{constructor(){this.movementY=0;this.movementX=0;this.moved=false;this.lastY=0;this.lastX=0;this.y=0;this.x=0}}$hxClasses["iron.system.GamepadStick"]=iron_system_GamepadStick;iron_system_GamepadStick.__name__="iron.system.GamepadStick";Object.assign(iron_system_GamepadStick.prototype,{__class__:iron_system_GamepadStick,x:null,y:null,lastX:null,lastY:null,moved:null,movementX:null,movementY:null});class iron_system_Gamepad extends iron_system_VirtualInput{constructor(i,virtual){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor(i,virtual)}_hx_constructor(i,virtual){if(virtual==null){virtual=false}this.num=0;this.connected=false;this.rightStick=new iron_system_GamepadStick;this.leftStick=new iron_system_GamepadStick;this.buttonsFrame=[];this.buttonsReleased=[];this.buttonsStarted=[];this.buttonsDown=[];super._hx_constructor();let _g=0;let _g1=iron_system_Gamepad.buttons;while(_g<_g1.length){let s=_g1[_g];++_g;this.buttonsDown.push(0);this.buttonsStarted.push(false);this.buttonsReleased.push(false)}this.num=i;this.reset();if(virtual){this.connected=true}else{this.connect()}}connect(){let gamepad=kha_input_Gamepad.get(this.num);if(gamepad==null){return}this.connected=true;gamepad.notify($bind(this,this.axisListener),$bind(this,this.buttonListener))}endFrame(){if(this.buttonsFrame.length>0){let _g=0;let _g1=this.buttonsFrame;while(_g<_g1.length){let i=_g1[_g];++_g;this.buttonsStarted[i]=false;this.buttonsReleased[i]=false}this.buttonsFrame.splice(0,this.buttonsFrame.length)}this.leftStick.moved=false;this.leftStick.movementX=0;this.leftStick.movementY=0;this.rightStick.moved=false;this.rightStick.movementX=0;this.rightStick.movementY=0}reset(){let _g=0;let _g1=this.buttonsDown.length;while(_g<_g1){let i=_g++;this.buttonsDown[i]=0;this.buttonsStarted[i]=false;this.buttonsReleased[i]=false}this.endFrame()}axisListener(axis,value){let stick=axis<=1?this.leftStick:this.rightStick;if(axis==0||axis==2){stick.lastX=stick.x;stick.x=value;stick.movementX=stick.x-stick.lastX}else if(axis==1||axis==3){stick.lastY=stick.y;stick.y=value;stick.movementY=stick.y-stick.lastY}stick.moved=true}buttonListener(button,value){this.buttonsFrame.push(button);this.buttonsDown[button]=value;if(value>0){this.buttonsStarted[button]=true}else{this.buttonsReleased[button]=true}if(value==0){this.upVirtual(iron_system_Gamepad.buttons[button])}else if(value==1){this.downVirtual(iron_system_Gamepad.buttons[button])}}}$hxClasses["iron.system.Gamepad"]=iron_system_Gamepad;iron_system_Gamepad.__name__="iron.system.Gamepad";iron_system_Gamepad.__super__=iron_system_VirtualInput;Object.assign(iron_system_Gamepad.prototype,{__class__:iron_system_Gamepad,buttonsDown:null,buttonsStarted:null,buttonsReleased:null,buttonsFrame:null,leftStick:null,rightStick:null,connected:null,num:null});class iron_system_Time{static initFrequency(){iron_system_Time.frequency=kha_Display.get_primary()!=null?kha_Display.get_primary().get_frequency():60}static get_step(){if(iron_system_Time.frequency==null){iron_system_Time.initFrequency()}return 1/iron_system_Time.frequency}static get_fixedStep(){return iron_system_Time._fixedStep}static get_delta(){return iron_system_Time._delta}static get_renderDelta(){return iron_system_Time._renderDelta}static update(){iron_system_Time._delta=kha_Scheduler.realTime()-iron_system_Time.lastTime;iron_system_Time.lastTime=kha_Scheduler.realTime()}static render(){iron_system_Time._renderDelta=kha_Scheduler.realTime()-iron_system_Time.lastRenderTime;iron_system_Time.lastRenderTime=kha_Scheduler.realTime()}}$hxClasses["iron.system.Time"]=iron_system_Time;iron_system_Time.__name__="iron.system.Time";iron_system_Time.__properties__={get_renderDelta:"get_renderDelta",get_delta:"get_delta",get_fixedStep:"get_fixedStep",get_step:"get_step"};class js_Boot{static getClass(o){if(o==null){return null}else if(o instanceof Array){return Array}else{let cl=o.__class__;if(cl!=null){return cl}let name=js_Boot.__nativeClassName(o);if(name!=null){return js_Boot.__resolveNativeClass(name)}return null}}static __string_rec(o,s){if(o==null){return"null"}if(s.length>=5){return"<...>"}let t=typeof o;if(t=="function"&&(o.__name__||o.__ename__)){t="object"}switch(t){case"function":return"<function>";case"object":if(o.__enum__){let e=$hxEnums[o.__enum__];let con=e.__constructs__[o._hx_index];let n=con._hx_name;if(con.__params__){s=s+"\t";return n+"("+function($this){var $r;let _g=[];{let _g1=0;let _g2=con.__params__;while(true){if(!(_g1<_g2.length)){break}let p=_g2[_g1];_g1=_g1+1;_g.push(js_Boot.__string_rec(o[p],s))}}$r=_g;return $r}(this).join(",")+")"}else{return n}}if(o instanceof Array){let str="[";s+="\t";let _g=0;let _g1=o.length;while(_g<_g1){let i=_g++;str+=(i>0?",":"")+js_Boot.__string_rec(o[i],s)}str+="]";return str}let tostr;try{tostr=o.toString}catch(_g){return"???"}if(tostr!=null&&tostr!=Object.toString&&typeof tostr=="function"){let s2=o.toString();if(s2!="[object Object]"){return s2}}let str="{\n";s+="\t";let hasp=o.hasOwnProperty!=null;let k=null;for(k in o){if(hasp&&!o.hasOwnProperty(k)){continue}if(k=="prototype"||k=="__class__"||k=="__super__"||k=="__interfaces__"||k=="__properties__"){continue}if(str.length!=2){str+=", \n"}str+=s+k+" : "+js_Boot.__string_rec(o[k],s)}s=s.substring(1);str+="\n"+s+"}";return str;case"string":return o;default:return String(o)}}static __interfLoop(cc,cl){if(cc==null){return false}if(cc==cl){return true}let intf=cc.__interfaces__;if(intf!=null&&(cc.__super__==null||cc.__super__.__interfaces__!=intf)){let _g=0;let _g1=intf.length;while(_g<_g1){let i=_g++;let i1=intf[i];if(i1==cl||js_Boot.__interfLoop(i1,cl)){return true}}}return js_Boot.__interfLoop(cc.__super__,cl)}static __instanceof(o,cl){if(cl==null){return false}switch(cl){case Array:return o instanceof Array;case Bool:return typeof o=="boolean";case Dynamic:return o!=null;case Float:return typeof o=="number";case Int:if(typeof o=="number"){return(o|0)===o}else{return false}break;case String:return typeof o=="string";default:if(o!=null){if(typeof cl=="function"){if(js_Boot.__downcastCheck(o,cl)){return true}}else if(typeof cl=="object"&&js_Boot.__isNativeObj(cl)){if(o instanceof cl){return true}}}else{return false}if(cl==Class?o.__name__!=null:false){return true}if(cl==Enum?o.__ename__!=null:false){return true}return o.__enum__!=null?$hxEnums[o.__enum__]==cl:false}}static __downcastCheck(o,cl){if(!(o instanceof cl)){if(cl.__isInterface__){return js_Boot.__interfLoop(js_Boot.getClass(o),cl)}else{return false}}else{return true}}static __cast(o,t){if(o==null||js_Boot.__instanceof(o,t)){return o}else{throw haxe_Exception.thrown("Cannot cast "+Std.string(o)+" to "+Std.string(t))}}static __nativeClassName(o){let name=js_Boot.__toStr.call(o).slice(8,-1);if(name=="Object"||name=="Function"||name=="Math"||name=="JSON"){return null}return name}static __isNativeObj(o){return js_Boot.__nativeClassName(o)!=null}static __resolveNativeClass(name){return $global[name]}}$hxClasses["js.Boot"]=js_Boot;js_Boot.__name__="js.Boot";class kha__$Assets_ImageList{constructor(){}get(name){return Reflect.field(this,name)}}$hxClasses["kha._Assets.ImageList"]=kha__$Assets_ImageList;kha__$Assets_ImageList.__name__="kha._Assets.ImageList";Object.assign(kha__$Assets_ImageList.prototype,{__class__:kha__$Assets_ImageList});class kha__$Assets_SoundList{constructor(){}}$hxClasses["kha._Assets.SoundList"]=kha__$Assets_SoundList;kha__$Assets_SoundList.__name__="kha._Assets.SoundList";Object.assign(kha__$Assets_SoundList.prototype,{__class__:kha__$Assets_SoundList});class kha__$Assets_BlobList{constructor(){this.ui_override_ksnDescription={name:"ui_override_ksn",file_sizes:[1],files:["ui_override.ksn"],type:"blob"};this.ui_override_ksn=null;this.theme_ksnDescription={name:"theme_ksn",file_sizes:[1],files:["theme.ksn"],type:"blob"};this.theme_ksn=null}}$hxClasses["kha._Assets.BlobList"]=kha__$Assets_BlobList;kha__$Assets_BlobList.__name__="kha._Assets.BlobList";Object.assign(kha__$Assets_BlobList.prototype,{__class__:kha__$Assets_BlobList,theme_ksn:null,theme_ksnDescription:null,ui_override_ksn:null,ui_override_ksnDescription:null});class kha__$Assets_FontList{constructor(){this.font_defaultDescription={name:"font_default",file_sizes:[1],files:["data/font_default.ttf"],type:"font"};this.font_default=null;this.Montserrat_RegularDescription={name:"Montserrat_Regular",file_sizes:[1],files:["Montserrat-Regular.ttf"],type:"font"};this.Montserrat_Regular=null;this.Montserrat_ItalicDescription={name:"Montserrat_Italic",file_sizes:[1],files:["Montserrat-Italic.ttf"],type:"font"};this.Montserrat_Italic=null;this.Montserrat_BoldDescription={name:"Montserrat_Bold",file_sizes:[1],files:["Montserrat-Bold.ttf"],type:"font"};this.Montserrat_Bold=null}get(name){return Reflect.field(this,name)}}$hxClasses["kha._Assets.FontList"]=kha__$Assets_FontList;kha__$Assets_FontList.__name__="kha._Assets.FontList";Object.assign(kha__$Assets_FontList.prototype,{__class__:kha__$Assets_FontList,Montserrat_Bold:null,Montserrat_BoldDescription:null,Montserrat_Italic:null,Montserrat_ItalicDescription:null,Montserrat_Regular:null,Montserrat_RegularDescription:null,font_default:null,font_defaultDescription:null});class kha__$Assets_VideoList{constructor(){}}$hxClasses["kha._Assets.VideoList"]=kha__$Assets_VideoList;kha__$Assets_VideoList.__name__="kha._Assets.VideoList";Object.assign(kha__$Assets_VideoList.prototype,{__class__:kha__$Assets_VideoList});class kha_Assets{static loadEverything(callback,filter,uncompressSoundsFilter,failed){let lists=[kha__$Assets_ImageList,kha__$Assets_SoundList,kha__$Assets_BlobList,kha__$Assets_FontList,kha__$Assets_VideoList];let listInstances=[kha_Assets.images,kha_Assets.sounds,kha_Assets.blobs,kha_Assets.fonts,kha_Assets.videos];let fileCount=0;let byteCount=0;let _g=0;let _g1=lists.length;while(_g<_g1){let i=_g++;let list=lists[i];let _g1=0;let _g2=Type.getInstanceFields(list);while(_g1<_g2.length){let file=_g2[_g1];++_g1;if(file.endsWith("Description")){++fileCount}else if(file.endsWith("Size")){let size=Reflect.field(listInstances[i],file);byteCount+=size}}}if(fileCount==0){callback();return}let filesLeft=fileCount;let bytesLeft=byteCount;let onLoaded=function(bytes){filesLeft-=1;bytesLeft-=bytes;kha_Assets.progress=1-bytesLeft/byteCount;if(filesLeft==0){callback()}};let onError=function(err,bytes){kha_Assets.reporter(failed,{fileName:"kha/Assets.hx",lineNumber:143,className:"kha.Assets",methodName:"loadEverything"})(err);onLoaded(bytes)};let loadFunc=function(desc,done,failure){let name=desc.name;let size=desc.file_sizes[0];switch(desc.type){case"blob":kha_Assets.loadBlob(name,function(blob){done(size)},function(err){onError(err,size)},{fileName:"kha/Assets.hx",lineNumber:169,className:"kha.Assets",methodName:"loadEverything"});break;case"font":kha_Assets.loadFont(name,function(font){done(size)},function(err){onError(err,size)},{fileName:"kha/Assets.hx",lineNumber:173,className:"kha.Assets",methodName:"loadEverything"});break;case"image":kha_Assets.loadImage(name,function(image){done(size)},function(err){onError(err,size)},{fileName:"kha/Assets.hx",lineNumber:152,className:"kha.Assets",methodName:"loadEverything"});break;case"sound":kha_Assets.loadSound(name,function(sound){if(uncompressSoundsFilter==null||uncompressSoundsFilter(desc)){sound.uncompress(function(){done(size)})}else{done(size)}},function(err){onError(err,size)},{fileName:"kha/Assets.hx",lineNumber:156,className:"kha.Assets",methodName:"loadEverything"});break;case"video":kha_Assets.loadVideo(name,function(video){done(size)},function(err){onError(err,size)},{fileName:"kha/Assets.hx",lineNumber:177,className:"kha.Assets",methodName:"loadEverything"});break}};let _g2=0;let _g3=lists.length;while(_g2<_g3){let i=_g2++;let list=lists[i];let listInstance=listInstances[i];let _g=0;let _g1=Type.getInstanceFields(list);while(_g<_g1.length){let field=_g1[_g];++_g;if(!field.endsWith("Description")){continue}let desc=Reflect.field(listInstance,field);if(filter==null||filter(desc)){loadFunc(desc,onLoaded,onError)}else{onLoaded(desc.file_sizes[0])}}}}static loadImage(name,done,failed,pos){let description=Reflect.field(kha_Assets.images,name+"Description");if(description==null){kha_Assets.reporter(failed,pos)({url:name,error:"Name not found"});return}kha_LoaderImpl.loadImageFromDescription(description,function(image){kha_Assets.images[name]=image;done(image)},kha_Assets.reporter(failed,pos))}static loadImageFromPath(path,readable,done,failed,pos){let description={files:[path],readable:readable};kha_LoaderImpl.loadImageFromDescription(description,done,kha_Assets.reporter(failed,pos))}static loadBlob(name,done,failed,pos){let description=Reflect.field(kha_Assets.blobs,name+"Description");if(description==null){kha_Assets.reporter(failed,pos)({url:name,error:"Name not found"});return}kha_LoaderImpl.loadBlobFromDescription(description,function(blob){kha_Assets.blobs[name]=blob;done(blob)},kha_Assets.reporter(failed,pos))}static loadBlobFromPath(path,done,failed,pos){let description={files:[path]};kha_LoaderImpl.loadBlobFromDescription(description,done,kha_Assets.reporter(failed,pos))}static loadSound(name,done,failed,pos){let description=Reflect.field(kha_Assets.sounds,name+"Description");if(description==null){kha_Assets.reporter(failed,pos)({url:name,error:"Name not found"});return}kha_LoaderImpl.loadSoundFromDescription(description,function(sound){kha_Assets.sounds[name]=sound;done(sound)},kha_Assets.reporter(failed,pos))}static loadFont(name,done,failed,pos){let description=Reflect.field(kha_Assets.fonts,name+"Description");if(description==null){kha_Assets.reporter(failed,pos)({url:name,error:"Name not found"});return}kha_LoaderImpl.loadFontFromDescription(description,function(font){kha_Assets.fonts[name]=font;done(font)},kha_Assets.reporter(failed,pos))}static loadFontFromPath(path,done,failed,pos){let description={files:[path]};kha_LoaderImpl.loadFontFromDescription(description,done,kha_Assets.reporter(failed,pos))}static loadVideo(name,done,failed,pos){let description=Reflect.field(kha_Assets.videos,name+"Description");if(description==null){kha_Assets.reporter(failed,pos)({url:name,error:"Name not found"});return}kha_LoaderImpl.loadVideoFromDescription(description,function(video){kha_Assets.videos[name]=video;done(video)},kha_Assets.reporter(failed,pos))}static reporter(custom,pos){if(custom!=null){return custom}else{let _g=haxe_Log.trace;let infos=pos;return function(v){_g(v,infos)}}}}$hxClasses["kha.Assets"]=kha_Assets;kha_Assets.__name__="kha.Assets";class kha_Canvas{}$hxClasses["kha.Canvas"]=kha_Canvas;kha_Canvas.__name__="kha.Canvas";kha_Canvas.__isInterface__=true;Object.assign(kha_Canvas.prototype,{__class__:kha_Canvas,get_width:null,get_height:null,get_g4:null,width:null,height:null,g4:null,__properties__:{get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}});class kha_Color{static fromFloats(r,g,b,a){if(a==null){a=1}return kha_Color._new((a*255|0)<<24|(r*255|0)<<16|(g*255|0)<<8|(b*255|0))}static _new(value){let this1=value;return this1}}class kha_Display{constructor(num,isPrimary){this.num=num;this.isPrimary=isPrimary}get_frequency(){return Krom.displayFrequency()}static init(){if(kha_Display.displays==null){kha_Display.displays=[];let _g=0;let _g1=Krom.displayCount();while(_g<_g1){let i=_g++;kha_Display.displays.push(new kha_Display(i,Krom.displayIsPrimary(i)))}}}static get_primary(){kha_Display.init();let _g=0;let _g1=kha_Display.displays;while(_g<_g1.length){let display=_g1[_g];++_g;if(display.isPrimary){return display}}return null}}$hxClasses["kha.Display"]=kha_Display;kha_Display.__name__="kha.Display";kha_Display.__properties__={get_primary:"get_primary"};Object.assign(kha_Display.prototype,{__class__:kha_Display,num:null,isPrimary:null,__properties__:{get_frequency:"get_frequency"}});class kha_Framebuffer{constructor($window,g1,g2,g4){this.window=$window;this.graphics1=g1;this.graphics2=g2;this.graphics4=g4}init(g1,g2,g4){this.graphics1=g1;this.graphics2=g2;this.graphics4=g4}get_g2(){return this.graphics2}get_g4(){return this.graphics4}get_width(){return kha_System.windowWidth(this.window)}get_height(){return kha_System.windowHeight(this.window)}}$hxClasses["kha.Framebuffer"]=kha_Framebuffer;kha_Framebuffer.__name__="kha.Framebuffer";kha_Framebuffer.__interfaces__=[kha_Canvas];Object.assign(kha_Framebuffer.prototype,{__class__:kha_Framebuffer,window:null,graphics1:null,graphics2:null,graphics4:null,width:null,height:null,__properties__:{get_height:"get_height",get_width:"get_width",get_g4:"get_g4",get_g2:"get_g2"}});class kha_FramebufferOptions{constructor(frequency,verticalSync,colorBufferBits,depthBufferBits,stencilBufferBits,samplesPerPixel){if(samplesPerPixel==null){samplesPerPixel=1}if(stencilBufferBits==null){stencilBufferBits=8}if(depthBufferBits==null){depthBufferBits=16}if(colorBufferBits==null){colorBufferBits=32}if(verticalSync==null){verticalSync=true}if(frequency==null){frequency=60}this.samplesPerPixel=1;this.stencilBufferBits=8;this.depthBufferBits=16;this.colorBufferBits=32;this.verticalSync=true;this.frequency=60;this.frequency=frequency;this.verticalSync=verticalSync;this.colorBufferBits=colorBufferBits;this.depthBufferBits=depthBufferBits;this.stencilBufferBits=stencilBufferBits;this.samplesPerPixel=samplesPerPixel}}$hxClasses["kha.FramebufferOptions"]=kha_FramebufferOptions;kha_FramebufferOptions.__name__="kha.FramebufferOptions";Object.assign(kha_FramebufferOptions.prototype,{__class__:kha_FramebufferOptions,frequency:null,verticalSync:null,colorBufferBits:null,depthBufferBits:null,stencilBufferBits:null,samplesPerPixel:null});class kha_Resource{}$hxClasses["kha.Resource"]=kha_Resource;kha_Resource.__name__="kha.Resource";kha_Resource.__isInterface__=true;class kha_Image{constructor(texture){this.texture_=texture}unload(){Krom.unloadImage(this);this.texture_=null;this.renderTarget_=null}lock(level){if(level==null){level=0}return haxe_io_Bytes.ofData(Krom.lockTexture(this.texture_,level))}unlock(){Krom.unlockTexture(this.texture_)}generateMipmaps(levels){if(this.texture_==null){Krom.generateRenderTargetMipmaps(this.renderTarget_,levels)}else{Krom.generateTextureMipmaps(this.texture_,levels)}}setMipmaps(mipmaps){Krom.setMipmaps(this.texture_,mipmaps)}setDepthStencilFrom(image){Krom.setDepthStencilFrom(this.renderTarget_,image.renderTarget_)}get_width(){if(this.texture_==null){return this.renderTarget_.width}else{return this.texture_.width}}get_height(){if(this.texture_==null){return this.renderTarget_.height}else{return this.texture_.height}}get_depth(){if(this.texture_!=null){return this.texture_.depth}else{return 1}}get_realWidth(){if(this.texture_==null){return this.renderTarget_.width}else{return this.texture_.realWidth}}get_realHeight(){if(this.texture_==null){return this.renderTarget_.height}else{return this.texture_.realHeight}}get_g2(){if(this.graphics2==null){this.graphics2=new kha_graphics4_Graphics2(this)}return this.graphics2}get_g4(){if(this.graphics4==null){this.graphics4=new kha_krom_Graphics(this)}return this.graphics4}static getRenderTargetFormat(format){switch(format){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 4;case 4:return 1;case 5:return 2;case 6:return 6;default:return 0}}static getDepthBufferBits(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return 24;case 2:return 24;case 3:return 24;case 4:return 32;case 5:return 16}}static getStencilBufferBits(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return-1;case 2:return 8;case 3:return 8;case 4:return 8;case 5:return 0}}static getTextureFormat(format){switch(format){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;case 6:return 7;default:return 1}}static _fromTexture(texture){return new kha_Image(texture)}static fromBytes(bytes,width,height,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTextureFromBytes(bytes.b.bufferValue,width,height,kha_Image.getTextureFormat(format),readable);return image}static fromBytes3D(bytes,width,height,depth,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTextureFromBytes3D(bytes.b.bufferValue,width,height,depth,kha_Image.getTextureFormat(format),readable);return image}static create(width,height,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTexture(width,height,kha_Image.getTextureFormat(format));return image}static create3D(width,height,depth,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTexture3D(width,height,depth,kha_Image.getTextureFormat(format));return image}static createRenderTarget(width,height,format,depthStencil,antiAliasingSamples){if(antiAliasingSamples==null){antiAliasingSamples=1}if(depthStencil==null){depthStencil=0}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.renderTarget_=Krom.createRenderTarget(width,height,kha_Image.getRenderTargetFormat(format),kha_Image.getDepthBufferBits(depthStencil),kha_Image.getStencilBufferBits(depthStencil));return image}static get_nonPow2Supported(){return true}static renderTargetsInvertedY(){return Krom.renderTargetsInvertedY()}}$hxClasses["kha.Image"]=kha_Image;kha_Image.__name__="kha.Image";kha_Image.__interfaces__=[kha_Resource,kha_Canvas];kha_Image.__properties__={get_nonPow2Supported:"get_nonPow2Supported"};Object.assign(kha_Image.prototype,{__class__:kha_Image,texture_:null,renderTarget_:null,myFormat:null,graphics2:null,graphics4:null,__properties__:{get_g4:"get_g4",get_g2:"get_g2",get_realHeight:"get_realHeight",get_realWidth:"get_realWidth",get_depth:"get_depth",get_height:"get_height",get_width:"get_width"}});class kha_AlignedQuad{constructor(){}}$hxClasses["kha.AlignedQuad"]=kha_AlignedQuad;kha_AlignedQuad.__name__="kha.AlignedQuad";Object.assign(kha_AlignedQuad.prototype,{__class__:kha_AlignedQuad,x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,xadvance:null});class kha_KravurImage{constructor(size,ascent,descent,lineGap,width,height,chars,pixels){this.mySize=size;this.width=width;this.height=height;this.chars=chars;this.baseline=ascent;let _g=0;while(_g<chars.length){let char=chars[_g];++_g;char.yoff+=this.baseline}this.texture=kha_Image.create(width,height,1);let bytes=this.texture.lock();let pos=0;let _g1=0;let _g2=height;while(_g1<_g2){let y=_g1++;let _g=0;let _g2=width;while(_g<_g2){let x=_g++;let v=pixels.readU8(pos);bytes.b[pos]=v;++pos}}this.texture.unlock()}getTexture(){return this.texture}getBakedQuad(q,char_index,xpos,ypos){if(char_index>=this.chars.length){return null}let ipw=1/this.width;let iph=1/this.height;let b=this.chars[char_index];if(b==null){return null}let round_x=Math.round(xpos+b.xoff);let round_y=Math.round(ypos+b.yoff);q.x0=round_x;q.y0=round_y;q.x1=round_x+b.x1-b.x0;q.y1=round_y+b.y1-b.y0;q.s0=b.x0*ipw;q.t0=b.y0*iph;q.s1=b.x1*ipw;q.t1=b.y1*iph;q.xadvance=b.xadvance;return q}getCharWidth(charIndex){if(this.chars.length==0){return 0}let offset=kha_KravurImage.charBlocks[0];if(charIndex<offset){return this.chars[0].xadvance}let _g=1;let _g1=kha_KravurImage.charBlocks.length/2|0;while(_g<_g1){let i=_g++;let prevEnd=kha_KravurImage.charBlocks[i*2-1];let start=kha_KravurImage.charBlocks[i*2];if(charIndex>start-1){offset+=start-1-prevEnd}}if(charIndex-offset>=this.chars.length){return this.chars[0].xadvance}return this.chars[charIndex-offset].xadvance}getHeight(){return this.mySize}stringWidth(str){let width=0;let _g=0;let _g1=str.length;while(_g<_g1){let c=_g++;width+=this.getCharWidth(HxOverrides.cca(str,c))}return width}}$hxClasses["kha.KravurImage"]=kha_KravurImage;kha_KravurImage.__name__="kha.KravurImage";Object.assign(kha_KravurImage.prototype,{__class__:kha_KravurImage,mySize:null,chars:null,texture:null,width:null,height:null,baseline:null});class kha_Kravur{constructor(blob,fontIndex){if(fontIndex==null){fontIndex=0}this.images=new haxe_ds_IntMap;this.blob=blob;this.fontIndex=fontIndex}_get(fontSize){let glyphs=kha_graphics2_Graphics.fontGlyphs;if(glyphs!=this.oldGlyphs){this.oldGlyphs=glyphs;kha_KravurImage.charBlocks=[glyphs[0]];let nextChar=kha_KravurImage.charBlocks[0]+1;let _g=1;let _g1=glyphs.length;while(_g<_g1){let i=_g++;if(glyphs[i]!=nextChar){kha_KravurImage.charBlocks.push(glyphs[i-1]);kha_KravurImage.charBlocks.push(glyphs[i]);nextChar=glyphs[i]+1}else{++nextChar}}kha_KravurImage.charBlocks.push(glyphs[glyphs.length-1])}let imageIndex=this.fontIndex*1e7+fontSize*1e4+glyphs.length;if(!this.images.h.hasOwnProperty(imageIndex)){let width=64;let height=32;let this1=new Array(glyphs.length);let baked=this1;let _g=0;let _g1=baked.length;while(_g<_g1){let i=_g++;baked[i]=new kha_graphics2_truetype_Stbtt_$bakedchar}let pixels=null;let offset=kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex(this.blob,this.fontIndex);if(offset==-1){offset=kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex(this.blob,0)}let status=-1;while(status<=0){if(height<width){height*=2}else{width*=2}pixels=kha_internal_BytesBlob.alloc(width*height);status=kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap(this.blob,offset,fontSize,pixels,width,height,glyphs,baked)}let info=new kha_graphics2_truetype_Stbtt_$fontinfo;kha_graphics2_truetype_StbTruetype.stbtt_InitFont(info,this.blob,offset);let metrics=kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics(info);let scale=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(info,fontSize);let ascent=Math.round(metrics.ascent*scale);let descent=Math.round(metrics.descent*scale);let lineGap=Math.round(metrics.lineGap*scale);let image=new kha_KravurImage(fontSize|0,ascent,descent,lineGap,width,height,baked,pixels);this.images.h[imageIndex]=image;return image}return this.images.h[imageIndex]}height(fontSize){return this._get(fontSize).getHeight()}width(fontSize,str){return this._get(fontSize).stringWidth(str)}}$hxClasses["kha.Kravur"]=kha_Kravur;kha_Kravur.__name__="kha.Kravur";kha_Kravur.__interfaces__=[kha_Resource];Object.assign(kha_Kravur.prototype,{__class__:kha_Kravur,oldGlyphs:null,blob:null,images:null,fontIndex:null});class kha_LoaderImpl{static loadImageFromDescription(desc,done,failed){let readable=Object.prototype.hasOwnProperty.call(desc,"readable")&&desc.readable;let texture=Krom.loadImage(desc.files[0],readable);if(texture==null){failed({url:desc.files.join(","),error:"Could not load image(s)"})}else{done(kha_Image._fromTexture(texture))}}static loadSoundFromDescription(desc,done,failed){let sound=Krom.loadSound(desc.files[0]);if(sound==null){failed({url:desc.files.join(","),error:"Could not load sound(s)"})}else{done(new kha_krom_Sound(haxe_io_Bytes.ofData(sound)))}}static loadVideoFromDescription(desc,done,failed){failed({url:desc.files.join(","),error:"Could not load video(s), Krom currently does not support loading videos"})}static loadBlobFromDescription(desc,done,failed){let blob=Krom.loadBlob(desc.files[0]);if(blob==null){failed({url:desc.files.join(","),error:"Could not load blob(s)"})}else{done(new kha_internal_BytesBlob(haxe_io_Bytes.ofData(blob)))}}static loadFontFromDescription(desc,done,failed){kha_LoaderImpl.loadBlobFromDescription(desc,function(blob){done(new kha_Kravur(blob))},function(a){a.error="Could not load font(s)";failed(a)})}}$hxClasses["kha.LoaderImpl"]=kha_LoaderImpl;kha_LoaderImpl.__name__="kha.LoaderImpl";class kha_TimeTask{constructor(){}}$hxClasses["kha.TimeTask"]=kha_TimeTask;kha_TimeTask.__name__="kha.TimeTask";Object.assign(kha_TimeTask.prototype,{__class__:kha_TimeTask,task:null,start:null,period:null,duration:null,next:null,id:null,groupId:null,active:null,paused:null});class kha_FrameTask{constructor(task,priority,id){this.task=task;this.priority=priority;this.id=id;this.active=true;this.paused=false}}$hxClasses["kha.FrameTask"]=kha_FrameTask;kha_FrameTask.__name__="kha.FrameTask";Object.assign(kha_FrameTask.prototype,{__class__:kha_FrameTask,task:null,priority:null,id:null,active:null,paused:null});class kha_Scheduler{static init(){kha_Scheduler.deltas=[];let _g=0;let _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){let i=_g++;kha_Scheduler.deltas[i]=0}kha_Scheduler.stopped=true;kha_Scheduler.frame_tasks_sorted=true;kha_Scheduler.current=kha_Scheduler.lastTime=kha_Scheduler.lastFrameEnd=kha_Scheduler.realTime();kha_Scheduler.currentFrameTaskId=0;kha_Scheduler.currentTimeTaskId=0;kha_Scheduler.currentGroupId=0;kha_Scheduler.timeTasks=[];kha_Scheduler.pausedTimeTasks=[];kha_Scheduler.outdatedTimeTasks=[];kha_Scheduler.timeTasksScratchpad=[];kha_Scheduler.frameTasks=[];kha_Scheduler.toDeleteFrame=[]}static start(restartTimers){if(restartTimers==null){restartTimers=false}kha_Scheduler.vsync=kha_Window.get(0).get_vSynced();let hz=kha_Display.get_primary()!=null?kha_Display.get_primary().get_frequency():60;if(hz>=57&&hz<=63){hz=60}kha_Scheduler.onedifhz=1/hz;kha_Scheduler.stopped=false;kha_Scheduler.resetTime();kha_Scheduler.lastTime=kha_Scheduler.realTime()-kha_Scheduler.startTime;let _g=0;let _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){let i=_g++;kha_Scheduler.deltas[i]=0}if(restartTimers){let _g=0;let _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){let timeTask=_g1[_g];++_g;timeTask.paused=false}let _g2=0;let _g3=kha_Scheduler.frameTasks;while(_g2<_g3.length){let frameTask=_g3[_g2];++_g2;frameTask.paused=false}}}static executeFrame(){let real=kha_Scheduler.realTime();let now=real-kha_Scheduler.startTime;let delta=now-kha_Scheduler.lastTime;let frameEnd=kha_Scheduler.lastFrameEnd;if(delta>=0){if(kha_netsync_Session.the()==null){if(delta>kha_Scheduler.maxframetime){kha_Scheduler.startTime+=delta-kha_Scheduler.maxframetime;now=real-kha_Scheduler.startTime;delta=kha_Scheduler.maxframetime;frameEnd+=delta}else if(kha_Scheduler.vsync){let frames=Math.round(delta/kha_Scheduler.onedifhz);if(frames<1){return}let realdif=frames*kha_Scheduler.onedifhz;delta=realdif;let _g=0;let _g1=kha_Scheduler.DIF_COUNT-2;while(_g<_g1){let i=_g++;delta+=kha_Scheduler.deltas[i];kha_Scheduler.deltas[i]=kha_Scheduler.deltas[i+1]}delta+=kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2];delta/=kha_Scheduler.DIF_COUNT;kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2]=realdif;frameEnd+=delta}else{let _g=0;let _g1=kha_Scheduler.DIF_COUNT-1;while(_g<_g1){let i=_g++;kha_Scheduler.deltas[i]=kha_Scheduler.deltas[i+1]}kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-1]=delta;let next=0;let _g2=0;let _g3=kha_Scheduler.DIF_COUNT;while(_g2<_g3){let i=_g2++;next+=kha_Scheduler.deltas[i]}next/=kha_Scheduler.DIF_COUNT;frameEnd+=next}}else{frameEnd+=delta}kha_Scheduler.lastTime=now;if(!kha_Scheduler.stopped){kha_Scheduler.lastFrameEnd=frameEnd}let _g=0;let _g1=kha_Scheduler.pausedTimeTasks;while(_g<_g1.length){let pausedTask=_g1[_g];++_g;pausedTask.next+=delta}if(kha_Scheduler.stopped){let _g=0;let _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){let timeTask=_g1[_g];++_g;timeTask.next+=delta}}kha_Scheduler.executeTimeTasks(frameEnd);let _g2=0;let _g3=kha_Scheduler.outdatedTimeTasks;while(_g2<_g3.length){let task=_g3[_g2];++_g2;if(task.next<frameEnd-10){kha_Scheduler.timeTasksScratchpad.push(task)}}let _g4=0;let _g5=kha_Scheduler.timeTasksScratchpad;while(_g4<_g5.length){let task=_g5[_g4];++_g4;HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,task)}while(kha_Scheduler.timeTasksScratchpad.length>0)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}kha_Scheduler.current=frameEnd;kha_Scheduler.sortFrameTasks();let _g=0;let _g1=kha_Scheduler.frameTasks;while(_g<_g1.length){let frameTask=_g1[_g];++_g;if(!kha_Scheduler.stopped&&!frameTask.paused&&frameTask.active){if(!frameTask.task()){frameTask.active=false}}}let _g2=0;let _g3=kha_Scheduler.frameTasks;while(_g2<_g3.length){let frameTask=_g3[_g2];++_g2;if(!frameTask.active){kha_Scheduler.toDeleteFrame.push(frameTask)}}while(kha_Scheduler.toDeleteFrame.length>0)HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop())}static executeTimeTasks(until){while(kha_Scheduler.timeTasks.length>0){kha_Scheduler.activeTimeTask=kha_Scheduler.timeTasks[0];if(kha_Scheduler.activeTimeTask.next<=until){kha_Scheduler.current=kha_Scheduler.activeTimeTask.next;kha_Scheduler.activeTimeTask.next+=kha_Scheduler.activeTimeTask.period;HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask);if(kha_Scheduler.activeTimeTask.active&&kha_Scheduler.activeTimeTask.task()){if(kha_Scheduler.activeTimeTask.period>0&&(kha_Scheduler.activeTimeTask.duration==0||kha_Scheduler.activeTimeTask.duration>=kha_Scheduler.activeTimeTask.start+kha_Scheduler.activeTimeTask.next)){kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask)}else{kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until)}}else{kha_Scheduler.activeTimeTask.active=false;kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until)}}else{break}}kha_Scheduler.activeTimeTask=null}static archiveTimeTask(timeTask,frameEnd){}static time(){return kha_Scheduler.current}static realTime(){return kha_System.get_time()}static resetTime(){let now=kha_System.get_time();let dif=now-kha_Scheduler.startTime;kha_Scheduler.startTime=now;let _g=0;let _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){let timeTask=_g1[_g];++_g;timeTask.start-=dif;timeTask.next-=dif}let _g2=0;let _g3=kha_Scheduler.DIF_COUNT;while(_g2<_g3){let i=_g2++;kha_Scheduler.deltas[i]=0}kha_Scheduler.current=0;kha_Scheduler.lastTime=0;kha_Scheduler.lastFrameEnd=0}static addBreakableTimeTaskToGroup(groupId,task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}let t=new kha_TimeTask;t.active=true;t.task=task;t.id=++kha_Scheduler.currentTimeTaskId;t.groupId=groupId;t.start=kha_Scheduler.current+start;t.period=0;if(period!=0){t.period=period}t.duration=0;if(duration!=0){t.duration=t.start+duration}t.next=t.start;kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,t);return t.id}static addTimeTaskToGroup(groupId,task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}return kha_Scheduler.addBreakableTimeTaskToGroup(groupId,function(){task();return true},start,period,duration)}static addTimeTask(task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}return kha_Scheduler.addTimeTaskToGroup(0,task,start,period,duration)}static insertSorted(list,task){let _g=0;let _g1=list.length;while(_g<_g1){let i=_g++;if(list[i].next>task.next){list.splice(i,0,task);return}}list.push(task)}static sortFrameTasks(){if(kha_Scheduler.frame_tasks_sorted){return}kha_Scheduler.frameTasks.sort(function(a,b){if(a.priority>b.priority){return 1}else if(a.priority<b.priority){return-1}else{return 0}});kha_Scheduler.frame_tasks_sorted=true}}$hxClasses["kha.Scheduler"]=kha_Scheduler;kha_Scheduler.__name__="kha.Scheduler";class kha_Shaders{static init(){let blobs=[];let data=Reflect.field(kha_Shaders,"World_World_fragData"+0);let bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.World_World_frag=new kha_graphics4_FragmentShader(blobs,["World_World.frag.glsl"]);let blobs1=[];let data1=Reflect.field(kha_Shaders,"World_World_vertData"+0);let bytes1=haxe_Unserializer.run(data1);blobs1.push(kha_internal_BytesBlob.fromBytes(bytes1));kha_Shaders.World_World_vert=new kha_graphics4_VertexShader(blobs1,["World_World.vert.glsl"]);let blobs2=[];let data2=Reflect.field(kha_Shaders,"circle_fragData"+0);let bytes2=haxe_Unserializer.run(data2);blobs2.push(kha_internal_BytesBlob.fromBytes(bytes2));kha_Shaders.circle_frag=new kha_graphics4_FragmentShader(blobs2,["circle.frag.glsl"]);let blobs3=[];let data3=Reflect.field(kha_Shaders,"painter_colored_fragData"+0);let bytes3=haxe_Unserializer.run(data3);blobs3.push(kha_internal_BytesBlob.fromBytes(bytes3));kha_Shaders.painter_colored_frag=new kha_graphics4_FragmentShader(blobs3,["painter-colored.frag.glsl"]);let blobs4=[];let data4=Reflect.field(kha_Shaders,"painter_colored_vertData"+0);let bytes4=haxe_Unserializer.run(data4);blobs4.push(kha_internal_BytesBlob.fromBytes(bytes4));kha_Shaders.painter_colored_vert=new kha_graphics4_VertexShader(blobs4,["painter-colored.vert.glsl"]);let blobs5=[];let data5=Reflect.field(kha_Shaders,"painter_image_fragData"+0);let bytes5=haxe_Unserializer.run(data5);blobs5.push(kha_internal_BytesBlob.fromBytes(bytes5));kha_Shaders.painter_image_frag=new kha_graphics4_FragmentShader(blobs5,["painter-image.frag.glsl"]);let blobs6=[];let data6=Reflect.field(kha_Shaders,"painter_image_vertData"+0);let bytes6=haxe_Unserializer.run(data6);blobs6.push(kha_internal_BytesBlob.fromBytes(bytes6));kha_Shaders.painter_image_vert=new kha_graphics4_VertexShader(blobs6,["painter-image.vert.glsl"]);let blobs7=[];let data7=Reflect.field(kha_Shaders,"painter_text_fragData"+0);let bytes7=haxe_Unserializer.run(data7);blobs7.push(kha_internal_BytesBlob.fromBytes(bytes7));kha_Shaders.painter_text_frag=new kha_graphics4_FragmentShader(blobs7,["painter-text.frag.glsl"]);let blobs8=[];let data8=Reflect.field(kha_Shaders,"painter_text_vertData"+0);let bytes8=haxe_Unserializer.run(data8);blobs8.push(kha_internal_BytesBlob.fromBytes(bytes8));kha_Shaders.painter_text_vert=new kha_graphics4_VertexShader(blobs8,["painter-text.vert.glsl"]);let blobs9=[];let data9=Reflect.field(kha_Shaders,"painter_video_fragData"+0);let bytes9=haxe_Unserializer.run(data9);blobs9.push(kha_internal_BytesBlob.fromBytes(bytes9));kha_Shaders.painter_video_frag=new kha_graphics4_FragmentShader(blobs9,["painter-video.frag.glsl"]);let blobs10=[];let data10=Reflect.field(kha_Shaders,"painter_video_vertData"+0);let bytes10=haxe_Unserializer.run(data10);blobs10.push(kha_internal_BytesBlob.fromBytes(bytes10));kha_Shaders.painter_video_vert=new kha_graphics4_VertexShader(blobs10,["painter-video.vert.glsl"]);let blobs11=[];let data11=Reflect.field(kha_Shaders,"rect_fragData"+0);let bytes11=haxe_Unserializer.run(data11);blobs11.push(kha_internal_BytesBlob.fromBytes(bytes11));kha_Shaders.rect_frag=new kha_graphics4_FragmentShader(blobs11,["rect.frag.glsl"]);let blobs12=[];let data12=Reflect.field(kha_Shaders,"rect_vertData"+0);let bytes12=haxe_Unserializer.run(data12);blobs12.push(kha_internal_BytesBlob.fromBytes(bytes12));kha_Shaders.rect_vert=new kha_graphics4_VertexShader(blobs12,["rect.vert.glsl"])}}$hxClasses["kha.Shaders"]=kha_Shaders;kha_Shaders.__name__="kha.Shaders";class kha_Sound{constructor(){this.sampleRate=0}uncompress(done){}}$hxClasses["kha.Sound"]=kha_Sound;kha_Sound.__name__="kha.Sound";kha_Sound.__interfaces__=[kha_Resource];Object.assign(kha_Sound.prototype,{__class__:kha_Sound,compressedData:null,uncompressedData:null,sampleRate:null});class kha_SystemOptions{constructor(title,width,height,$window,framebuffer){if(height==null){height=-1}if(width==null){width=-1}if(title==null){title="Kha"}this.framebuffer=null;this.window=null;this.height=-1;this.width=-1;this.title="Kha";this.title=title;this.window=$window==null?new kha_WindowOptions(null,-1,-1,800,600,-1,true,null,0):$window;if(width>0){this.window.width=width;this.width=width}else{this.width=this.window.width}if(height>0){this.window.height=height;this.height=height}else{this.height=this.window.height}if(this.window.title==null){this.window.title=title}this.framebuffer=framebuffer==null?new kha_FramebufferOptions(60,true,32,16,8,1):framebuffer}}$hxClasses["kha.SystemOptions"]=kha_SystemOptions;kha_SystemOptions.__name__="kha.SystemOptions";Object.assign(kha_SystemOptions.prototype,{__class__:kha_SystemOptions,title:null,width:null,height:null,window:null,framebuffer:null});class kha_System{static start(options,callback){kha_System.theTitle=options.title;kha_SystemImpl.init(options,callback)}static notifyOnFrames(listener){kha_System.renderListeners.push(listener)}static notifyOnApplicationState(foregroundListener,resumeListener,pauseListener,backgroundListener,shutdownListener){if(foregroundListener!=null){kha_System.foregroundListeners.push(foregroundListener)}if(resumeListener!=null){kha_System.resumeListeners.push(resumeListener)}if(pauseListener!=null){kha_System.pauseListeners.push(pauseListener)}if(backgroundListener!=null){kha_System.backgroundListeners.push(backgroundListener)}if(shutdownListener!=null){kha_System.shutdownListeners.push(shutdownListener)}}static notifyOnCutCopyPaste(cutListener,copyListener,pasteListener){kha_System.cutListener=cutListener;kha_System.copyListener=copyListener;kha_System.pasteListener=pasteListener}static render(framebuffers){let _g=0;let _g1=kha_System.renderListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(framebuffers)}}static foreground(){let _g=0;let _g1=kha_System.foregroundListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static resume(){let _g=0;let _g1=kha_System.resumeListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static pause(){let _g=0;let _g1=kha_System.pauseListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static background(){let _g=0;let _g1=kha_System.backgroundListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static shutdown(){let _g=0;let _g1=kha_System.shutdownListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static dropFiles(filePath){let _g=0;let _g1=kha_System.dropFilesListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(filePath)}}static get_time(){return kha_SystemImpl.getTime()}static windowWidth($window){if($window==null){$window=0}return kha_Window.get($window).get_width()}static windowHeight($window){if($window==null){$window=0}return kha_Window.get($window).get_height()}}$hxClasses["kha.System"]=kha_System;kha_System.__name__="kha.System";kha_System.__properties__={get_time:"get_time"};class kha_SystemImpl{static renderCallback(){kha_Scheduler.executeFrame();kha_System.render([kha_SystemImpl.framebuffer])}static dropFilesCallback(filePath){kha_System.dropFiles(filePath)}static copyCallback(){if(kha_System.copyListener!=null){return kha_System.copyListener()}else{return null}}static cutCallback(){if(kha_System.cutListener!=null){return kha_System.cutListener()}else{return null}}static pasteCallback(data){if(kha_System.pasteListener!=null){kha_System.pasteListener(data)}}static foregroundCallback(){kha_System.foreground()}static resumeCallback(){kha_System.resume()}static pauseCallback(){kha_System.pause()}static backgroundCallback(){kha_System.background()}static shutdownCallback(){kha_System.shutdown()}static keyboardDownCallback(code){kha_SystemImpl.keyboard.sendDownEvent(code)}static keyboardUpCallback(code){kha_SystemImpl.keyboard.sendUpEvent(code)}static keyboardPressCallback(charCode){kha_SystemImpl.keyboard.sendPressEvent(String.fromCodePoint(charCode))}static mouseDownCallback(button,x,y){kha_SystemImpl.mouse.sendDownEvent(0,button,x,y)}static mouseUpCallback(button,x,y){kha_SystemImpl.mouse.sendUpEvent(0,button,x,y)}static mouseMoveCallback(x,y,mx,my){kha_SystemImpl.mouse.sendMoveEvent(0,x,y,mx,my)}static mouseWheelCallback(delta){kha_SystemImpl.mouse.sendWheelEvent(0,delta)}static penDownCallback(x,y,pressure){kha_SystemImpl.pen.sendDownEvent(0,x,y,pressure)}static penUpCallback(x,y,pressure){kha_SystemImpl.pen.sendUpEvent(0,x,y,pressure)}static penMoveCallback(x,y,pressure){kha_SystemImpl.pen.sendMoveEvent(0,x,y,pressure)}static gamepadAxisCallback(gamepad,axis,value){kha_SystemImpl.gamepads[gamepad].sendAxisEvent(axis,value)}static gamepadButtonCallback(gamepad,button,value){kha_SystemImpl.gamepads[gamepad].sendButtonEvent(button,value)}static audioCallback(samples){kha_audio2_Audio._callCallback(samples);let buffer=kha_audio2_Audio.buffer;Krom.writeAudioBuffer(buffer.data.buffer,samples)}static init(options,callback){Krom.init(options.title,options.width,options.height,options.framebuffer.samplesPerPixel,options.framebuffer.verticalSync,options.window.mode,options.window.windowFeatures,6);kha_SystemImpl.start=Krom.getTime();haxe_Log.trace=function(v,infos){let message=haxe_Log.formatOutput(v,infos);Krom.log(message)};new kha_Window(0);kha_Scheduler.init();kha_Shaders.init();let g4=new kha_krom_Graphics;kha_SystemImpl.framebuffer=new kha_Framebuffer(0,null,null,g4);kha_SystemImpl.framebuffer.init(new kha_graphics2_Graphics1(kha_SystemImpl.framebuffer),new kha_graphics4_Graphics2(kha_SystemImpl.framebuffer),g4);Krom.setCallback(kha_SystemImpl.renderCallback);Krom.setDropFilesCallback(kha_SystemImpl.dropFilesCallback);Krom.setCutCopyPasteCallback(kha_SystemImpl.cutCallback,kha_SystemImpl.copyCallback,kha_SystemImpl.pasteCallback);Krom.setApplicationStateCallback(kha_SystemImpl.foregroundCallback,kha_SystemImpl.resumeCallback,kha_SystemImpl.pauseCallback,kha_SystemImpl.backgroundCallback,kha_SystemImpl.shutdownCallback);kha_SystemImpl.keyboard=new kha_input_Keyboard;kha_SystemImpl.mouse=new kha_input_MouseImpl;kha_SystemImpl.pen=new kha_input_Pen;kha_SystemImpl.gamepads=[];let _g=0;let _g1=kha_SystemImpl.maxGamepads;while(_g<_g1){let i=_g++;kha_SystemImpl.gamepads[i]=new kha_input_Gamepad(i)}Krom.setKeyboardDownCallback(kha_SystemImpl.keyboardDownCallback);Krom.setKeyboardUpCallback(kha_SystemImpl.keyboardUpCallback);Krom.setKeyboardPressCallback(kha_SystemImpl.keyboardPressCallback);Krom.setMouseDownCallback(kha_SystemImpl.mouseDownCallback);Krom.setMouseUpCallback(kha_SystemImpl.mouseUpCallback);Krom.setMouseMoveCallback(kha_SystemImpl.mouseMoveCallback);Krom.setMouseWheelCallback(kha_SystemImpl.mouseWheelCallback);Krom.setPenDownCallback(kha_SystemImpl.penDownCallback);Krom.setPenUpCallback(kha_SystemImpl.penUpCallback);Krom.setPenMoveCallback(kha_SystemImpl.penMoveCallback);Krom.setGamepadAxisCallback(kha_SystemImpl.gamepadAxisCallback);Krom.setGamepadButtonCallback(kha_SystemImpl.gamepadButtonCallback);kha_audio2_Audio.samplesPerSecond=Krom.getSamplesPerSecond();kha_audio2_Audio1._init();kha_audio2_Audio._init();Krom.setAudioCallback(kha_SystemImpl.audioCallback);kha_Scheduler.start();callback(kha_Window.get(0))}static getTime(){return Krom.getTime()-kha_SystemImpl.start}static getMouse(num){return kha_SystemImpl.mouse}static getPen(num){return kha_SystemImpl.pen}static getKeyboard(num){return kha_SystemImpl.keyboard}static lockMouse(){if(!kha_SystemImpl.isMouseLocked()){Krom.lockMouse();let _g=0;let _g1=kha_SystemImpl.mouseLockListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}}static unlockMouse(){if(kha_SystemImpl.isMouseLocked()){Krom.unlockMouse();let _g=0;let _g1=kha_SystemImpl.mouseLockListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}}static canLockMouse(){return Krom.canLockMouse()}static isMouseLocked(){return Krom.isMouseLocked()}static notifyOfMouseLockChange(func,error){if(kha_SystemImpl.canLockMouse()&&func!=null){kha_SystemImpl.mouseLockListeners.push(func)}}static removeFromMouseLockChange(func,error){if(kha_SystemImpl.canLockMouse()&&func!=null){HxOverrides.remove(kha_SystemImpl.mouseLockListeners,func)}}static hideSystemCursor(){Krom.showMouse(false)}static showSystemCursor(){Krom.showMouse(true)}static getGamepadId(index){return"unknown"}static getGamepadVendor(index){return"unknown"}static setGamepadRumble(index,leftAmount,rightAmount){}}$hxClasses["kha.SystemImpl"]=kha_SystemImpl;kha_SystemImpl.__name__="kha.SystemImpl";class kha_Video{}$hxClasses["kha.Video"]=kha_Video;kha_Video.__name__="kha.Video";kha_Video.__interfaces__=[kha_Resource];class kha_Window{constructor(num){this.num=num;kha_Window.windows.push(this)}get_width(){return Krom.windowWidth(this.num)}get_height(){return Krom.windowHeight(this.num)}notifyOnResize(callback){}get_vSynced(){return true}static get(index){return kha_Window.windows[index]}}$hxClasses["kha.Window"]=kha_Window;kha_Window.__name__="kha.Window";Object.assign(kha_Window.prototype,{__class__:kha_Window,num:null,__properties__:{get_vSynced:"get_vSynced",get_height:"get_height",get_width:"get_width"}});class kha_WindowOptions{constructor(title,x,y,width,height,display,visible,windowFeatures,mode){if(mode==null){mode=0}if(visible==null){visible=true}if(display==null){display=-1}if(height==null){height=600}if(width==null){width=800}if(y==null){y=-1}if(x==null){x=-1}this.mode=0;this.windowFeatures=1|4|2;this.visible=true;this.display=-1;this.height=600;this.width=800;this.y=-1;this.x=-1;this.title=null;this.title=title;this.x=x;this.y=y;this.width=width;this.height=height;this.display=display;this.visible=visible;this.windowFeatures=windowFeatures==null?1|4|2:windowFeatures;this.mode=mode}}$hxClasses["kha.WindowOptions"]=kha_WindowOptions;kha_WindowOptions.__name__="kha.WindowOptions";Object.assign(kha_WindowOptions.prototype,{__class__:kha_WindowOptions,title:null,x:null,y:null,width:null,height:null,display:null,visible:null,windowFeatures:null,mode:null});class kha_arrays_ByteArray{static _new(buffer,byteOffset,byteLength){let this1=new DataView(buffer,byteOffset,byteLength);return this1}static make(byteLength){return kha_arrays_ByteArray._new(kha_arrays_ByteBuffer.create(byteLength))}}class kha_arrays_ByteBuffer{static create(length){return kha_arrays_ByteBuffer._new(length)}static _new(length){let this1=new ArrayBuffer(length);return this1}}class kha_arrays_Float32Array{static _new(elements){let this1=kha_arrays_ByteArray.make(elements*4);return this1}}class kha_arrays_Int16Array{static _new(elements){let this1=kha_arrays_ByteArray.make(elements*2);return this1}}class kha_arrays_Uint32Array{static _new(elements){let this1=kha_arrays_ByteArray.make(elements*4);return this1}}class kha_audio1_AudioChannel{}$hxClasses["kha.audio1.AudioChannel"]=kha_audio1_AudioChannel;kha_audio1_AudioChannel.__name__="kha.audio1.AudioChannel";kha_audio1_AudioChannel.__isInterface__=true;class kha_internal_IntBox{constructor(value){this.value=value}}$hxClasses["kha.internal.IntBox"]=kha_internal_IntBox;kha_internal_IntBox.__name__="kha.internal.IntBox";Object.assign(kha_internal_IntBox.prototype,{__class__:kha_internal_IntBox,value:null});class kha_audio2_Audio{static _init(){let bufferSize=2048;kha_audio2_Audio.buffer=new kha_audio2_Buffer(bufferSize*4,2,kha_audio2_Audio.samplesPerSecond)}static _callCallback(samples){if(kha_audio2_Audio.buffer==null){return}if(kha_audio2_Audio.audioCallback!=null){kha_audio2_Audio.intBox.value=samples;kha_audio2_Audio.audioCallback(kha_audio2_Audio.intBox,kha_audio2_Audio.buffer)}else{let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;kha_audio2_Audio.buffer.data.setFloat32(kha_audio2_Audio.buffer.writeLocation*4,0,true);kha_audio2_Audio.buffer.writeLocation+=1;if(kha_audio2_Audio.buffer.writeLocation>=kha_audio2_Audio.buffer.size){kha_audio2_Audio.buffer.writeLocation=0}}}}}$hxClasses["kha.audio2.Audio"]=kha_audio2_Audio;kha_audio2_Audio.__name__="kha.audio2.Audio";class kha_audio2_Audio1{static _init(){let this1=new Array(32);kha_audio2_Audio1.soundChannels=this1;let this2=new Array(32);kha_audio2_Audio1.streamChannels=this2;let this3=new Array(32);kha_audio2_Audio1.internalSoundChannels=this3;let this4=new Array(32);kha_audio2_Audio1.internalStreamChannels=this4;kha_audio2_Audio1.sampleCache1=kha_arrays_Float32Array._new(512);kha_audio2_Audio1.sampleCache2=kha_arrays_Float32Array._new(512);kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_Audio.audioCallback=kha_audio2_Audio1.mix}static mix(samplesBox,buffer){let samples=samplesBox.value;if(kha_audio2_Audio1.sampleCache1.byteLength>>2<samples){if(kha_audio2_Audio.disableGcInteractions){haxe_Log.trace("Unexpected allocation request in audio thread.",{fileName:"kha/audio2/Audio1.hx",lineNumber:50,className:"kha.audio2.Audio1",methodName:"mix"});let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;buffer.data.setFloat32(buffer.writeLocation*4,0,true);buffer.writeLocation+=1;if(buffer.writeLocation>=buffer.size){buffer.writeLocation=0}}kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_Audio.disableGcInteractions=false;return}kha_audio2_Audio1.sampleCache1=kha_arrays_Float32Array._new(samples*2);kha_audio2_Audio1.sampleCache2=kha_arrays_Float32Array._new(samples*2);kha_audio2_Audio1.lastAllocationCount=0}else if(kha_audio2_Audio1.lastAllocationCount>100){kha_audio2_Audio.disableGcInteractions=true}else{kha_audio2_Audio1.lastAllocationCount+=1}let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;kha_audio2_Audio1.sampleCache2.setFloat32(i*4,0,true)}let _g2=0;while(_g2<32){let i=_g2++;kha_audio2_Audio1.internalSoundChannels[i]=kha_audio2_Audio1.soundChannels[i]}let _g3=0;while(_g3<32){let i=_g3++;kha_audio2_Audio1.internalStreamChannels[i]=kha_audio2_Audio1.streamChannels[i]}let _g4=0;let _g5=kha_audio2_Audio1.internalSoundChannels;while(_g4<_g5.length){let channel=_g5[_g4];++_g4;if(channel==null||channel.get_finished()){continue}channel.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;let _g1=i;let _g2=kha_audio2_Audio1.sampleCache2;let v=_g2.getFloat32(_g1*4,kha_arrays_ByteArray.LITTLE_ENDIAN)+kha_audio2_Audio1.sampleCache1.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*channel.get_volume();_g2.setFloat32(_g1*4,v,true)}}let _g6=0;let _g7=kha_audio2_Audio1.internalStreamChannels;while(_g6<_g7.length){let channel=_g7[_g6];++_g6;if(channel==null||channel.get_finished()){continue}channel.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;let _g1=i;let _g2=kha_audio2_Audio1.sampleCache2;let v=_g2.getFloat32(_g1*4,kha_arrays_ByteArray.LITTLE_ENDIAN)+kha_audio2_Audio1.sampleCache1.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*channel.get_volume();_g2.setFloat32(_g1*4,v,true)}}let _g8=0;let _g9=samples;while(_g8<_g9){let i=_g8++;let a=kha_audio2_Audio1.sampleCache2.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let a1=a<1?a:1;let v=a1>-1?a1:-1;buffer.data.setFloat32(buffer.writeLocation*4,v,true);buffer.writeLocation+=1;if(buffer.writeLocation>=buffer.size){buffer.writeLocation=0}}}}$hxClasses["kha.audio2.Audio1"]=kha_audio2_Audio1;kha_audio2_Audio1.__name__="kha.audio2.Audio1";class kha_audio2_AudioChannel{constructor(looping){this.data=null;this.looping=looping;this.stopped=false;this.paused=false;this.myPosition=0;this.myVolume=1}nextSamples(requestedSamples,requestedLength,sampleRate){if(this.paused||this.stopped){let _g=0;let _g1=requestedLength;while(_g<_g1){let i=_g++;requestedSamples.setFloat32(i*4,0,true)}return}let requestedSamplesIndex=0;while(requestedSamplesIndex<requestedLength){let _g=0;let a=(this.data.byteLength>>2)-this.myPosition;let b=requestedLength-requestedSamplesIndex;let _g1=a<b?a:b;while(_g<_g1){let i=_g++;let v=this.data.getFloat32(this.myPosition++*4,kha_arrays_ByteArray.LITTLE_ENDIAN);requestedSamples.setFloat32(requestedSamplesIndex++*4,v,true)}if(this.myPosition>=this.data.byteLength>>2){this.myPosition=0;if(!this.looping){this.stopped=true;break}}}while(requestedSamplesIndex<requestedLength)requestedSamples.setFloat32(requestedSamplesIndex++*4,0,true)}get_volume(){return this.myVolume}get_finished(){return this.stopped}}$hxClasses["kha.audio2.AudioChannel"]=kha_audio2_AudioChannel;kha_audio2_AudioChannel.__name__="kha.audio2.AudioChannel";kha_audio2_AudioChannel.__interfaces__=[kha_audio1_AudioChannel];Object.assign(kha_audio2_AudioChannel.prototype,{__class__:kha_audio2_AudioChannel,data:null,myVolume:null,myPosition:null,paused:null,stopped:null,looping:null,finished:null,__properties__:{get_finished:"get_finished",get_volume:"get_volume"}});class kha_audio2_Buffer{constructor(size,channels,samplesPerSecond){this.size=size;this.data=kha_arrays_Float32Array._new(size);this.channels=channels;this.samplesPerSecond=samplesPerSecond;this.readLocation=0;this.writeLocation=0}}$hxClasses["kha.audio2.Buffer"]=kha_audio2_Buffer;kha_audio2_Buffer.__name__="kha.audio2.Buffer";Object.assign(kha_audio2_Buffer.prototype,{__class__:kha_audio2_Buffer,channels:null,samplesPerSecond:null,data:null,size:null,readLocation:null,writeLocation:null});class kha_audio2_StreamChannel{constructor(data,loop){this.paused=false;this.atend=false;this.myVolume=1;this.loop=loop}nextSamples(samples,length,sampleRate){if(this.paused){let _g=0;let _g1=length;while(_g<_g1){let i=_g++;samples.setFloat32(i*4,0,true)}return}}get_volume(){return this.myVolume}get_finished(){return this.atend}}$hxClasses["kha.audio2.StreamChannel"]=kha_audio2_StreamChannel;kha_audio2_StreamChannel.__name__="kha.audio2.StreamChannel";kha_audio2_StreamChannel.__interfaces__=[kha_audio1_AudioChannel];Object.assign(kha_audio2_StreamChannel.prototype,{__class__:kha_audio2_StreamChannel,atend:null,loop:null,myVolume:null,paused:null,finished:null,__properties__:{get_finished:"get_finished",get_volume:"get_volume"}});class kha_graphics1_Graphics{}$hxClasses["kha.graphics1.Graphics"]=kha_graphics1_Graphics;kha_graphics1_Graphics.__name__="kha.graphics1.Graphics";kha_graphics1_Graphics.__isInterface__=true;class kha_graphics2_Graphics{constructor(){if(kha_graphics2_Graphics._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this.transformations=[new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1)];this.transformationIndex=0;this.opacities=[1];this.myFontSize=12;this.pipe=null}begin(clear,clearColor){if(clear==null){clear=true}}end(){}drawImage(img,x,y){this.drawSubImage(img,x,y,0,0,img.get_width(),img.get_height())}drawSubImage(img,x,y,sx,sy,sw,sh){this.drawScaledSubImage(img,sx,sy,sw,sh,x,y,sw,sh)}drawScaledImage(img,dx,dy,dw,dh){this.drawScaledSubImage(img,0,0,img.get_width(),img.get_height(),dx,dy,dw,dh)}drawScaledSubImage(img,sx,sy,sw,sh,dx,dy,dw,dh){}drawRect(x,y,width,height,strength){if(strength==null){strength=1}}fillRect(x,y,width,height){}drawString(text,x,y){}drawLine(x1,y1,x2,y2,strength){if(strength==null){strength=1}}fillTriangle(x1,y1,x2,y2,x3,y3){}set_imageScaleQuality(value){return 1}get_color(){return-16777216}set_color(color){return-16777216}set_font(font){return null}get_fontSize(){return this.myFontSize}set_fontSize(value){return this.myFontSize=value}popTransformation(){this.transformationIndex--;if(this.transformationIndex==-1){throw haxe_Exception.thrown("There is no transformation matrix to remove, check your push/popTransformation code")}this.setTransformation(this.transformations[this.transformationIndex]);return this.transformations[this.transformationIndex+1]}pushTranslation(tx,ty){let _this__00=1;let _this__10=0;let _this__20=tx;let _this__01=0;let _this__11=1;let _this__21=ty;let _this__02=0;let _this__12=0;let _this__22=1;let m=this.transformations[this.transformationIndex];let trans__00=_this__00*m._00+_this__10*m._01+_this__20*m._02;let trans__10=_this__00*m._10+_this__10*m._11+_this__20*m._12;let trans__20=_this__00*m._20+_this__10*m._21+_this__20*m._22;let trans__01=_this__01*m._00+_this__11*m._01+_this__21*m._02;let trans__11=_this__01*m._10+_this__11*m._11+_this__21*m._12;let trans__21=_this__01*m._20+_this__11*m._21+_this__21*m._22;let trans__02=_this__02*m._00+_this__12*m._01+_this__22*m._02;let trans__12=_this__02*m._10+_this__12*m._11+_this__22*m._12;let trans__22=_this__02*m._20+_this__12*m._21+_this__22*m._22;this.transformationIndex++;if(this.transformationIndex==this.transformations.length){this.transformations.push(new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1))}let _this=this.transformations[this.transformationIndex];_this._00=trans__00;_this._10=trans__10;_this._20=trans__20;_this._01=trans__01;_this._11=trans__11;_this._21=trans__21;_this._02=trans__02;_this._12=trans__12;_this._22=trans__22;this.setTransformation(this.transformations[this.transformationIndex])}pushRotation(angle,centerx,centery){let _this__00=1;let _this__10=0;let _this__20=centerx;let _this__01=0;let _this__11=1;let _this__21=centery;let _this__02=0;let _this__12=0;let _this__22=1;let m__00=Math.cos(angle);let m__10=-Math.sin(angle);let m__20=0;let m__01=Math.sin(angle);let m__11=Math.cos(angle);let m__21=0;let m__02=0;let m__12=0;let m__22=1;let _this__001=_this__00*m__00+_this__10*m__01+_this__20*m__02;let _this__101=_this__00*m__10+_this__10*m__11+_this__20*m__12;let _this__201=_this__00*m__20+_this__10*m__21+_this__20*m__22;let _this__011=_this__01*m__00+_this__11*m__01+_this__21*m__02;let _this__111=_this__01*m__10+_this__11*m__11+_this__21*m__12;let _this__211=_this__01*m__20+_this__11*m__21+_this__21*m__22;let _this__021=_this__02*m__00+_this__12*m__01+_this__22*m__02;let _this__121=_this__02*m__10+_this__12*m__11+_this__22*m__12;let _this__221=_this__02*m__20+_this__12*m__21+_this__22*m__22;let m__001=1;let m__101=0;let m__201=-centerx;let m__011=0;let m__111=1;let m__211=-centery;let m__021=0;let m__121=0;let m__221=1;let _this__002=_this__001*m__001+_this__101*m__011+_this__201*m__021;let _this__102=_this__001*m__101+_this__101*m__111+_this__201*m__121;let _this__202=_this__001*m__201+_this__101*m__211+_this__201*m__221;let _this__012=_this__011*m__001+_this__111*m__011+_this__211*m__021;let _this__112=_this__011*m__101+_this__111*m__111+_this__211*m__121;let _this__212=_this__011*m__201+_this__111*m__211+_this__211*m__221;let _this__022=_this__021*m__001+_this__121*m__011+_this__221*m__021;let _this__122=_this__021*m__101+_this__121*m__111+_this__221*m__121;let _this__222=_this__021*m__201+_this__121*m__211+_this__221*m__221;let m=this.transformations[this.transformationIndex];let trans__00=_this__002*m._00+_this__102*m._01+_this__202*m._02;let trans__10=_this__002*m._10+_this__102*m._11+_this__202*m._12;let trans__20=_this__002*m._20+_this__102*m._21+_this__202*m._22;let trans__01=_this__012*m._00+_this__112*m._01+_this__212*m._02;let trans__11=_this__012*m._10+_this__112*m._11+_this__212*m._12;let trans__21=_this__012*m._20+_this__112*m._21+_this__212*m._22;let trans__02=_this__022*m._00+_this__122*m._01+_this__222*m._02;let trans__12=_this__022*m._10+_this__122*m._11+_this__222*m._12;let trans__22=_this__022*m._20+_this__122*m._21+_this__222*m._22;this.transformationIndex++;if(this.transformationIndex==this.transformations.length){this.transformations.push(new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1))}let _this=this.transformations[this.transformationIndex];_this._00=trans__00;_this._10=trans__10;_this._20=trans__20;_this._01=trans__01;_this._11=trans__11;_this._21=trans__21;_this._02=trans__02;_this._12=trans__12;_this._22=trans__22;this.setTransformation(this.transformations[this.transformationIndex])}get_opacity(){return this.opacities[this.opacities.length-1]}set_opacity(opacity){this.setOpacity(opacity);return this.opacities[this.opacities.length-1]=opacity}disableScissor(){}set_pipeline(pipeline){this.setPipeline(pipeline);return this.pipe=pipeline}setTransformation(transformation){}setOpacity(opacity){}setPipeline(pipeline){}}$hxClasses["kha.graphics2.Graphics"]=kha_graphics2_Graphics;kha_graphics2_Graphics.__name__="kha.graphics2.Graphics";Object.assign(kha_graphics2_Graphics.prototype,{__class__:kha_graphics2_Graphics,pipe:null,transformations:null,transformationIndex:null,opacities:null,myFontSize:null,__properties__:{set_pipeline:"set_pipeline",set_opacity:"set_opacity",get_opacity:"get_opacity",set_fontSize:"set_fontSize",get_fontSize:"get_fontSize",set_font:"set_font",set_color:"set_color",get_color:"get_color",set_imageScaleQuality:"set_imageScaleQuality"}});class kha_graphics2_Graphics1{constructor(canvas){this.canvas=canvas}}$hxClasses["kha.graphics2.Graphics1"]=kha_graphics2_Graphics1;kha_graphics2_Graphics1.__name__="kha.graphics2.Graphics1";kha_graphics2_Graphics1.__interfaces__=[kha_graphics1_Graphics];Object.assign(kha_graphics2_Graphics1.prototype,{__class__:kha_graphics2_Graphics1,canvas:null});class kha_graphics2_truetype_VectorOfIntPointer{constructor(){}}$hxClasses["kha.graphics2.truetype.VectorOfIntPointer"]=kha_graphics2_truetype_VectorOfIntPointer;kha_graphics2_truetype_VectorOfIntPointer.__name__="kha.graphics2.truetype.VectorOfIntPointer";Object.assign(kha_graphics2_truetype_VectorOfIntPointer.prototype,{__class__:kha_graphics2_truetype_VectorOfIntPointer,value:null});class kha_graphics2_truetype_Stbtt_$temp_$rect{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt_temp_rect"]=kha_graphics2_truetype_Stbtt_$temp_$rect;kha_graphics2_truetype_Stbtt_$temp_$rect.__name__="kha.graphics2.truetype.Stbtt_temp_rect";Object.assign(kha_graphics2_truetype_Stbtt_$temp_$rect.prototype,{__class__:kha_graphics2_truetype_Stbtt_$temp_$rect,x0:null,y0:null,x1:null,y1:null});class kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"]=kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics;kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.__name__="kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics";Object.assign(kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.prototype,{__class__:kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics,advanceWidth:null,leftSideBearing:null});class kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"]=kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics;kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.__name__="kha.graphics2.truetype.Stbtt_temp_font_v_metrics";Object.assign(kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.prototype,{__class__:kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics,ascent:null,descent:null,lineGap:null});class kha_graphics2_truetype_Stbtt_$_$buf{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt__buf"]=kha_graphics2_truetype_Stbtt_$_$buf;kha_graphics2_truetype_Stbtt_$_$buf.__name__="kha.graphics2.truetype.Stbtt__buf";Object.assign(kha_graphics2_truetype_Stbtt_$_$buf.prototype,{__class__:kha_graphics2_truetype_Stbtt_$_$buf,data:null,cursor:null});class kha_graphics2_truetype_Stbtt_$bakedchar{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt_bakedchar"]=kha_graphics2_truetype_Stbtt_$bakedchar;kha_graphics2_truetype_Stbtt_$bakedchar.__name__="kha.graphics2.truetype.Stbtt_bakedchar";Object.assign(kha_graphics2_truetype_Stbtt_$bakedchar.prototype,{__class__:kha_graphics2_truetype_Stbtt_$bakedchar,x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null});class kha_graphics2_truetype_Stbtt_$fontinfo{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt_fontinfo"]=kha_graphics2_truetype_Stbtt_$fontinfo;kha_graphics2_truetype_Stbtt_$fontinfo.__name__="kha.graphics2.truetype.Stbtt_fontinfo";Object.assign(kha_graphics2_truetype_Stbtt_$fontinfo.prototype,{__class__:kha_graphics2_truetype_Stbtt_$fontinfo,data:null,fontstart:null,numGlyphs:null,loca:null,head:null,glyf:null,hhea:null,hmtx:null,kern:null,gpos:null,index_map:null,indexToLocFormat:null,cff:null,charstrings:null,gsubrs:null,subrs:null,fontdicts:null,fdselect:null});class kha_graphics2_truetype_Stbtt_$vertex{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt_vertex"]=kha_graphics2_truetype_Stbtt_$vertex;kha_graphics2_truetype_Stbtt_$vertex.__name__="kha.graphics2.truetype.Stbtt_vertex";Object.assign(kha_graphics2_truetype_Stbtt_$vertex.prototype,{__class__:kha_graphics2_truetype_Stbtt_$vertex,x:null,y:null,cx:null,cy:null,cx1:null,cy1:null,type:null});class kha_graphics2_truetype_Stbtt_$_$bitmap{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt__bitmap"]=kha_graphics2_truetype_Stbtt_$_$bitmap;kha_graphics2_truetype_Stbtt_$_$bitmap.__name__="kha.graphics2.truetype.Stbtt__bitmap";Object.assign(kha_graphics2_truetype_Stbtt_$_$bitmap.prototype,{__class__:kha_graphics2_truetype_Stbtt_$_$bitmap,w:null,h:null,stride:null,pixels:null,pixels_offset:null});class kha_graphics2_truetype_Stbtt_$_$edge{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt__edge"]=kha_graphics2_truetype_Stbtt_$_$edge;kha_graphics2_truetype_Stbtt_$_$edge.__name__="kha.graphics2.truetype.Stbtt__edge";Object.assign(kha_graphics2_truetype_Stbtt_$_$edge.prototype,{__class__:kha_graphics2_truetype_Stbtt_$_$edge,x0:null,y0:null,x1:null,y1:null,invert:null});class kha_graphics2_truetype_Stbtt_$_$active_$edge{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt__active_edge"]=kha_graphics2_truetype_Stbtt_$_$active_$edge;kha_graphics2_truetype_Stbtt_$_$active_$edge.__name__="kha.graphics2.truetype.Stbtt__active_edge";Object.assign(kha_graphics2_truetype_Stbtt_$_$active_$edge.prototype,{__class__:kha_graphics2_truetype_Stbtt_$_$active_$edge,next:null,fx:null,fdx:null,fdy:null,direction:null,sy:null,ey:null});class kha_graphics2_truetype_Stbtt_$_$point{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt__point"]=kha_graphics2_truetype_Stbtt_$_$point;kha_graphics2_truetype_Stbtt_$_$point.__name__="kha.graphics2.truetype.Stbtt__point";Object.assign(kha_graphics2_truetype_Stbtt_$_$point.prototype,{__class__:kha_graphics2_truetype_Stbtt_$_$point,x:null,y:null});class kha_graphics2_truetype_Stbtt_$_$csctx{constructor(){}}$hxClasses["kha.graphics2.truetype.Stbtt__csctx"]=kha_graphics2_truetype_Stbtt_$_$csctx;kha_graphics2_truetype_Stbtt_$_$csctx.__name__="kha.graphics2.truetype.Stbtt__csctx";Object.assign(kha_graphics2_truetype_Stbtt_$_$csctx.prototype,{__class__:kha_graphics2_truetype_Stbtt_$_$csctx,bounds:null,started:null,first_x:null,first_y:null,x:null,y:null,min_x:null,min_y:null,max_x:null,max_y:null,pvertices:null,num_vertices:null});class kha_graphics2_truetype_StbTruetype{static stbtt__isfont(font){let c0=HxOverrides.cca("1",0);if(font.readU8(0)==c0&&font.readU8(1)==0&&font.readU8(2)==0&&font.readU8(3)==0){return true}let c01=HxOverrides.cca("typ1",0);let c1=HxOverrides.cca("typ1",1);let c2=HxOverrides.cca("typ1",2);let c3=HxOverrides.cca("typ1",3);if(font.readU8(0)==c01&&font.readU8(1)==c1&&font.readU8(2)==c2&&font.readU8(3)==c3){return true}let c02=HxOverrides.cca("OTTO",0);let c11=HxOverrides.cca("OTTO",1);let c21=HxOverrides.cca("OTTO",2);let c31=HxOverrides.cca("OTTO",3);if(font.readU8(0)==c02&&font.readU8(1)==c11&&font.readU8(2)==c21&&font.readU8(3)==c31){return true}if(font.readU8(0)==0&&font.readU8(1)==1&&font.readU8(2)==0&&font.readU8(3)==0){return true}let c03=HxOverrides.cca("true",0);let c12=HxOverrides.cca("true",1);let c22=HxOverrides.cca("true",2);let c32=HxOverrides.cca("true",3);if(font.readU8(0)==c03&&font.readU8(1)==c12&&font.readU8(2)==c22&&font.readU8(3)==c32){return true}return false}static stbtt__find_table(data,fontstart,tag){let pos=fontstart+4;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let num_tables=ch2|ch1<<8;let tabledir=fontstart+12;let _g=0;let _g1=num_tables;while(_g<_g1){let i=_g++;let loc=tabledir+16*i;let c0=HxOverrides.cca(tag,0);let c1=HxOverrides.cca(tag,1);let c2=HxOverrides.cca(tag,2);let c3=HxOverrides.cca(tag,3);if(data.readU8(loc)==c0&&data.readU8(loc+1)==c1&&data.readU8(loc+2)==c2&&data.readU8(loc+3)==c3){let pos=loc+8;if(pos==null){pos=0}let pos1=pos;if(pos1==null){pos1=0}let ch1=data.readU8(pos1);let ch2=data.readU8(pos1+1);let ch3=data.readU8(pos1+2);let ch4=data.readU8(pos1+3);return ch4|ch3<<8|ch2<<16|ch1<<24}}return 0}static stbtt_GetFontOffsetForIndex(font_collection,index){if(kha_graphics2_truetype_StbTruetype.stbtt__isfont(font_collection)){if(index==0){return 0}else{return-1}}let c0=HxOverrides.cca("ttcf",0);let c1=HxOverrides.cca("ttcf",1);let c2=HxOverrides.cca("ttcf",2);let c3=HxOverrides.cca("ttcf",3);if(font_collection.readU8(0)==c0&&font_collection.readU8(1)==c1&&font_collection.readU8(2)==c2&&font_collection.readU8(3)==c3){let tmp;let pos=4;if(pos==null){pos=0}let pos1=pos;if(pos1==null){pos1=0}let ch1=font_collection.readU8(pos1);let ch2=font_collection.readU8(pos1+1);let ch3=font_collection.readU8(pos1+2);let ch4=font_collection.readU8(pos1+3);if((ch4|ch3<<8|ch2<<16|ch1<<24)!=65536){let pos=4;if(pos==null){pos=0}let pos1=pos;if(pos1==null){pos1=0}let ch1=font_collection.readU8(pos1);let ch2=font_collection.readU8(pos1+1);let ch3=font_collection.readU8(pos1+2);let ch4=font_collection.readU8(pos1+3);tmp=(ch4|ch3<<8|ch2<<16|ch1<<24)==131072}else{tmp=true}if(tmp){let pos=8;if(pos==null){pos=0}let ch1=font_collection.readU8(pos);let ch2=font_collection.readU8(pos+1);let ch3=font_collection.readU8(pos+2);let ch4=font_collection.readU8(pos+3);let n=ch4|ch3<<8|ch2<<16|ch1<<24;if(index>=n){return-1}let pos1=12+index*4;if(pos1==null){pos1=0}let pos2=pos1;if(pos2==null){pos2=0}let ch11=font_collection.readU8(pos2);let ch21=font_collection.readU8(pos2+1);let ch31=font_collection.readU8(pos2+2);let ch41=font_collection.readU8(pos2+3);return ch41|ch31<<8|ch21<<16|ch11<<24}}return-1}static stbtt_InitFont(info,data,fontstart){info.data=data;info.fontstart=fontstart;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;info.cff=r;let cmap=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"cmap");info.loca=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"loca");info.head=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"head");info.glyf=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"glyf");info.hhea=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"hhea");info.hmtx=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"hmtx");info.kern=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"kern");info.gpos=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"GPOS");if(cmap==0||info.head==0||info.hhea==0||info.hmtx==0){return false}if(info.glyf!=0){if(info.loca==0){return false}}else{let topdict;let topdictidx;let cstype=[2];let charstrings=[0];let fdarrayoff=[0];let fdselectoff=[0];let cff=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"CFF ");if(cff==0){return false}let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;info.fontdicts=r;let r1=new kha_graphics2_truetype_Stbtt_$_$buf;r1.data=null;r1.cursor=0;info.fdselect=r1;let cff_data=data.sub(cff,data.get_length()-cff);let size=cff_data.get_length();let r2=new kha_graphics2_truetype_Stbtt_$_$buf;if(size>=1073741824){throw haxe_Exception.thrown("Error")}r2.data=cff_data;r2.cursor=0;info.cff=r2;let b=info.cff;let o=b.cursor+2;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let o1;if(b.cursor>=b.data.get_length()){o1=0}else{let pos=b.cursor++;if(pos==null){pos=0}o1=b.data.readU8(pos)}if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let start=b.cursor;let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let count=v;if(count>0){let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+offsize*count;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let o1=b.cursor+(v-1);if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let s=b.cursor-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(!(start<0||s<0||start>b.data.get_length()||s>b.data.get_length()-start)){r1.data=b.data.sub(start,s)}}let start1=b.cursor;let v1=0;let _g2=0;let _g3=2;while(_g2<_g3){let i=_g2++;let v;if(b.cursor>=b.data.get_length()){v=0}else{let pos=b.cursor++;if(pos==null){pos=0}v=b.data.readU8(pos)}v1=v1<<8|v}let count1=v1;if(count1>0){let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+offsize*count1;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let o1=b.cursor+(v-1);if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let s=b.cursor-start1;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start1<0||s<0||start1>b.data.get_length()||s>b.data.get_length()-start1){topdictidx=r1}else{r1.data=b.data.sub(start1,s);topdictidx=r1}}else{topdictidx=b}if(0>topdictidx.data.get_length()){throw haxe_Exception.thrown("Error")}topdictidx.cursor=0>topdictidx.data.get_length()?topdictidx.data.get_length():0;let v2=0;let _g4=0;let _g5=2;while(_g4<_g5){let i=_g4++;let v;if(topdictidx.cursor>=topdictidx.data.get_length()){v=0}else{let pos=topdictidx.cursor++;if(pos==null){pos=0}v=topdictidx.data.readU8(pos)}v2=v2<<8|v}let count2=v2;let offsize;if(topdictidx.cursor>=topdictidx.data.get_length()){offsize=0}else{let pos=topdictidx.cursor++;if(pos==null){pos=0}offsize=topdictidx.data.readU8(pos)}if(0>=count2){throw haxe_Exception.thrown("Error")}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o2=topdictidx.cursor+0*offsize;if(o2>topdictidx.data.get_length()||o2<0){throw haxe_Exception.thrown("Error")}topdictidx.cursor=o2>topdictidx.data.get_length()||o2<0?topdictidx.data.get_length():o2;let v3=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g6=0;let _g7=offsize;while(_g6<_g7){let i=_g6++;let v;if(topdictidx.cursor>=topdictidx.data.get_length()){v=0}else{let pos=topdictidx.cursor++;if(pos==null){pos=0}v=topdictidx.data.readU8(pos)}v3=v3<<8|v}let start2=v3;let v4=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g8=0;let _g9=offsize;while(_g8<_g9){let i=_g8++;let v;if(topdictidx.cursor>=topdictidx.data.get_length()){v=0}else{let pos=topdictidx.cursor++;if(pos==null){pos=0}v=topdictidx.data.readU8(pos)}v4=v4<<8|v}let end=v4;let o3=2+(count2+1)*offsize+start2;let s=end-start2;let r3=new kha_graphics2_truetype_Stbtt_$_$buf;r3.data=null;r3.cursor=0;let r4=r3;if(o3<0||s<0||o3>topdictidx.data.get_length()||s>topdictidx.data.get_length()-o3){topdict=r4}else{r4.data=topdictidx.data.sub(o3,s);topdict=r4}let start3=b.cursor;let v5=0;let _g10=0;let _g11=2;while(_g10<_g11){let i=_g10++;let v;if(b.cursor>=b.data.get_length()){v=0}else{let pos=b.cursor++;if(pos==null){pos=0}v=b.data.readU8(pos)}v5=v5<<8|v}let count3=v5;if(count3>0){let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+offsize*count3;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let o1=b.cursor+(v-1);if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let s=b.cursor-start3;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(!(start3<0||s<0||start3>b.data.get_length()||s>b.data.get_length()-start3)){r1.data=b.data.sub(start3,s)}}let start4=b.cursor;let v6=0;let _g12=0;let _g13=2;while(_g12<_g13){let i=_g12++;let v;if(b.cursor>=b.data.get_length()){v=0}else{let pos=b.cursor++;if(pos==null){pos=0}v=b.data.readU8(pos)}v6=v6<<8|v}let count4=v6;let tmp;if(count4>0){let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+offsize*count4;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let o1=b.cursor+(v-1);if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let s=b.cursor-start4;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start4<0||s<0||start4>b.data.get_length()||s>b.data.get_length()-start4){tmp=r1}else{r1.data=b.data.sub(start4,s);tmp=r1}}else{tmp=b}info.gsubrs=tmp;let i=0;if(0>topdict.data.get_length()){throw haxe_Exception.thrown("Error")}topdict.cursor=0>topdict.data.get_length()?topdict.data.get_length():0;let ret=null;while(topdict.cursor<topdict.data.get_length()){let start=topdict.cursor;let op;while(true){let tmp;if(topdict.cursor>=topdict.data.get_length()){tmp=0}else{let pos=topdict.cursor;if(pos==null){pos=0}tmp=topdict.data.readU8(pos)}if(!(tmp>=28)){break}let v;let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=topdict.cursor+1;if(o>topdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}topdict.cursor=o>topdict.data.get_length()||o<0?topdict.data.get_length():o;while(topdict.cursor<topdict.data.get_length()){if(topdict.cursor>=topdict.data.get_length()){v=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v=topdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=topdict.cursor;if(topdict.cursor>=topdict.data.get_length()){op=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op=topdict.data.readU8(pos)}if(op==12){let op1;if(topdict.cursor>=topdict.data.get_length()){op1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op1=topdict.data.readU8(pos)}op=op1|256}if(op==17){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>topdict.data.get_length()||s>topdict.data.get_length()-start){ret=r1}else{r1.data=topdict.data.sub(start,s);ret=r1}break}}let operands;if(ret!=null){operands=ret}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>topdict.data.get_length()||0>topdict.data.get_length()){operands=r1}else{r1.data=topdict.data.sub(0,0);operands=r1}}while(i<1&&operands.cursor<operands.data.get_length()){let b0;if(operands.cursor>=operands.data.get_length()){b0=0}else{let pos=operands.cursor++;if(pos==null){pos=0}b0=operands.data.readU8(pos)}let tmp;if(b0>=32&&b0<=246){tmp=b0-139}else if(b0>=247&&b0<=250){let tmp1;if(operands.cursor>=operands.data.get_length()){tmp1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}tmp1=operands.data.readU8(pos)}tmp=(b0-247)*256+tmp1+108}else if(b0>=251&&b0<=254){let tmp1;if(operands.cursor>=operands.data.get_length()){tmp1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}tmp1=operands.data.readU8(pos)}tmp=-(b0-251)*256-tmp1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}tmp=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}tmp=v}else{throw haxe_Exception.thrown("Error")}charstrings[i]=tmp;++i}let i1=0;if(0>topdict.data.get_length()){throw haxe_Exception.thrown("Error")}topdict.cursor=0>topdict.data.get_length()?topdict.data.get_length():0;let ret1=null;while(topdict.cursor<topdict.data.get_length()){let start=topdict.cursor;let op;while(true){let tmp;if(topdict.cursor>=topdict.data.get_length()){tmp=0}else{let pos=topdict.cursor;if(pos==null){pos=0}tmp=topdict.data.readU8(pos)}if(!(tmp>=28)){break}let v;let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=topdict.cursor+1;if(o>topdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}topdict.cursor=o>topdict.data.get_length()||o<0?topdict.data.get_length():o;while(topdict.cursor<topdict.data.get_length()){if(topdict.cursor>=topdict.data.get_length()){v=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v=topdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=topdict.cursor;if(topdict.cursor>=topdict.data.get_length()){op=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op=topdict.data.readU8(pos)}if(op==12){let op1;if(topdict.cursor>=topdict.data.get_length()){op1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op1=topdict.data.readU8(pos)}op=op1|256}if(op==262){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>topdict.data.get_length()||s>topdict.data.get_length()-start){ret1=r1}else{r1.data=topdict.data.sub(start,s);ret1=r1}break}}let operands1;if(ret1!=null){operands1=ret1}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>topdict.data.get_length()||0>topdict.data.get_length()){operands1=r1}else{r1.data=topdict.data.sub(0,0);operands1=r1}}while(i1<1&&operands1.cursor<operands1.data.get_length()){let b0;if(operands1.cursor>=operands1.data.get_length()){b0=0}else{let pos=operands1.cursor++;if(pos==null){pos=0}b0=operands1.data.readU8(pos)}let tmp;if(b0>=32&&b0<=246){tmp=b0-139}else if(b0>=247&&b0<=250){let tmp1;if(operands1.cursor>=operands1.data.get_length()){tmp1=0}else{let pos=operands1.cursor++;if(pos==null){pos=0}tmp1=operands1.data.readU8(pos)}tmp=(b0-247)*256+tmp1+108}else if(b0>=251&&b0<=254){let tmp1;if(operands1.cursor>=operands1.data.get_length()){tmp1=0}else{let pos=operands1.cursor++;if(pos==null){pos=0}tmp1=operands1.data.readU8(pos)}tmp=-(b0-251)*256-tmp1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands1.cursor>=operands1.data.get_length()){v1=0}else{let pos=operands1.cursor++;if(pos==null){pos=0}v1=operands1.data.readU8(pos)}v=v<<8|v1}tmp=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands1.cursor>=operands1.data.get_length()){v1=0}else{let pos=operands1.cursor++;if(pos==null){pos=0}v1=operands1.data.readU8(pos)}v=v<<8|v1}tmp=v}else{throw haxe_Exception.thrown("Error")}cstype[i1]=tmp;++i1}let i2=0;if(0>topdict.data.get_length()){throw haxe_Exception.thrown("Error")}topdict.cursor=0>topdict.data.get_length()?topdict.data.get_length():0;let ret2=null;while(topdict.cursor<topdict.data.get_length()){let start=topdict.cursor;let op;while(true){let tmp;if(topdict.cursor>=topdict.data.get_length()){tmp=0}else{let pos=topdict.cursor;if(pos==null){pos=0}tmp=topdict.data.readU8(pos)}if(!(tmp>=28)){break}let v;let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=topdict.cursor+1;if(o>topdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}topdict.cursor=o>topdict.data.get_length()||o<0?topdict.data.get_length():o;while(topdict.cursor<topdict.data.get_length()){if(topdict.cursor>=topdict.data.get_length()){v=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v=topdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=topdict.cursor;if(topdict.cursor>=topdict.data.get_length()){op=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op=topdict.data.readU8(pos)}if(op==12){let op1;if(topdict.cursor>=topdict.data.get_length()){op1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op1=topdict.data.readU8(pos)}op=op1|256}if(op==292){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>topdict.data.get_length()||s>topdict.data.get_length()-start){ret2=r1}else{r1.data=topdict.data.sub(start,s);ret2=r1}break}}let operands2;if(ret2!=null){operands2=ret2}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>topdict.data.get_length()||0>topdict.data.get_length()){operands2=r1}else{r1.data=topdict.data.sub(0,0);operands2=r1}}while(i2<1&&operands2.cursor<operands2.data.get_length()){let b0;if(operands2.cursor>=operands2.data.get_length()){b0=0}else{let pos=operands2.cursor++;if(pos==null){pos=0}b0=operands2.data.readU8(pos)}let tmp;if(b0>=32&&b0<=246){tmp=b0-139}else if(b0>=247&&b0<=250){let tmp1;if(operands2.cursor>=operands2.data.get_length()){tmp1=0}else{let pos=operands2.cursor++;if(pos==null){pos=0}tmp1=operands2.data.readU8(pos)}tmp=(b0-247)*256+tmp1+108}else if(b0>=251&&b0<=254){let tmp1;if(operands2.cursor>=operands2.data.get_length()){tmp1=0}else{let pos=operands2.cursor++;if(pos==null){pos=0}tmp1=operands2.data.readU8(pos)}tmp=-(b0-251)*256-tmp1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands2.cursor>=operands2.data.get_length()){v1=0}else{let pos=operands2.cursor++;if(pos==null){pos=0}v1=operands2.data.readU8(pos)}v=v<<8|v1}tmp=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands2.cursor>=operands2.data.get_length()){v1=0}else{let pos=operands2.cursor++;if(pos==null){pos=0}v1=operands2.data.readU8(pos)}v=v<<8|v1}tmp=v}else{throw haxe_Exception.thrown("Error")}fdarrayoff[i2]=tmp;++i2}let i3=0;if(0>topdict.data.get_length()){throw haxe_Exception.thrown("Error")}topdict.cursor=0>topdict.data.get_length()?topdict.data.get_length():0;let ret3=null;while(topdict.cursor<topdict.data.get_length()){let start=topdict.cursor;let op;while(true){let tmp;if(topdict.cursor>=topdict.data.get_length()){tmp=0}else{let pos=topdict.cursor;if(pos==null){pos=0}tmp=topdict.data.readU8(pos)}if(!(tmp>=28)){break}let v;let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=topdict.cursor+1;if(o>topdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}topdict.cursor=o>topdict.data.get_length()||o<0?topdict.data.get_length():o;while(topdict.cursor<topdict.data.get_length()){if(topdict.cursor>=topdict.data.get_length()){v=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v=topdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=topdict.cursor;if(topdict.cursor>=topdict.data.get_length()){op=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op=topdict.data.readU8(pos)}if(op==12){let op1;if(topdict.cursor>=topdict.data.get_length()){op1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op1=topdict.data.readU8(pos)}op=op1|256}if(op==293){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>topdict.data.get_length()||s>topdict.data.get_length()-start){ret3=r1}else{r1.data=topdict.data.sub(start,s);ret3=r1}break}}let operands3;if(ret3!=null){operands3=ret3}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>topdict.data.get_length()||0>topdict.data.get_length()){operands3=r1}else{r1.data=topdict.data.sub(0,0);operands3=r1}}while(i3<1&&operands3.cursor<operands3.data.get_length()){let b0;if(operands3.cursor>=operands3.data.get_length()){b0=0}else{let pos=operands3.cursor++;if(pos==null){pos=0}b0=operands3.data.readU8(pos)}let tmp;if(b0>=32&&b0<=246){tmp=b0-139}else if(b0>=247&&b0<=250){let tmp1;if(operands3.cursor>=operands3.data.get_length()){tmp1=0}else{let pos=operands3.cursor++;if(pos==null){pos=0}tmp1=operands3.data.readU8(pos)}tmp=(b0-247)*256+tmp1+108}else if(b0>=251&&b0<=254){let tmp1;if(operands3.cursor>=operands3.data.get_length()){tmp1=0}else{let pos=operands3.cursor++;if(pos==null){pos=0}tmp1=operands3.data.readU8(pos)}tmp=-(b0-251)*256-tmp1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands3.cursor>=operands3.data.get_length()){v1=0}else{let pos=operands3.cursor++;if(pos==null){pos=0}v1=operands3.data.readU8(pos)}v=v<<8|v1}tmp=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands3.cursor>=operands3.data.get_length()){v1=0}else{let pos=operands3.cursor++;if(pos==null){pos=0}v1=operands3.data.readU8(pos)}v=v<<8|v1}tmp=v}else{throw haxe_Exception.thrown("Error")}fdselectoff[i3]=tmp;++i3}let subrsoff=[0];let private_loc=[0,0];let i4=0;if(0>topdict.data.get_length()){throw haxe_Exception.thrown("Error")}topdict.cursor=0>topdict.data.get_length()?topdict.data.get_length():0;let ret4=null;while(topdict.cursor<topdict.data.get_length()){let start=topdict.cursor;let op;while(true){let tmp;if(topdict.cursor>=topdict.data.get_length()){tmp=0}else{let pos=topdict.cursor;if(pos==null){pos=0}tmp=topdict.data.readU8(pos)}if(!(tmp>=28)){break}let v;let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=topdict.cursor+1;if(o>topdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}topdict.cursor=o>topdict.data.get_length()||o<0?topdict.data.get_length():o;while(topdict.cursor<topdict.data.get_length()){if(topdict.cursor>=topdict.data.get_length()){v=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v=topdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(topdict.cursor>=topdict.data.get_length()){b0=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}b0=topdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(topdict.cursor<topdict.data.get_length()){let pos=topdict.cursor++;if(pos==null){pos=0}topdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(topdict.cursor>=topdict.data.get_length()){v1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}v1=topdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=topdict.cursor;if(topdict.cursor>=topdict.data.get_length()){op=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op=topdict.data.readU8(pos)}if(op==12){let op1;if(topdict.cursor>=topdict.data.get_length()){op1=0}else{let pos=topdict.cursor++;if(pos==null){pos=0}op1=topdict.data.readU8(pos)}op=op1|256}if(op==18){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>topdict.data.get_length()||s>topdict.data.get_length()-start){ret4=r1}else{r1.data=topdict.data.sub(start,s);ret4=r1}break}}let operands4;if(ret4!=null){operands4=ret4}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>topdict.data.get_length()||0>topdict.data.get_length()){operands4=r1}else{r1.data=topdict.data.sub(0,0);operands4=r1}}while(i4<2&&operands4.cursor<operands4.data.get_length()){let b0;if(operands4.cursor>=operands4.data.get_length()){b0=0}else{let pos=operands4.cursor++;if(pos==null){pos=0}b0=operands4.data.readU8(pos)}let tmp;if(b0>=32&&b0<=246){tmp=b0-139}else if(b0>=247&&b0<=250){let tmp1;if(operands4.cursor>=operands4.data.get_length()){tmp1=0}else{let pos=operands4.cursor++;if(pos==null){pos=0}tmp1=operands4.data.readU8(pos)}tmp=(b0-247)*256+tmp1+108}else if(b0>=251&&b0<=254){let tmp1;if(operands4.cursor>=operands4.data.get_length()){tmp1=0}else{let pos=operands4.cursor++;if(pos==null){pos=0}tmp1=operands4.data.readU8(pos)}tmp=-(b0-251)*256-tmp1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands4.cursor>=operands4.data.get_length()){v1=0}else{let pos=operands4.cursor++;if(pos==null){pos=0}v1=operands4.data.readU8(pos)}v=v<<8|v1}tmp=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands4.cursor>=operands4.data.get_length()){v1=0}else{let pos=operands4.cursor++;if(pos==null){pos=0}v1=operands4.data.readU8(pos)}v=v<<8|v1}tmp=v}else{throw haxe_Exception.thrown("Error")}private_loc[i4]=tmp;++i4}let tmp1;if(private_loc[1]==0||private_loc[0]==0){let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;tmp1=r}else{let o=private_loc[1];let s=private_loc[0];let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;let pdict;if(o<0||s<0||o>b.data.get_length()||s>b.data.get_length()-o){pdict=r1}else{r1.data=b.data.sub(o,s);pdict=r1}let i=0;if(0>pdict.data.get_length()){throw haxe_Exception.thrown("Error")}pdict.cursor=0>pdict.data.get_length()?pdict.data.get_length():0;let ret=null;while(pdict.cursor<pdict.data.get_length()){let start=pdict.cursor;let op;while(true){let tmp;if(pdict.cursor>=pdict.data.get_length()){tmp=0}else{let pos=pdict.cursor;if(pos==null){pos=0}tmp=pdict.data.readU8(pos)}if(!(tmp>=28)){break}let v;let b0;if(pdict.cursor>=pdict.data.get_length()){b0=0}else{let pos=pdict.cursor;if(pos==null){pos=0}b0=pdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=pdict.cursor+1;if(o>pdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}pdict.cursor=o>pdict.data.get_length()||o<0?pdict.data.get_length():o;while(pdict.cursor<pdict.data.get_length()){if(pdict.cursor>=pdict.data.get_length()){v=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}v=pdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(pdict.cursor>=pdict.data.get_length()){b0=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}b0=pdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(pdict.cursor<pdict.data.get_length()){let pos=pdict.cursor++;if(pos==null){pos=0}pdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(pdict.cursor<pdict.data.get_length()){let pos=pdict.cursor++;if(pos==null){pos=0}pdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(pdict.cursor>=pdict.data.get_length()){v1=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}v1=pdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(pdict.cursor>=pdict.data.get_length()){v1=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}v1=pdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=pdict.cursor;if(pdict.cursor>=pdict.data.get_length()){op=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}op=pdict.data.readU8(pos)}if(op==12){let op1;if(pdict.cursor>=pdict.data.get_length()){op1=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}op1=pdict.data.readU8(pos)}op=op1|256}if(op==19){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>pdict.data.get_length()||s>pdict.data.get_length()-start){ret=r1}else{r1.data=pdict.data.sub(start,s);ret=r1}break}}let operands;if(ret!=null){operands=ret}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>pdict.data.get_length()||0>pdict.data.get_length()){operands=r1}else{r1.data=pdict.data.sub(0,0);operands=r1}}while(i<1&&operands.cursor<operands.data.get_length()){let b0;if(operands.cursor>=operands.data.get_length()){b0=0}else{let pos=operands.cursor++;if(pos==null){pos=0}b0=operands.data.readU8(pos)}let tmp;if(b0>=32&&b0<=246){tmp=b0-139}else if(b0>=247&&b0<=250){let tmp1;if(operands.cursor>=operands.data.get_length()){tmp1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}tmp1=operands.data.readU8(pos)}tmp=(b0-247)*256+tmp1+108}else if(b0>=251&&b0<=254){let tmp1;if(operands.cursor>=operands.data.get_length()){tmp1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}tmp1=operands.data.readU8(pos)}tmp=-(b0-251)*256-tmp1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}tmp=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}tmp=v}else{throw haxe_Exception.thrown("Error")}subrsoff[i]=tmp;++i}if(subrsoff[0]==0){let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;tmp1=r}else{let o=private_loc[1]+subrsoff[0];if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let start=b.cursor;let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let count=v;if(count>0){let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+offsize*count;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let o1=b.cursor+(v-1);if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let s=b.cursor-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>b.data.get_length()||s>b.data.get_length()-start){tmp1=r1}else{r1.data=b.data.sub(start,s);tmp1=r1}}else{tmp1=b}}}info.subrs=tmp1;if(cstype[0]!=2){return false}if(charstrings[0]==0){return false}if(fdarrayoff[0]!=0){if(fdselectoff[0]==0){return false}let o=fdarrayoff[0];if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let start=b.cursor;let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let count=v;let tmp;if(count>0){let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+offsize*count;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let o1=b.cursor+(v-1);if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let s=b.cursor-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>b.data.get_length()||s>b.data.get_length()-start){tmp=r1}else{r1.data=b.data.sub(start,s);tmp=r1}}else{tmp=b}info.fontdicts=tmp;let o1=fdselectoff[0];let s=b.data.get_length()-fdselectoff[0];let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;let tmp1;if(o1<0||s<0||o1>b.data.get_length()||s>b.data.get_length()-o1){tmp1=r1}else{r1.data=b.data.sub(o1,s);tmp1=r1}info.fdselect=tmp1}let o4=charstrings[0];if(o4>b.data.get_length()||o4<0){throw haxe_Exception.thrown("Error")}b.cursor=o4>b.data.get_length()||o4<0?b.data.get_length():o4;let start5=b.cursor;let v7=0;let _g14=0;let _g15=2;while(_g14<_g15){let i=_g14++;let v;if(b.cursor>=b.data.get_length()){v=0}else{let pos=b.cursor++;if(pos==null){pos=0}v=b.data.readU8(pos)}v7=v7<<8|v}let count5=v7;let tmp2;if(count5>0){let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+offsize*count5;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}let o1=b.cursor+(v-1);if(o1>b.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}b.cursor=o1>b.data.get_length()||o1<0?b.data.get_length():o1;let s=b.cursor-start5;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start5<0||s<0||start5>b.data.get_length()||s>b.data.get_length()-start5){tmp2=r1}else{r1.data=b.data.sub(start5,s);tmp2=r1}}else{tmp2=b}info.charstrings=tmp2}let t=kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"maxp");if(t!=0){let pos=t+4;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);info.numGlyphs=ch2|ch1<<8}else{info.numGlyphs=65535}let pos=cmap+2;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let numTables=ch2|ch1<<8;info.index_map=0;let _g=0;let _g1=numTables;while(_g<_g1){let i=_g++;let encoding_record=cmap+4+8*i;let pos=encoding_record;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);switch(ch2|ch1<<8){case 0:let pos1=encoding_record+4;if(pos1==null){pos1=0}let pos2=pos1;if(pos2==null){pos2=0}let ch11=data.readU8(pos2);let ch21=data.readU8(pos2+1);let ch3=data.readU8(pos2+2);let ch4=data.readU8(pos2+3);info.index_map=cmap+(ch4|ch3<<8|ch21<<16|ch11<<24);break;case 3:let pos3=encoding_record+2;if(pos3==null){pos3=0}let ch12=data.readU8(pos3);let ch22=data.readU8(pos3+1);switch(ch22|ch12<<8){case 1:case 10:let pos4=encoding_record+4;if(pos4==null){pos4=0}let pos5=pos4;if(pos5==null){pos5=0}let ch13=data.readU8(pos5);let ch23=data.readU8(pos5+1);let ch31=data.readU8(pos5+2);let ch41=data.readU8(pos5+3);info.index_map=cmap+(ch41|ch31<<8|ch23<<16|ch13<<24);break}break}}if(info.index_map==0){return false}let pos1=info.head+50;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);info.indexToLocFormat=ch21|ch11<<8;return true}static stbtt_FindGlyphIndex(info,unicode_codepoint){let data=info.data;let index_map=info.index_map;let pos=index_map;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let format=ch2|ch1<<8;if(format==0){let pos=index_map+2;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let bytes=ch2|ch1<<8;if(unicode_codepoint<bytes-6){let pos=index_map+6+unicode_codepoint;if(pos==null){pos=0}return data.readU8(pos)}return 0}else if(format==6){let pos=index_map+6;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let first=ch2|ch1<<8;let pos1=index_map+8;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);let count=ch21|ch11<<8;if(unicode_codepoint>=first&&unicode_codepoint<first+count){let pos=index_map+10+(unicode_codepoint-first)*2;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);return ch2|ch1<<8}return 0}else if(format==2){throw haxe_Exception.thrown("Error")}else if(format==4){let pos=index_map+6;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let segcount=(ch2|ch1<<8)>>1;let pos1=index_map+8;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);let searchRange=(ch21|ch11<<8)>>1;let pos2=index_map+10;if(pos2==null){pos2=0}let ch12=data.readU8(pos2);let ch22=data.readU8(pos2+1);let entrySelector=ch22|ch12<<8;let pos3=index_map+12;if(pos3==null){pos3=0}let ch13=data.readU8(pos3);let ch23=data.readU8(pos3+1);let rangeShift=(ch23|ch13<<8)>>1;let endCount=index_map+14;let search=endCount;if(unicode_codepoint>65535){return 0}let pos4=search+rangeShift*2;if(pos4==null){pos4=0}let ch14=data.readU8(pos4);let ch24=data.readU8(pos4+1);if(unicode_codepoint>=(ch24|ch14<<8)){search+=rangeShift*2}search-=2;while(entrySelector!=0){searchRange>>=1;let pos=search+searchRange*2;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let end=ch2|ch1<<8;if(unicode_codepoint>end){search+=searchRange*2}--entrySelector}search+=2;let item=search-endCount>>1&65535;let pos5=endCount+2*item;if(pos5==null){pos5=0}let ch15=data.readU8(pos5);let ch25=data.readU8(pos5+1);if(unicode_codepoint>(ch25|ch15<<8)){throw haxe_Exception.thrown("Error")}let pos6=index_map+14+segcount*2+2+2*item;if(pos6==null){pos6=0}let ch16=data.readU8(pos6);let ch26=data.readU8(pos6+1);let start=ch26|ch16<<8;if(unicode_codepoint<start){return 0}let pos7=index_map+14+segcount*6+2+2*item;if(pos7==null){pos7=0}let ch17=data.readU8(pos7);let ch27=data.readU8(pos7+1);let offset=ch27|ch17<<8;if(offset==0){let pos=index_map+14+segcount*4+2+2*item;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let n=ch2|ch1<<8;return unicode_codepoint+((n&32768)!=0?n-65536:n)&65535}let pos8=offset+(unicode_codepoint-start)*2+index_map+14+segcount*6+2+2*item;if(pos8==null){pos8=0}let ch18=data.readU8(pos8);let ch28=data.readU8(pos8+1);return ch28|ch18<<8}else if(format==12||format==13){let pos=index_map+12;if(pos==null){pos=0}let pos1=pos;if(pos1==null){pos1=0}let ch1=data.readU8(pos1);let ch2=data.readU8(pos1+1);let ch3=data.readU8(pos1+2);let ch4=data.readU8(pos1+3);let ngroups=ch4|ch3<<8|ch2<<16|ch1<<24;let low=0;let high=ngroups;while(low<high){let mid=low+(high-low>>1);let pos=index_map+16+mid*12;if(pos==null){pos=0}let pos1=pos;if(pos1==null){pos1=0}let ch1=data.readU8(pos1);let ch2=data.readU8(pos1+1);let ch3=data.readU8(pos1+2);let ch4=data.readU8(pos1+3);let start_char=ch4|ch3<<8|ch2<<16|ch1<<24;let pos2=index_map+16+mid*12+4;if(pos2==null){pos2=0}let pos3=pos2;if(pos3==null){pos3=0}let ch11=data.readU8(pos3);let ch21=data.readU8(pos3+1);let ch31=data.readU8(pos3+2);let ch41=data.readU8(pos3+3);let end_char=ch41|ch31<<8|ch21<<16|ch11<<24;if(unicode_codepoint<start_char){high=mid}else if(unicode_codepoint>end_char){low=mid+1}else{let pos=index_map+16+mid*12+8;if(pos==null){pos=0}let pos1=pos;if(pos1==null){pos1=0}let ch1=data.readU8(pos1);let ch2=data.readU8(pos1+1);let ch3=data.readU8(pos1+2);let ch4=data.readU8(pos1+3);let start_glyph=ch4|ch3<<8|ch2<<16|ch1<<24;if(format==12){return start_glyph+unicode_codepoint-start_char}else{return start_glyph}}}return 0}throw haxe_Exception.thrown("Error")}static stbtt_setvertex(v,type,x,y,cx,cy){v.type=type;v.x=x;v.y=y;v.cx=cx;v.cy=cy}static stbtt__GetGlyfOffset(info,glyph_index){let g1;let g2;if(!(info.cff.data==null||info.cff.data.get_length()==0)){throw haxe_Exception.thrown("Error")}if(glyph_index>=info.numGlyphs){return-1}if(info.indexToLocFormat>=2){return-1}if(info.indexToLocFormat==0){let info1=info.glyf;let p=info.data;let pos=info.loca+glyph_index*2;if(pos==null){pos=0}let ch1=p.readU8(pos);let ch2=p.readU8(pos+1);g1=info1+(ch2|ch1<<8)*2;let info2=info.glyf;let p1=info.data;let pos1=info.loca+glyph_index*2+2;if(pos1==null){pos1=0}let ch11=p1.readU8(pos1);let ch21=p1.readU8(pos1+1);g2=info2+(ch21|ch11<<8)*2}else{let info1=info.glyf;let p=info.data;let pos=info.loca+glyph_index*4;if(pos==null){pos=0}let pos1=pos;if(pos1==null){pos1=0}let ch1=p.readU8(pos1);let ch2=p.readU8(pos1+1);let ch3=p.readU8(pos1+2);let ch4=p.readU8(pos1+3);g1=info1+(ch4|ch3<<8|ch2<<16|ch1<<24);let info2=info.glyf;let p1=info.data;let pos2=info.loca+glyph_index*4+4;if(pos2==null){pos2=0}let pos3=pos2;if(pos3==null){pos3=0}let ch11=p1.readU8(pos3);let ch21=p1.readU8(pos3+1);let ch31=p1.readU8(pos3+2);let ch41=p1.readU8(pos3+3);g2=info2+(ch41|ch31<<8|ch21<<16|ch11<<24)}if(g1==g2){return-1}else{return g1}}static stbtt_GetGlyphBox(info,glyph_index,rect){if(info.cff.data!=null&&info.cff.data.get_length()>0){kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphInfoT2(info,glyph_index,rect)}else{let g=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(info,glyph_index);if(g<0){return false}let p=info.data;let pos=g+2;if(pos==null){pos=0}let ch1=p.readU8(pos);let ch2=p.readU8(pos+1);let n=ch2|ch1<<8;rect.x0=(n&32768)!=0?n-65536:n;let p1=info.data;let pos1=g+4;if(pos1==null){pos1=0}let ch11=p1.readU8(pos1);let ch21=p1.readU8(pos1+1);let n1=ch21|ch11<<8;rect.y0=(n1&32768)!=0?n1-65536:n1;let p2=info.data;let pos2=g+6;if(pos2==null){pos2=0}let ch12=p2.readU8(pos2);let ch22=p2.readU8(pos2+1);let n2=ch22|ch12<<8;rect.x1=(n2&32768)!=0?n2-65536:n2;let p3=info.data;let pos3=g+8;if(pos3==null){pos3=0}let ch13=p3.readU8(pos3);let ch23=p3.readU8(pos3+1);let n3=ch23|ch13<<8;rect.y1=(n3&32768)!=0?n3-65536:n3}return true}static stbtt__close_shape(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy){if(start_off){if(was_off){kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,cx+scx>>1,cy+scy>>1,cx,cy)}kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,sx,sy,scx,scy)}else if(was_off){kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,sx,sy,cx,cy)}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],2,sx,sy,0,0)}return num_vertices}static copyVertices(from,to,offset,count){let _g=0;let _g1=count;while(_g<_g1){let i=_g++;to[offset+i]=from[i]}}static stbtt__GetGlyphShapeTT(info,glyph_index){let data=info.data;let vertices=null;let num_vertices=0;let g=kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(info,glyph_index);if(g<0){return null}let pos=g;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let n=ch2|ch1<<8;let numberOfContours=(n&32768)!=0?n-65536:n;if(numberOfContours>0){let flags=0;let j=0;let next_move=0;let off=0;let was_off=false;let start_off=false;let endPtsOfContoursOffset=g+10;let pos=endPtsOfContoursOffset+numberOfContours*2;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let ins=ch2|ch1<<8;let pointsIndex=endPtsOfContoursOffset+numberOfContours*2+2+ins;let pos1=endPtsOfContoursOffset+numberOfContours*2-2;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);let n=1+(ch21|ch11<<8);let m=n+2*numberOfContours;let this1=new Array(m);vertices=this1;if(vertices==null){return null}else{let _g=0;let _g1=vertices.length;while(_g<_g1){let i=_g++;vertices[i]=new kha_graphics2_truetype_Stbtt_$vertex}}next_move=0;let flagcount=0;off=m-n;let _g=0;let _g1=n;while(_g<_g1){let i=_g++;if(flagcount==0){flags=data.readU8(pointsIndex++);if((flags&8)!=0){flagcount=data.readU8(pointsIndex++)}}else{--flagcount}vertices[off+i].type=flags}let x=0;let _g2=0;let _g3=n;while(_g2<_g3){let i=_g2++;flags=vertices[off+i].type;if((flags&2)!=0){let dx=data.readU8(pointsIndex++);x+=(flags&16)!=0?dx:-dx}else if((flags&16)==0){let value;let ch1=data.readU8(pointsIndex);let ch2=data.readU8(pointsIndex+1);let n=ch2|ch1<<8;if((n&32768)!=0){value=n-65536}else{value=n}x+=value;pointsIndex+=2}vertices[off+i].x=x}let y=0;let _g4=0;let _g5=n;while(_g4<_g5){let i=_g4++;flags=vertices[off+i].type;if((flags&4)!=0){let dy=data.readU8(pointsIndex++);y+=(flags&32)!=0?dy:-dy}else if((flags&32)==0){let value;let ch1=data.readU8(pointsIndex);let ch2=data.readU8(pointsIndex+1);let n=ch2|ch1<<8;if((n&32768)!=0){value=n-65536}else{value=n}y+=value;pointsIndex+=2}vertices[off+i].y=y}num_vertices=0;let scy=0;let scx=scy;let cy=scx;let cx=cy;let sy=cx;let sx=sy;let i=0;while(i<n){flags=vertices[off+i].type;x=vertices[off+i].x;y=vertices[off+i].y;if(next_move==i){if(i!=0){num_vertices=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy)}start_off=(flags&1)==0;if(start_off){scx=x;scy=y;if((vertices[off+i+1].type&1)==0){sx=x+vertices[off+i+1].x>>1;sy=y+vertices[off+i+1].y>>1}else{sx=vertices[off+i+1].x;sy=vertices[off+i+1].y;++i}}else{sx=x;sy=y}kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],1,sx,sy,0,0);was_off=false;let pos=endPtsOfContoursOffset+j*2;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);next_move=1+(ch2|ch1<<8);++j}else if((flags&1)==0){if(was_off){kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,cx+x>>1,cy+y>>1,cx,cy)}cx=x;cy=y;was_off=true}else{if(was_off){kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,x,y,cx,cy)}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],2,x,y,0,0)}was_off=false}++i}num_vertices=kha_graphics2_truetype_StbTruetype.stbtt__close_shape(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy)}else if(numberOfContours<0){let more=1;let compIndex=g+10;num_vertices=0;vertices=null;while(more!=0){let comp_num_verts=0;let i;let comp_verts=null;let tmp=null;let mtx0=1;let mtx1=0;let mtx2=0;let mtx3=1;let mtx4=0;let mtx5=0;let pos=compIndex;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let n=ch2|ch1<<8;let flags=(n&32768)!=0?n-65536:n;let pos1=compIndex+=2;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);let n1=ch21|ch11<<8;let gidx=(n1&32768)!=0?n1-65536:n1;compIndex+=2;if((flags&2)!=0){if((flags&1)!=0){let pos=compIndex;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let n=ch2|ch1<<8;mtx4=(n&32768)!=0?n-65536:n;let pos1=compIndex+=2;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);let n1=ch21|ch11<<8;mtx5=(n1&32768)!=0?n1-65536:n1;compIndex+=2}else{let pos=compIndex;if(pos==null){pos=0}let n=data.readU8(pos);mtx4=n>=128?n-256:n;let pos1=++compIndex;if(pos1==null){pos1=0}let n1=data.readU8(pos1);mtx5=n1>=128?n1-256:n1;++compIndex}}else{throw haxe_Exception.thrown("Error")}if((flags&8)!=0){let pos=compIndex;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let n=ch2|ch1<<8;mtx3=((n&32768)!=0?n-65536:n)/16384;mtx0=mtx3;compIndex+=2;mtx2=0;mtx1=mtx2}else if((flags&64)!=0){let pos=compIndex;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let n=ch2|ch1<<8;mtx0=((n&32768)!=0?n-65536:n)/16384;compIndex+=2;mtx2=0;mtx1=mtx2;let pos1=compIndex;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);let n1=ch21|ch11<<8;mtx3=((n1&32768)!=0?n1-65536:n1)/16384;compIndex+=2}else if((flags&128)!=0){let pos=compIndex;if(pos==null){pos=0}let ch1=data.readU8(pos);let ch2=data.readU8(pos+1);let n=ch2|ch1<<8;mtx0=((n&32768)!=0?n-65536:n)/16384;let pos1=compIndex+=2;if(pos1==null){pos1=0}let ch11=data.readU8(pos1);let ch21=data.readU8(pos1+1);let n1=ch21|ch11<<8;mtx1=((n1&32768)!=0?n1-65536:n1)/16384;let pos2=compIndex+=2;if(pos2==null){pos2=0}let ch12=data.readU8(pos2);let ch22=data.readU8(pos2+1);let n2=ch22|ch12<<8;mtx2=((n2&32768)!=0?n2-65536:n2)/16384;let pos3=compIndex+=2;if(pos3==null){pos3=0}let ch13=data.readU8(pos3);let ch23=data.readU8(pos3+1);let n3=ch23|ch13<<8;mtx3=((n3&32768)!=0?n3-65536:n3)/16384;compIndex+=2}let m=Math.sqrt(mtx0*mtx0+mtx1*mtx1);let n2=Math.sqrt(mtx2*mtx2+mtx3*mtx3);comp_verts=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,gidx);comp_num_verts=comp_verts==null?0:comp_verts.length;if(comp_num_verts>0){let _g=0;let _g1=comp_num_verts;while(_g<_g1){let i=_g++;let v=comp_verts[i];let x=v.x;let y=v.y;v.x=m*(mtx0*x+mtx2*y+mtx4)|0;v.y=n2*(mtx1*x+mtx3*y+mtx5)|0;x=v.cx;y=v.cy;v.cx=m*(mtx0*x+mtx2*y+mtx4)|0;v.cy=n2*(mtx1*x+mtx3*y+mtx5)|0}let this1=new Array(num_vertices+comp_num_verts);tmp=this1;if(tmp==null){return null}if(num_vertices>0){kha_graphics2_truetype_StbTruetype.copyVertices(vertices,tmp,0,num_vertices)}kha_graphics2_truetype_StbTruetype.copyVertices(comp_verts,tmp,num_vertices,comp_num_verts);vertices=tmp;num_vertices+=comp_num_verts}more=flags&32}}if(vertices==null){return null}if(vertices.length<num_vertices){throw haxe_Exception.thrown("Error")}if(num_vertices<vertices.length){let this1=new Array(num_vertices);let tmp=this1;kha_graphics2_truetype_StbTruetype.copyVertices(vertices,tmp,0,num_vertices);return tmp}else{return vertices}}static stbtt__run_charstring(info,glyph_index,c){let in_header=true;let maskbits=0;let subr_stack_height=0;let sp=0;let v;let i;let b0;let has_subrs=false;let clear_stack;let _g=[];_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);_g.push(0);let s=_g;let _g1=[];_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf);let subr_stack=_g1;let subrs=info.subrs;let b;let f;let b1=info.charstrings;if(0>b1.data.get_length()){throw haxe_Exception.thrown("Error")}b1.cursor=0>b1.data.get_length()?b1.data.get_length():0;let v1=0;let _g2=0;let _g3=2;while(_g2<_g3){let i=_g2++;let v;if(b1.cursor>=b1.data.get_length()){v=0}else{let pos=b1.cursor++;if(pos==null){pos=0}v=b1.data.readU8(pos)}v1=v1<<8|v}let count=v1;let offsize;if(b1.cursor>=b1.data.get_length()){offsize=0}else{let pos=b1.cursor++;if(pos==null){pos=0}offsize=b1.data.readU8(pos)}if(!(glyph_index>=0&&glyph_index<count)){throw haxe_Exception.thrown("Error")}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b1.cursor+glyph_index*offsize;if(o>b1.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b1.cursor=o>b1.data.get_length()||o<0?b1.data.get_length():o;let v2=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g4=0;let _g5=offsize;while(_g4<_g5){let i=_g4++;let v;if(b1.cursor>=b1.data.get_length()){v=0}else{let pos=b1.cursor++;if(pos==null){pos=0}v=b1.data.readU8(pos)}v2=v2<<8|v}let start=v2;let v3=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g6=0;let _g7=offsize;while(_g6<_g7){let i=_g6++;let v;if(b1.cursor>=b1.data.get_length()){v=0}else{let pos=b1.cursor++;if(pos==null){pos=0}v=b1.data.readU8(pos)}v3=v3<<8|v}let end=v3;let o1=2+(count+1)*offsize+start;let s1=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(o1<0||s1<0||o1>b1.data.get_length()||s1>b1.data.get_length()-o1){b=r1}else{r1.data=b1.data.sub(o1,s1);b=r1}while(b.cursor<b.data.get_length()){i=0;clear_stack=true;if(b.cursor>=b.data.get_length()){b0=0}else{let pos=b.cursor++;if(pos==null){pos=0}b0=b.data.readU8(pos)}switch(b0){case 1:case 3:case 18:case 23:maskbits+=sp/2|0;break;case 4:in_header=false;if(sp<1){return false}if(c.first_x!=c.x||c.first_y!=c.y){let x=c.first_x|0;let y=c.first_y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++}c.first_x=c.x=c.x;c.first_y=c.y=c.y+s[sp-1];let x=c.x|0;let y=c.y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],1,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;break;case 5:if(sp<2){return false}while(i+1<sp){c.x+=s[i];c.y+=s[i+1];let x=c.x|0;let y=c.y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;i+=2}break;case 6:if(sp<1){return false}while(i<sp){c.x+=s[i];c.y+=0;let x=c.x|0;let y=c.y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;++i;if(i>=sp){break}c.x+=0;c.y+=s[i];let x1=c.x|0;let y1=c.y|0;if(c.bounds){if(x1>c.max_x||!c.started){c.max_x=x1}if(y1>c.max_y||!c.started){c.max_y=y1}if(x1<c.min_x||!c.started){c.min_x=x1}if(y1<c.min_y||!c.started){c.min_y=y1}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x1,y1,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;++i}break;case 7:if(sp<1){return false}while(i<sp){c.x+=0;c.y+=s[i];let x=c.x|0;let y=c.y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;++i;if(i>=sp){break}c.x+=s[i];c.y+=0;let x1=c.x|0;let y1=c.y|0;if(c.bounds){if(x1>c.max_x||!c.started){c.max_x=x1}if(y1>c.max_y||!c.started){c.max_y=y1}if(x1<c.min_x||!c.started){c.min_x=x1}if(y1<c.min_y||!c.started){c.min_y=y1}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x1,y1,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;++i}break;case 8:if(sp<6){return false}while(i+5<sp){let cx1=c.x+s[i];let cy1=c.y+s[i+1];let cx2=cx1+s[i+2];let cy2=cy1+s[i+3];c.x=cx2+s[i+4];c.y=cy2+s[i+5];let x=c.x|0;let y=c.y|0;let cx=cx1|0;let cy=cy1|0;let cx11=cx2|0;let cy11=cy2|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true;if(cx>c.max_x||!c.started){c.max_x=cx}if(cy>c.max_y||!c.started){c.max_y=cy}if(cx<c.min_x||!c.started){c.min_x=cx}if(cy<c.min_y||!c.started){c.min_y=cy}c.started=true;if(cx11>c.max_x||!c.started){c.max_x=cx11}if(cy11>c.max_y||!c.started){c.max_y=cy11}if(cx11<c.min_x||!c.started){c.min_x=cx11}if(cy11<c.min_y||!c.started){c.min_y=cy11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x,y,cx,cy);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx11,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy11,Int)}c.num_vertices++;i+=6}break;case 11:if(subr_stack_height<=0){return false}b=subr_stack[--subr_stack_height];clear_stack=false;break;case 12:let dx1;let dx2;let dx3;let dx4;let dx5;let dx6;let dy1;let dy2;let dy3;let dy4;let dy5;let dy6;let dx;let dy;let b1;if(b.cursor>=b.data.get_length()){b1=0}else{let pos=b.cursor++;if(pos==null){pos=0}b1=b.data.readU8(pos)}switch(b1){case 34:if(sp<7){return false}dx1=s[0];dx2=s[1];dy2=s[2];dx3=s[3];dx4=s[4];dx5=s[5];dx6=s[6];let cx1=c.x+dx1;let cy1=c.y;let cx2=cx1+dx2;let cy2=cy1+dy2;c.x=cx2+dx3;c.y=cy2;let x1=c.x|0;let y1=c.y|0;let cx=cx1|0;let cy=cy1|0;let cx11=cx2|0;let cy11=cy2|0;if(c.bounds){if(x1>c.max_x||!c.started){c.max_x=x1}if(y1>c.max_y||!c.started){c.max_y=y1}if(x1<c.min_x||!c.started){c.min_x=x1}if(y1<c.min_y||!c.started){c.min_y=y1}c.started=true;if(cx>c.max_x||!c.started){c.max_x=cx}if(cy>c.max_y||!c.started){c.max_y=cy}if(cx<c.min_x||!c.started){c.min_x=cx}if(cy<c.min_y||!c.started){c.min_y=cy}c.started=true;if(cx11>c.max_x||!c.started){c.max_x=cx11}if(cy11>c.max_y||!c.started){c.max_y=cy11}if(cx11<c.min_x||!c.started){c.min_x=cx11}if(cy11<c.min_y||!c.started){c.min_y=cy11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x1,y1,cx,cy);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx11,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy11,Int)}c.num_vertices++;let cx12=c.x+dx4;let cy12=c.y;let cx21=cx12+dx5;let cy21=cy12+-dy2;c.x=cx21+dx6;c.y=cy21;let x2=c.x|0;let y2=c.y|0;let cx3=cx12|0;let cy3=cy12|0;let cx13=cx21|0;let cy13=cy21|0;if(c.bounds){if(x2>c.max_x||!c.started){c.max_x=x2}if(y2>c.max_y||!c.started){c.max_y=y2}if(x2<c.min_x||!c.started){c.min_x=x2}if(y2<c.min_y||!c.started){c.min_y=y2}c.started=true;if(cx3>c.max_x||!c.started){c.max_x=cx3}if(cy3>c.max_y||!c.started){c.max_y=cy3}if(cx3<c.min_x||!c.started){c.min_x=cx3}if(cy3<c.min_y||!c.started){c.min_y=cy3}c.started=true;if(cx13>c.max_x||!c.started){c.max_x=cx13}if(cy13>c.max_y||!c.started){c.max_y=cy13}if(cx13<c.min_x||!c.started){c.min_x=cx13}if(cy13<c.min_y||!c.started){c.min_y=cy13}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x2,y2,cx3,cy3);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx13,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy13,Int)}c.num_vertices++;break;case 35:if(sp<13){return false}dx1=s[0];dy1=s[1];dx2=s[2];dy2=s[3];dx3=s[4];dy3=s[5];dx4=s[6];dy4=s[7];dx5=s[8];dy5=s[9];dx6=s[10];dy6=s[11];let cx14=c.x+dx1;let cy14=c.y+dy1;let cx22=cx14+dx2;let cy22=cy14+dy2;c.x=cx22+dx3;c.y=cy22+dy3;let x3=c.x|0;let y3=c.y|0;let cx4=cx14|0;let cy4=cy14|0;let cx15=cx22|0;let cy15=cy22|0;if(c.bounds){if(x3>c.max_x||!c.started){c.max_x=x3}if(y3>c.max_y||!c.started){c.max_y=y3}if(x3<c.min_x||!c.started){c.min_x=x3}if(y3<c.min_y||!c.started){c.min_y=y3}c.started=true;if(cx4>c.max_x||!c.started){c.max_x=cx4}if(cy4>c.max_y||!c.started){c.max_y=cy4}if(cx4<c.min_x||!c.started){c.min_x=cx4}if(cy4<c.min_y||!c.started){c.min_y=cy4}c.started=true;if(cx15>c.max_x||!c.started){c.max_x=cx15}if(cy15>c.max_y||!c.started){c.max_y=cy15}if(cx15<c.min_x||!c.started){c.min_x=cx15}if(cy15<c.min_y||!c.started){c.min_y=cy15}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x3,y3,cx4,cy4);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx15,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy15,Int)}c.num_vertices++;let cx16=c.x+dx4;let cy16=c.y+dy4;let cx23=cx16+dx5;let cy23=cy16+dy5;c.x=cx23+dx6;c.y=cy23+dy6;let x4=c.x|0;let y4=c.y|0;let cx5=cx16|0;let cy5=cy16|0;let cx17=cx23|0;let cy17=cy23|0;if(c.bounds){if(x4>c.max_x||!c.started){c.max_x=x4}if(y4>c.max_y||!c.started){c.max_y=y4}if(x4<c.min_x||!c.started){c.min_x=x4}if(y4<c.min_y||!c.started){c.min_y=y4}c.started=true;if(cx5>c.max_x||!c.started){c.max_x=cx5}if(cy5>c.max_y||!c.started){c.max_y=cy5}if(cx5<c.min_x||!c.started){c.min_x=cx5}if(cy5<c.min_y||!c.started){c.min_y=cy5}c.started=true;if(cx17>c.max_x||!c.started){c.max_x=cx17}if(cy17>c.max_y||!c.started){c.max_y=cy17}if(cx17<c.min_x||!c.started){c.min_x=cx17}if(cy17<c.min_y||!c.started){c.min_y=cy17}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x4,y4,cx5,cy5);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx17,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy17,Int)}c.num_vertices++;break;case 36:if(sp<9){return false}dx1=s[0];dy1=s[1];dx2=s[2];dy2=s[3];dx3=s[4];dx4=s[5];dx5=s[6];dy5=s[7];dx6=s[8];let cx18=c.x+dx1;let cy18=c.y+dy1;let cx24=cx18+dx2;let cy24=cy18+dy2;c.x=cx24+dx3;c.y=cy24;let x5=c.x|0;let y5=c.y|0;let cx6=cx18|0;let cy6=cy18|0;let cx19=cx24|0;let cy19=cy24|0;if(c.bounds){if(x5>c.max_x||!c.started){c.max_x=x5}if(y5>c.max_y||!c.started){c.max_y=y5}if(x5<c.min_x||!c.started){c.min_x=x5}if(y5<c.min_y||!c.started){c.min_y=y5}c.started=true;if(cx6>c.max_x||!c.started){c.max_x=cx6}if(cy6>c.max_y||!c.started){c.max_y=cy6}if(cx6<c.min_x||!c.started){c.min_x=cx6}if(cy6<c.min_y||!c.started){c.min_y=cy6}c.started=true;if(cx19>c.max_x||!c.started){c.max_x=cx19}if(cy19>c.max_y||!c.started){c.max_y=cy19}if(cx19<c.min_x||!c.started){c.min_x=cx19}if(cy19<c.min_y||!c.started){c.min_y=cy19}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x5,y5,cx6,cy6);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx19,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy19,Int)}c.num_vertices++;let cx110=c.x+dx4;let cy110=c.y;let cx25=cx110+dx5;let cy25=cy110+dy5;c.x=cx25+dx6;c.y=cy25+-(dy1+dy2+dy5);let x6=c.x|0;let y6=c.y|0;let cx7=cx110|0;let cy7=cy110|0;let cx111=cx25|0;let cy111=cy25|0;if(c.bounds){if(x6>c.max_x||!c.started){c.max_x=x6}if(y6>c.max_y||!c.started){c.max_y=y6}if(x6<c.min_x||!c.started){c.min_x=x6}if(y6<c.min_y||!c.started){c.min_y=y6}c.started=true;if(cx7>c.max_x||!c.started){c.max_x=cx7}if(cy7>c.max_y||!c.started){c.max_y=cy7}if(cx7<c.min_x||!c.started){c.min_x=cx7}if(cy7<c.min_y||!c.started){c.min_y=cy7}c.started=true;if(cx111>c.max_x||!c.started){c.max_x=cx111}if(cy111>c.max_y||!c.started){c.max_y=cy111}if(cx111<c.min_x||!c.started){c.min_x=cx111}if(cy111<c.min_y||!c.started){c.min_y=cy111}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x6,y6,cx7,cy7);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx111,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy111,Int)}c.num_vertices++;break;case 37:if(sp<11){return false}dx1=s[0];dy1=s[1];dx2=s[2];dy2=s[3];dx3=s[4];dy3=s[5];dx4=s[6];dy4=s[7];dx5=s[8];dy5=s[9];dy6=s[10];dx6=dy6;dx=dx1+dx2+dx3+dx4+dx5;dy=dy1+dy2+dy3+dy4+dy5;if(Math.abs(dx)>Math.abs(dy)){dy6=-dy}else{dx6=-dx}let cx112=c.x+dx1;let cy112=c.y+dy1;let cx26=cx112+dx2;let cy26=cy112+dy2;c.x=cx26+dx3;c.y=cy26+dy3;let x7=c.x|0;let y7=c.y|0;let cx8=cx112|0;let cy8=cy112|0;let cx113=cx26|0;let cy113=cy26|0;if(c.bounds){if(x7>c.max_x||!c.started){c.max_x=x7}if(y7>c.max_y||!c.started){c.max_y=y7}if(x7<c.min_x||!c.started){c.min_x=x7}if(y7<c.min_y||!c.started){c.min_y=y7}c.started=true;if(cx8>c.max_x||!c.started){c.max_x=cx8}if(cy8>c.max_y||!c.started){c.max_y=cy8}if(cx8<c.min_x||!c.started){c.min_x=cx8}if(cy8<c.min_y||!c.started){c.min_y=cy8}c.started=true;if(cx113>c.max_x||!c.started){c.max_x=cx113}if(cy113>c.max_y||!c.started){c.max_y=cy113}if(cx113<c.min_x||!c.started){c.min_x=cx113}if(cy113<c.min_y||!c.started){c.min_y=cy113}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x7,y7,cx8,cy8);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx113,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy113,Int)}c.num_vertices++;let cx114=c.x+dx4;let cy114=c.y+dy4;let cx27=cx114+dx5;let cy27=cy114+dy5;c.x=cx27+dx6;c.y=cy27+dy6;let x8=c.x|0;let y8=c.y|0;let cx9=cx114|0;let cy9=cy114|0;let cx115=cx27|0;let cy115=cy27|0;if(c.bounds){if(x8>c.max_x||!c.started){c.max_x=x8}if(y8>c.max_y||!c.started){c.max_y=y8}if(x8<c.min_x||!c.started){c.min_x=x8}if(y8<c.min_y||!c.started){c.min_y=y8}c.started=true;if(cx9>c.max_x||!c.started){c.max_x=cx9}if(cy9>c.max_y||!c.started){c.max_y=cy9}if(cx9<c.min_x||!c.started){c.min_x=cx9}if(cy9<c.min_y||!c.started){c.min_y=cy9}c.started=true;if(cx115>c.max_x||!c.started){c.max_x=cx115}if(cy115>c.max_y||!c.started){c.max_y=cy115}if(cx115<c.min_x||!c.started){c.min_x=cx115}if(cy115<c.min_y||!c.started){c.min_y=cy115}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x8,y8,cx9,cy9);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx115,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy115,Int)}c.num_vertices++;break;default:return false}break;case 14:if(c.first_x!=c.x||c.first_y!=c.y){let x=c.first_x|0;let y=c.first_y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++}return true;case 19:case 20:if(in_header){maskbits+=sp/2|0}in_header=false;let o=b.cursor+((maskbits+7)/8|0);if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;break;case 21:in_header=false;if(sp<2){return false}if(c.first_x!=c.x||c.first_y!=c.y){let x=c.first_x|0;let y=c.first_y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++}c.first_x=c.x=c.x+s[sp-2];c.first_y=c.y=c.y+s[sp-1];let x9=c.x|0;let y9=c.y|0;if(c.bounds){if(x9>c.max_x||!c.started){c.max_x=x9}if(y9>c.max_y||!c.started){c.max_y=y9}if(x9<c.min_x||!c.started){c.min_x=x9}if(y9<c.min_y||!c.started){c.min_y=y9}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],1,x9,y9,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;break;case 22:in_header=false;if(sp<1){return false}if(c.first_x!=c.x||c.first_y!=c.y){let x=c.first_x|0;let y=c.first_y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++}c.first_x=c.x=c.x+s[sp-1];c.first_y=c.y=c.y;let x10=c.x|0;let y10=c.y|0;if(c.bounds){if(x10>c.max_x||!c.started){c.max_x=x10}if(y10>c.max_y||!c.started){c.max_y=y10}if(x10<c.min_x||!c.started){c.min_x=x10}if(y10<c.min_y||!c.started){c.min_y=y10}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],1,x10,y10,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;break;case 24:if(sp<8){return false}while(i+5<sp-2){let cx1=c.x+s[i];let cy1=c.y+s[i+1];let cx2=cx1+s[i+2];let cy2=cy1+s[i+3];c.x=cx2+s[i+4];c.y=cy2+s[i+5];let x=c.x|0;let y=c.y|0;let cx=cx1|0;let cy=cy1|0;let cx11=cx2|0;let cy11=cy2|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true;if(cx>c.max_x||!c.started){c.max_x=cx}if(cy>c.max_y||!c.started){c.max_y=cy}if(cx<c.min_x||!c.started){c.min_x=cx}if(cy<c.min_y||!c.started){c.min_y=cy}c.started=true;if(cx11>c.max_x||!c.started){c.max_x=cx11}if(cy11>c.max_y||!c.started){c.max_y=cy11}if(cx11<c.min_x||!c.started){c.min_x=cx11}if(cy11<c.min_y||!c.started){c.min_y=cy11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x,y,cx,cy);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx11,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy11,Int)}c.num_vertices++;i+=6}if(i+1>=sp){return false}c.x+=s[i];c.y+=s[i+1];let x11=c.x|0;let y11=c.y|0;if(c.bounds){if(x11>c.max_x||!c.started){c.max_x=x11}if(y11>c.max_y||!c.started){c.max_y=y11}if(x11<c.min_x||!c.started){c.min_x=x11}if(y11<c.min_y||!c.started){c.min_y=y11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x11,y11,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;break;case 25:if(sp<8){return false}while(i+1<sp-6){c.x+=s[i];c.y+=s[i+1];let x=c.x|0;let y=c.y|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],2,x,y,0,0);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(0,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(0,Int)}c.num_vertices++;i+=2}if(i+5>=sp){return false}let cx116=c.x+s[i];let cy116=c.y+s[i+1];let cx28=cx116+s[i+2];let cy28=cy116+s[i+3];c.x=cx28+s[i+4];c.y=cy28+s[i+5];let x12=c.x|0;let y12=c.y|0;let cx10=cx116|0;let cy10=cy116|0;let cx117=cx28|0;let cy117=cy28|0;if(c.bounds){if(x12>c.max_x||!c.started){c.max_x=x12}if(y12>c.max_y||!c.started){c.max_y=y12}if(x12<c.min_x||!c.started){c.min_x=x12}if(y12<c.min_y||!c.started){c.min_y=y12}c.started=true;if(cx10>c.max_x||!c.started){c.max_x=cx10}if(cy10>c.max_y||!c.started){c.max_y=cy10}if(cx10<c.min_x||!c.started){c.min_x=cx10}if(cy10<c.min_y||!c.started){c.min_y=cy10}c.started=true;if(cx117>c.max_x||!c.started){c.max_x=cx117}if(cy117>c.max_y||!c.started){c.max_y=cy117}if(cx117<c.min_x||!c.started){c.min_x=cx117}if(cy117<c.min_y||!c.started){c.min_y=cy117}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x12,y12,cx10,cy10);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx117,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy117,Int)}c.num_vertices++;break;case 26:case 27:if(sp<4){return false}f=0;if((sp&1)!=0){f=s[i];++i}while(i+3<sp){if(b0==27){let cx1=c.x+s[i];let cy1=c.y+f;let cx2=cx1+s[i+1];let cy2=cy1+s[i+2];c.x=cx2+s[i+3];c.y=cy2;let x=c.x|0;let y=c.y|0;let cx=cx1|0;let cy=cy1|0;let cx11=cx2|0;let cy11=cy2|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true;if(cx>c.max_x||!c.started){c.max_x=cx}if(cy>c.max_y||!c.started){c.max_y=cy}if(cx<c.min_x||!c.started){c.min_x=cx}if(cy<c.min_y||!c.started){c.min_y=cy}c.started=true;if(cx11>c.max_x||!c.started){c.max_x=cx11}if(cy11>c.max_y||!c.started){c.max_y=cy11}if(cx11<c.min_x||!c.started){c.min_x=cx11}if(cy11<c.min_y||!c.started){c.min_y=cy11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x,y,cx,cy);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx11,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy11,Int)}c.num_vertices++}else{let cx1=c.x+f;let cy1=c.y+s[i];let cx2=cx1+s[i+1];let cy2=cy1+s[i+2];c.x=cx2;c.y=cy2+s[i+3];let x=c.x|0;let y=c.y|0;let cx=cx1|0;let cy=cy1|0;let cx11=cx2|0;let cy11=cy2|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true;if(cx>c.max_x||!c.started){c.max_x=cx}if(cy>c.max_y||!c.started){c.max_y=cy}if(cx<c.min_x||!c.started){c.min_x=cx}if(cy<c.min_y||!c.started){c.min_y=cy}c.started=true;if(cx11>c.max_x||!c.started){c.max_x=cx11}if(cy11>c.max_y||!c.started){c.max_y=cy11}if(cx11<c.min_x||!c.started){c.min_x=cx11}if(cy11<c.min_y||!c.started){c.min_y=cy11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x,y,cx,cy);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx11,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy11,Int)}c.num_vertices++}f=0;i+=4}break;case 10:case 29:if(b0==10){if(!has_subrs){if(info.fdselect.data.get_length()!=0){let fdselect=info.fdselect;let nranges;let start;let end;let v;let fmt;let fdselector=-1;let i;if(0>fdselect.data.get_length()){throw haxe_Exception.thrown("Error")}fdselect.cursor=0>fdselect.data.get_length()?fdselect.data.get_length():0;if(fdselect.cursor>=fdselect.data.get_length()){fmt=0}else{let pos=fdselect.cursor++;if(pos==null){pos=0}fmt=fdselect.data.readU8(pos)}if(fmt==0){let o=fdselect.cursor+glyph_index;if(o>fdselect.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}fdselect.cursor=o>fdselect.data.get_length()||o<0?fdselect.data.get_length():o;if(fdselect.cursor>=fdselect.data.get_length()){fdselector=0}else{let pos=fdselect.cursor++;if(pos==null){pos=0}fdselector=fdselect.data.readU8(pos)}}else if(fmt==3){let v1=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v;if(fdselect.cursor>=fdselect.data.get_length()){v=0}else{let pos=fdselect.cursor++;if(pos==null){pos=0}v=fdselect.data.readU8(pos)}v1=v1<<8|v}nranges=v1;let v2=0;let _g2=0;let _g3=2;while(_g2<_g3){let i=_g2++;let v;if(fdselect.cursor>=fdselect.data.get_length()){v=0}else{let pos=fdselect.cursor++;if(pos==null){pos=0}v=fdselect.data.readU8(pos)}v2=v2<<8|v}start=v2;let _g4=0;let _g5=nranges;while(_g4<_g5){let i=_g4++;if(fdselect.cursor>=fdselect.data.get_length()){v=0}else{let pos=fdselect.cursor++;if(pos==null){pos=0}v=fdselect.data.readU8(pos)}let v1=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v;if(fdselect.cursor>=fdselect.data.get_length()){v=0}else{let pos=fdselect.cursor++;if(pos==null){pos=0}v=fdselect.data.readU8(pos)}v1=v1<<8|v}end=v1;if(glyph_index>=start&&glyph_index<end){fdselector=v;break}start=end}}if(fdselector==-1){let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0}let cff=info.cff;let b=info.fontdicts;if(0>b.data.get_length()){throw haxe_Exception.thrown("Error")}b.cursor=0>b.data.get_length()?b.data.get_length():0;let v1=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v;if(b.cursor>=b.data.get_length()){v=0}else{let pos=b.cursor++;if(pos==null){pos=0}v=b.data.readU8(pos)}v1=v1<<8|v}let count=v1;let offsize;if(b.cursor>=b.data.get_length()){offsize=0}else{let pos=b.cursor++;if(pos==null){pos=0}offsize=b.data.readU8(pos)}if(!(fdselector>=0&&fdselector<count)){throw haxe_Exception.thrown("Error")}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=b.cursor+fdselector*offsize;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let v2=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g2=0;let _g3=offsize;while(_g2<_g3){let i=_g2++;let v;if(b.cursor>=b.data.get_length()){v=0}else{let pos=b.cursor++;if(pos==null){pos=0}v=b.data.readU8(pos)}v2=v2<<8|v}let start1=v2;let v3=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g4=0;let _g5=offsize;while(_g4<_g5){let i=_g4++;let v;if(b.cursor>=b.data.get_length()){v=0}else{let pos=b.cursor++;if(pos==null){pos=0}v=b.data.readU8(pos)}v3=v3<<8|v}let end1=v3;let o1=2+(count+1)*offsize+start1;let s=end1-start1;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;let fontdict;if(o1<0||s<0||o1>b.data.get_length()||s>b.data.get_length()-o1){fontdict=r1}else{r1.data=b.data.sub(o1,s);fontdict=r1}let subrsoff=[0];let private_loc=[0,0];let i1=0;if(0>fontdict.data.get_length()){throw haxe_Exception.thrown("Error")}fontdict.cursor=0>fontdict.data.get_length()?fontdict.data.get_length():0;let ret=null;while(fontdict.cursor<fontdict.data.get_length()){let start=fontdict.cursor;let op;while(true){let subrs;if(fontdict.cursor>=fontdict.data.get_length()){subrs=0}else{let pos=fontdict.cursor;if(pos==null){pos=0}subrs=fontdict.data.readU8(pos)}if(!(subrs>=28)){break}let v;let b0;if(fontdict.cursor>=fontdict.data.get_length()){b0=0}else{let pos=fontdict.cursor;if(pos==null){pos=0}b0=fontdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=fontdict.cursor+1;if(o>fontdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}fontdict.cursor=o>fontdict.data.get_length()||o<0?fontdict.data.get_length():o;while(fontdict.cursor<fontdict.data.get_length()){if(fontdict.cursor>=fontdict.data.get_length()){v=0}else{let pos=fontdict.cursor++;if(pos==null){pos=0}v=fontdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(fontdict.cursor>=fontdict.data.get_length()){b0=0}else{let pos=fontdict.cursor++;if(pos==null){pos=0}b0=fontdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(fontdict.cursor<fontdict.data.get_length()){let pos=fontdict.cursor++;if(pos==null){pos=0}fontdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(fontdict.cursor<fontdict.data.get_length()){let pos=fontdict.cursor++;if(pos==null){pos=0}fontdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(fontdict.cursor>=fontdict.data.get_length()){v1=0}else{let pos=fontdict.cursor++;if(pos==null){pos=0}v1=fontdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(fontdict.cursor>=fontdict.data.get_length()){v1=0}else{let pos=fontdict.cursor++;if(pos==null){pos=0}v1=fontdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=fontdict.cursor;if(fontdict.cursor>=fontdict.data.get_length()){op=0}else{let pos=fontdict.cursor++;if(pos==null){pos=0}op=fontdict.data.readU8(pos)}if(op==12){let op1;if(fontdict.cursor>=fontdict.data.get_length()){op1=0}else{let pos=fontdict.cursor++;if(pos==null){pos=0}op1=fontdict.data.readU8(pos)}op=op1|256}if(op==18){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>fontdict.data.get_length()||s>fontdict.data.get_length()-start){ret=r1}else{r1.data=fontdict.data.sub(start,s);ret=r1}break}}let operands;if(ret!=null){operands=ret}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>fontdict.data.get_length()||0>fontdict.data.get_length()){operands=r1}else{r1.data=fontdict.data.sub(0,0);operands=r1}}while(i1<2&&operands.cursor<operands.data.get_length()){let b0;if(operands.cursor>=operands.data.get_length()){b0=0}else{let pos=operands.cursor++;if(pos==null){pos=0}b0=operands.data.readU8(pos)}let subrs;if(b0>=32&&b0<=246){subrs=b0-139}else if(b0>=247&&b0<=250){let subrs1;if(operands.cursor>=operands.data.get_length()){subrs1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}subrs1=operands.data.readU8(pos)}subrs=(b0-247)*256+subrs1+108}else if(b0>=251&&b0<=254){let subrs1;if(operands.cursor>=operands.data.get_length()){subrs1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}subrs1=operands.data.readU8(pos)}subrs=-(b0-251)*256-subrs1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}subrs=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}subrs=v}else{throw haxe_Exception.thrown("Error")}private_loc[i1]=subrs;++i1}if(private_loc[1]==0||private_loc[0]==0){let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;subrs=r}else{let o=private_loc[1];let s=private_loc[0];let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;let pdict;if(o<0||s<0||o>cff.data.get_length()||s>cff.data.get_length()-o){pdict=r1}else{r1.data=cff.data.sub(o,s);pdict=r1}let i=0;if(0>pdict.data.get_length()){throw haxe_Exception.thrown("Error")}pdict.cursor=0>pdict.data.get_length()?pdict.data.get_length():0;let ret=null;while(pdict.cursor<pdict.data.get_length()){let start=pdict.cursor;let op;while(true){let subrs;if(pdict.cursor>=pdict.data.get_length()){subrs=0}else{let pos=pdict.cursor;if(pos==null){pos=0}subrs=pdict.data.readU8(pos)}if(!(subrs>=28)){break}let v;let b0;if(pdict.cursor>=pdict.data.get_length()){b0=0}else{let pos=pdict.cursor;if(pos==null){pos=0}b0=pdict.data.readU8(pos)}if(b0<28){throw haxe_Exception.thrown("Error")}if(b0==30){let o=pdict.cursor+1;if(o>pdict.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}pdict.cursor=o>pdict.data.get_length()||o<0?pdict.data.get_length():o;while(pdict.cursor<pdict.data.get_length()){if(pdict.cursor>=pdict.data.get_length()){v=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}v=pdict.data.readU8(pos)}if((v&15)==15||v>>4==15){break}}}else{let b0;if(pdict.cursor>=pdict.data.get_length()){b0=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}b0=pdict.data.readU8(pos)}if(!(b0>=32&&b0<=246)){if(b0>=247&&b0<=250){if(pdict.cursor<pdict.data.get_length()){let pos=pdict.cursor++;if(pos==null){pos=0}pdict.data.readU8(pos)}}else if(b0>=251&&b0<=254){if(pdict.cursor<pdict.data.get_length()){let pos=pdict.cursor++;if(pos==null){pos=0}pdict.data.readU8(pos)}}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(pdict.cursor>=pdict.data.get_length()){v1=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}v1=pdict.data.readU8(pos)}v=v<<8|v1}}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(pdict.cursor>=pdict.data.get_length()){v1=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}v1=pdict.data.readU8(pos)}v=v<<8|v1}}else{throw haxe_Exception.thrown("Error")}}}}let end=pdict.cursor;if(pdict.cursor>=pdict.data.get_length()){op=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}op=pdict.data.readU8(pos)}if(op==12){let op1;if(pdict.cursor>=pdict.data.get_length()){op1=0}else{let pos=pdict.cursor++;if(pos==null){pos=0}op1=pdict.data.readU8(pos)}op=op1|256}if(op==19){let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>pdict.data.get_length()||s>pdict.data.get_length()-start){ret=r1}else{r1.data=pdict.data.sub(start,s);ret=r1}break}}let operands;if(ret!=null){operands=ret}else{let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(0>pdict.data.get_length()||0>pdict.data.get_length()){operands=r1}else{r1.data=pdict.data.sub(0,0);operands=r1}}while(i<1&&operands.cursor<operands.data.get_length()){let b0;if(operands.cursor>=operands.data.get_length()){b0=0}else{let pos=operands.cursor++;if(pos==null){pos=0}b0=operands.data.readU8(pos)}let subrs;if(b0>=32&&b0<=246){subrs=b0-139}else if(b0>=247&&b0<=250){let subrs1;if(operands.cursor>=operands.data.get_length()){subrs1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}subrs1=operands.data.readU8(pos)}subrs=(b0-247)*256+subrs1+108}else if(b0>=251&&b0<=254){let subrs1;if(operands.cursor>=operands.data.get_length()){subrs1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}subrs1=operands.data.readU8(pos)}subrs=-(b0-251)*256-subrs1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}subrs=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(operands.cursor>=operands.data.get_length()){v1=0}else{let pos=operands.cursor++;if(pos==null){pos=0}v1=operands.data.readU8(pos)}v=v<<8|v1}subrs=v}else{throw haxe_Exception.thrown("Error")}subrsoff[i]=subrs;++i}if(subrsoff[0]==0){let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;subrs=r}else{let o=private_loc[1]+subrsoff[0];if(o>cff.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}cff.cursor=o>cff.data.get_length()||o<0?cff.data.get_length():o;let start=cff.cursor;let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(cff.cursor>=cff.data.get_length()){v1=0}else{let pos=cff.cursor++;if(pos==null){pos=0}v1=cff.data.readU8(pos)}v=v<<8|v1}let count=v;if(count>0){let offsize;if(cff.cursor>=cff.data.get_length()){offsize=0}else{let pos=cff.cursor++;if(pos==null){pos=0}offsize=cff.data.readU8(pos)}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=cff.cursor+offsize*count;if(o>cff.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}cff.cursor=o>cff.data.get_length()||o<0?cff.data.get_length():o;let v=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g=0;let _g1=offsize;while(_g<_g1){let i=_g++;let v1;if(cff.cursor>=cff.data.get_length()){v1=0}else{let pos=cff.cursor++;if(pos==null){pos=0}v1=cff.data.readU8(pos)}v=v<<8|v1}let o1=cff.cursor+(v-1);if(o1>cff.data.get_length()||o1<0){throw haxe_Exception.thrown("Error")}cff.cursor=o1>cff.data.get_length()||o1<0?cff.data.get_length():o1;let s=cff.cursor-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(start<0||s<0||start>cff.data.get_length()||s>cff.data.get_length()-start){subrs=r1}else{r1.data=cff.data.sub(start,s);subrs=r1}}else{subrs=cff}}}}has_subrs=true}}if(sp<1){return false}v=s[--sp]|0;if(subr_stack_height>=10){return false}subr_stack[subr_stack_height++]=b;let idx=b0==10?subrs:info.gsubrs;let n=v;if(0>idx.data.get_length()){throw haxe_Exception.thrown("Error")}idx.cursor=0>idx.data.get_length()?idx.data.get_length():0;let v1=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v;if(idx.cursor>=idx.data.get_length()){v=0}else{let pos=idx.cursor++;if(pos==null){pos=0}v=idx.data.readU8(pos)}v1=v1<<8|v}let count=v1;let bias=107;if(count>=33900){bias=32768}else if(count>=1240){bias=1131}n+=bias;if(n<0||n>=count){let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;b=r}else{if(0>idx.data.get_length()){throw haxe_Exception.thrown("Error")}idx.cursor=0>idx.data.get_length()?idx.data.get_length():0;let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(idx.cursor>=idx.data.get_length()){v1=0}else{let pos=idx.cursor++;if(pos==null){pos=0}v1=idx.data.readU8(pos)}v=v<<8|v1}let count=v;let offsize;if(idx.cursor>=idx.data.get_length()){offsize=0}else{let pos=idx.cursor++;if(pos==null){pos=0}offsize=idx.data.readU8(pos)}if(!(n>=0&&n<count)){throw haxe_Exception.thrown("Error")}if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let o=idx.cursor+n*offsize;if(o>idx.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}idx.cursor=o>idx.data.get_length()||o<0?idx.data.get_length():o;let v1=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g2=0;let _g3=offsize;while(_g2<_g3){let i=_g2++;let v;if(idx.cursor>=idx.data.get_length()){v=0}else{let pos=idx.cursor++;if(pos==null){pos=0}v=idx.data.readU8(pos)}v1=v1<<8|v}let start=v1;let v2=0;if(!(offsize>=1&&offsize<=4)){throw haxe_Exception.thrown("Error")}let _g4=0;let _g5=offsize;while(_g4<_g5){let i=_g4++;let v;if(idx.cursor>=idx.data.get_length()){v=0}else{let pos=idx.cursor++;if(pos==null){pos=0}v=idx.data.readU8(pos)}v2=v2<<8|v}let end=v2;let o1=2+(count+1)*offsize+start;let s=end-start;let r=new kha_graphics2_truetype_Stbtt_$_$buf;r.data=null;r.cursor=0;let r1=r;if(o1<0||s<0||o1>idx.data.get_length()||s>idx.data.get_length()-o1){b=r1}else{r1.data=idx.data.sub(o1,s);b=r1}}if(b.data.get_length()==0){return false}b.cursor=0;clear_stack=false;break;case 30:if(sp<4){return false}while(i+3<sp){let cx1=c.x;let cy1=c.y+s[i];let cx2=cx1+s[i+1];let cy2=cy1+s[i+2];c.x=cx2+s[i+3];c.y=cy2+(sp-i==5?s[i+4]:0);let x=c.x|0;let y=c.y|0;let cx=cx1|0;let cy=cy1|0;let cx11=cx2|0;let cy11=cy2|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true;if(cx>c.max_x||!c.started){c.max_x=cx}if(cy>c.max_y||!c.started){c.max_y=cy}if(cx<c.min_x||!c.started){c.min_x=cx}if(cy<c.min_y||!c.started){c.min_y=cy}c.started=true;if(cx11>c.max_x||!c.started){c.max_x=cx11}if(cy11>c.max_y||!c.started){c.max_y=cy11}if(cx11<c.min_x||!c.started){c.min_x=cx11}if(cy11<c.min_y||!c.started){c.min_y=cy11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x,y,cx,cy);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx11,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy11,Int)}c.num_vertices++;i+=4;if(i+3>=sp){break}let cx12=c.x+s[i];let cy12=c.y;let cx21=cx12+s[i+1];let cy21=cy12+s[i+2];c.x=cx21+(sp-i==5?s[i+4]:0);c.y=cy21+s[i+3];let x1=c.x|0;let y1=c.y|0;let cx3=cx12|0;let cy3=cy12|0;let cx13=cx21|0;let cy13=cy21|0;if(c.bounds){if(x1>c.max_x||!c.started){c.max_x=x1}if(y1>c.max_y||!c.started){c.max_y=y1}if(x1<c.min_x||!c.started){c.min_x=x1}if(y1<c.min_y||!c.started){c.min_y=y1}c.started=true;if(cx3>c.max_x||!c.started){c.max_x=cx3}if(cy3>c.max_y||!c.started){c.max_y=cy3}if(cx3<c.min_x||!c.started){c.min_x=cx3}if(cy3<c.min_y||!c.started){c.min_y=cy3}c.started=true;if(cx13>c.max_x||!c.started){c.max_x=cx13}if(cy13>c.max_y||!c.started){c.max_y=cy13}if(cx13<c.min_x||!c.started){c.min_x=cx13}if(cy13<c.min_y||!c.started){c.min_y=cy13}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x1,y1,cx3,cy3);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx13,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy13,Int)}c.num_vertices++;i+=4}break;case 31:if(sp<4){return false}while(i+3<sp){let cx1=c.x+s[i];let cy1=c.y;let cx2=cx1+s[i+1];let cy2=cy1+s[i+2];c.x=cx2+(sp-i==5?s[i+4]:0);c.y=cy2+s[i+3];let x=c.x|0;let y=c.y|0;let cx=cx1|0;let cy=cy1|0;let cx11=cx2|0;let cy11=cy2|0;if(c.bounds){if(x>c.max_x||!c.started){c.max_x=x}if(y>c.max_y||!c.started){c.max_y=y}if(x<c.min_x||!c.started){c.min_x=x}if(y<c.min_y||!c.started){c.min_y=y}c.started=true;if(cx>c.max_x||!c.started){c.max_x=cx}if(cy>c.max_y||!c.started){c.max_y=cy}if(cx<c.min_x||!c.started){c.min_x=cx}if(cy<c.min_y||!c.started){c.min_y=cy}c.started=true;if(cx11>c.max_x||!c.started){c.max_x=cx11}if(cy11>c.max_y||!c.started){c.max_y=cy11}if(cx11<c.min_x||!c.started){c.min_x=cx11}if(cy11<c.min_y||!c.started){c.min_y=cy11}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x,y,cx,cy);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx11,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy11,Int)}c.num_vertices++;i+=4;if(i+3>=sp){break}let cx12=c.x;let cy12=c.y+s[i];let cx21=cx12+s[i+1];let cy21=cy12+s[i+2];c.x=cx21+s[i+3];c.y=cy21+(sp-i==5?s[i+4]:0);let x1=c.x|0;let y1=c.y|0;let cx3=cx12|0;let cy3=cy12|0;let cx13=cx21|0;let cy13=cy21|0;if(c.bounds){if(x1>c.max_x||!c.started){c.max_x=x1}if(y1>c.max_y||!c.started){c.max_y=y1}if(x1<c.min_x||!c.started){c.min_x=x1}if(y1<c.min_y||!c.started){c.min_y=y1}c.started=true;if(cx3>c.max_x||!c.started){c.max_x=cx3}if(cy3>c.max_y||!c.started){c.max_y=cy3}if(cx3<c.min_x||!c.started){c.min_x=cx3}if(cy3<c.min_y||!c.started){c.min_y=cy3}c.started=true;if(cx13>c.max_x||!c.started){c.max_x=cx13}if(cy13>c.max_y||!c.started){c.max_y=cy13}if(cx13<c.min_x||!c.started){c.min_x=cx13}if(cy13<c.min_y||!c.started){c.min_y=cy13}c.started=true}else{kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],4,x1,y1,cx3,cy3);c.pvertices[c.num_vertices].cx1=js_Boot.__cast(cx13,Int);c.pvertices[c.num_vertices].cy1=js_Boot.__cast(cy13,Int)}c.num_vertices++;i+=4}break;default:if(b0!=255&&b0!=28&&(b0<32||b0>254)){return false}if(b0==255){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}f=v/65536}else{let o=b.cursor+-1;if(o>b.data.get_length()||o<0){throw haxe_Exception.thrown("Error")}b.cursor=o>b.data.get_length()||o<0?b.data.get_length():o;let b0;if(b.cursor>=b.data.get_length()){b0=0}else{let pos=b.cursor++;if(pos==null){pos=0}b0=b.data.readU8(pos)}if(b0>=32&&b0<=246){f=b0-139}else if(b0>=247&&b0<=250){let f1;if(b.cursor>=b.data.get_length()){f1=0}else{let pos=b.cursor++;if(pos==null){pos=0}f1=b.data.readU8(pos)}f=(b0-247)*256+f1+108}else if(b0>=251&&b0<=254){let f1;if(b.cursor>=b.data.get_length()){f1=0}else{let pos=b.cursor++;if(pos==null){pos=0}f1=b.data.readU8(pos)}f=-(b0-251)*256-f1-108}else if(b0==28){let v=0;let _g=0;let _g1=2;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}f=v}else if(b0==29){let v=0;let _g=0;let _g1=4;while(_g<_g1){let i=_g++;let v1;if(b.cursor>=b.data.get_length()){v1=0}else{let pos=b.cursor++;if(pos==null){pos=0}v1=b.data.readU8(pos)}v=v<<8|v1}f=v}else{throw haxe_Exception.thrown("Error")}}if(sp>=48){return false}s[sp++]=f;clear_stack=false}if(clear_stack){sp=0}}return false}static stbtt__GetGlyphShapeT2(info,glyph_index){let tmp=new kha_graphics2_truetype_Stbtt_$_$csctx;tmp.bounds=true;tmp.started=false;tmp.first_x=0;tmp.first_y=0;tmp.x=0;tmp.y=0;tmp.min_x=0;tmp.min_y=0;tmp.max_x=0;tmp.max_y=0;tmp.pvertices=null;tmp.num_vertices=0;let count_ctx=tmp;let tmp1=new kha_graphics2_truetype_Stbtt_$_$csctx;tmp1.bounds=false;tmp1.started=false;tmp1.first_x=0;tmp1.first_y=0;tmp1.x=0;tmp1.y=0;tmp1.min_x=0;tmp1.min_y=0;tmp1.max_x=0;tmp1.max_y=0;tmp1.pvertices=null;tmp1.num_vertices=0;let output_ctx=tmp1;if(kha_graphics2_truetype_StbTruetype.stbtt__run_charstring(info,glyph_index,count_ctx)){let this1=new Array(count_ctx.num_vertices);output_ctx.pvertices=this1;let _g=0;let _g1=count_ctx.num_vertices;while(_g<_g1){let i=_g++;output_ctx.pvertices[i]=new kha_graphics2_truetype_Stbtt_$vertex}if(kha_graphics2_truetype_StbTruetype.stbtt__run_charstring(info,glyph_index,output_ctx)){if(output_ctx.num_vertices!=count_ctx.num_vertices){throw haxe_Exception.thrown("Error")}return output_ctx.pvertices}}return null}static stbtt__GetGlyphInfoT2(info,glyph_index,rect){let tmp=new kha_graphics2_truetype_Stbtt_$_$csctx;tmp.bounds=true;tmp.started=false;tmp.first_x=0;tmp.first_y=0;tmp.x=0;tmp.y=0;tmp.min_x=0;tmp.min_y=0;tmp.max_x=0;tmp.max_y=0;tmp.pvertices=null;tmp.num_vertices=0;let c=tmp;let r=kha_graphics2_truetype_StbTruetype.stbtt__run_charstring(info,glyph_index,c);if(rect!=null){rect.x0=r?c.min_x:0;rect.y0=r?c.min_y:0;rect.x1=r?c.max_x:0;rect.y1=r?c.max_y:0}if(r){return c.num_vertices}else{return 0}}static stbtt_GetGlyphShape(info,glyph_index){if(info.cff.data==null||info.cff.data.get_length()==0){return kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphShapeTT(info,glyph_index)}else{return kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphShapeT2(info,glyph_index)}}static stbtt_GetGlyphHMetrics(info,glyph_index){let p=info.data;let pos=info.hhea+34;if(pos==null){pos=0}let ch1=p.readU8(pos);let ch2=p.readU8(pos+1);let numOfLongHorMetrics=ch2|ch1<<8;let metrics=new kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics;if(glyph_index<numOfLongHorMetrics){let p=info.data;let pos=info.hmtx+4*glyph_index;if(pos==null){pos=0}let ch1=p.readU8(pos);let ch2=p.readU8(pos+1);let n=ch2|ch1<<8;metrics.advanceWidth=(n&32768)!=0?n-65536:n;let p1=info.data;let pos1=info.hmtx+4*glyph_index+2;if(pos1==null){pos1=0}let ch11=p1.readU8(pos1);let ch21=p1.readU8(pos1+1);let n1=ch21|ch11<<8;metrics.leftSideBearing=(n1&32768)!=0?n1-65536:n1}else{let p=info.data;let pos=info.hmtx+4*(numOfLongHorMetrics-1);if(pos==null){pos=0}let ch1=p.readU8(pos);let ch2=p.readU8(pos+1);let n=ch2|ch1<<8;metrics.advanceWidth=(n&32768)!=0?n-65536:n;let p1=info.data;let pos1=info.hmtx+4*numOfLongHorMetrics+2*(glyph_index-numOfLongHorMetrics);if(pos1==null){pos1=0}let ch11=p1.readU8(pos1);let ch21=p1.readU8(pos1+1);let n1=ch21|ch11<<8;metrics.leftSideBearing=(n1&32768)!=0?n1-65536:n1}return metrics}static stbtt_GetFontVMetrics(info){let metrics=new kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics;let p=info.data;let pos=info.hhea+4;if(pos==null){pos=0}let ch1=p.readU8(pos);let ch2=p.readU8(pos+1);let n=ch2|ch1<<8;metrics.ascent=(n&32768)!=0?n-65536:n;let p1=info.data;let pos1=info.hhea+6;if(pos1==null){pos1=0}let ch11=p1.readU8(pos1);let ch21=p1.readU8(pos1+1);let n1=ch21|ch11<<8;metrics.descent=(n1&32768)!=0?n1-65536:n1;let p2=info.data;let pos2=info.hhea+8;if(pos2==null){pos2=0}let ch12=p2.readU8(pos2);let ch22=p2.readU8(pos2+1);let n2=ch22|ch12<<8;metrics.lineGap=(n2&32768)!=0?n2-65536:n2;return metrics}static stbtt_ScaleForPixelHeight(info,height){let p=info.data;let pos=info.hhea+4;if(pos==null){pos=0}let ch1=p.readU8(pos);let ch2=p.readU8(pos+1);let n=ch2|ch1<<8;let p1=info.data;let pos1=info.hhea+6;if(pos1==null){pos1=0}let ch11=p1.readU8(pos1);let ch21=p1.readU8(pos1+1);let n1=ch21|ch11<<8;let fheight=((n&32768)!=0?n-65536:n)-((n1&32768)!=0?n1-65536:n1);return height/fheight}static stbtt_GetGlyphBitmapBoxSubpixel(font,glyph,scale_x,scale_y,shift_x,shift_y){let rect=new kha_graphics2_truetype_Stbtt_$temp_$rect;if(!kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(font,glyph,rect)){rect.x0=0;rect.y0=0;rect.x1=0;rect.y1=0}else{let x0=rect.x0;let x1=rect.x1;let y0=rect.y0;let y1=rect.y1;rect.x0=Math.floor(x0*scale_x+shift_x);rect.y0=Math.floor(-y1*scale_y+shift_y);rect.x1=Math.ceil(x1*scale_x+shift_x);rect.y1=Math.ceil(-y0*scale_y+shift_y)}return rect}static stbtt_GetGlyphBitmapBox(font,glyph,scale_x,scale_y){return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(font,glyph,scale_x,scale_y,0,0)}static stbtt__new_active(e,eIndex,off_x,start_point){let z=new kha_graphics2_truetype_Stbtt_$_$active_$edge;let dxdy=(e[eIndex].x1-e[eIndex].x0)/(e[eIndex].y1-e[eIndex].y0);if(z==null){throw haxe_Exception.thrown("Error")}if(z==null){return z}z.fdx=dxdy;z.fdy=dxdy!=0?1/dxdy:0;z.fx=e[eIndex].x0+dxdy*(start_point-e[eIndex].y0);z.fx-=off_x;z.direction=e[eIndex].invert?1:-1;z.sy=e[eIndex].y0;z.ey=e[eIndex].y1;z.next=null;return z}static stbtt__handle_clipped_edge(scanline,scanlineIndex,x,e,x0,y0,x1,y1){if(y0==y1){return}if(!(y0<y1)){throw haxe_Exception.thrown("Error")}if(!(e.sy<=e.ey)){throw haxe_Exception.thrown("Error")}if(y0>e.ey){return}if(y1<e.sy){return}if(y0<e.sy){x0+=(x1-x0)*(e.sy-y0)/(y1-y0);y0=e.sy}if(y1>e.ey){x1+=(x1-x0)*(e.ey-y1)/(y1-y0);y1=e.ey}if(x0==x){if(!(x1<=x+1)){throw haxe_Exception.thrown("Error")}}else if(x0==x+1){if(!(x1>=x)){throw haxe_Exception.thrown("Error")}}else if(x0<=x){if(!(x1<=x)){throw haxe_Exception.thrown("Error")}}else if(x0>=x+1){if(!(x1>=x+1)){throw haxe_Exception.thrown("Error")}}else if(!(x1>=x&&x1<=x+1)){throw haxe_Exception.thrown("Error")}if(x0<=x&&x1<=x){scanline[scanlineIndex+x]+=e.direction*(y1-y0)}else if(!(x0>=x+1&&x1>=x+1)){if(!(x0>=x&&x0<=x+1&&x1>=x&&x1<=x+1)){throw haxe_Exception.thrown("Error")}scanline[scanlineIndex+x]+=e.direction*(y1-y0)*(1-(x0-x+(x1-x))/2)}}static stbtt__fill_active_edges_new(scanline,scanline_fill,scanline_fillIndex,len,e,y_top){let y_bottom=y_top+1;while(e!=null){if(!(e.ey>=y_top)){throw haxe_Exception.thrown("Error")}if(e.fdx==0){let x0=e.fx;if(x0<len){if(x0>=0){kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x0|0,e,x0,y_top,x0,y_bottom);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline_fill,scanline_fillIndex-1,x0+1|0,e,x0,y_top,x0,y_bottom)}else{kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline_fill,scanline_fillIndex-1,0,e,x0,y_top,x0,y_bottom)}}}else{let x0=e.fx;let dx=e.fdx;let xb=x0+dx;let x_top;let x_bottom;let sy0;let sy1;let dy=e.fdy;if(!(e.sy<=y_bottom&&e.ey>=y_top)){throw haxe_Exception.thrown("Error")}if(e.sy>y_top){x_top=x0+dx*(e.sy-y_top);sy0=e.sy}else{x_top=x0;sy0=y_top}if(e.ey<y_bottom){x_bottom=x0+dx*(e.ey-y_top);sy1=e.ey}else{x_bottom=xb;sy1=y_bottom}if(x_top>=0&&x_bottom>=0&&x_top<len&&x_bottom<len){if((x_top|0)==(x_bottom|0)){let x=x_top|0;let height=sy1-sy0;if(!(x>=0&&x<len)){throw haxe_Exception.thrown("Error")}scanline[x]+=e.direction*(1-(x_top-x+(x_bottom-x))/2)*height;scanline_fill[scanline_fillIndex+x]+=e.direction*height}else{let x;if(x_top>x_bottom){sy0=y_bottom-(sy0-y_top);sy1=y_bottom-(sy1-y_top);let t=sy0;sy0=sy1;sy1=t;t=x_bottom;x_bottom=x_top;x_top=t;dx=-dx;dy=-dy;t=x0;x0=xb;xb=t}let x1=x_top|0;let x2=x_bottom|0;let y_crossing=(x1+1-x0)*dy+y_top;let sign=e.direction;let area=sign*(y_crossing-sy0);scanline[x1]+=area*(1-(x_top-x1+(x1+1-x1))/2);let step=sign*dy;let _g=x1+1;let _g1=x2;while(_g<_g1){let x=_g++;scanline[x]+=area+step/2;area+=step}y_crossing+=dy*(x2-(x1+1));if(!(Math.abs(area)<=1.01)){throw haxe_Exception.thrown("Error")}scanline[x2]+=area+sign*(1-(x2-x2+(x_bottom-x2))/2)*(sy1-y_crossing);scanline_fill[scanline_fillIndex+x2]+=sign*(sy1-sy0)}}else{let _g=0;let _g1=len;while(_g<_g1){let x=_g++;let y0=y_top;let x1=x;let x2=x+1;let x3=xb;let y3=y_bottom;let y1=(x-x0)/dx+y_top;let y2=(x+1-x0)/dx+y_top;if(x0<x1&&x3>x2){kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x0,y0,x1,y1);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x1,y1,x2,y2);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x2,y2,x3,y3)}else if(x3<x1&&x0>x2){kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x0,y0,x2,y2);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x2,y2,x1,y1);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x1,y1,x3,y3)}else if(x0<x1&&x3>x1){kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x0,y0,x1,y1);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x1,y1,x3,y3)}else if(x3<x1&&x0>x1){kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x0,y0,x1,y1);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x1,y1,x3,y3)}else if(x0<x2&&x3>x2){kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x0,y0,x2,y2);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x2,y2,x3,y3)}else if(x3<x2&&x0>x2){kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x0,y0,x2,y2);kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x2,y2,x3,y3)}else{kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x,e,x0,y0,x3,y3)}}}}e=e.next}}static stbtt__rasterize_sorted_edges(result,e,n,vsubsample,off_x,off_y){let active=null;let j=0;let scanline;let scanline2Index=0;let eIndex=0;if(result.w>64){let this1=new Array(result.w*2+1);scanline=this1}else{let this1=new Array(129);scanline=this1}let scanline2=scanline;scanline2Index=result.w;let y=off_y;e[eIndex+n].y0=off_y+result.h+1;while(j<result.h){let scan_y_top=y+0;let scan_y_bottom=y+1;let step_value=active;let step_parent=null;let _g=0;let _g1=result.w;while(_g<_g1){let i=_g++;scanline[i]=0}let _g2=0;let _g3=result.w+1;while(_g2<_g3){let i=_g2++;scanline2[scanline2Index+i]=0}while(step_value!=null){let z=step_value;if(z.ey<=scan_y_top){if(step_parent==null){active=z.next;step_value=z.next}else{step_parent.next=z.next;step_value=z.next}if(z.direction==0){throw haxe_Exception.thrown("Error")}z.direction=0}else{step_parent=step_value;step_value=step_value.next}}while(e[eIndex].y0<=scan_y_bottom){if(e[eIndex].y0!=e[eIndex].y1){let z=kha_graphics2_truetype_StbTruetype.stbtt__new_active(e,eIndex,off_x,scan_y_top);if(!(z.ey>=scan_y_top)){throw haxe_Exception.thrown("Error")}if(z!=null){if(j==0&&off_y!=0){if(z.ey<scan_y_top){z.ey=scan_y_top}}if(!(z.ey>=scan_y_top)){throw haxe_Exception.thrown("Error")}}z.next=active;active=z}++eIndex}if(active!=null){kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new(scanline,scanline2,scanline2Index+1,result.w,active,scan_y_top)}let sum=0;let _g4=0;let _g5=result.w;while(_g4<_g5){let i=_g4++;sum+=scanline2[scanline2Index+i];let k=scanline[i]+sum;k=Math.abs(k)*255+.5;let m=k|0;if(m>255){m=255}result.pixels.writeU8(result.pixels_offset+j*result.stride+i,m)}step_parent=null;step_value=active;while(step_value!=null){let z=step_value;z.fx+=z.fdx;step_parent=step_value;step_value=step_value.next}++y;++j}}static STBTT__COMPARE(a,b){return a.y0<b.y0}static stbtt__sort_edges_ins_sort(p,n){let i;let j;let _g=1;let _g1=n;while(_g<_g1){let i=_g++;let t=p[i];let a=t;j=i;while(j>0){let b=p[j-1];let c=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(a,b);if(!c){break}p[j]=p[j-1];--j}if(i!=j){p[j]=t}}}static stbtt__sort_edges_quicksort(p,pIndex,n){while(n>12){let t;let c;let m=n>>1;let c01=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex+m]);let c12=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex+m],p[pIndex+n-1]);if(c01!=c12){c=kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex+n-1]);let z=c==c12?0:n-1;t=p[pIndex+z];p[pIndex+z]=p[pIndex+m];p[pIndex+m]=t}t=p[pIndex];p[pIndex]=p[pIndex+m];p[pIndex+m]=t;let i=1;let j=n-1;while(true){while(kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex+i],p[pIndex]))++i;while(kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex+j]))--j;if(i>=j){break}t=p[pIndex+i];p[pIndex+i]=p[pIndex+j];p[pIndex+j]=t;++i;--j}if(j<n-i){kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,pIndex,j);pIndex+=i;n-=i}else{kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,pIndex+i,n-i);n=j}}}static stbtt__sort_edges(p,n){kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,0,n);kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort(p,n)}static stbtt__rasterize(result,pts,wcount,windings,scale_x,scale_y,shift_x,shift_y,off_x,off_y,invert){let y_scale_inv=invert?-scale_y:scale_y;let i;let j;let k;let vsubsample=1;let ptsIndex=0;let n=0;let _g=0;let _g1=windings;while(_g<_g1){let i=_g++;n+=wcount[i]}let this1=new Array(n+1);let e=this1;if(e==null){return}else{let _g=0;let _g1=e.length;while(_g<_g1){let i=_g++;e[i]=new kha_graphics2_truetype_Stbtt_$_$edge}}n=0;let m=0;let _g2=0;let _g3=windings;while(_g2<_g3){let i=_g2++;let p=pts;let pIndex=ptsIndex+m;m+=wcount[i];j=wcount[i]-1;let _g=0;let _g1=wcount[i];while(_g<_g1){let k=_g++;let a=k;let b=j;if(p[pIndex+j].y==p[pIndex+k].y){j=k;continue}e[n].invert=false;if(invert?p[pIndex+j].y>p[pIndex+k].y:p[pIndex+j].y<p[pIndex+k].y){e[n].invert=true;a=j;b=k}e[n].x0=p[pIndex+a].x*scale_x+shift_x;e[n].y0=(p[pIndex+a].y*y_scale_inv+shift_y)*vsubsample;e[n].x1=p[pIndex+b].x*scale_x+shift_x;e[n].y1=(p[pIndex+b].y*y_scale_inv+shift_y)*vsubsample;++n;j=k}}kha_graphics2_truetype_StbTruetype.stbtt__sort_edges(e,n);kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges(result,e,n,vsubsample,off_x,off_y)}static stbtt__add_point(points,n,x,y){if(points==null){return}points[n].x=x;points[n].y=y}static stbtt__tesselate_curve(points,num_points,x0,y0,x1,y1,x2,y2,objspace_flatness_squared,n){let mx=(x0+2*x1+x2)/4;let my=(y0+2*y1+y2)/4;let dx=(x0+x2)/2-mx;let dy=(y0+y2)/2-my;if(n>16){return 1}if(dx*dx+dy*dy>objspace_flatness_squared){kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points,x0,y0,(x0+x1)/2,(y0+y1)/2,mx,my,objspace_flatness_squared,n+1);kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points,mx,my,(x1+x2)/2,(y1+y2)/2,x2,y2,objspace_flatness_squared,n+1)}else{kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points.value,x2,y2);num_points.value+=1}return 1}static stbtt__tesselate_cubic(points,num_points,x0,y0,x1,y1,x2,y2,x3,y3,objspace_flatness_squared,n){let dx0=x1-x0;let dy0=y1-y0;let dx1=x2-x1;let dy1=y2-y1;let dx2=x3-x2;let dy2=y3-y2;let dx=x3-x0;let dy=y3-y0;let longlen=Math.sqrt(dx0*dx0+dy0*dy0)+Math.sqrt(dx1*dx1+dy1*dy1)+Math.sqrt(dx2*dx2+dy2*dy2);let shortlen=Math.sqrt(dx*dx+dy*dy);let flatness_squared=longlen*longlen-shortlen*shortlen;if(n>16){return}if(flatness_squared>objspace_flatness_squared){let x01=(x0+x1)/2;let y01=(y0+y1)/2;let x12=(x1+x2)/2;let y12=(y1+y2)/2;let x23=(x2+x3)/2;let y23=(y2+y3)/2;let xa=(x01+x12)/2;let ya=(y01+y12)/2;let xb=(x12+x23)/2;let yb=(y12+y23)/2;let mx=(xa+xb)/2;let my=(ya+yb)/2;kha_graphics2_truetype_StbTruetype.stbtt__tesselate_cubic(points,num_points,x0,y0,x01,y01,xa,ya,mx,my,objspace_flatness_squared,n+1);kha_graphics2_truetype_StbTruetype.stbtt__tesselate_cubic(points,num_points,mx,my,xb,yb,x23,y23,x3,y3,objspace_flatness_squared,n+1)}else{kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points.value,x3,y3);num_points.value+=1}}static stbtt_FlattenCurves(vertices,num_verts,objspace_flatness,contour_lengths,num_contours){let points=null;let num_points=0;let objspace_flatness_squared=objspace_flatness*objspace_flatness;let i;let n=0;let start=0;let pass;let _g=0;let _g1=num_verts;while(_g<_g1){let i=_g++;if(vertices[i].type==1){++n}}num_contours.value=n;if(n==0){return null}let this1=new Array(n);contour_lengths.value=this1;if(contour_lengths.value==null){num_contours.value=0;return null}let _g2=0;while(_g2<2){let pass=_g2++;let x=0;let y=0;if(pass==1){let this1=new Array(num_points);points=this1;if(points==null){contour_lengths.value=null;num_contours.value=0;return null}else{let _g=0;let _g1=points.length;while(_g<_g1){let i=_g++;points[i]=new kha_graphics2_truetype_Stbtt_$_$point}}}num_points=0;n=-1;let _g=0;let _g1=num_verts;while(_g<_g1){let i=_g++;switch(vertices[i].type){case 1:if(n>=0){contour_lengths.value[n]=num_points-start}++n;start=num_points;x=vertices[i].x;y=vertices[i].y;kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points++,x,y);break;case 2:x=vertices[i].x;y=vertices[i].y;kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points++,x,y);break;case 3:let num_points_reference={value:num_points};kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points_reference,x,y,vertices[i].cx,vertices[i].cy,vertices[i].x,vertices[i].y,objspace_flatness_squared,0);num_points=num_points_reference.value;x=vertices[i].x;y=vertices[i].y;break;case 4:let num_points_reference1={value:num_points};kha_graphics2_truetype_StbTruetype.stbtt__tesselate_cubic(points,num_points_reference1,x,y,vertices[i].cx,vertices[i].cy,vertices[i].cx1,vertices[i].cy1,vertices[i].x,vertices[i].y,objspace_flatness_squared,0);num_points=num_points_reference1.value;x=vertices[i].x;y=vertices[i].y;break}}contour_lengths.value[n]=num_points-start}return points}static stbtt_Rasterize(result,flatness_in_pixels,vertices,num_verts,scale_x,scale_y,shift_x,shift_y,x_off,y_off,invert){let scale=scale_x>scale_y?scale_y:scale_x;let winding_count=0;let winding_lengths=null;let winding_count_reference={value:winding_count};let winding_lengths_reference=new kha_graphics2_truetype_VectorOfIntPointer;let windings=kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves(vertices,num_verts,flatness_in_pixels/scale,winding_lengths_reference,winding_count_reference);winding_count=winding_count_reference.value;winding_lengths=winding_lengths_reference.value;if(windings!=null){kha_graphics2_truetype_StbTruetype.stbtt__rasterize(result,windings,winding_lengths,winding_count,scale_x,scale_y,shift_x,shift_y,x_off,y_off,invert)}}static stbtt_MakeGlyphBitmapSubpixel(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,shift_x,shift_y,glyph){let ix0=0;let iy0=0;let vertices=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,glyph);let num_verts=vertices==null?0:vertices.length;let gbm=new kha_graphics2_truetype_Stbtt_$_$bitmap;let rect=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(info,glyph,scale_x,scale_y,shift_x,shift_y);ix0=rect.x0;iy0=rect.y0;gbm.pixels=output;gbm.pixels_offset=output_offset;gbm.w=out_w;gbm.h=out_h;gbm.stride=out_stride;if(gbm.w!=0&&gbm.h!=0){kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(gbm,.35,vertices,num_verts,scale_x,scale_y,shift_x,shift_y,ix0,iy0,true)}}static stbtt_MakeGlyphBitmap(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,glyph){kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,0,0,glyph)}static stbtt_BakeFontBitmap(data,offset,pixel_height,pixels,pw,ph,chars,chardata){let f=new kha_graphics2_truetype_Stbtt_$fontinfo;if(!kha_graphics2_truetype_StbTruetype.stbtt_InitFont(f,data,offset)){return-1}let y=1;let x=y;let bottom_y=1;let scale=kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(f,pixel_height);let i=0;let _g=0;while(_g<chars.length){let index=chars[_g];++_g;let g=kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(f,index);let metrics=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(f,g);let advance=metrics.advanceWidth;let lsb=metrics.leftSideBearing;let rect=kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox(f,g,scale,scale);let x0=rect.x0;let y0=rect.y0;let x1=rect.x1;let y1=rect.y1;let gw=x1-x0;let gh=y1-y0;if(x+gw+1>=pw){y=bottom_y;x=1}if(y+gh+1>=ph){return-i}if(x+gw>=pw){throw haxe_Exception.thrown("Error")}if(y+gh>=ph){throw haxe_Exception.thrown("Error")}chardata[i].x0=x;chardata[i].y0=y;chardata[i].x1=x+gw;chardata[i].y1=y+gh;chardata[i].xadvance=scale*advance;chardata[i].xoff=x0;chardata[i].yoff=y0;x=x+gw+1;if(y+gh+1>bottom_y){bottom_y=y+gh+1}++i}let _g1=0;let _g2=pw*ph;while(_g1<_g2){let i=_g1++;pixels.writeU8(i,0)}i=0;let ch;let _g3=0;while(_g3<chars.length){let index=chars[_g3];++_g3;let g=kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(f,index);ch=chardata[i];kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap(f,pixels,ch.x0+ch.y0*pw,ch.x1-ch.x0,ch.y1-ch.y0,pw,scale,scale,g);++i}return bottom_y}}$hxClasses["kha.graphics2.truetype.StbTruetype"]=kha_graphics2_truetype_StbTruetype;kha_graphics2_truetype_StbTruetype.__name__="kha.graphics2.truetype.StbTruetype";class kha_graphics4_ConstantLocation{}$hxClasses["kha.graphics4.ConstantLocation"]=kha_graphics4_ConstantLocation;kha_graphics4_ConstantLocation.__name__="kha.graphics4.ConstantLocation";kha_graphics4_ConstantLocation.__isInterface__=true;class kha_graphics4_CubeMap{constructor(texture){this.texture_=texture}get_width(){if(this.texture_==null){return this.renderTarget_.width}else{return this.texture_.width}}get_height(){if(this.texture_==null){return this.renderTarget_.height}else{return this.texture_.height}}get_g4(){if(this.graphics4==null){this.graphics4=new kha_krom_Graphics(this)}return this.graphics4}}$hxClasses["kha.graphics4.CubeMap"]=kha_graphics4_CubeMap;kha_graphics4_CubeMap.__name__="kha.graphics4.CubeMap";kha_graphics4_CubeMap.__interfaces__=[kha_Resource,kha_Canvas];Object.assign(kha_graphics4_CubeMap.prototype,{__class__:kha_graphics4_CubeMap,texture_:null,renderTarget_:null,graphics4:null,__properties__:{get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}});class kha_graphics4_FragmentShader{constructor(sources,names){if(sources!=null){this.shader=Krom.createFragmentShader(sources[0].bytes.b.bufferValue,names[0])}}static fromSource(source){let shader=new kha_graphics4_FragmentShader(null,null);shader.shader=Krom.createFragmentShaderFromSource(source);return shader}}$hxClasses["kha.graphics4.FragmentShader"]=kha_graphics4_FragmentShader;kha_graphics4_FragmentShader.__name__="kha.graphics4.FragmentShader";Object.assign(kha_graphics4_FragmentShader.prototype,{__class__:kha_graphics4_FragmentShader,shader:null});class kha_graphics4_GeometryShader{constructor(sources,names){this.shader=Krom.createGeometryShader(sources[0].bytes.b.bufferValue,names[0])}}$hxClasses["kha.graphics4.GeometryShader"]=kha_graphics4_GeometryShader;kha_graphics4_GeometryShader.__name__="kha.graphics4.GeometryShader";Object.assign(kha_graphics4_GeometryShader.prototype,{__class__:kha_graphics4_GeometryShader,shader:null});class kha_graphics4_Graphics{}$hxClasses["kha.graphics4.Graphics"]=kha_graphics4_Graphics;kha_graphics4_Graphics.__name__="kha.graphics4.Graphics";kha_graphics4_Graphics.__isInterface__=true;Object.assign(kha_graphics4_Graphics.prototype,{__class__:kha_graphics4_Graphics,begin:null,beginFace:null,end:null,clear:null,viewport:null,scissor:null,disableScissor:null,setVertexBuffer:null,setVertexBuffers:null,setIndexBuffer:null,setTexture:null,setTextureDepth:null,setImageTexture:null,setTextureParameters:null,setTexture3DParameters:null,setTextureCompareMode:null,setCubeMapCompareMode:null,setCubeMap:null,setCubeMapDepth:null,setPipeline:null,setBool:null,setInt:null,setFloat:null,setFloat2:null,setFloat3:null,setFloat4:null,setFloats:null,setMatrix:null,setMatrix3:null,drawIndexedVertices:null,drawIndexedVerticesInstanced:null});class kha_graphics4_InternalPipeline{constructor(pipeline,projectionLocation,textureLocation){this.pipeline=pipeline;this.projectionLocation=projectionLocation;this.textureLocation=textureLocation}}$hxClasses["kha.graphics4.InternalPipeline"]=kha_graphics4_InternalPipeline;kha_graphics4_InternalPipeline.__name__="kha.graphics4.InternalPipeline";Object.assign(kha_graphics4_InternalPipeline.prototype,{__class__:kha_graphics4_InternalPipeline,pipeline:null,projectionLocation:null,textureLocation:null});class kha_graphics4_PipelineCache{}$hxClasses["kha.graphics4.PipelineCache"]=kha_graphics4_PipelineCache;kha_graphics4_PipelineCache.__name__="kha.graphics4.PipelineCache";kha_graphics4_PipelineCache.__isInterface__=true;Object.assign(kha_graphics4_PipelineCache.prototype,{__class__:kha_graphics4_PipelineCache,get:null});class kha_graphics4_SimplePipelineCache{constructor(pipeline,texture){let projectionLocation=null;try{projectionLocation=pipeline.getConstantLocation("projectionMatrix")}catch(_g){let x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:58,className:"kha.graphics4.SimplePipelineCache",methodName:"new"})}let textureLocation=null;if(texture){try{textureLocation=pipeline.getTextureUnit("tex")}catch(_g){let x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:67,className:"kha.graphics4.SimplePipelineCache",methodName:"new"})}}this.pipeline=new kha_graphics4_InternalPipeline(pipeline,projectionLocation,textureLocation)}get(colorFormats,depthStencilFormat){return this.pipeline}}$hxClasses["kha.graphics4.SimplePipelineCache"]=kha_graphics4_SimplePipelineCache;kha_graphics4_SimplePipelineCache.__name__="kha.graphics4.SimplePipelineCache";kha_graphics4_SimplePipelineCache.__interfaces__=[kha_graphics4_PipelineCache];Object.assign(kha_graphics4_SimplePipelineCache.prototype,{__class__:kha_graphics4_SimplePipelineCache,pipeline:null});class kha_graphics4_PerFramebufferPipelineCache{constructor(pipeline,texture){this.pipelines=[];pipeline.compile();let projectionLocation=null;try{projectionLocation=pipeline.getConstantLocation("projectionMatrix")}catch(_g){let x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:90,className:"kha.graphics4.PerFramebufferPipelineCache",methodName:"new"})}let textureLocation=null;if(texture){try{textureLocation=pipeline.getTextureUnit("tex")}catch(_g){let x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:99,className:"kha.graphics4.PerFramebufferPipelineCache",methodName:"new"})}}this.pipelines.push(new kha_graphics4_InternalPipeline(pipeline,projectionLocation,textureLocation))}get(colorFormats,depthStencilFormat){return this.pipelines[this.hash(colorFormats,depthStencilFormat)]}hash(colorFormats,depthStencilFormat){return 0}}$hxClasses["kha.graphics4.PerFramebufferPipelineCache"]=kha_graphics4_PerFramebufferPipelineCache;kha_graphics4_PerFramebufferPipelineCache.__name__="kha.graphics4.PerFramebufferPipelineCache";kha_graphics4_PerFramebufferPipelineCache.__interfaces__=[kha_graphics4_PipelineCache];Object.assign(kha_graphics4_PerFramebufferPipelineCache.prototype,{__class__:kha_graphics4_PerFramebufferPipelineCache,pipelines:null});class kha_graphics4_ImageShaderPainter{constructor(g4){this.myPipeline=null;this.bilinearMipmaps=false;this.bilinear=false;this.g=g4;kha_graphics4_ImageShaderPainter.bufferStart=0;kha_graphics4_ImageShaderPainter.bufferIndex=0;kha_graphics4_ImageShaderPainter.initShaders();this.myPipeline=kha_graphics4_ImageShaderPainter.standardImagePipeline;this.initBuffers()}set_pipeline(pipe){this.myPipeline=pipe!=null?pipe:kha_graphics4_ImageShaderPainter.standardImagePipeline;return this.myPipeline}setProjection(projectionMatrix){this.projectionMatrix=projectionMatrix}initBuffers(){if(kha_graphics4_ImageShaderPainter.rectVertexBuffer==null){kha_graphics4_ImageShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(6e3,kha_graphics4_ImageShaderPainter.structure,1);kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock();kha_graphics4_ImageShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(9e3,0);let indices=kha_graphics4_ImageShaderPainter.indexBuffer.lock();let _g=0;while(_g<1500){let i=_g++;let k=i*3*2;indices.setUint32(k*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3*2+1;indices.setUint32(k1*4,i*4+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3*2+2;indices.setUint32(k2*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4;let k3=i*3*2+3;indices.setUint32(k3*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp3=k3*4;let k4=i*3*2+4;indices.setUint32(k4*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp4=k4*4;let k5=i*3*2+5;indices.setUint32(k5*4,i*4+3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp5=k5*4}kha_graphics4_ImageShaderPainter.indexBuffer.unlock()}}drawBuffer(end){if(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart==0){return}kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock((kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*4);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer);this.g.setTexture(pipeline.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture);this.g.setTextureParameters(pipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,this.bilinearMipmaps?2:0);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(kha_graphics4_ImageShaderPainter.bufferStart*2*3,(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*2*3);this.g.setTexture(pipeline.textureLocation,null);if(end||(kha_graphics4_ImageShaderPainter.bufferStart+kha_graphics4_ImageShaderPainter.bufferIndex+1)*4>=1500){kha_graphics4_ImageShaderPainter.bufferStart=0;kha_graphics4_ImageShaderPainter.bufferIndex=0;kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(0)}else{kha_graphics4_ImageShaderPainter.bufferStart=kha_graphics4_ImageShaderPainter.bufferIndex;kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(kha_graphics4_ImageShaderPainter.bufferStart*4)}}setBilinearFilter(bilinear){this.drawBuffer(false);kha_graphics4_ImageShaderPainter.lastTexture=null;this.bilinear=bilinear}end(){if(kha_graphics4_ImageShaderPainter.bufferIndex>0){this.drawBuffer(true)}kha_graphics4_ImageShaderPainter.lastTexture=null}static initShaders(){if(kha_graphics4_ImageShaderPainter.structure==null){kha_graphics4_ImageShaderPainter.structure=kha_graphics4_Graphics2.createImageVertexStructure()}if(kha_graphics4_ImageShaderPainter.standardImagePipeline==null){let pipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure);kha_graphics4_ImageShaderPainter.standardImagePipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,true)}}}$hxClasses["kha.graphics4.ImageShaderPainter"]=kha_graphics4_ImageShaderPainter;kha_graphics4_ImageShaderPainter.__name__="kha.graphics4.ImageShaderPainter";Object.assign(kha_graphics4_ImageShaderPainter.prototype,{__class__:kha_graphics4_ImageShaderPainter,projectionMatrix:null,bilinear:null,bilinearMipmaps:null,g:null,myPipeline:null,__properties__:{set_pipeline:"set_pipeline"}});class kha_graphics4_ColoredShaderPainter{constructor(g4){this.myPipeline=null;this.g=g4;kha_graphics4_ColoredShaderPainter.bufferIndex=0;kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0;kha_graphics4_ColoredShaderPainter.initShaders();this.myPipeline=kha_graphics4_ColoredShaderPainter.standardColorPipeline;this.initBuffers()}set_pipeline(pipe){this.myPipeline=pipe!=null?pipe:kha_graphics4_ColoredShaderPainter.standardColorPipeline;return this.myPipeline}setProjection(projectionMatrix){this.projectionMatrix=projectionMatrix}initBuffers(){if(kha_graphics4_ColoredShaderPainter.rectVertexBuffer==null){kha_graphics4_ColoredShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(4e3,kha_graphics4_ColoredShaderPainter.structure,1);kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock();kha_graphics4_ColoredShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(6e3,0);let indices=kha_graphics4_ColoredShaderPainter.indexBuffer.lock();let _g=0;while(_g<1e3){let i=_g++;let k=i*3*2;indices.setUint32(k*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3*2+1;indices.setUint32(k1*4,i*4+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3*2+2;indices.setUint32(k2*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4;let k3=i*3*2+3;indices.setUint32(k3*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp3=k3*4;let k4=i*3*2+4;indices.setUint32(k4*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp4=k4*4;let k5=i*3*2+5;indices.setUint32(k5*4,i*4+3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp5=k5*4}kha_graphics4_ColoredShaderPainter.indexBuffer.unlock();kha_graphics4_ColoredShaderPainter.triangleVertexBuffer=new kha_graphics4_VertexBuffer(3e3,kha_graphics4_ColoredShaderPainter.structure,1);kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock();kha_graphics4_ColoredShaderPainter.triangleIndexBuffer=new kha_graphics4_IndexBuffer(3e3,0);let triIndices=kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock();let _g1=0;while(_g1<1e3){let i=_g1++;let k=i*3;triIndices.setUint32(k*4,i*3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3+1;triIndices.setUint32(k1*4,i*3+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3+2;triIndices.setUint32(k2*4,i*3+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4}kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock()}}setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty){let baseIndex=kha_graphics4_ColoredShaderPainter.bufferIndex*4*4;kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32(baseIndex*4,bottomleftx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+1)*4,bottomlefty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+2)*4,-5,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+4)*4,topleftx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+5)*4,toplefty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+6)*4,-5,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+8)*4,toprightx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+9)*4,toprighty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+10)*4,-5,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+12)*4,bottomrightx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+13)*4,bottomrighty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+14)*4,-5,true)}setRectColors(opacity,color){let baseIndex=kha_graphics4_ColoredShaderPainter.bufferIndex*4*4*4;let a=opacity*((color>>>24)*.00392156862745098);let r=a*(((color&16711680)>>>16)*.00392156862745098);let g=a*(((color&65280)>>>8)*.00392156862745098);let b=a*((color&255)*.00392156862745098);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12+3,a*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28+3,a*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44+3,a*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60+3,a*255|0)}setTriVertices(x1,y1,x2,y2,x3,y3){let baseIndex=kha_graphics4_ColoredShaderPainter.triangleBufferIndex*4*3;kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32(baseIndex*4,x1,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+1)*4,y1,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+2)*4,-5,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+4)*4,x2,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+5)*4,y2,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+6)*4,-5,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+8)*4,x3,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+9)*4,y3,true);kha_graphics4_ColoredShaderPainter.triangleVertices.setFloat32((baseIndex+10)*4,-5,true)}setTriColors(opacity,color){let baseIndex=kha_graphics4_ColoredShaderPainter.triangleBufferIndex*4*4*3;let a=opacity*((color>>>24)*.00392156862745098);let r=a*(((color&16711680)>>>16)*.00392156862745098);let g=a*(((color&65280)>>>8)*.00392156862745098);let b=a*((color&255)*.00392156862745098);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+12,r*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+12+1,g*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+12+2,b*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+12+3,a*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+28,r*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+28+1,g*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+28+2,b*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+28+3,a*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+44,r*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+44+1,g*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+44+2,b*255|0);kha_graphics4_ColoredShaderPainter.triangleVertices.setUint8(baseIndex+44+3,a*255|0)}drawBuffer(trisDone){if(kha_graphics4_ColoredShaderPainter.bufferIndex==0){return}if(!trisDone){if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){this.drawTriBuffer(true)}}kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.bufferIndex*4);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.bufferIndex*2*3);kha_graphics4_ColoredShaderPainter.bufferIndex=0;kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock()}drawTriBuffer(rectsDone){if(!rectsDone){if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){this.drawBuffer(true)}}kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3);kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0;kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock()}fillRect(opacity,color,bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty){if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){this.drawTriBuffer(true)}if(kha_graphics4_ColoredShaderPainter.bufferIndex+1>=1e3){this.drawBuffer(false)}this.setRectColors(opacity,color);this.setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty);++kha_graphics4_ColoredShaderPainter.bufferIndex}fillTriangle(opacity,color,x1,y1,x2,y2,x3,y3){if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){this.drawBuffer(true)}if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex+1>=1e3){this.drawTriBuffer(false)}this.setTriColors(opacity,color);this.setTriVertices(x1,y1,x2,y2,x3,y3);++kha_graphics4_ColoredShaderPainter.triangleBufferIndex}static initShaders(){if(kha_graphics4_ColoredShaderPainter.structure==null){kha_graphics4_ColoredShaderPainter.structure=kha_graphics4_Graphics2.createColoredVertexStructure()}if(kha_graphics4_ColoredShaderPainter.standardColorPipeline==null){let pipeline=kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure);kha_graphics4_ColoredShaderPainter.standardColorPipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,false)}}}$hxClasses["kha.graphics4.ColoredShaderPainter"]=kha_graphics4_ColoredShaderPainter;kha_graphics4_ColoredShaderPainter.__name__="kha.graphics4.ColoredShaderPainter";Object.assign(kha_graphics4_ColoredShaderPainter.prototype,{__class__:kha_graphics4_ColoredShaderPainter,projectionMatrix:null,g:null,myPipeline:null,__properties__:{set_pipeline:"set_pipeline"}});class kha_graphics4_TextShaderPainter{constructor(g4){this.bakedQuadCache=new kha_AlignedQuad;this.bilinear=false;this.myPipeline=null;this.g=g4;kha_graphics4_TextShaderPainter.bufferIndex=0;kha_graphics4_TextShaderPainter.initShaders();this.myPipeline=kha_graphics4_TextShaderPainter.standardTextPipeline;this.initBuffers()}set_pipeline(pipe){this.myPipeline=pipe!=null?pipe:kha_graphics4_TextShaderPainter.standardTextPipeline;return this.myPipeline}setProjection(projectionMatrix){this.projectionMatrix=projectionMatrix}initBuffers(){if(kha_graphics4_TextShaderPainter.rectVertexBuffer==null){kha_graphics4_TextShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(4e3,kha_graphics4_TextShaderPainter.structure,1);kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock();kha_graphics4_TextShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(6e3,0);let indices=kha_graphics4_TextShaderPainter.indexBuffer.lock();let _g=0;while(_g<1e3){let i=_g++;let k=i*3*2;indices.setUint32(k*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3*2+1;indices.setUint32(k1*4,i*4+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3*2+2;indices.setUint32(k2*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4;let k3=i*3*2+3;indices.setUint32(k3*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp3=k3*4;let k4=i*3*2+4;indices.setUint32(k4*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp4=k4*4;let k5=i*3*2+5;indices.setUint32(k5*4,i*4+3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp5=k5*4}kha_graphics4_TextShaderPainter.indexBuffer.unlock()}}setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty){let baseIndex=kha_graphics4_TextShaderPainter.bufferIndex*9*4;kha_graphics4_TextShaderPainter.rectVertices.setFloat32(baseIndex*4,bottomleftx,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+1)*4,bottomlefty,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+2)*4,-5,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+9)*4,topleftx,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+10)*4,toplefty,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+11)*4,-5,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+18)*4,toprightx,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+19)*4,toprighty,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+20)*4,-5,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+27)*4,bottomrightx,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+28)*4,bottomrighty,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+29)*4,-5,true)}setRectTexCoords(left,top,right,bottom){let baseIndex=kha_graphics4_TextShaderPainter.bufferIndex*9*4;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+3)*4,left,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+4)*4,bottom,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+12)*4,left,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+13)*4,top,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+21)*4,right,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+22)*4,top,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+30)*4,right,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+31)*4,bottom,true)}setRectColors(opacity,color){let baseIndex=kha_graphics4_TextShaderPainter.bufferIndex*9*4;let a=opacity*((color>>>24)*.00392156862745098);let v=((color&16711680)>>>16)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+5)*4,v,true);let v1=((color&65280)>>>8)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+6)*4,v1,true);let v2=(color&255)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+7)*4,v2,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+8)*4,a,true);let v3=((color&16711680)>>>16)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+14)*4,v3,true);let v4=((color&65280)>>>8)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+15)*4,v4,true);let v5=(color&255)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+16)*4,v5,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+17)*4,a,true);let v6=((color&16711680)>>>16)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+23)*4,v6,true);let v7=((color&65280)>>>8)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+24)*4,v7,true);let v8=(color&255)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+25)*4,v8,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+26)*4,a,true);let v9=((color&16711680)>>>16)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+32)*4,v9,true);let v10=((color&65280)>>>8)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+33)*4,v10,true);let v11=(color&255)*.00392156862745098;kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+34)*4,v11,true);kha_graphics4_TextShaderPainter.rectVertices.setFloat32((baseIndex+35)*4,a,true)}drawBuffer(){if(kha_graphics4_TextShaderPainter.bufferIndex==0){return}kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock(kha_graphics4_TextShaderPainter.bufferIndex*4);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.setTexture(pipeline.textureLocation,kha_graphics4_TextShaderPainter.lastTexture);this.g.setTextureParameters(pipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,0);this.g.drawIndexedVertices(0,kha_graphics4_TextShaderPainter.bufferIndex*2*3);this.g.setTexture(pipeline.textureLocation,null);kha_graphics4_TextShaderPainter.bufferIndex=0;kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock()}setBilinearFilter(bilinear){this.end();this.bilinear=bilinear}setFont(font){this.font=js_Boot.__cast(font,kha_Kravur)}drawString(text,opacity,color,x,y,transformation){let font=this.font._get(this.fontSize);let tex=font.getTexture();if(kha_graphics4_TextShaderPainter.lastTexture!=null&&tex!=kha_graphics4_TextShaderPainter.lastTexture){this.drawBuffer()}kha_graphics4_TextShaderPainter.lastTexture=tex;let xpos=x;let ypos=y;let _g=0;let _g1=text.length;while(_g<_g1){let i=_g++;let charCode=text.charCodeAt(i);let q=font.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(charCode),xpos,ypos);if(q!=null){if(kha_graphics4_TextShaderPainter.bufferIndex+1>=1e3){this.drawBuffer()}this.setRectColors(opacity,color);this.setRectTexCoords(q.s0*tex.get_width()/tex.get_realWidth(),q.t0*tex.get_height()/tex.get_realHeight(),q.s1*tex.get_width()/tex.get_realWidth(),q.t1*tex.get_height()/tex.get_realHeight());let x=q.x0;let y=q.y1;if(y==null){y=0}if(x==null){x=0}let value_x=x;let value_y=y;let w=transformation._02*value_x+transformation._12*value_y+transformation._22;let x1=(transformation._00*value_x+transformation._10*value_y+transformation._20)/w;let y1=(transformation._01*value_x+transformation._11*value_y+transformation._21)/w;let x2=x1;let y2=y1;if(y2==null){y2=0}if(x2==null){x2=0}let p0_x=x2;let p0_y=y2;let x3=q.x0;let y3=q.y0;if(y3==null){y3=0}if(x3==null){x3=0}let value_x1=x3;let value_y1=y3;let w1=transformation._02*value_x1+transformation._12*value_y1+transformation._22;let x4=(transformation._00*value_x1+transformation._10*value_y1+transformation._20)/w1;let y4=(transformation._01*value_x1+transformation._11*value_y1+transformation._21)/w1;let x5=x4;let y5=y4;if(y5==null){y5=0}if(x5==null){x5=0}let p1_x=x5;let p1_y=y5;let x6=q.x1;let y6=q.y0;if(y6==null){y6=0}if(x6==null){x6=0}let value_x2=x6;let value_y2=y6;let w2=transformation._02*value_x2+transformation._12*value_y2+transformation._22;let x7=(transformation._00*value_x2+transformation._10*value_y2+transformation._20)/w2;let y7=(transformation._01*value_x2+transformation._11*value_y2+transformation._21)/w2;let x8=x7;let y8=y7;if(y8==null){y8=0}if(x8==null){x8=0}let p2_x=x8;let p2_y=y8;let x9=q.x1;let y9=q.y1;if(y9==null){y9=0}if(x9==null){x9=0}let value_x3=x9;let value_y3=y9;let w3=transformation._02*value_x3+transformation._12*value_y3+transformation._22;let x10=(transformation._00*value_x3+transformation._10*value_y3+transformation._20)/w3;let y10=(transformation._01*value_x3+transformation._11*value_y3+transformation._21)/w3;let x11=x10;let y11=y10;if(y11==null){y11=0}if(x11==null){x11=0}let p3_x=x11;let p3_y=y11;this.setRectVertices(p0_x,p0_y,p1_x,p1_y,p2_x,p2_y,p3_x,p3_y);xpos+=q.xadvance;++kha_graphics4_TextShaderPainter.bufferIndex}}}end(){if(kha_graphics4_TextShaderPainter.bufferIndex>0){this.drawBuffer()}kha_graphics4_TextShaderPainter.lastTexture=null}static initShaders(){if(kha_graphics4_TextShaderPainter.structure==null){kha_graphics4_TextShaderPainter.structure=kha_graphics4_Graphics2.createTextVertexStructure()}if(kha_graphics4_TextShaderPainter.standardTextPipeline==null){let pipeline=kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure);kha_graphics4_TextShaderPainter.standardTextPipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,true)}}static findIndex(charCode){let blocks=kha_KravurImage.charBlocks;let offset=0;let _g=0;let _g1=blocks.length/2|0;while(_g<_g1){let i=_g++;let start=blocks[i*2];let end=blocks[i*2+1];if(charCode>=start&&charCode<=end){return offset+charCode-start}offset+=end-start+1}return 0}}$hxClasses["kha.graphics4.TextShaderPainter"]=kha_graphics4_TextShaderPainter;kha_graphics4_TextShaderPainter.__name__="kha.graphics4.TextShaderPainter";Object.assign(kha_graphics4_TextShaderPainter.prototype,{__class__:kha_graphics4_TextShaderPainter,projectionMatrix:null,font:null,g:null,myPipeline:null,fontSize:null,bilinear:null,bakedQuadCache:null,__properties__:{set_pipeline:"set_pipeline"}});class kha_graphics4_Graphics2 extends kha_graphics2_Graphics{constructor(canvas){kha_graphics2_Graphics._hx_skip_constructor=true;super();kha_graphics2_Graphics._hx_skip_constructor=false;this._hx_constructor(canvas)}_hx_constructor(canvas){this.scissorEnabled=false;this.lastPipeline=null;this.pipelineCache=new haxe_ds_ObjectMap;this.myImageScaleQuality=0;super._hx_constructor();this.set_color(-1);this.canvas=canvas;this.g=canvas.get_g4();this.imagePainter=new kha_graphics4_ImageShaderPainter(this.g);this.coloredPainter=new kha_graphics4_ColoredShaderPainter(this.g);this.textPainter=new kha_graphics4_TextShaderPainter(this.g);this.textPainter.fontSize=this.get_fontSize();this.projectionMatrix=new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.setProjection();if(kha_graphics4_Graphics2.videoPipeline==null){kha_graphics4_Graphics2.videoPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure());kha_graphics4_Graphics2.videoPipeline.fragmentShader=kha_Shaders.painter_video_frag;kha_graphics4_Graphics2.videoPipeline.vertexShader=kha_Shaders.painter_video_vert;kha_graphics4_Graphics2.videoPipeline.compile()}}setProjection(){let width=this.canvas.get_width();let height=this.canvas.get_height();if(this.canvas instanceof kha_Framebuffer){let _this=this.projectionMatrix;let tx=-width/width;let ty=-height/(0-height);let tz=-1.0002000200020003;let m__00=2/width;let m__10=0;let m__20=0;let m__30=tx;let m__01=0;let m__11=2/(0-height);let m__21=0;let m__31=ty;let m__02=0;let m__12=0;let m__22=-.002000200020002;let m__32=tz;let m__03=0;let m__13=0;let m__23=0;let m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}else{if(!kha_Image.get_nonPow2Supported()){width=kha_graphics4_Graphics2.upperPowerOfTwo(width);height=kha_graphics4_Graphics2.upperPowerOfTwo(height)}if(kha_Image.renderTargetsInvertedY()){let _this=this.projectionMatrix;let tx=-width/width;let ty=-height/height;let tz=-1.0002000200020003;let m__00=2/width;let m__10=0;let m__20=0;let m__30=tx;let m__01=0;let m__11=2/height;let m__21=0;let m__31=ty;let m__02=0;let m__12=0;let m__22=-.002000200020002;let m__32=tz;let m__03=0;let m__13=0;let m__23=0;let m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}else{let _this=this.projectionMatrix;let tx=-width/width;let ty=-height/(0-height);let tz=-1.0002000200020003;let m__00=2/width;let m__10=0;let m__20=0;let m__30=tx;let m__01=0;let m__11=2/(0-height);let m__21=0;let m__31=ty;let m__02=0;let m__12=0;let m__22=-.002000200020002;let m__32=tz;let m__03=0;let m__13=0;let m__23=0;let m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}}this.imagePainter.setProjection(this.projectionMatrix);this.coloredPainter.setProjection(this.projectionMatrix);this.textPainter.setProjection(this.projectionMatrix)}drawImage(img,x,y){let _this=this.coloredPainter;if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){_this.drawTriBuffer(false)}if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){_this.drawBuffer(false)}this.textPainter.end();let xw=x+img.get_width();let yh=y+img.get_height();let _this1=this.transformations[this.transformationIndex];let x1=x;let y1=yh;if(y1==null){y1=0}if(x1==null){x1=0}let value_x=x1;let value_y=y1;let w=_this1._02*value_x+_this1._12*value_y+_this1._22;let x2=(_this1._00*value_x+_this1._10*value_y+_this1._20)/w;let y2=(_this1._01*value_x+_this1._11*value_y+_this1._21)/w;let x3=x2;let y3=y2;if(y3==null){y3=0}if(x3==null){x3=0}let p1_x=x3;let p1_y=y3;let _this2=this.transformations[this.transformationIndex];let x4=x;let y4=y;if(y4==null){y4=0}if(x4==null){x4=0}let value_x1=x4;let value_y1=y4;let w1=_this2._02*value_x1+_this2._12*value_y1+_this2._22;let x5=(_this2._00*value_x1+_this2._10*value_y1+_this2._20)/w1;let y5=(_this2._01*value_x1+_this2._11*value_y1+_this2._21)/w1;let x6=x5;let y6=y5;if(y6==null){y6=0}if(x6==null){x6=0}let p2_x=x6;let p2_y=y6;let _this3=this.transformations[this.transformationIndex];let x7=xw;let y7=y;if(y7==null){y7=0}if(x7==null){x7=0}let value_x2=x7;let value_y2=y7;let w2=_this3._02*value_x2+_this3._12*value_y2+_this3._22;let x8=(_this3._00*value_x2+_this3._10*value_y2+_this3._20)/w2;let y8=(_this3._01*value_x2+_this3._11*value_y2+_this3._21)/w2;let x9=x8;let y9=y8;if(y9==null){y9=0}if(x9==null){x9=0}let p3_x=x9;let p3_y=y9;let _this4=this.transformations[this.transformationIndex];let x10=xw;let y10=yh;if(y10==null){y10=0}if(x10==null){x10=0}let value_x3=x10;let value_y3=y10;let w3=_this4._02*value_x3+_this4._12*value_y3+_this4._22;let x11=(_this4._00*value_x3+_this4._10*value_y3+_this4._20)/w3;let y11=(_this4._01*value_x3+_this4._11*value_y3+_this4._21)/w3;let x12=x11;let y12=y11;if(y12==null){y12=0}if(x12==null){x12=0}let p4_x=x12;let p4_y=y12;let _this5=this.imagePainter;let opacity=this.get_opacity();let color=this.get_color();let tex=img;if(kha_graphics4_ImageShaderPainter.bufferStart+kha_graphics4_ImageShaderPainter.bufferIndex+1>=1500||kha_graphics4_ImageShaderPainter.lastTexture!=null&&tex!=kha_graphics4_ImageShaderPainter.lastTexture){_this5.drawBuffer(false)}let r=((color&16711680)>>>16)*.00392156862745098;let g=((color&65280)>>>8)*.00392156862745098;let b=(color&255)*.00392156862745098;let a=(color>>>24)*.00392156862745098*opacity;let baseIndex=(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*6*4*4;kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+20,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+20+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+20+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+20+3,a*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+44,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+44+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+44+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+44+3,a*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+68,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+68+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+68+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+68+3,a*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+92,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+92+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+92+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex+92+3,a*255|0);let right=tex.get_width()/tex.get_realWidth();let bottom=tex.get_height()/tex.get_realHeight();let baseIndex1=(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*6*4*4;kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+12,0,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+16,bottom,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+36,0,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+40,0,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+60,right,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+64,0,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+84,right,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex1+88,bottom,true);let baseIndex2=(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*6*4*4;kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2,p1_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+4,p1_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+8,-5,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+24,p2_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+28,p2_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+32,-5,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+48,p3_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+52,p3_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+56,-5,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+72,p4_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+76,p4_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+80,-5,true);++kha_graphics4_ImageShaderPainter.bufferIndex;kha_graphics4_ImageShaderPainter.lastTexture=tex}drawScaledSubImage(img,sx,sy,sw,sh,dx,dy,dw,dh){let _this=this.coloredPainter;if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){_this.drawTriBuffer(false)}if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){_this.drawBuffer(false)}this.textPainter.end();let _this1=this.transformations[this.transformationIndex];let x=dx;let y=dy+dh;if(y==null){y=0}if(x==null){x=0}let value_x=x;let value_y=y;let w=_this1._02*value_x+_this1._12*value_y+_this1._22;let x1=(_this1._00*value_x+_this1._10*value_y+_this1._20)/w;let y1=(_this1._01*value_x+_this1._11*value_y+_this1._21)/w;let x2=x1;let y2=y1;if(y2==null){y2=0}if(x2==null){x2=0}let p1_x=x2;let p1_y=y2;let _this2=this.transformations[this.transformationIndex];let x3=dx;let y3=dy;if(y3==null){y3=0}if(x3==null){x3=0}let value_x1=x3;let value_y1=y3;let w1=_this2._02*value_x1+_this2._12*value_y1+_this2._22;let x4=(_this2._00*value_x1+_this2._10*value_y1+_this2._20)/w1;let y4=(_this2._01*value_x1+_this2._11*value_y1+_this2._21)/w1;let x5=x4;let y5=y4;if(y5==null){y5=0}if(x5==null){x5=0}let p2_x=x5;let p2_y=y5;let _this3=this.transformations[this.transformationIndex];let x6=dx+dw;let y6=dy;if(y6==null){y6=0}if(x6==null){x6=0}let value_x2=x6;let value_y2=y6;let w2=_this3._02*value_x2+_this3._12*value_y2+_this3._22;let x7=(_this3._00*value_x2+_this3._10*value_y2+_this3._20)/w2;let y7=(_this3._01*value_x2+_this3._11*value_y2+_this3._21)/w2;let x8=x7;let y8=y7;if(y8==null){y8=0}if(x8==null){x8=0}let p3_x=x8;let p3_y=y8;let _this4=this.transformations[this.transformationIndex];let x9=dx+dw;let y9=dy+dh;if(y9==null){y9=0}if(x9==null){x9=0}let value_x3=x9;let value_y3=y9;let w3=_this4._02*value_x3+_this4._12*value_y3+_this4._22;let x10=(_this4._00*value_x3+_this4._10*value_y3+_this4._20)/w3;let y10=(_this4._01*value_x3+_this4._11*value_y3+_this4._21)/w3;let x11=x10;let y11=y10;if(y11==null){y11=0}if(x11==null){x11=0}let p4_x=x11;let p4_y=y11;let _this5=this.imagePainter;let opacity=this.get_opacity();let color=this.get_color();let tex=img;if(kha_graphics4_ImageShaderPainter.bufferStart+kha_graphics4_ImageShaderPainter.bufferIndex+1>=1500||kha_graphics4_ImageShaderPainter.lastTexture!=null&&tex!=kha_graphics4_ImageShaderPainter.lastTexture){_this5.drawBuffer(false)}let left=sx/tex.get_realWidth();let top=sy/tex.get_realHeight();let right=(sx+sw)/tex.get_realWidth();let bottom=(sy+sh)/tex.get_realHeight();let baseIndex=(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*6*4*4;kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+12,left,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+16,bottom,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+36,left,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+40,top,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+60,right,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+64,top,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+84,right,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex+88,bottom,true);let r=((color&16711680)>>>16)*.00392156862745098;let g=((color&65280)>>>8)*.00392156862745098;let b=(color&255)*.00392156862745098;let a=(color>>>24)*.00392156862745098*opacity;let baseIndex1=(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*6*4*4;kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+20,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+20+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+20+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+20+3,a*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+44,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+44+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+44+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+44+3,a*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+68,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+68+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+68+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+68+3,a*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+92,r*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+92+1,g*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+92+2,b*255|0);kha_graphics4_ImageShaderPainter.rectVertices.setUint8(baseIndex1+92+3,a*255|0);let baseIndex2=(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*6*4*4;kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2,p1_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+4,p1_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+8,-5,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+24,p2_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+28,p2_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+32,-5,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+48,p3_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+52,p3_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+56,-5,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+72,p4_x,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+76,p4_y,true);kha_graphics4_ImageShaderPainter.rectVertices.setFloat32(baseIndex2+80,-5,true);++kha_graphics4_ImageShaderPainter.bufferIndex;kha_graphics4_ImageShaderPainter.lastTexture=tex}get_color(){return this.myColor}set_color(color){return this.myColor=color}drawRect(x,y,width,height,strength){if(strength==null){strength=1}this.imagePainter.end();this.textPainter.end();let _this=this.transformations[this.transformationIndex];let x1=x-strength/2;let y1=y+strength/2;if(y1==null){y1=0}if(x1==null){x1=0}let value_x=x1;let value_y=y1;let w=_this._02*value_x+_this._12*value_y+_this._22;let x2=(_this._00*value_x+_this._10*value_y+_this._20)/w;let y2=(_this._01*value_x+_this._11*value_y+_this._21)/w;let x3=x2;let y3=y2;if(y3==null){y3=0}if(x3==null){x3=0}let p1_x=x3;let p1_y=y3;let _this1=this.transformations[this.transformationIndex];let x4=x-strength/2;let y4=y-strength/2;if(y4==null){y4=0}if(x4==null){x4=0}let value_x1=x4;let value_y1=y4;let w1=_this1._02*value_x1+_this1._12*value_y1+_this1._22;let x5=(_this1._00*value_x1+_this1._10*value_y1+_this1._20)/w1;let y5=(_this1._01*value_x1+_this1._11*value_y1+_this1._21)/w1;let x6=x5;let y6=y5;if(y6==null){y6=0}if(x6==null){x6=0}let p2_x=x6;let p2_y=y6;let _this2=this.transformations[this.transformationIndex];let x7=x+width+strength/2;let y7=y-strength/2;if(y7==null){y7=0}if(x7==null){x7=0}let value_x2=x7;let value_y2=y7;let w2=_this2._02*value_x2+_this2._12*value_y2+_this2._22;let x8=(_this2._00*value_x2+_this2._10*value_y2+_this2._20)/w2;let y8=(_this2._01*value_x2+_this2._11*value_y2+_this2._21)/w2;let x9=x8;let y9=y8;if(y9==null){y9=0}if(x9==null){x9=0}let p3_x=x9;let p3_y=y9;let _this3=this.transformations[this.transformationIndex];let x10=x+width+strength/2;let y10=y+strength/2;if(y10==null){y10=0}if(x10==null){x10=0}let value_x3=x10;let value_y3=y10;let w3=_this3._02*value_x3+_this3._12*value_y3+_this3._22;let x11=(_this3._00*value_x3+_this3._10*value_y3+_this3._20)/w3;let y11=(_this3._01*value_x3+_this3._11*value_y3+_this3._21)/w3;let x12=x11;let y12=y11;if(y12==null){y12=0}if(x12==null){x12=0}let p4_x=x12;let p4_y=y12;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);let _this4=this.transformations[this.transformationIndex];let x13=x-strength/2;let y13=y+height-strength/2;if(y13==null){y13=0}if(x13==null){x13=0}let value_x4=x13;let value_y4=y13;let w4=_this4._02*value_x4+_this4._12*value_y4+_this4._22;let x14=(_this4._00*value_x4+_this4._10*value_y4+_this4._20)/w4;let y14=(_this4._01*value_x4+_this4._11*value_y4+_this4._21)/w4;let x15=x14;let y15=y14;if(y15==null){y15=0}if(x15==null){x15=0}let v_x=x15;let v_y=y15;p1_x=v_x;p1_y=v_y;let _this5=this.transformations[this.transformationIndex];let x16=x-strength/2;let y16=y+strength/2;if(y16==null){y16=0}if(x16==null){x16=0}let value_x5=x16;let value_y5=y16;let w5=_this5._02*value_x5+_this5._12*value_y5+_this5._22;let x17=(_this5._00*value_x5+_this5._10*value_y5+_this5._20)/w5;let y17=(_this5._01*value_x5+_this5._11*value_y5+_this5._21)/w5;let x18=x17;let y18=y17;if(y18==null){y18=0}if(x18==null){x18=0}let v_x1=x18;let v_y1=y18;p2_x=v_x1;p2_y=v_y1;let _this6=this.transformations[this.transformationIndex];let x19=x+strength/2;let y19=y+strength/2;if(y19==null){y19=0}if(x19==null){x19=0}let value_x6=x19;let value_y6=y19;let w6=_this6._02*value_x6+_this6._12*value_y6+_this6._22;let x20=(_this6._00*value_x6+_this6._10*value_y6+_this6._20)/w6;let y20=(_this6._01*value_x6+_this6._11*value_y6+_this6._21)/w6;let x21=x20;let y21=y20;if(y21==null){y21=0}if(x21==null){x21=0}let v_x2=x21;let v_y2=y21;p3_x=v_x2;p3_y=v_y2;let _this7=this.transformations[this.transformationIndex];let x22=x+strength/2;let y22=y+height-strength/2;if(y22==null){y22=0}if(x22==null){x22=0}let value_x7=x22;let value_y7=y22;let w7=_this7._02*value_x7+_this7._12*value_y7+_this7._22;let x23=(_this7._00*value_x7+_this7._10*value_y7+_this7._20)/w7;let y23=(_this7._01*value_x7+_this7._11*value_y7+_this7._21)/w7;let x24=x23;let y24=y23;if(y24==null){y24=0}if(x24==null){x24=0}let v_x3=x24;let v_y3=y24;p4_x=v_x3;p4_y=v_y3;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);let _this8=this.transformations[this.transformationIndex];let x25=x-strength/2;let y25=y+height+strength/2;if(y25==null){y25=0}if(x25==null){x25=0}let value_x8=x25;let value_y8=y25;let w8=_this8._02*value_x8+_this8._12*value_y8+_this8._22;let x26=(_this8._00*value_x8+_this8._10*value_y8+_this8._20)/w8;let y26=(_this8._01*value_x8+_this8._11*value_y8+_this8._21)/w8;let x27=x26;let y27=y26;if(y27==null){y27=0}if(x27==null){x27=0}let v_x4=x27;let v_y4=y27;p1_x=v_x4;p1_y=v_y4;let _this9=this.transformations[this.transformationIndex];let x28=x-strength/2;let y28=y+height-strength/2;if(y28==null){y28=0}if(x28==null){x28=0}let value_x9=x28;let value_y9=y28;let w9=_this9._02*value_x9+_this9._12*value_y9+_this9._22;let x29=(_this9._00*value_x9+_this9._10*value_y9+_this9._20)/w9;let y29=(_this9._01*value_x9+_this9._11*value_y9+_this9._21)/w9;let x30=x29;let y30=y29;if(y30==null){y30=0}if(x30==null){x30=0}let v_x5=x30;let v_y5=y30;p2_x=v_x5;p2_y=v_y5;let _this10=this.transformations[this.transformationIndex];let x31=x+width+strength/2;let y31=y+height-strength/2;if(y31==null){y31=0}if(x31==null){x31=0}let value_x10=x31;let value_y10=y31;let w10=_this10._02*value_x10+_this10._12*value_y10+_this10._22;let x32=(_this10._00*value_x10+_this10._10*value_y10+_this10._20)/w10;let y32=(_this10._01*value_x10+_this10._11*value_y10+_this10._21)/w10;let x33=x32;let y33=y32;if(y33==null){y33=0}if(x33==null){x33=0}let v_x6=x33;let v_y6=y33;p3_x=v_x6;p3_y=v_y6;let _this11=this.transformations[this.transformationIndex];let x34=x+width+strength/2;let y34=y+height+strength/2;if(y34==null){y34=0}if(x34==null){x34=0}let value_x11=x34;let value_y11=y34;let w11=_this11._02*value_x11+_this11._12*value_y11+_this11._22;let x35=(_this11._00*value_x11+_this11._10*value_y11+_this11._20)/w11;let y35=(_this11._01*value_x11+_this11._11*value_y11+_this11._21)/w11;let x36=x35;let y36=y35;if(y36==null){y36=0}if(x36==null){x36=0}let v_x7=x36;let v_y7=y36;p4_x=v_x7;p4_y=v_y7;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);let _this12=this.transformations[this.transformationIndex];let x37=x+width-strength/2;let y37=y+height-strength/2;if(y37==null){y37=0}if(x37==null){x37=0}let value_x12=x37;let value_y12=y37;let w12=_this12._02*value_x12+_this12._12*value_y12+_this12._22;let x38=(_this12._00*value_x12+_this12._10*value_y12+_this12._20)/w12;let y38=(_this12._01*value_x12+_this12._11*value_y12+_this12._21)/w12;let x39=x38;let y39=y38;if(y39==null){y39=0}if(x39==null){x39=0}let v_x8=x39;let v_y8=y39;p1_x=v_x8;p1_y=v_y8;let _this13=this.transformations[this.transformationIndex];let x40=x+width-strength/2;let y40=y+strength/2;if(y40==null){y40=0}if(x40==null){x40=0}let value_x13=x40;let value_y13=y40;let w13=_this13._02*value_x13+_this13._12*value_y13+_this13._22;let x41=(_this13._00*value_x13+_this13._10*value_y13+_this13._20)/w13;let y41=(_this13._01*value_x13+_this13._11*value_y13+_this13._21)/w13;let x42=x41;let y42=y41;if(y42==null){y42=0}if(x42==null){x42=0}let v_x9=x42;let v_y9=y42;p2_x=v_x9;p2_y=v_y9;let _this14=this.transformations[this.transformationIndex];let x43=x+width+strength/2;let y43=y+strength/2;if(y43==null){y43=0}if(x43==null){x43=0}let value_x14=x43;let value_y14=y43;let w14=_this14._02*value_x14+_this14._12*value_y14+_this14._22;let x44=(_this14._00*value_x14+_this14._10*value_y14+_this14._20)/w14;let y44=(_this14._01*value_x14+_this14._11*value_y14+_this14._21)/w14;let x45=x44;let y45=y44;if(y45==null){y45=0}if(x45==null){x45=0}let v_x10=x45;let v_y10=y45;p3_x=v_x10;p3_y=v_y10;let _this15=this.transformations[this.transformationIndex];let x46=x+width+strength/2;let y46=y+height-strength/2;if(y46==null){y46=0}if(x46==null){x46=0}let value_x15=x46;let value_y15=y46;let w15=_this15._02*value_x15+_this15._12*value_y15+_this15._22;let x47=(_this15._00*value_x15+_this15._10*value_y15+_this15._20)/w15;let y47=(_this15._01*value_x15+_this15._11*value_y15+_this15._21)/w15;let x48=x47;let y48=y47;if(y48==null){y48=0}if(x48==null){x48=0}let v_x11=x48;let v_y11=y48;p4_x=v_x11;p4_y=v_y11;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y)}fillRect(x,y,width,height){this.imagePainter.end();this.textPainter.end();let _this=this.transformations[this.transformationIndex];let x1=x;let y1=y+height;if(y1==null){y1=0}if(x1==null){x1=0}let value_x=x1;let value_y=y1;let w=_this._02*value_x+_this._12*value_y+_this._22;let x2=(_this._00*value_x+_this._10*value_y+_this._20)/w;let y2=(_this._01*value_x+_this._11*value_y+_this._21)/w;let x3=x2;let y3=y2;if(y3==null){y3=0}if(x3==null){x3=0}let p1_x=x3;let p1_y=y3;let _this1=this.transformations[this.transformationIndex];let x4=x;let y4=y;if(y4==null){y4=0}if(x4==null){x4=0}let value_x1=x4;let value_y1=y4;let w1=_this1._02*value_x1+_this1._12*value_y1+_this1._22;let x5=(_this1._00*value_x1+_this1._10*value_y1+_this1._20)/w1;let y5=(_this1._01*value_x1+_this1._11*value_y1+_this1._21)/w1;let x6=x5;let y6=y5;if(y6==null){y6=0}if(x6==null){x6=0}let p2_x=x6;let p2_y=y6;let _this2=this.transformations[this.transformationIndex];let x7=x+width;let y7=y;if(y7==null){y7=0}if(x7==null){x7=0}let value_x2=x7;let value_y2=y7;let w2=_this2._02*value_x2+_this2._12*value_y2+_this2._22;let x8=(_this2._00*value_x2+_this2._10*value_y2+_this2._20)/w2;let y8=(_this2._01*value_x2+_this2._11*value_y2+_this2._21)/w2;let x9=x8;let y9=y8;if(y9==null){y9=0}if(x9==null){x9=0}let p3_x=x9;let p3_y=y9;let _this3=this.transformations[this.transformationIndex];let x10=x+width;let y10=y+height;if(y10==null){y10=0}if(x10==null){x10=0}let value_x3=x10;let value_y3=y10;let w3=_this3._02*value_x3+_this3._12*value_y3+_this3._22;let x11=(_this3._00*value_x3+_this3._10*value_y3+_this3._20)/w3;let y11=(_this3._01*value_x3+_this3._11*value_y3+_this3._21)/w3;let x12=x11;let y12=y11;if(y12==null){y12=0}if(x12==null){x12=0}let p4_x=x12;let p4_y=y12;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y)}drawString(text,x,y){this.imagePainter.end();let _this=this.coloredPainter;if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){_this.drawTriBuffer(false)}if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){_this.drawBuffer(false)}this.textPainter.drawString(text,this.get_opacity(),this.get_color(),x,y,this.transformations[this.transformationIndex])}get_font(){return this.myFont}set_font(font){this.textPainter.setFont(font);return this.myFont=font}set_fontSize(value){return super.set_fontSize(this.textPainter.fontSize=value)}drawLine(x1,y1,x2,y2,strength){if(strength==null){strength=1}this.imagePainter.end();this.textPainter.end();let vec_x=0;let vec_y=0;if(y2==y1){let x=0;let y=-1;if(y==null){y=0}if(x==null){x=0}let v_x=x;let v_y=y;vec_x=v_x;vec_y=v_y}else{let x=1;let y=-(x2-x1)/(y2-y1);if(y==null){y=0}if(x==null){x=0}let v_x=x;let v_y=y;vec_x=v_x;vec_y=v_y}let currentLength=Math.sqrt(vec_x*vec_x+vec_y*vec_y);if(currentLength!=0){let mul=strength/currentLength;vec_x*=mul;vec_y*=mul}let x=x1+.5*vec_x;let y=y1+.5*vec_y;if(y==null){y=0}if(x==null){x=0}let p1_x=x;let p1_y=y;let x3=x2+.5*vec_x;let y3=y2+.5*vec_y;if(y3==null){y3=0}if(x3==null){x3=0}let p2_x=x3;let p2_y=y3;let x4=p1_x-vec_x;let y4=p1_y-vec_y;if(y4==null){y4=0}if(x4==null){x4=0}let p3_x=x4;let p3_y=y4;let x5=p2_x-vec_x;let y5=p2_y-vec_y;if(y5==null){y5=0}if(x5==null){x5=0}let p4_x=x5;let p4_y=y5;let _this=this.transformations[this.transformationIndex];let w=_this._02*p1_x+_this._12*p1_y+_this._22;let x6=(_this._00*p1_x+_this._10*p1_y+_this._20)/w;let y6=(_this._01*p1_x+_this._11*p1_y+_this._21)/w;let x7=x6;let y7=y6;if(y7==null){y7=0}if(x7==null){x7=0}let v_x=x7;let v_y=y7;p1_x=v_x;p1_y=v_y;let _this1=this.transformations[this.transformationIndex];let w1=_this1._02*p2_x+_this1._12*p2_y+_this1._22;let x8=(_this1._00*p2_x+_this1._10*p2_y+_this1._20)/w1;let y8=(_this1._01*p2_x+_this1._11*p2_y+_this1._21)/w1;let x9=x8;let y9=y8;if(y9==null){y9=0}if(x9==null){x9=0}let v_x1=x9;let v_y1=y9;p2_x=v_x1;p2_y=v_y1;let _this2=this.transformations[this.transformationIndex];let w2=_this2._02*p3_x+_this2._12*p3_y+_this2._22;let x10=(_this2._00*p3_x+_this2._10*p3_y+_this2._20)/w2;let y10=(_this2._01*p3_x+_this2._11*p3_y+_this2._21)/w2;let x11=x10;let y11=y10;if(y11==null){y11=0}if(x11==null){x11=0}let v_x2=x11;let v_y2=y11;p3_x=v_x2;p3_y=v_y2;let _this3=this.transformations[this.transformationIndex];let w3=_this3._02*p4_x+_this3._12*p4_y+_this3._22;let x12=(_this3._00*p4_x+_this3._10*p4_y+_this3._20)/w3;let y12=(_this3._01*p4_x+_this3._11*p4_y+_this3._21)/w3;let x13=x12;let y13=y12;if(y13==null){y13=0}if(x13==null){x13=0}let v_x3=x13;let v_y3=y13;p4_x=v_x3;p4_y=v_y3;this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y);this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p3_x,p3_y,p2_x,p2_y,p4_x,p4_y)}fillTriangle(x1,y1,x2,y2,x3,y3){this.imagePainter.end();this.textPainter.end();let _this=this.transformations[this.transformationIndex];let x=x1;let y=y1;if(y==null){y=0}if(x==null){x=0}let value_x=x;let value_y=y;let w=_this._02*value_x+_this._12*value_y+_this._22;let x4=(_this._00*value_x+_this._10*value_y+_this._20)/w;let y4=(_this._01*value_x+_this._11*value_y+_this._21)/w;let x5=x4;let y5=y4;if(y5==null){y5=0}if(x5==null){x5=0}let p1_x=x5;let p1_y=y5;let _this1=this.transformations[this.transformationIndex];let x6=x2;let y6=y2;if(y6==null){y6=0}if(x6==null){x6=0}let value_x1=x6;let value_y1=y6;let w1=_this1._02*value_x1+_this1._12*value_y1+_this1._22;let x7=(_this1._00*value_x1+_this1._10*value_y1+_this1._20)/w1;let y7=(_this1._01*value_x1+_this1._11*value_y1+_this1._21)/w1;let x8=x7;let y8=y7;if(y8==null){y8=0}if(x8==null){x8=0}let p2_x=x8;let p2_y=y8;let _this2=this.transformations[this.transformationIndex];let x9=x3;let y9=y3;if(y9==null){y9=0}if(x9==null){x9=0}let value_x2=x9;let value_y2=y9;let w2=_this2._02*value_x2+_this2._12*value_y2+_this2._22;let x10=(_this2._00*value_x2+_this2._10*value_y2+_this2._20)/w2;let y10=(_this2._01*value_x2+_this2._11*value_y2+_this2._21)/w2;let x11=x10;let y11=y10;if(y11==null){y11=0}if(x11==null){x11=0}let p3_x=x11;let p3_y=y11;this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y)}set_imageScaleQuality(value){if(value==this.myImageScaleQuality){return value}this.imagePainter.setBilinearFilter(value==1);this.textPainter.setBilinearFilter(value==1);return this.myImageScaleQuality=value}setPipeline(pipeline){if(pipeline==this.lastPipeline){return}this.lastPipeline=pipeline;this.flush();if(pipeline==null){this.imagePainter.set_pipeline(null);this.coloredPainter.set_pipeline(null);this.textPainter.set_pipeline(null)}else{let cache=this.pipelineCache.h[pipeline.__id__];if(cache==null){cache=new kha_graphics4_SimplePipelineCache(pipeline,true);this.pipelineCache.set(pipeline,cache)}this.imagePainter.set_pipeline(cache);this.coloredPainter.set_pipeline(cache);this.textPainter.set_pipeline(cache)}}disableScissor(){this.scissorEnabled=false;this.flush();this.g.disableScissor()}begin(clear,clearColor){if(clear==null){clear=true}if(kha_graphics4_Graphics2.current==null){kha_graphics4_Graphics2.current=this}else{throw haxe_Exception.thrown("End before you begin")}this.g.begin();if(clear){this.clear(clearColor)}this.setProjection()}clear(color){this.flush();this.g.clear(color==null?-16777216:color)}flush(){this.imagePainter.end();this.textPainter.end();let _this=this.coloredPainter;if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){_this.drawTriBuffer(false)}if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){_this.drawBuffer(false)}}end(){this.flush();this.g.end();if(kha_graphics4_Graphics2.current==this){kha_graphics4_Graphics2.current=null}else{throw haxe_Exception.thrown("Begin before you end")}}static upperPowerOfTwo(v){--v;v|=v>>>1;v|=v>>>2;v|=v>>>4;v|=v>>>8;v|=v>>>16;return++v}static createImageVertexStructure(){let structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("vertexUV",1);structure.add("vertexColor",16);return structure}static createImagePipeline(structure){let shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_image_frag;shaderPipeline.vertexShader=kha_Shaders.painter_image_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=1;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=1;shaderPipeline.alphaBlendDestination=5;return shaderPipeline}static createColoredVertexStructure(){let structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("vertexColor",16);return structure}static createColoredPipeline(structure){let shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_colored_frag;shaderPipeline.vertexShader=kha_Shaders.painter_colored_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=1;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=1;shaderPipeline.alphaBlendDestination=5;return shaderPipeline}static createTextVertexStructure(){let structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("vertexUV",1);structure.add("vertexColor",3);return structure}static createTextPipeline(structure){let shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_text_frag;shaderPipeline.vertexShader=kha_Shaders.painter_text_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=3;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=3;shaderPipeline.alphaBlendDestination=5;return shaderPipeline}}$hxClasses["kha.graphics4.Graphics2"]=kha_graphics4_Graphics2;kha_graphics4_Graphics2.__name__="kha.graphics4.Graphics2";kha_graphics4_Graphics2.__super__=kha_graphics2_Graphics;Object.assign(kha_graphics4_Graphics2.prototype,{__class__:kha_graphics4_Graphics2,myColor:null,myFont:null,projectionMatrix:null,imagePainter:null,coloredPainter:null,textPainter:null,canvas:null,g:null,myImageScaleQuality:null,pipelineCache:null,lastPipeline:null,scissorEnabled:null});class kha_graphics4_IndexBuffer{constructor(indexCount,usage,canRead){if(canRead==null){canRead=false}this.indexCount=indexCount;this.buffer=Krom.createIndexBuffer(indexCount)}lock(start,count){this._data=Krom.lockIndexBuffer(this.buffer);if(start==null){start=0}if(count==null){count=this.indexCount}let end=start+count;let start1=start*4;let end1=end!=null?end*4:null;return kha_arrays_ByteArray._new(this._data.buffer,start1,end1!=null?end1-start1:null)}unlock(count){Krom.unlockIndexBuffer(this.buffer)}set(){Krom.setIndexBuffer(this.buffer)}}$hxClasses["kha.graphics4.IndexBuffer"]=kha_graphics4_IndexBuffer;kha_graphics4_IndexBuffer.__name__="kha.graphics4.IndexBuffer";Object.assign(kha_graphics4_IndexBuffer.prototype,{__class__:kha_graphics4_IndexBuffer,_data:null,buffer:null,indexCount:null});class kha_graphics4_PipelineStateBase{constructor(){this.inputLayout=null;this.vertexShader=null;this.fragmentShader=null;this.geometryShader=null;this.tessellationControlShader=null;this.tessellationEvaluationShader=null;this.cullMode=2;this.depthWrite=false;this.depthMode=0;this.stencilFrontMode=0;this.stencilFrontBothPass=0;this.stencilFrontDepthFail=0;this.stencilFrontFail=0;this.stencilBackMode=0;this.stencilBackBothPass=0;this.stencilBackDepthFail=0;this.stencilBackFail=0;this.stencilReferenceValue=kha_graphics4_StencilValue.Static(0);this.stencilReadMask=255;this.stencilWriteMask=255;this.blendSource=1;this.blendDestination=2;this.blendOperation=0;this.alphaBlendSource=1;this.alphaBlendDestination=2;this.alphaBlendOperation=0;this.colorWriteMasksRed=[];this.colorWriteMasksGreen=[];this.colorWriteMasksBlue=[];this.colorWriteMasksAlpha=[];this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorAttachmentCount=1;this.colorAttachments=[];this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.depthStencilAttachment=0;this.conservativeRasterization=false}}$hxClasses["kha.graphics4.PipelineStateBase"]=kha_graphics4_PipelineStateBase;kha_graphics4_PipelineStateBase.__name__="kha.graphics4.PipelineStateBase";Object.assign(kha_graphics4_PipelineStateBase.prototype,{__class__:kha_graphics4_PipelineStateBase,inputLayout:null,vertexShader:null,fragmentShader:null,geometryShader:null,tessellationControlShader:null,tessellationEvaluationShader:null,cullMode:null,depthWrite:null,depthMode:null,stencilFrontMode:null,stencilFrontBothPass:null,stencilFrontDepthFail:null,stencilFrontFail:null,stencilBackMode:null,stencilBackBothPass:null,stencilBackDepthFail:null,stencilBackFail:null,stencilReferenceValue:null,stencilReadMask:null,stencilWriteMask:null,blendSource:null,blendDestination:null,blendOperation:null,alphaBlendSource:null,alphaBlendDestination:null,alphaBlendOperation:null,colorWriteMasksRed:null,colorWriteMasksGreen:null,colorWriteMasksBlue:null,colorWriteMasksAlpha:null,colorAttachmentCount:null,colorAttachments:null,depthStencilAttachment:null,conservativeRasterization:null});class kha_graphics4_PipelineState extends kha_graphics4_PipelineStateBase{constructor(){super();this.pipeline=Krom.createPipeline()}delete(){Krom.deletePipeline(this.pipeline);this.pipeline=null}compile(){let structure0=this.inputLayout.length>0?this.inputLayout[0]:null;let structure1=this.inputLayout.length>1?this.inputLayout[1]:null;let structure2=this.inputLayout.length>2?this.inputLayout[2]:null;let structure3=this.inputLayout.length>3?this.inputLayout[3]:null;let gs=this.geometryShader!=null?this.geometryShader.shader:null;let tcs=this.tessellationControlShader!=null?this.tessellationControlShader.shader:null;let tes=this.tessellationEvaluationShader!=null?this.tessellationEvaluationShader.shader:null;let stencilReferenceValue=0;let _g=this.stencilReferenceValue;if(_g._hx_index==1){let value=_g.value;stencilReferenceValue=value}Krom.compilePipeline(this.pipeline,structure0,structure1,structure2,structure3,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,gs,tcs,tes,{cullMode:this.cullMode,depthWrite:this.depthWrite,depthMode:this.depthMode,stencilMode:this.stencilFrontMode,stencilBothPass:this.stencilFrontBothPass,stencilDepthFail:this.stencilFrontDepthFail,stencilFail:this.stencilFrontFail,stencilReferenceValue:stencilReferenceValue,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.blendSource),blendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.blendDestination),alphaBlendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMasksRed,colorWriteMaskGreen:this.colorWriteMasksGreen,colorWriteMaskBlue:this.colorWriteMasksBlue,colorWriteMaskAlpha:this.colorWriteMasksAlpha,conservativeRasterization:this.conservativeRasterization})}set(){Krom.setPipeline(this.pipeline)}getConstantLocation(name){return Krom.getConstantLocation(this.pipeline,name)}getTextureUnit(name){return Krom.getTextureUnit(this.pipeline,name)}static convertBlendingFactor(factor){switch(factor){case 0:case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9}}}$hxClasses["kha.graphics4.PipelineState"]=kha_graphics4_PipelineState;kha_graphics4_PipelineState.__name__="kha.graphics4.PipelineState";kha_graphics4_PipelineState.__super__=kha_graphics4_PipelineStateBase;Object.assign(kha_graphics4_PipelineState.prototype,{__class__:kha_graphics4_PipelineState,pipeline:null});var kha_graphics4_StencilValue=$hxEnums["kha.graphics4.StencilValue"]={__ename__:true,__constructs__:null,Dynamic:{_hx_name:"Dynamic",_hx_index:0,__enum__:"kha.graphics4.StencilValue",toString:$estr},Static:($_=function(value){return{_hx_index:1,value:value,__enum__:"kha.graphics4.StencilValue",toString:$estr}},$_._hx_name="Static",$_.__params__=["value"],$_)};kha_graphics4_StencilValue.__constructs__=[kha_graphics4_StencilValue.Dynamic,kha_graphics4_StencilValue.Static];class kha_graphics4_TessellationControlShader{constructor(sources,names){this.shader=Krom.createTessellationControlShader(sources[0].bytes.b.bufferValue,names[0])}}$hxClasses["kha.graphics4.TessellationControlShader"]=kha_graphics4_TessellationControlShader;kha_graphics4_TessellationControlShader.__name__="kha.graphics4.TessellationControlShader";Object.assign(kha_graphics4_TessellationControlShader.prototype,{__class__:kha_graphics4_TessellationControlShader,shader:null});class kha_graphics4_TessellationEvaluationShader{constructor(sources,names){this.shader=Krom.createTessellationEvaluationShader(sources[0].bytes.b.bufferValue,names[0])}}$hxClasses["kha.graphics4.TessellationEvaluationShader"]=kha_graphics4_TessellationEvaluationShader;kha_graphics4_TessellationEvaluationShader.__name__="kha.graphics4.TessellationEvaluationShader";Object.assign(kha_graphics4_TessellationEvaluationShader.prototype,{__class__:kha_graphics4_TessellationEvaluationShader,shader:null});class kha_graphics4_TextureUnit{}$hxClasses["kha.graphics4.TextureUnit"]=kha_graphics4_TextureUnit;kha_graphics4_TextureUnit.__name__="kha.graphics4.TextureUnit";kha_graphics4_TextureUnit.__isInterface__=true;class kha_graphics4_VertexBuffer{constructor(vertexCount,structure,usage,instanceDataStepRate,canRead){if(canRead==null){canRead=false}if(instanceDataStepRate==null){instanceDataStepRate=0}this.lockEnd=0;this.lockStart=0;this.vertexCount=vertexCount;this.structure=structure;this.mySize=vertexCount;this.buffer=Krom.createVertexBuffer(vertexCount,structure.elements,usage,instanceDataStepRate)}lock(start,count){this.lockStart=start!=null?start:0;this.lockEnd=count!=null?start+count:this.mySize;this._data=kha_arrays_ByteArray._new(Krom.lockVertexBuffer(this.buffer,this.lockStart,this.lockEnd));return this._data}unlock(count){if(count!=null){this.lockEnd=this.lockStart+count}Krom.unlockVertexBuffer(this.buffer,this.lockEnd)}set(offset){Krom.setVertexBuffer(this.buffer);return 0}}$hxClasses["kha.graphics4.VertexBuffer"]=kha_graphics4_VertexBuffer;kha_graphics4_VertexBuffer.__name__="kha.graphics4.VertexBuffer";Object.assign(kha_graphics4_VertexBuffer.prototype,{__class__:kha_graphics4_VertexBuffer,buffer:null,_data:null,vertexCount:null,structure:null,mySize:null,lockStart:null,lockEnd:null});class kha_graphics4_VertexElement{constructor(name,data){this.name=name;this.data=data}}$hxClasses["kha.graphics4.VertexElement"]=kha_graphics4_VertexElement;kha_graphics4_VertexElement.__name__="kha.graphics4.VertexElement";Object.assign(kha_graphics4_VertexElement.prototype,{__class__:kha_graphics4_VertexElement,name:null,data:null});class kha_graphics4_VertexShader{constructor(sources,names){if(sources!=null){this.shader=Krom.createVertexShader(sources[0].bytes.b.bufferValue,names[0])}}static fromSource(source){let shader=new kha_graphics4_VertexShader(null,null);shader.shader=Krom.createVertexShaderFromSource(source);return shader}}$hxClasses["kha.graphics4.VertexShader"]=kha_graphics4_VertexShader;kha_graphics4_VertexShader.__name__="kha.graphics4.VertexShader";Object.assign(kha_graphics4_VertexShader.prototype,{__class__:kha_graphics4_VertexShader,shader:null});class kha_graphics4_VertexStructure{constructor(){this.elements=[];this.instanced=false}add(name,data){this.elements.push(new kha_graphics4_VertexElement(name,data))}size(){return this.elements.length}byteSize(){let byteSize=0;let _g=0;let _g1=this.elements.length;while(_g<_g1){let i=_g++;byteSize+=kha_graphics4_VertexStructure.dataByteSize(this.elements[i].data)}return byteSize}get(index){return this.elements[index]}static dataByteSize(data){switch(data){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64;case 5:case 6:case 7:case 8:return 1;case 9:case 10:case 11:case 12:return 2;case 13:case 14:case 15:case 16:return 4;case 17:case 18:case 19:case 20:return 2;case 21:case 22:case 23:case 24:return 4;case 25:case 26:case 27:case 28:return 8;case 29:case 30:return 4;case 31:case 32:return 8;case 33:case 34:return 12;case 35:case 36:return 16}}}$hxClasses["kha.graphics4.VertexStructure"]=kha_graphics4_VertexStructure;kha_graphics4_VertexStructure.__name__="kha.graphics4.VertexStructure";Object.assign(kha_graphics4_VertexStructure.prototype,{__class__:kha_graphics4_VertexStructure,elements:null,instanced:null});class kha_input_Gamepad{constructor(index,id){if(id==null){id="unknown"}if(index==null){index=0}this.connected=false;this.index=index;this.axisListeners=[];this.buttonListeners=[];kha_input_Gamepad.instances[index]=this}notify(axisListener,buttonListener){if(axisListener!=null){this.axisListeners.push(axisListener)}if(buttonListener!=null){this.buttonListeners.push(buttonListener)}}remove(axisListener,buttonListener){if(axisListener!=null){HxOverrides.remove(this.axisListeners,axisListener)}if(buttonListener!=null){HxOverrides.remove(this.buttonListeners,buttonListener)}}rumble(leftAmount,rightAmount){kha_SystemImpl.setGamepadRumble(this.index,leftAmount,rightAmount)}get_id(){return kha_SystemImpl.getGamepadId(this.index)}get_vendor(){return kha_SystemImpl.getGamepadVendor(this.index)}sendAxisEvent(axis,value){let _g=0;let _g1=this.axisListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(axis,value)}}sendButtonEvent(button,value){let _g=0;let _g1=this.buttonListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(button,value)}}static get(index){if(index==null){index=0}if(index>=kha_input_Gamepad.instances.length){return null}return kha_input_Gamepad.instances[index]}static notifyOnConnect(connectListener,disconnectListener){if(connectListener!=null){kha_input_Gamepad.connectListeners.push(connectListener)}if(disconnectListener!=null){kha_input_Gamepad.disconnectListeners.push(disconnectListener)}}static removeConnect(connectListener,disconnectListener){if(connectListener!=null){HxOverrides.remove(kha_input_Gamepad.connectListeners,connectListener)}if(disconnectListener!=null){HxOverrides.remove(kha_input_Gamepad.disconnectListeners,disconnectListener)}}static sendConnectEvent(index){kha_input_Gamepad.instances[index].connected=true;let _g=0;let _g1=kha_input_Gamepad.connectListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index)}}static sendDisconnectEvent(index){kha_input_Gamepad.instances[index].connected=false;let _g=0;let _g1=kha_input_Gamepad.disconnectListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index)}}}$hxClasses["kha.input.Gamepad"]=$hx_exports["kha"]["input"]["Gamepad"]=kha_input_Gamepad;kha_input_Gamepad.__name__="kha.input.Gamepad";Object.assign(kha_input_Gamepad.prototype,{__class__:kha_input_Gamepad,index:null,axisListeners:null,buttonListeners:null,id:null,vendor:null,connected:null,__properties__:{get_vendor:"get_vendor",get_id:"get_id"}});var kha_input_BlockInterventions=$hxEnums["kha.input.BlockInterventions"]={__ename__:true,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"kha.input.BlockInterventions",toString:$estr},Full:{_hx_name:"Full",_hx_index:1,__enum__:"kha.input.BlockInterventions",toString:$estr},None:{_hx_name:"None",_hx_index:2,__enum__:"kha.input.BlockInterventions",toString:$estr},Custom:($_=function(func){return{_hx_index:3,func:func,__enum__:"kha.input.BlockInterventions",toString:$estr}},$_._hx_name="Custom",$_.__params__=["func"],$_)};kha_input_BlockInterventions.__constructs__=[kha_input_BlockInterventions.Default,kha_input_BlockInterventions.Full,kha_input_BlockInterventions.None,kha_input_BlockInterventions.Custom];class kha_netsync_Controller{constructor(){this.__id=kha_netsync_ControllerBuilder.nextId++;this._inputBuffer=new haxe_io_Bytes(new ArrayBuffer(1))}}$hxClasses["kha.netsync.Controller"]=kha_netsync_Controller;kha_netsync_Controller.__name__="kha.netsync.Controller";Object.assign(kha_netsync_Controller.prototype,{__class__:kha_netsync_Controller,__id:null,_inputBuffer:null});class kha_input_Keyboard extends kha_netsync_Controller{constructor(){super();this.downListeners=[];this.upListeners=[];this.pressListeners=[];kha_input_Keyboard.instance=this}notify(downListener,upListener,pressListener){if(downListener!=null){this.downListeners.push(downListener)}if(upListener!=null){this.upListeners.push(upListener)}if(pressListener!=null){this.pressListeners.push(pressListener)}}remove(downListener,upListener,pressListener){if(downListener!=null){HxOverrides.remove(this.downListeners,downListener)}if(upListener!=null){HxOverrides.remove(this.upListeners,upListener)}if(pressListener!=null){HxOverrides.remove(this.pressListeners,pressListener)}}show(){}hide(){}sendDownEvent(code){let _g=0;let _g1=this.downListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(code)}}sendUpEvent(code){let _g=0;let _g1=this.upListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(code)}}sendPressEvent(char){let _g=0;let _g1=this.pressListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(char)}}_receive(bytes){}static get(num){if(num==null){num=0}return kha_SystemImpl.getKeyboard(num)}static disableSystemInterventions(behavior){kha_input_Keyboard.keyBehavior=behavior}}$hxClasses["kha.input.Keyboard"]=$hx_exports["kha"]["input"]["Keyboard"]=kha_input_Keyboard;kha_input_Keyboard.__name__="kha.input.Keyboard";kha_input_Keyboard.__super__=kha_netsync_Controller;Object.assign(kha_input_Keyboard.prototype,{__class__:kha_input_Keyboard,downListeners:null,upListeners:null,pressListeners:null});var kha_input_MouseEventBlockBehavior=$hxEnums["kha.input.MouseEventBlockBehavior"]={__ename__:true,__constructs__:null,Full:{_hx_name:"Full",_hx_index:0,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr},None:{_hx_name:"None",_hx_index:1,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr},Custom:($_=function(func){return{_hx_index:2,func:func,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr}},$_._hx_name="Custom",$_.__params__=["func"],$_)};kha_input_MouseEventBlockBehavior.__constructs__=[kha_input_MouseEventBlockBehavior.Full,kha_input_MouseEventBlockBehavior.None,kha_input_MouseEventBlockBehavior.Custom];var kha_input_MouseCursor=$hxEnums["kha.input.MouseCursor"]={__ename__:true,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"kha.input.MouseCursor",toString:$estr},Pointer:{_hx_name:"Pointer",_hx_index:1,__enum__:"kha.input.MouseCursor",toString:$estr},Text:{_hx_name:"Text",_hx_index:2,__enum__:"kha.input.MouseCursor",toString:$estr},EastWestResize:{_hx_name:"EastWestResize",_hx_index:3,__enum__:"kha.input.MouseCursor",toString:$estr},NorthSouthResize:{_hx_name:"NorthSouthResize",_hx_index:4,__enum__:"kha.input.MouseCursor",toString:$estr},NorthEastResize:{_hx_name:"NorthEastResize",_hx_index:5,__enum__:"kha.input.MouseCursor",toString:$estr},SouthEastResize:{_hx_name:"SouthEastResize",_hx_index:6,__enum__:"kha.input.MouseCursor",toString:$estr},NorthWestResize:{_hx_name:"NorthWestResize",_hx_index:7,__enum__:"kha.input.MouseCursor",toString:$estr},SouthWestResize:{_hx_name:"SouthWestResize",_hx_index:8,__enum__:"kha.input.MouseCursor",toString:$estr},Grab:{_hx_name:"Grab",_hx_index:9,__enum__:"kha.input.MouseCursor",toString:$estr},Grabbing:{_hx_name:"Grabbing",_hx_index:10,__enum__:"kha.input.MouseCursor",toString:$estr},NotAllowed:{_hx_name:"NotAllowed",_hx_index:11,__enum__:"kha.input.MouseCursor",toString:$estr},Wait:{_hx_name:"Wait",_hx_index:12,__enum__:"kha.input.MouseCursor",toString:$estr},Crosshair:{_hx_name:"Crosshair",_hx_index:13,__enum__:"kha.input.MouseCursor",toString:$estr},Custom:($_=function(image){return{_hx_index:14,image:image,__enum__:"kha.input.MouseCursor",toString:$estr}},$_._hx_name="Custom",$_.__params__=["image"],$_)};kha_input_MouseCursor.__constructs__=[kha_input_MouseCursor.Default,kha_input_MouseCursor.Pointer,kha_input_MouseCursor.Text,kha_input_MouseCursor.EastWestResize,kha_input_MouseCursor.NorthSouthResize,kha_input_MouseCursor.NorthEastResize,kha_input_MouseCursor.SouthEastResize,kha_input_MouseCursor.NorthWestResize,kha_input_MouseCursor.SouthWestResize,kha_input_MouseCursor.Grab,kha_input_MouseCursor.Grabbing,kha_input_MouseCursor.NotAllowed,kha_input_MouseCursor.Wait,kha_input_MouseCursor.Crosshair,kha_input_MouseCursor.Custom];class kha_input_Mouse extends kha_netsync_Controller{constructor(){super();kha_input_Mouse.instance=this}notify(downListener,upListener,moveListener,wheelListener,leaveListener){this.notifyWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener)}remove(downListener,upListener,moveListener,wheelListener,leaveListener){this.removeWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener)}notifyWindowed(windowId,downListener,upListener,moveListener,wheelListener,leaveListener){if(downListener!=null){if(this.windowDownListeners==null){this.windowDownListeners=[]}while(this.windowDownListeners.length<=windowId)this.windowDownListeners.push([]);this.windowDownListeners[windowId].push(downListener)}if(upListener!=null){if(this.windowUpListeners==null){this.windowUpListeners=[]}while(this.windowUpListeners.length<=windowId)this.windowUpListeners.push([]);this.windowUpListeners[windowId].push(upListener)}if(moveListener!=null){if(this.windowMoveListeners==null){this.windowMoveListeners=[]}while(this.windowMoveListeners.length<=windowId)this.windowMoveListeners.push([]);this.windowMoveListeners[windowId].push(moveListener)}if(wheelListener!=null){if(this.windowWheelListeners==null){this.windowWheelListeners=[]}while(this.windowWheelListeners.length<=windowId)this.windowWheelListeners.push([]);this.windowWheelListeners[windowId].push(wheelListener)}if(leaveListener!=null){if(this.windowLeaveListeners==null){this.windowLeaveListeners=[]}while(this.windowLeaveListeners.length<=windowId)this.windowLeaveListeners.push([]);this.windowLeaveListeners[windowId].push(leaveListener)}}removeWindowed(windowId,downListener,upListener,moveListener,wheelListener,leaveListener){if(downListener!=null){if(this.windowDownListeners!=null){if(windowId<this.windowDownListeners.length){HxOverrides.remove(this.windowDownListeners[windowId],downListener)}else{haxe_Log.trace('no downListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:152,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no downListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:156,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(upListener!=null){if(this.windowUpListeners!=null){if(windowId<this.windowUpListeners.length){HxOverrides.remove(this.windowUpListeners[windowId],upListener)}else{haxe_Log.trace('no upListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:166,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no upListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:170,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(moveListener!=null){if(this.windowMoveListeners!=null){if(windowId<this.windowMoveListeners.length){HxOverrides.remove(this.windowMoveListeners[windowId],moveListener)}else{haxe_Log.trace('no moveListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:180,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no moveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:184,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(wheelListener!=null){if(this.windowWheelListeners!=null){if(windowId<this.windowWheelListeners.length){HxOverrides.remove(this.windowWheelListeners[windowId],wheelListener)}else{haxe_Log.trace('no wheelListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:194,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no wheelListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:198,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(leaveListener!=null){if(this.windowLeaveListeners!=null){if(windowId<this.windowLeaveListeners.length){HxOverrides.remove(this.windowLeaveListeners[windowId],leaveListener)}else{haxe_Log.trace('no leaveListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:208,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no leaveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:212,className:"kha.input.Mouse",methodName:"removeWindowed"})}}}lock(){}unlock(){}canLock(){return false}isLocked(){return false}notifyOnLockChange(change,error){}removeFromLockChange(change,error){}hideSystemCursor(){}showSystemCursor(){}setSystemCursor(cursor){}sendLeaveEvent(windowId){if(this.windowLeaveListeners!=null){let _g=0;let _g1=this.windowLeaveListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}}sendDownEvent(windowId,button,x,y){if(this.windowDownListeners!=null){let _g=0;let _g1=this.windowDownListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(button,x,y)}}}sendUpEvent(windowId,button,x,y){if(this.windowUpListeners!=null){let _g=0;let _g1=this.windowUpListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(button,x,y)}}}sendMoveEvent(windowId,x,y,movementX,movementY){if(this.windowMoveListeners!=null){let _g=0;let _g1=this.windowMoveListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,movementX,movementY)}}}sendWheelEvent(windowId,delta){if(this.windowWheelListeners!=null){let _g=0;let _g1=this.windowWheelListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(delta)}}}_receive(bytes){}static get(num){if(num==null){num=0}return kha_SystemImpl.getMouse(num)}static setWheelEventBlockBehavior(behavior){kha_input_Mouse.wheelEventBlockBehavior=behavior}}$hxClasses["kha.input.Mouse"]=$hx_exports["kha"]["input"]["Mouse"]=kha_input_Mouse;kha_input_Mouse.__name__="kha.input.Mouse";kha_input_Mouse.__super__=kha_netsync_Controller;Object.assign(kha_input_Mouse.prototype,{__class__:kha_input_Mouse,windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,windowWheelListeners:null,windowLeaveListeners:null});class kha_input_MouseImpl extends kha_input_Mouse{constructor(){super()}lock(){kha_SystemImpl.lockMouse()}unlock(){kha_SystemImpl.unlockMouse()}canLock(){return kha_SystemImpl.canLockMouse()}isLocked(){return kha_SystemImpl.isMouseLocked()}notifyOnLockChange(func,error){kha_SystemImpl.notifyOfMouseLockChange(func,error)}removeFromLockChange(func,error){kha_SystemImpl.removeFromMouseLockChange(func,error)}hideSystemCursor(){kha_SystemImpl.hideSystemCursor()}showSystemCursor(){kha_SystemImpl.showSystemCursor()}_receive(bytes){}}$hxClasses["kha.input.MouseImpl"]=kha_input_MouseImpl;kha_input_MouseImpl.__name__="kha.input.MouseImpl";kha_input_MouseImpl.__super__=kha_input_Mouse;Object.assign(kha_input_MouseImpl.prototype,{__class__:kha_input_MouseImpl});class kha_input_Pen{constructor(){kha_input_Pen.instance=this}notify(downListener,upListener,moveListener){this.notifyWindowed(0,downListener,upListener,moveListener)}notifyWindowed(windowId,downListener,upListener,moveListener){if(downListener!=null){if(this.windowDownListeners==null){this.windowDownListeners=[]}while(this.windowDownListeners.length<=windowId)this.windowDownListeners.push([]);this.windowDownListeners[windowId].push(downListener)}if(upListener!=null){if(this.windowUpListeners==null){this.windowUpListeners=[]}while(this.windowUpListeners.length<=windowId)this.windowUpListeners.push([]);this.windowUpListeners[windowId].push(upListener)}if(moveListener!=null){if(this.windowMoveListeners==null){this.windowMoveListeners=[]}while(this.windowMoveListeners.length<=windowId)this.windowMoveListeners.push([]);this.windowMoveListeners[windowId].push(moveListener)}}sendDownEvent(windowId,x,y,pressure){if(this.windowDownListeners!=null){let _g=0;let _g1=this.windowDownListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,pressure)}}}sendUpEvent(windowId,x,y,pressure){if(this.windowUpListeners!=null){let _g=0;let _g1=this.windowUpListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,pressure)}}}sendMoveEvent(windowId,x,y,pressure){if(this.windowMoveListeners!=null){let _g=0;let _g1=this.windowMoveListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,pressure)}}}static get(num){if(num==null){num=0}return kha_SystemImpl.getPen(num)}}$hxClasses["kha.input.Pen"]=kha_input_Pen;kha_input_Pen.__name__="kha.input.Pen";Object.assign(kha_input_Pen.prototype,{__class__:kha_input_Pen,windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null});var kha_input_TouchDownEventBlockBehavior=$hxEnums["kha.input.TouchDownEventBlockBehavior"]={__ename__:true,__constructs__:null,Full:{_hx_name:"Full",_hx_index:0,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr},None:{_hx_name:"None",_hx_index:1,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr},Custom:($_=function(func){return{_hx_index:2,func:func,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr}},$_._hx_name="Custom",$_.__params__=["func"],$_)};kha_input_TouchDownEventBlockBehavior.__constructs__=[kha_input_TouchDownEventBlockBehavior.Full,kha_input_TouchDownEventBlockBehavior.None,kha_input_TouchDownEventBlockBehavior.Custom];class kha_input_Surface{constructor(){this.touchStartListeners=[];this.touchEndListeners=[];this.moveListeners=[];kha_input_Surface.instance=this}notify(touchStartListener,touchEndListener,moveListener){if(touchStartListener!=null){this.touchStartListeners.push(touchStartListener)}if(touchEndListener!=null){this.touchEndListeners.push(touchEndListener)}if(moveListener!=null){this.moveListeners.push(moveListener)}}remove(touchStartListener,touchEndListener,moveListener){if(touchStartListener!=null){HxOverrides.remove(this.touchStartListeners,touchStartListener)}if(touchEndListener!=null){HxOverrides.remove(this.touchEndListeners,touchEndListener)}if(moveListener!=null){HxOverrides.remove(this.moveListeners,moveListener)}}sendTouchStartEvent(index,x,y){let _g=0;let _g1=this.touchStartListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index,x,y)}}sendTouchEndEvent(index,x,y){let _g=0;let _g1=this.touchEndListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index,x,y)}}sendMoveEvent(index,x,y){let _g=0;let _g1=this.moveListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index,x,y)}}static get(num){if(num==null){num=0}if(num!=0){return null}return kha_input_Surface.instance}static setTouchDownEventBlockBehavior(behavior){kha_input_Surface.touchDownEventBlockBehavior=behavior}}$hxClasses["kha.input.Surface"]=$hx_exports["kha"]["input"]["Surface"]=kha_input_Surface;kha_input_Surface.__name__="kha.input.Surface";Object.assign(kha_input_Surface.prototype,{__class__:kha_input_Surface,touchStartListeners:null,touchEndListeners:null,moveListeners:null});class kha_internal_BytesBlob{constructor(bytes){this.bytes=bytes}sub(start,length){return new kha_internal_BytesBlob(this.bytes.sub(start,length))}get_length(){return this.bytes.length}writeU8(position,value){this.bytes.b[position]=value}readU8(position){let byte=this.bytes.b[position];++position;return byte}toString(){return this.bytes.toString()}toBytes(){return this.bytes}static fromBytes(bytes){return new kha_internal_BytesBlob(bytes)}static alloc(size){return new kha_internal_BytesBlob(new haxe_io_Bytes(new ArrayBuffer(size)))}}$hxClasses["kha.internal.BytesBlob"]=kha_internal_BytesBlob;kha_internal_BytesBlob.__name__="kha.internal.BytesBlob";kha_internal_BytesBlob.__interfaces__=[kha_Resource];Object.assign(kha_internal_BytesBlob.prototype,{__class__:kha_internal_BytesBlob,bytes:null,length:null,__properties__:{get_length:"get_length"}});class kha_krom_Graphics{constructor(renderTarget){this.renderTarget=renderTarget}begin(additionalRenderTargets){Krom.begin(this.renderTarget,additionalRenderTargets)}beginFace(face){Krom.beginFace(this.renderTarget,face)}end(){Krom.end()}clear(color,depth,stencil){let flags=0;if(color!=null){flags|=1}if(depth!=null){flags|=2}if(stencil!=null){flags|=4}Krom.clear(flags,color==null?0:color,depth,stencil)}viewport(x,y,width,height){Krom.viewport(x,y,width,height)}setVertexBuffer(vertexBuffer){vertexBuffer.set(0)}setVertexBuffers(vertexBuffers){Krom.setVertexBuffers(vertexBuffers)}setIndexBuffer(indexBuffer){indexBuffer.set()}setCubeMap(unit,cubeMap){if(cubeMap==null){return}if(cubeMap.texture_!=null){Krom.setTexture(unit,cubeMap.texture_)}else{Krom.setRenderTarget(unit,cubeMap.renderTarget_)}}setCubeMapDepth(unit,cubeMap){if(cubeMap==null){return}Krom.setTextureDepth(unit,cubeMap.renderTarget_)}setTexture(unit,texture){if(texture==null){return}if(texture.texture_!=null){Krom.setTexture(unit,texture.texture_)}else{Krom.setRenderTarget(unit,texture.renderTarget_)}}setTextureDepth(unit,texture){if(texture==null){return}Krom.setTextureDepth(unit,texture.renderTarget_)}setImageTexture(unit,texture){if(texture==null){return}Krom.setImageTexture(unit,texture.texture_)}setTextureParameters(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter){Krom.setTextureParameters(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter)}setTexture3DParameters(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter){Krom.setTexture3DParameters(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter)}setTextureCompareMode(texunit,enabled){Krom.setTextureCompareMode(texunit,enabled)}setCubeMapCompareMode(texunit,enabled){Krom.setCubeMapCompareMode(texunit,enabled)}setPipeline(pipeline){pipeline.set()}setBool(location,value){Krom.setBool(location,value)}setInt(location,value){Krom.setInt(location,value)}setFloat(location,value){Krom.setFloat(location,value)}setFloat2(location,value1,value2){Krom.setFloat2(location,value1,value2)}setFloat3(location,value1,value2,value3){Krom.setFloat3(location,value1,value2,value3)}setFloat4(location,value1,value2,value3,value4){Krom.setFloat4(location,value1,value2,value3,value4)}setFloats(location,values){Krom.setFloats(location,values.buffer)}setMatrix(location,matrix){let v=matrix._00;kha_krom_Graphics.mat.setFloat32(0,v,true);let v1=matrix._01;kha_krom_Graphics.mat.setFloat32(4,v1,true);let v2=matrix._02;kha_krom_Graphics.mat.setFloat32(8,v2,true);let v3=matrix._03;kha_krom_Graphics.mat.setFloat32(12,v3,true);let v4=matrix._10;kha_krom_Graphics.mat.setFloat32(16,v4,true);let v5=matrix._11;kha_krom_Graphics.mat.setFloat32(20,v5,true);let v6=matrix._12;kha_krom_Graphics.mat.setFloat32(24,v6,true);let v7=matrix._13;kha_krom_Graphics.mat.setFloat32(28,v7,true);let v8=matrix._20;kha_krom_Graphics.mat.setFloat32(32,v8,true);let v9=matrix._21;kha_krom_Graphics.mat.setFloat32(36,v9,true);let v10=matrix._22;kha_krom_Graphics.mat.setFloat32(40,v10,true);let v11=matrix._23;kha_krom_Graphics.mat.setFloat32(44,v11,true);let v12=matrix._30;kha_krom_Graphics.mat.setFloat32(48,v12,true);let v13=matrix._31;kha_krom_Graphics.mat.setFloat32(52,v13,true);let v14=matrix._32;kha_krom_Graphics.mat.setFloat32(56,v14,true);let v15=matrix._33;kha_krom_Graphics.mat.setFloat32(60,v15,true);Krom.setMatrix(location,kha_krom_Graphics.mat.buffer)}setMatrix3(location,matrix){let v=matrix._00;kha_krom_Graphics.mat.setFloat32(0,v,true);let v1=matrix._01;kha_krom_Graphics.mat.setFloat32(4,v1,true);let v2=matrix._02;kha_krom_Graphics.mat.setFloat32(8,v2,true);let v3=matrix._10;kha_krom_Graphics.mat.setFloat32(12,v3,true);let v4=matrix._11;kha_krom_Graphics.mat.setFloat32(16,v4,true);let v5=matrix._12;kha_krom_Graphics.mat.setFloat32(20,v5,true);let v6=matrix._20;kha_krom_Graphics.mat.setFloat32(24,v6,true);let v7=matrix._21;kha_krom_Graphics.mat.setFloat32(28,v7,true);let v8=matrix._22;kha_krom_Graphics.mat.setFloat32(32,v8,true);Krom.setMatrix3(location,kha_krom_Graphics.mat.buffer)}drawIndexedVertices(start,count){if(count==null){count=-1}if(start==null){start=0}Krom.drawIndexedVertices(start,count)}drawIndexedVerticesInstanced(instanceCount,start,count){if(count==null){count=-1}if(start==null){start=0}Krom.drawIndexedVerticesInstanced(instanceCount,start,count)}scissor(x,y,width,height){Krom.scissor(x,y,width,height)}disableScissor(){Krom.disableScissor()}}$hxClasses["kha.krom.Graphics"]=kha_krom_Graphics;kha_krom_Graphics.__name__="kha.krom.Graphics";kha_krom_Graphics.__interfaces__=[kha_graphics4_Graphics];Object.assign(kha_krom_Graphics.prototype,{__class__:kha_krom_Graphics,renderTarget:null});class kha_krom_Sound extends kha_Sound{constructor(bytes){super();this.sampleRate=44100;let count=bytes.length/4|0;this.uncompressedData=kha_arrays_Float32Array._new(count);let _g=0;let _g1=count;while(_g<_g1){let i=_g++;let this1=this.uncompressedData;let v=bytes.getFloat(i*4);this1.setFloat32(i*4,v,true)}this.compressedData=null}uncompress(done){done()}}$hxClasses["kha.krom.Sound"]=kha_krom_Sound;kha_krom_Sound.__name__="kha.krom.Sound";kha_krom_Sound.__super__=kha_Sound;Object.assign(kha_krom_Sound.prototype,{__class__:kha_krom_Sound});class kha_math_Vector2{constructor(x,y){if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y}}$hxClasses["kha.math.Vector2"]=kha_math_Vector2;kha_math_Vector2.__name__="kha.math.Vector2";Object.assign(kha_math_Vector2.prototype,{__class__:kha_math_Vector2,x:null,y:null});class kha_netsync_ControllerBuilder{}$hxClasses["kha.netsync.ControllerBuilder"]=kha_netsync_ControllerBuilder;kha_netsync_ControllerBuilder.__name__="kha.netsync.ControllerBuilder";class kha_netsync_Session{static the(){return kha_netsync_Session.instance}}$hxClasses["kha.netsync.Session"]=kha_netsync_Session;kha_netsync_Session.__name__="kha.netsync.Session";class koui_Config{}$hxClasses["koui.Config"]=koui_Config;koui_Config.__name__="koui.Config";class koui_Koui{static init(done){koui_theme_Style.init();koui_graphics_KGraphics.initTextPipeline();let windowId=0;let screenWidth=kha_Window.get(windowId).get_width();let screenHeight=kha_Window.get(windowId).get_height();let antialiasing=1;koui_Koui.backbuffer=kha_Image.createRenderTarget(screenWidth,screenHeight,null,0,antialiasing);koui_Koui.g=new koui_graphics_KGraphics(koui_Koui.backbuffer);koui_Koui.anchorPane=new koui_elements_layouts_AnchorPane(0,0,screenWidth,screenHeight);kha_Assets.loadEverything(function(){koui_utils_Cursor.init();koui_Koui.font=koui_Koui.g.set_font(kha_Assets.fonts.get(koui_theme_Style.styles.h["_root"+"_"+"default"].font.family));koui_Koui.fontSize=koui_Koui.g.set_fontSize(koui_theme_Style.styles.h["_root"+"_"+"default"].font.size*koui_Koui.uiScale|0);koui_events_EventHandler.init();kha_Window.get(windowId).notifyOnResize(koui_Koui.onResize);koui_Koui.initialized=true;done()},koui_Koui.filterAssets)}static filterAssets(asset){return koui_theme_Style.requiredAssets.indexOf(asset.name)!=-1}static render(g2){if(!koui_Koui.initialized){return}if(kha_System.windowWidth()==0||kha_System.windowHeight()==0){return}koui_events_EventHandler.update();koui_Koui.g.begin(true,0);koui_Koui.anchorPane.draw(koui_Koui.g);let _g=0;let _g1=koui_Koui.overlays.length;while(_g<_g1){let i=_g++;let offset=koui_Koui.overlay_offsets[i];koui_Koui.g.pushTranslation(-offset[0],-offset[1]);let overlayElem=koui_Koui.overlays[i];let state=overlayElem.disabled?"disabled":"default";let ctxElement="";if(ctxElement==null){ctxElement=""}overlayElem.state=state;overlayElem.ctxElement=ctxElement;overlayElem.loadStyle();let _g1=0;let _g2=overlayElem.children;while(_g1<_g2.length){let c=_g2[_g1];++_g1;let ctxElement1=ctxElement;let recursive=true;if(recursive==null){recursive=true}if(ctxElement1==null){ctxElement1=""}c.state=state;c.ctxElement=ctxElement1;c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContext(state,ctxElement1,true)}}}if(overlayElem.disabled){overlayElem.state="disabled";overlayElem.loadStyle();let _g=0;let _g1=overlayElem.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state="disabled";c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState("disabled",true)}}}}overlayElem.drawOverlay(koui_Koui.g);koui_Koui.g.popTransformation()}koui_Koui.g.end();koui_events_EventHandler.reset();g2.begin(false);g2.set_color(-1);g2.set_opacity(1);g2.drawImage(koui_Koui.backbuffer,0,0);g2.end();let elem=koui_elements_Element.invalidations.map.keys();while(elem.hasNext()){let elem1=elem.next();if(elem1.layout!=null){elem1.layout.elemUpdated(elem1)}}koui_elements_Element.invalidations.map.clear()}static getElementAtPosition(x,y){let sorted_overlays=koui_Koui.overlays.slice();sorted_overlays.reverse();let _g=0;let _g1=sorted_overlays.length;while(_g<_g1){let i=_g++;let element=sorted_overlays[i];let offset=koui_Koui.overlay_offsets[i];let relX=x+offset[0];let relY=y+offset[1];let tmp;if(!element.visible){tmp=false}else{let posX=element.drawX;let posY=element.drawY;tmp=relX>=posX&&relX<=posX+element.drawWidth&&relY>=posY&&relY<=posY+element.drawHeight}if(tmp){return element}}return koui_Koui.anchorPane.getElementAtPosition(x,y)}static onResize(width,height){if(kha_System.windowWidth()==0||kha_System.windowHeight()==0){return}koui_Koui.anchorPane.resize(width,height);koui_Koui.backbuffer=kha_Image.createRenderTarget(width,height,null,0,1);koui_Koui.g=new koui_graphics_KGraphics(koui_Koui.backbuffer)}static set_uiScale(value){koui_Koui.uiScale=value;if(koui_Koui.fontSize!=null){koui_Koui.fontSize=koui_Koui.g.set_fontSize(koui_theme_Style.styles.h["_root"+"_"+"default"].font.size*koui_Koui.uiScale|0)}if(koui_Koui.anchorPane!=null){let element=$getIterator(koui_Koui.anchorPane.getAllElements());while(element.hasNext()){let element1=element.next();koui_Koui.updateElementSize(element1)}}return koui_Koui.uiScale}static updateElementSize(element){if(element!=koui_Koui.anchorPane){if(element instanceof koui_elements_layouts_AnchorPane||element instanceof koui_elements_layouts_GridLayout||element instanceof koui_elements_layouts_ScrollPane||element instanceof koui_elements_layouts_Expander){element.resize(element.layoutWidth,element.layoutHeight)}else{let height=element.layoutHeight;element.set_width(element.layoutWidth);element.set_height(height)}koui_elements_Element.invalidations.map.set(element,true);element.onResize()}if(element instanceof koui_elements_layouts_GridLayout){let gridLayout=js_Boot.__cast(element,koui_elements_layouts_GridLayout);let _g=0;let _g1=gridLayout.amountRows;while(_g<_g1){let row=_g++;let _g1=0;let _g2=gridLayout.amountCols;while(_g1<_g2){let col=_g1++;let child=gridLayout.elements[row][col];if(child!=null){koui_Koui.updateElementSize(child)}}}}else if(element instanceof koui_elements_layouts_Layout){let elements=element.elements;if(elements!=null){let _g=0;let _g1=elements.length;while(_g<_g1){let i=_g++;koui_Koui.updateElementSize(elements[i])}}}}}$hxClasses["koui.Koui"]=koui_Koui;koui_Koui.__name__="koui.Koui";koui_Koui.__properties__={set_uiScale:"set_uiScale"};class koui_effects_Effect{}$hxClasses["koui.effects.Effect"]=koui_effects_Effect;koui_effects_Effect.__name__="koui.effects.Effect";class koui_effects_Border extends koui_effects_Effect{static draw(g,element){let propertiesBorder=koui_theme_Style.styles.h[element.tID+"_"+"default"].border;if(propertiesBorder==null||propertiesBorder.size<=0){return}let thickness=propertiesBorder.size;g.set_color(propertiesBorder.color);switch(propertiesBorder.style){case"inset":g.drawRect(element.drawX+thickness/2,element.drawY+thickness/2,element.drawWidth-thickness,element.drawHeight-thickness,thickness);break;case"middle":g.drawRect(element.drawX,element.drawY,element.drawWidth,element.drawHeight,thickness);break;case"outset":g.drawRect(element.drawX-thickness/2,element.drawY-thickness/2,element.drawWidth+thickness,element.drawHeight+thickness,thickness);break;default:haxe_Log.trace("Koui warning: Border style "+propertiesBorder.style+" not supported!",{fileName:"koui/effects/Border.hx",lineNumber:29,className:"koui.effects.Border",methodName:"draw"})}}}$hxClasses["koui.effects.Border"]=koui_effects_Border;koui_effects_Border.__name__="koui.effects.Border";koui_effects_Border.__super__=koui_effects_Effect;Object.assign(koui_effects_Border.prototype,{__class__:koui_effects_Border});class koui_utils_Set_$koui_$elements_$Element{constructor(){this.map=new haxe_ds_ObjectMap}}$hxClasses["koui.utils.Set_koui_elements_Element"]=koui_utils_Set_$koui_$elements_$Element;koui_utils_Set_$koui_$elements_$Element.__name__="koui.utils.Set_koui_elements_Element";Object.assign(koui_utils_Set_$koui_$elements_$Element.prototype,{__class__:koui_utils_Set_$koui_$elements_$Element,map:null});class koui_elements_Element{constructor(__isSuperCall){if(koui_elements_Element._hx_skip_constructor){return}this._hx_constructor(__isSuperCall)}_hx_constructor(__isSuperCall){if(__isSuperCall==null){__isSuperCall=false}this.eventListeners=new haxe_ds_StringMap;this.styleInitialized=false;this.ctxElement="";this.state="default";let _g=new haxe_ds_StringMap;_g.h[""]=["default","disabled"];this.states=_g;this.tID="_root";this.autoRenderChildren=true;this.children=[];this.parent=null;this.layout=null;this.visible=true;this.disabled=false;this.anchor=9;this.height=0;this.width=0;this.posY=0;this.posX=0;this.onBuild();this.initStyle();this.onTIDChange();koui_events_EventHandler.registerElement(this)}onBuild(){}initStyle(){}toString(){let c=js_Boot.getClass(this);return"Element: <"+c.__name__+">"}renderElement(g,element){if(!element.visible){return}g.set_opacity(element.style.opacity);element.draw(g);if(element.autoRenderChildren){g.pushTranslation(element.drawX,element.drawY);let _g=0;let _g1=element.children;while(_g<_g1.length){let c=_g1[_g];++_g;this.renderElement(g,c)}g.popTransformation()}}draw(g){throw new haxe_Exception("[Koui Error] "+"draw() function must be overriden by element!")}drawOverlay(g){}getLayoutOffset(){let this1=new Array(2);let offset=this1;offset[0]=0;offset[1]=0;let currentParent=this;while(currentParent.layout!=null){currentParent=currentParent.layout;if(currentParent instanceof koui_elements_layouts_Layout){offset[0]-=currentParent.layoutX;offset[1]-=currentParent.layoutY;if(currentParent instanceof koui_elements_layouts_ScrollPane){let sp=js_Boot.__cast(currentParent,koui_elements_layouts_ScrollPane);offset[0]+=sp.scrollX|0;offset[1]+=sp.scrollY|0}}}return offset}onResize(){}set_posX(value){if(value!=this.posX){koui_elements_Element.invalidations.map.set(this,true)}return this.posX=this.set_layoutX(value)}set_posY(value){if(value!=this.posY){koui_elements_Element.invalidations.map.set(this,true)}return this.posY=this.set_layoutY(value)}set_width(value){let changed=value!=this.width;if(changed){koui_elements_Element.invalidations.map.set(this,true)}this.width=this.set_layoutWidth(value);if(changed){this.onResize()}return this.width}set_height(value){let changed=value!=this.height;if(changed){koui_elements_Element.invalidations.map.set(this,true)}this.height=this.set_layoutHeight(value);if(changed){this.onResize()}return this.height}set_layoutX(value){return this.layoutX=this.drawX=value}set_layoutY(value){return this.layoutY=this.drawY=value}set_layoutWidth(value){if(this==koui_Koui.anchorPane){this.drawWidth=value}else{this.drawWidth=value*koui_Koui.uiScale|0}return this.layoutWidth=value}set_layoutHeight(value){if(this==koui_Koui.anchorPane){this.drawHeight=value}else{this.drawHeight=value*koui_Koui.uiScale|0}return this.layoutHeight=value}set_tID(value){this.tID=value;this.stylesCache=new haxe_ds_StringMap;let h=this.states.h;let _g_h=h;let _g_keys=Object.keys(h);let _g_length=_g_keys.length;let _g_current=0;while(_g_current<_g_length){let key=_g_keys[_g_current++];let _g1_key=key;let _g1_value=_g_h[key];let ctxElementName=_g1_key;let ctxElementStates=_g1_value;this.cacheStates(ctxElementStates,ctxElementName)}this.loadStyle();return this.tID}setTID(tID){if(this.tID!=tID){this.set_tID(tID);let ctxElement="";if(ctxElement==null){ctxElement=""}this.ctxElement=ctxElement;this.loadStyle();this.onTIDChange()}}cacheStates(states,ctxElement){if(ctxElement==null){ctxElement=""}let selectorBaseName=ctxElement==""?this.tID:this.tID+"_"+ctxElement;let _g=0;while(_g<states.length){let s=states[_g];++_g;let key=ctxElement+"!"+s;let state=s;if(state==null){state="default"}let v=koui_theme_Style.styles.h[selectorBaseName+"_"+state];this.stylesCache.h[key]=v;if(this.stylesCache.h[key]==null){haxe_Log.trace("[Koui Warning] "+('Missing selector in theme file: "'+(selectorBaseName+"!"+s)+'", trying to use default state instead.'),{fileName:"koui/utils/Log.hx",lineNumber:20,className:"koui.utils.Log",methodName:"warn"});let state="default";if(state==null){state="default"}let v=koui_theme_Style.styles.h[selectorBaseName+"_"+state];this.stylesCache.h[key]=v;if(this.stylesCache.h[key]==null){throw new haxe_Exception("[Koui Error] "+('Missing selector in theme file: "'+(selectorBaseName+"!"+s)+'"!'))}}}}setContext(state,ctxElement,recursive){if(recursive==null){recursive=true}if(ctxElement==null){ctxElement=""}this.state=state;this.ctxElement=ctxElement;this.loadStyle();if(recursive){let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContext(state,ctxElement,true)}}}setContextState(state,recursive){if(recursive==null){recursive=true}this.state=state;this.loadStyle();if(recursive){let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState(state,true)}}}loadStyle(){let stateStyle=this.stylesCache.h[this.ctxElement+"!"+this.state];if(stateStyle!=null){this.style=stateStyle}else{if(this.ctxElement==""){this.ctxElement=this.tID}else{this.ctxElement=this.tID+"_"+this.ctxElement}throw new haxe_Exception("[Koui Error] "+(""+Std.string(this)+", "+this.tID+': No cached style found for tID "'+this.ctxElement+'" and state "'+this.state+'"!'))}}onTIDChange(){}addEventListener(eventClass,callback){let typeUID=haxe_rtti_Meta.getType(eventClass).typeUID[0];if(this.eventListeners.h[typeUID]==null){let this1=this.eventListeners;let value=[];this1.h[typeUID]=value}this.eventListeners.h[typeUID].push(new koui_events_EventListener(callback))}getElementAtPosition(x,y){let tmp;if(!this.visible){tmp=false}else{let posX=this.drawX;let posY=this.drawY;tmp=x>=posX&&x<=posX+this.drawWidth&&y>=posY&&y<=posY+this.drawHeight}if(!tmp){return null}if(this.children.length==0){return this}x-=this.layoutX;y-=this.layoutY;let sortedElements=this.children.slice();sortedElements.reverse();let _g=0;while(_g<sortedElements.length){let element=sortedElements[_g];++_g;if(!element.visible){continue}let hit=element.getElementAtPosition(x,y);if(hit!=null){return hit}let tmp;if(!element.visible){tmp=false}else{let posX=element.drawX;let posY=element.drawY;tmp=x>=posX&&x<=posX+element.drawWidth&&y>=posY&&y<=posY+element.drawHeight}if(tmp){return element}}return this}}$hxClasses["koui.elements.Element"]=koui_elements_Element;koui_elements_Element.__name__="koui.elements.Element";Object.assign(koui_elements_Element.prototype,{__class__:koui_elements_Element,posX:null,posY:null,width:null,height:null,anchor:null,disabled:null,visible:null,layout:null,parent:null,children:null,autoRenderChildren:null,tID:null,stylesCache:null,style:null,states:null,state:null,ctxElement:null,styleInitialized:null,drawX:null,drawY:null,drawWidth:null,drawHeight:null,layoutX:null,layoutY:null,layoutWidth:null,layoutHeight:null,eventListeners:null,__properties__:{set_layoutHeight:"set_layoutHeight",set_layoutWidth:"set_layoutWidth",set_layoutY:"set_layoutY",set_layoutX:"set_layoutX",set_tID:"set_tID",set_height:"set_height",set_width:"set_width",set_posY:"set_posY",set_posX:"set_posX"}});class koui_elements_Button extends koui_elements_Element{constructor(text){koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(text)}_hx_constructor(text){this.isPressed=false;this.isHovered=false;this.isToggle=false;this.iconSize=new kha_math_Vector2(16,16);this.text="";super._hx_constructor();this.set_text(text);this.addEventListener(koui_events_MouseHoverEvent,$bind(this,this._onHover));this.addEventListener(koui_events_MouseClickEvent,$bind(this,this._onClick))}onBuild(){this.cElemLabel=new koui_elements_Label(this.text);this.cElemLabel.alignmentHor=1;this.cElemLabel.alignmentVert=1;let child=this.cElemLabel;child.parent=this;this.children.push(child);this.cElemIcon=new koui_elements_ImagePanel(null)}initStyle(){if(!this.styleInitialized){this.set_tID("_button");this.styleInitialized=true}if(!Object.prototype.hasOwnProperty.call(this.states.h,"")){let v=["default","disabled"];this.states.h[""]=v;this.cacheStates(this.states.h[""],"")}let this1=this.states;let v=this.states.h[""].concat(["hover","click"]);this1.h[""]=v;this.cacheStates(this.states.h[""],"");let _this=this.cElemLabel;if(!Object.prototype.hasOwnProperty.call(_this.states.h,"")){let v=["default","disabled"];_this.states.h[""]=v;_this.cacheStates(_this.states.h[""],"")}let this2=_this.states;let v1=_this.states.h[""].concat(["hover","click"]);this2.h[""]=v1;_this.cacheStates(_this.states.h[""],"");this.cElemLabel.setTID(this.tID);let _this1=this.cElemIcon;if(!Object.prototype.hasOwnProperty.call(_this1.states.h,"")){let v=["default","disabled"];_this1.states.h[""]=v;_this1.cacheStates(_this1.states.h[""],"")}let this3=_this1.states;let v2=_this1.states.h[""].concat(["hover","click"]);this3.h[""]=v2;_this1.cacheStates(_this1.states.h[""],"")}onResize(){let _this=this.cElemLabel;let posY=this.drawHeight/2|0;_this.set_posX(this.drawWidth/2|0);_this.set_posY(posY);let padding=(this.drawHeight-this.cElemIcon.layoutHeight*koui_Koui.uiScale)/2|0;let _this1=this.cElemIcon;_this1.set_posX(padding);_this1.set_posY(padding);this.cElemIcon.setScale(true,this.iconSize.x|0,this.iconSize.y|0)}set_text(value){this.cElemLabel.set_text(value);return this.text=value}_onHover(event){switch(event.getState()){case 1:this.isHovered=true;break;case 2:this.isHovered=false;break;case 4:break}}_onClick(event){if(event.mouseButton!=0){return}switch(event.getState()){case 1:this.isPressed=this.isToggle?!this.isPressed:true;break;case 4:break;case 2:case 8:if(!this.isToggle){this.isPressed=false}break}}onTIDChange(){if(this.style.textureBg==""){this.set_width(this.style.size.width);this.set_height(this.style.size.height)}else{this.set_width(this.style.atlas.w);this.set_height(this.style.atlas.h)}}draw(g){if(this.isPressed){this.state="click";this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state="click";c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState("click",true)}}}}else if(this.isHovered){this.state="hover";this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state="hover";c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState("hover",true)}}}}else{let state=this.disabled?"disabled":"default";this.state=state;this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state=state;c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState(state,true)}}}}if(!koui_utils_TextureAtlas.drawFromAtlas(g,this)){g.fillKRect(this.drawX,this.drawY,this.drawWidth,this.drawHeight,this.style)}}toString(){let c=js_Boot.getClass(this);return"Element: <"+c.__name__+'>{Label: "'+this.text+'"}'}}$hxClasses["koui.elements.Button"]=koui_elements_Button;koui_elements_Button.__name__="koui.elements.Button";koui_elements_Button.__super__=koui_elements_Element;Object.assign(koui_elements_Button.prototype,{__class__:koui_elements_Button,text:null,iconSize:null,isToggle:null,cElemLabel:null,cElemIcon:null,isHovered:null,isPressed:null,__properties__:Object.assign({},koui_elements_Element.prototype.__properties__,{set_text:"set_text"})});class koui_elements_Panel extends koui_elements_Element{_hx_constructor(){super._hx_constructor()}draw(g){g.fillKRect(this.drawX,this.drawY,this.drawWidth,this.drawHeight,this.style)}initStyle(){if(!this.styleInitialized){this.set_tID("_panel");this.styleInitialized=true}}}$hxClasses["koui.elements.Panel"]=koui_elements_Panel;koui_elements_Panel.__name__="koui.elements.Panel";koui_elements_Panel.__super__=koui_elements_Element;Object.assign(koui_elements_Panel.prototype,{__class__:koui_elements_Panel});class koui_elements_ImagePanel extends koui_elements_Panel{constructor(image){koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(image)}_hx_constructor(image){this.scale=false;super._hx_constructor();this.set_image(image)}setScale(scale,width,height){this.scale=scale;this.set_layoutWidth(width);this.set_layoutHeight(height)}set_image(img){this.image=img;if(img!=null){this.set_layoutHeight(this.image.get_realHeight());this.set_layoutWidth(this.image.get_realWidth())}return img}draw(g){g.set_color(-1);if(this.scale){g.drawScaledImage(this.image,this.drawX,this.drawY,this.drawWidth,this.drawHeight)}else{g.drawImage(this.image,this.drawX,this.drawY)}koui_effects_Border.draw(g,this)}initStyle(){if(!this.styleInitialized){this.set_tID("_imagepanel");this.styleInitialized=true}}}$hxClasses["koui.elements.ImagePanel"]=koui_elements_ImagePanel;koui_elements_ImagePanel.__name__="koui.elements.ImagePanel";koui_elements_ImagePanel.__super__=koui_elements_Panel;Object.assign(koui_elements_ImagePanel.prototype,{__class__:koui_elements_ImagePanel,image:null,scale:null,__properties__:Object.assign({},koui_elements_Panel.prototype.__properties__,{set_image:"set_image"})});class koui_elements_Label extends koui_elements_Element{constructor(text,alignmentHor,alignmentVert){koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(text,alignmentHor,alignmentVert)}_hx_constructor(text,alignmentHor,alignmentVert){this.alignmentVert=0;this.alignmentHor=0;this.text="";super._hx_constructor();this.set_text(text);if(alignmentHor!=null){this.alignmentHor=alignmentHor}if(alignmentVert!=null){this.alignmentVert=alignmentVert}}set_text(value){let _g=0;let _g1=value.length;while(_g<_g1){let i=_g++;let _this=koui_utils_FontUtil.additionalGlyphs;let val=value.charCodeAt(i);_this.map.set(val,true)}koui_utils_FontUtil.setKhaGlyphs();if(this.style!=null){this.set_width(kha_Assets.fonts.get(this.style.font.family).width(this.style.font.size*koui_Koui.uiScale|0,value)|0)}return this.text=value}onTIDChange(){if(this.style.textureBg==""){this.set_width(kha_Assets.fonts.get(this.style.font.family).width(this.style.font.size*koui_Koui.uiScale|0,this.text)|0);this.set_height(this.style.font.size*koui_Koui.uiScale|0)}else{this.set_width(this.style.atlas.w);this.set_height(this.style.atlas.h)}}draw(g){if(this.text==""){return}koui_utils_TextureAtlas.drawFromAtlas(g,this,1,1,0,0);let margin=this.style.margin;let drawAtX=this.drawX;let drawAtY=this.drawY;switch(this.anchor==9&&this.layout!=null?this.layout.defaultAnchor:this.anchor){case 0:drawAtX+=margin.left;break;case 1:drawAtX=this.drawX+this.drawWidth/2+margin.left|0;break;case 2:drawAtX=this.drawX+this.drawWidth-margin.right;break;case 3:drawAtX+=margin.left;drawAtY=this.drawY+this.drawHeight/2|0;break;case 4:drawAtX=this.drawX+this.drawWidth/2+margin.left|0;drawAtY=this.drawY+this.drawHeight/2|0;break;case 5:drawAtX=this.drawX+this.drawWidth-margin.right;drawAtY=this.drawY+this.drawHeight/2|0;break;case 6:drawAtX+=margin.left;drawAtY=this.drawY+this.drawHeight;break;case 7:drawAtX=this.drawX+this.drawWidth/2+margin.left|0;drawAtY=this.drawY+this.drawHeight;break;case 8:drawAtX=this.drawX+this.drawWidth-margin.right;drawAtY=this.drawY+this.drawHeight;break;default:}g.drawKAlignedString(this.text,drawAtX,drawAtY,this.alignmentHor,this.alignmentVert,this.style)}toString(){let c=js_Boot.getClass(this);return"Element: <"+c.__name__+'>{Text: "'+this.text+'"}'}initStyle(){if(!this.styleInitialized){this.set_tID("_label");this.styleInitialized=true}}}$hxClasses["koui.elements.Label"]=koui_elements_Label;koui_elements_Label.__name__="koui.elements.Label";koui_elements_Label.__super__=koui_elements_Element;Object.assign(koui_elements_Label.prototype,{__class__:koui_elements_Label,text:null,alignmentHor:null,alignmentVert:null,__properties__:Object.assign({},koui_elements_Element.prototype.__properties__,{set_text:"set_text"})});class koui_elements_layouts_Layout extends koui_elements_Element{constructor(posX,posY,width,height){if(koui_elements_Element._hx_skip_constructor){super();return}koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(posX,posY,width,height)}_hx_constructor(posX,posY,width,height){this.absorbEvents=false;this.invalidLayout=false;this.defaultAnchor=0;this.paddingBottom=0;this.paddingTop=0;this.paddingRight=0;this.paddingLeft=0;super._hx_constructor();this.set_posX(posX);this.set_posY(posY);this.set_width(width);this.set_height(height)}onTIDChange(){this.set_paddingLeft(this.style.padding.left);this.set_paddingRight(this.style.padding.right);this.set_paddingTop(this.style.padding.top);this.set_paddingBottom(this.style.padding.bottom)}resize(width,height){this.set_layoutWidth(width);this.set_layoutHeight(height);if(koui_elements_layouts_Layout.isValidating){this.invalidLayout=false}}invalidateLayout(){this.invalidLayout=true;let parent=this;while(parent.layout!=null){parent=parent.layout;parent.invalidLayout=true}}needsValidation(element){if(koui_elements_layouts_Layout.isValidating&&element instanceof koui_elements_layouts_Expander){if(!js_Boot.__cast(element,koui_elements_layouts_Expander).invalidLayout){return false}}return true}draw(g){throw new haxe_Exception("[Koui Error] "+"draw() function must be overriden by layout!")}calcElementSize(element,parentWidth,parentHeight){let minWidth=element.style.size.minWidth;let maxWidth=element.style.size.maxWidth;let minHeight=element.style.size.minHeight;let maxHeight=element.style.size.maxHeight;let resized=false;let sizeFactor=element instanceof koui_elements_layouts_AnchorPane||element.parent==koui_Koui.anchorPane?koui_Koui.uiScale:1;let paddingFactor=element instanceof koui_elements_layouts_AnchorPane||element.parent==koui_Koui.anchorPane?1:koui_Koui.uiScale;if(minWidth>0||maxWidth>0){element.set_layoutWidth(parentWidth/sizeFactor-(this.paddingLeft+this.paddingRight)*paddingFactor|0);switch(element.anchor==9&&element.layout!=null?element.layout.defaultAnchor:element.anchor){case 0:case 1:case 3:case 4:case 6:case 7:element.set_layoutWidth(element.layoutWidth-(Math.abs(element.posX)|0));break;case 2:case 5:case 8:element.set_layoutWidth(element.layoutWidth+(Math.abs(element.posX)|0));break;default:}if(minWidth>0&&element.layoutWidth<minWidth){element.set_layoutWidth(minWidth/sizeFactor|0)}if(maxWidth>0&&element.layoutWidth>maxWidth){element.set_layoutWidth(maxWidth/sizeFactor|0)}resized=true}if(minHeight>0||maxHeight>0){element.set_layoutHeight(parentHeight/sizeFactor-(this.paddingTop+this.paddingBottom)*paddingFactor|0);switch(element.anchor==9&&element.layout!=null?element.layout.defaultAnchor:element.anchor){case 0:case 1:case 2:case 3:case 4:case 5:element.set_layoutHeight(element.layoutHeight-(Math.abs(element.posY)|0));break;case 6:case 7:case 8:element.set_layoutHeight(element.layoutHeight+(Math.abs(element.posY)|0));break;default:}if(minHeight>0&&element.layoutHeight<minHeight){element.set_layoutHeight(minHeight/sizeFactor|0)}if(maxHeight>0&&element.layoutHeight>maxHeight){element.set_layoutHeight(maxHeight/sizeFactor|0)}resized=true}return resized}elemUpdated(element){}set_paddingLeft(left){this.invalidateLayout();return this.paddingLeft=left}set_paddingRight(right){this.invalidateLayout();return this.paddingRight=right}set_paddingTop(top){this.invalidateLayout();return this.paddingTop=top}set_paddingBottom(bottom){this.invalidateLayout();return this.paddingBottom=bottom}initStyle(){if(!this.styleInitialized){this.set_tID("_layout");this.styleInitialized=true}}static resizeIfLayout(element){if(element instanceof koui_elements_layouts_Layout){let lyt=js_Boot.__cast(element,koui_elements_layouts_Layout);lyt.resize(element.layoutWidth,element.layoutHeight)}}}$hxClasses["koui.elements.layouts.Layout"]=koui_elements_layouts_Layout;koui_elements_layouts_Layout.__name__="koui.elements.layouts.Layout";koui_elements_layouts_Layout.__super__=koui_elements_Element;Object.assign(koui_elements_layouts_Layout.prototype,{__class__:koui_elements_layouts_Layout,paddingLeft:null,paddingRight:null,paddingTop:null,paddingBottom:null,defaultAnchor:null,invalidLayout:null,absorbEvents:null,__properties__:Object.assign({},koui_elements_Element.prototype.__properties__,{set_paddingBottom:"set_paddingBottom",set_paddingTop:"set_paddingTop",set_paddingRight:"set_paddingRight",set_paddingLeft:"set_paddingLeft"})});class koui_elements_layouts_AnchorPane extends koui_elements_layouts_Layout{constructor(posX,posY,width,height){koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(posX,posY,width,height)}_hx_constructor(posX,posY,width,height){this.elements=[];super._hx_constructor(posX,posY,width,height);this.defaultAnchor=0}add(element,anchor){element.parent=this;element.layout=this;if(anchor!=null){element.anchor=anchor}this.elements.push(element);this.recalcElement(element)}draw(g){g.pushTranslation(this.drawX,this.drawY);let _g=0;let _g1=this.elements;while(_g<_g1.length){let element=_g1[_g];++_g;if(element.visible){g.set_opacity(element.style.opacity);element.draw(g);if(element.autoRenderChildren){g.pushTranslation(element.drawX,element.drawY);let _g=0;let _g1=element.children;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.visible){g.set_opacity(c.style.opacity);c.draw(g);if(c.autoRenderChildren){g.pushTranslation(c.drawX,c.drawY);let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;this.renderElement(g,c)}g.popTransformation()}}}g.popTransformation()}}}g.popTransformation()}resize(width,height){super.resize(width,height);let _g=0;let _g1=this.elements;while(_g<_g1.length){let element=_g1[_g];++_g;if(this.needsValidation(element)){this.recalcElement(element)}}}getAllElements(){return this.elements}getElementAtPosition(x,y){let tmp;if(!this.visible){tmp=false}else{let posX=this.drawX;let posY=this.drawY;tmp=x>=posX&&x<=posX+this.drawWidth&&y>=posY&&y<=posY+this.drawHeight}if(!tmp){return null}if(this.absorbEvents){return this}x-=this.layoutX;y-=this.layoutY;let sortedElements=this.elements.slice();sortedElements.reverse();let _g=0;while(_g<sortedElements.length){let element=sortedElements[_g];++_g;if(!element.visible){continue}let hit=element.getElementAtPosition(x,y);if(hit!=null){return hit}let tmp;if(!element.visible){tmp=false}else{let posX=element.drawX;let posY=element.drawY;tmp=x>=posX&&x<=posX+element.drawWidth&&y>=posY&&y<=posY+element.drawHeight}if(tmp){return element}}return null}elemUpdated(element){this.recalcElement(element)}recalcElement(element){let invalid=this.calcElementSize(element,this.layoutWidth,this.layoutHeight);switch(element.anchor==9&&element.layout!=null?element.layout.defaultAnchor:element.anchor){case 1:case 4:case 7:element.set_layoutX(this.drawWidth/2-element.drawWidth/2+element.posX*koui_Koui.uiScale|0);break;case 0:case 3:case 6:element.set_layoutX((element.posX+this.paddingLeft)*koui_Koui.uiScale|0);break;case 2:case 5:case 8:element.set_layoutX(this.drawWidth-element.drawWidth+(element.posX-this.paddingRight)*koui_Koui.uiScale|0);break;default:}switch(element.anchor==9&&element.layout!=null?element.layout.defaultAnchor:element.anchor){case 0:case 1:case 2:element.set_layoutY((element.posY+this.paddingTop)*koui_Koui.uiScale|0);break;case 3:case 4:case 5:element.set_layoutY(this.drawHeight/2-element.drawHeight/2+element.posY*koui_Koui.uiScale|0);break;case 6:case 7:case 8:element.set_layoutY(this.drawHeight-element.drawHeight+(element.posY-this.paddingBottom)*koui_Koui.uiScale|0);break;default:}if(invalid||element instanceof koui_elements_layouts_Expander){koui_elements_layouts_Layout.resizeIfLayout(element)}}initStyle(){if(!this.styleInitialized){this.set_tID("_anchorpane");this.styleInitialized=true}}}$hxClasses["koui.elements.layouts.AnchorPane"]=koui_elements_layouts_AnchorPane;koui_elements_layouts_AnchorPane.__name__="koui.elements.layouts.AnchorPane";koui_elements_layouts_AnchorPane.__super__=koui_elements_layouts_Layout;Object.assign(koui_elements_layouts_AnchorPane.prototype,{__class__:koui_elements_layouts_AnchorPane,elements:null});class koui_elements_layouts_Expander extends koui_elements_layouts_Layout{constructor(posX,posY,width,height,direction){koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(posX,posY,width,height,direction)}_hx_constructor(posX,posY,width,height,direction){this.elements=[];this.spacing=0;super._hx_constructor(posX,posY,width,height);this.set_direction(direction)}set_direction(value){this.direction=value;this.invalidateLayout();return this.direction}resize(width,height){super.resize(width,height);this.recalcSize(false)}elemUpdated(element){this.invalidateLayout()}recalcSize(invalidate){if(invalidate==null){invalidate=true}let first=true;switch(this.direction){case 0:case 1:this.set_layoutHeight(this.paddingTop);let _g=0;let _g1=this.elements.length;while(_g<_g1){let i=_g++;let element=this.direction==1?this.elements[i]:this.elements[this.elements.length-1-i];if(first){first=false}else{this.set_layoutHeight(this.layoutHeight+(this.spacing*koui_Koui.uiScale|0))}element.set_layoutX(element.posX+(this.layoutWidth*.5-element.layoutWidth*.5)*koui_Koui.uiScale|0);element.set_layoutY(element.posY+this.layoutHeight);let invalid=this.calcElementSize(element,this.layoutWidth,element.layoutHeight);if(invalid||element instanceof koui_elements_layouts_Expander){koui_elements_layouts_Layout.resizeIfLayout(element)}this.set_layoutHeight(this.layoutHeight+(element.layoutHeight*koui_Koui.uiScale|0))}this.set_layoutHeight(this.layoutHeight+this.paddingBottom);this.set_layoutHeight(this.layoutHeight/koui_Koui.uiScale|0);break;case 2:case 3:this.set_layoutWidth(this.paddingLeft);let _g2=0;let _g3=this.elements.length;while(_g2<_g3){let i=_g2++;let element=this.direction==3?this.elements[i]:this.elements[this.elements.length-1-i];if(first){first=false}else{this.set_layoutWidth(this.layoutWidth+(this.spacing*koui_Koui.uiScale|0))}element.set_layoutX(element.posX+this.layoutWidth);element.set_layoutY(element.posY+(this.layoutHeight*.5-element.layoutHeight*.5)*koui_Koui.uiScale|0);let invalid=this.calcElementSize(element,element.layoutWidth,this.layoutHeight);if(invalid||element instanceof koui_elements_layouts_Expander){koui_elements_layouts_Layout.resizeIfLayout(element)}this.set_layoutWidth(this.layoutWidth+(element.layoutWidth*koui_Koui.uiScale|0))}this.set_layoutWidth(this.layoutWidth+this.paddingRight);this.set_layoutWidth(this.layoutWidth/koui_Koui.uiScale|0);break}if(invalidate){this.invalidateLayout()}}draw(g){g.pushTranslation(this.drawX,this.drawY);let _g=0;let _g1=this.elements;while(_g<_g1.length){let element=_g1[_g];++_g;if(element.visible){g.set_opacity(element.style.opacity);element.draw(g);if(element.autoRenderChildren){g.pushTranslation(element.drawX,element.drawY);let _g=0;let _g1=element.children;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.visible){g.set_opacity(c.style.opacity);c.draw(g);if(c.autoRenderChildren){g.pushTranslation(c.drawX,c.drawY);let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;this.renderElement(g,c)}g.popTransformation()}}}g.popTransformation()}}}g.popTransformation()}getElementAtPosition(x,y){let tmp;if(!this.visible){tmp=false}else{let posX=this.drawX;let posY=this.drawY;tmp=x>=posX&&x<=posX+this.drawWidth&&y>=posY&&y<=posY+this.drawHeight}if(!tmp){return null}if(this.absorbEvents){return this}x-=this.layoutX;y-=this.layoutY;let _g=1-this.elements.length;let _g1=1;while(_g<_g1){let idx=_g++;let element=this.elements[-idx];if(!element.visible){continue}if(element instanceof koui_elements_layouts_Layout){let hit=js_Boot.__cast(element,koui_elements_layouts_Layout).getElementAtPosition(x,y);if(hit!=null){return hit}continue}let tmp;if(!element.visible){tmp=false}else{let posX=element.drawX;let posY=element.drawY;tmp=x>=posX&&x<=posX+element.drawWidth&&y>=posY&&y<=posY+element.drawHeight}if(tmp){return element}}return null}initStyle(){if(!this.styleInitialized){this.set_tID("_expander");this.styleInitialized=true}}}$hxClasses["koui.elements.layouts.Expander"]=koui_elements_layouts_Expander;koui_elements_layouts_Expander.__name__="koui.elements.layouts.Expander";koui_elements_layouts_Expander.__super__=koui_elements_layouts_Layout;Object.assign(koui_elements_layouts_Expander.prototype,{__class__:koui_elements_layouts_Expander,spacing:null,direction:null,elements:null,__properties__:Object.assign({},koui_elements_layouts_Layout.prototype.__properties__,{set_direction:"set_direction"})});class koui_elements_layouts_GridLayout extends koui_elements_layouts_Layout{constructor(posX,posY,width,height,amountRows,amountCols){koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(posX,posY,width,height,amountRows,amountCols)}_hx_constructor(posX,posY,width,height,amountRows,amountCols){this.cellHeight=0;this.cellWidth=0;this.amountRows=0;this.amountCols=0;super._hx_constructor(posX,posY,width,height);this.amountRows=amountRows;this.amountCols=amountCols;let this1=new Array(amountRows);this.elements=this1;let _g=0;let _g1=amountRows;while(_g<_g1){let row=_g++;let this1=this.elements;let this2=new Array(amountCols);this1[row]=this2}this.cellWidth=width*koui_Koui.uiScale/amountCols|0;this.cellHeight=height*koui_Koui.uiScale/amountRows|0}recalcElement(row,column){let element=this.elements[row][column];if(element==null){return}let invalid=this.calcElementSize(element,this.cellWidth,this.cellHeight);switch(element.anchor==9&&element.layout!=null?element.layout.defaultAnchor:element.anchor){case 1:case 4:case 7:element.set_layoutX(this.cellWidth*(column+.5)-element.layoutWidth*koui_Koui.uiScale/2+element.posX*koui_Koui.uiScale|0);break;case 0:case 3:case 6:element.set_layoutX(this.cellWidth*column+(element.posX+this.paddingLeft)*koui_Koui.uiScale|0);break;case 2:case 5:case 8:element.set_layoutX(this.cellWidth*(column+1)-(element.layoutWidth+element.posX-this.paddingRight)*koui_Koui.uiScale|0);break;default:}switch(element.anchor==9&&element.layout!=null?element.layout.defaultAnchor:element.anchor){case 0:case 1:case 2:element.set_layoutY(this.cellHeight*row+(element.posY+this.paddingTop)*koui_Koui.uiScale|0);break;case 3:case 4:case 5:element.set_layoutY(this.cellHeight*(row+.5)-element.layoutHeight*koui_Koui.uiScale/2+element.posY*koui_Koui.uiScale|0);break;case 6:case 7:case 8:element.set_layoutY(this.cellHeight*(row+1)-(element.layoutHeight+element.posY-this.paddingBottom)*koui_Koui.uiScale|0);break;default:}if(invalid||element instanceof koui_elements_layouts_Expander){koui_elements_layouts_Layout.resizeIfLayout(element)}}elemUpdated(element){let _g=0;let _g1=this.elements.length;while(_g<_g1){let row=_g++;let _g1=0;let _g2=this.elements[0].length;while(_g1<_g2){let col=_g1++;if(this.elements[row][col]==element){this.recalcElement(row,col);return}}}}resize(width,height){super.resize(width,height);this.cellWidth=this.layoutWidth*koui_Koui.uiScale/this.amountCols|0;this.cellHeight=this.layoutHeight*koui_Koui.uiScale/this.amountRows|0;let _g=0;let _g1=this.elements.length;while(_g<_g1){let row=_g++;let _g1=0;let _g2=this.elements[0].length;while(_g1<_g2){let column=_g1++;if(this.needsValidation(this.elements[row][column])){this.recalcElement(row,column)}}}}getElementAtPosition(x,y){let tmp;if(!this.visible){tmp=false}else{let posX=this.drawX;let posY=this.drawY;tmp=x>=posX&&x<=posX+this.drawWidth&&y>=posY&&y<=posY+this.drawHeight}if(!tmp){return null}if(this.absorbEvents){return this}x-=this.layoutX;y-=this.layoutY;let _g=1-this.elements.length;let _g1=1;while(_g<_g1){let row=_g++;let _g1=1-this.elements[0].length;let _g2=1;while(_g1<_g2){let column=_g1++;let element=this.elements[-row][-column];if(element==null||!element.visible){continue}let hit=element.getElementAtPosition(x,y);if(hit!=null){return hit}let tmp;if(!element.visible){tmp=false}else{let posX=element.drawX;let posY=element.drawY;tmp=x>=posX&&x<=posX+element.drawWidth&&y>=posY&&y<=posY+element.drawHeight}if(tmp){return element}}}return null}draw(g){g.pushTranslation(this.drawX,this.drawY);let _g=0;let _g1=this.elements;while(_g<_g1.length){let row=_g1[_g];++_g;let _g2=0;while(_g2<row.length){let element=row[_g2];++_g2;if(element==null){continue}if(element.visible){g.set_opacity(element.style.opacity);element.draw(g);if(element.autoRenderChildren){g.pushTranslation(element.drawX,element.drawY);let _g=0;let _g1=element.children;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.visible){g.set_opacity(c.style.opacity);c.draw(g);if(c.autoRenderChildren){g.pushTranslation(c.drawX,c.drawY);let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;this.renderElement(g,c)}g.popTransformation()}}}g.popTransformation()}}}}g.popTransformation()}initStyle(){if(!this.styleInitialized){this.set_tID("_gridlayout");this.styleInitialized=true}}}$hxClasses["koui.elements.layouts.GridLayout"]=koui_elements_layouts_GridLayout;koui_elements_layouts_GridLayout.__name__="koui.elements.layouts.GridLayout";koui_elements_layouts_GridLayout.__super__=koui_elements_layouts_Layout;Object.assign(koui_elements_layouts_GridLayout.prototype,{__class__:koui_elements_layouts_GridLayout,elements:null,amountCols:null,amountRows:null,cellWidth:null,cellHeight:null});class koui_elements_layouts_ScrollPane extends koui_elements_layouts_Layout{constructor(posX,posY,width,height){koui_elements_Element._hx_skip_constructor=true;super();koui_elements_Element._hx_skip_constructor=false;this._hx_constructor(posX,posY,width,height)}_hx_constructor(posX,posY,width,height){this.clickOffsetBottom=0;this.clickOffsetRight=0;this.clicked=0;this.isHovered=false;this.scrollbarLengthBottom=-1;this.scrollbarLengthRight=-1;this.scrollbarWidth=16;this.contentWidth=0;this.contentHeight=0;this.scrollY=0;this.scrollX=0;this.elements=[];super._hx_constructor(posX,posY,width,height);this.scrollTexture=kha_Image.createRenderTarget(this.width*koui_Koui.uiScale|0,this.height*koui_Koui.uiScale|0,null,0,1);this.sG=new koui_graphics_KGraphics(this.scrollTexture);this.addEventListener(koui_events_MouseScrollEvent,$bind(this,this._onScroll));this.addEventListener(koui_events_MouseClickEvent,$bind(this,this._onClick));this.addEventListener(koui_events_MouseHoverEvent,$bind(this,this._onHover))}initStyle(){if(!this.styleInitialized){this.set_tID("_scrollpane");this.styleInitialized=true}let ctxElement="bar_thumb";if(ctxElement==null){ctxElement=""}if(!Object.prototype.hasOwnProperty.call(this.states.h,ctxElement)){let v=["default","disabled"];this.states.h[ctxElement]=v;this.cacheStates(this.states.h[ctxElement],ctxElement)}let this1=this.states;let v=this.states.h[ctxElement].concat(["hover","click"]);this1.h[ctxElement]=v;this.cacheStates(this.states.h[ctxElement],ctxElement);let ctxElement1="bar_track";if(ctxElement1==null){ctxElement1=""}if(!Object.prototype.hasOwnProperty.call(this.states.h,ctxElement1)){let v=["default","disabled"];this.states.h[ctxElement1]=v;this.cacheStates(this.states.h[ctxElement1],ctxElement1)}let this2=this.states;let v1=this.states.h[ctxElement1].concat(["hover","click"]);this2.h[ctxElement1]=v1;this.cacheStates(this.states.h[ctxElement1],ctxElement1);if(!Object.prototype.hasOwnProperty.call(this.states.h,"corner")){let v=["default","disabled"];this.states.h["corner"]=v;this.cacheStates(this.states.h["corner"],"corner")}}onTIDChange(){if(this.style.scrollbar==null){throw new haxe_Exception("[Koui Error] "+('ScrollPane: Style must define properties for the "scrollbar" group! tID: '+this.tID))}this.scrollbarWidth=this.style.scrollbar.width}recalculateScrollbarLengths(){if(this.contentHeight>(this.height*koui_Koui.uiScale|0)){this.scrollbarLengthRight=this.height/this.contentHeight*this.height*koui_Koui.uiScale|0}if(this.contentWidth>(this.width*koui_Koui.uiScale|0)){this.scrollbarLengthBottom=this.width/this.contentWidth*this.width*koui_Koui.uiScale|0}}recalcElement(element){element.set_layoutX(element.posX+this.paddingLeft);element.set_layoutY(element.posY+this.paddingTop);if(element.layoutX+element.layoutWidth+this.paddingRight>this.contentWidth){this.contentWidth=element.layoutX+element.layoutWidth+this.paddingRight}if(element.layoutY+element.layoutHeight+this.paddingBottom>this.contentHeight){this.contentHeight=element.layoutY+element.layoutHeight+this.paddingBottom}koui_elements_layouts_Layout.resizeIfLayout(element)}resize(width,height){super.resize(width,height);this.scrollTexture=kha_Image.createRenderTarget(this.width*koui_Koui.uiScale|0,this.height*koui_Koui.uiScale|0,null,0,1);this.sG=new koui_graphics_KGraphics(this.scrollTexture);let _g=0;let _g1=this.elements;while(_g<_g1.length){let element=_g1[_g];++_g;if(this.needsValidation(element)){this.recalcElement(element)}}this.recalculateScrollbarLengths()}elemUpdated(element){this.recalcElement(element)}_onScroll(event){let mouseY=koui_events_EventHandler.mouseY+this.getLayoutOffset()[1];if(this.scrollbarLengthBottom!=-1&&mouseY>this.drawY+this.drawHeight-this.scrollbarWidth){this.scrollX+=event.scrollDelta*koui_Config.scrollSensitivity;this.scrollX=Math.max(0,Math.min(this.contentWidth-this.width,this.scrollX))}else{this.scrollY+=event.scrollDelta*koui_Config.scrollSensitivity;this.scrollY=Math.max(0,Math.min(this.contentHeight-this.height,this.scrollY))}}_onHover(event){switch(event.getState()){case 1:case 4:this.isHovered=true;break;case 2:this.isHovered=false;break}}_onClick(event){switch(event.getState()){case 1:let layoutOffset=this.getLayoutOffset();let mouseX=koui_events_EventHandler.mouseX+layoutOffset[0];let mouseY=koui_events_EventHandler.mouseY+layoutOffset[1];if(this.scrollbarLengthRight!=-1&&mouseX>=this.drawX+this.width&&mouseY<this.drawY+this.height){this.clicked=1;let scrollOffset=this.scrollY/this.contentHeight*this.height;this.clickOffsetRight=mouseY-this.posY-scrollOffset|0}if(this.scrollbarLengthBottom!=-1&&mouseY>=this.drawY+this.height&&mouseX<this.drawX+this.width){this.clicked=2;let scrollOffset=this.scrollX/this.contentWidth*this.width;this.clickOffsetBottom=mouseX-this.posX-scrollOffset|0}koui_events_EventHandler.block(this);break;case 4:let layoutOffset1=this.getLayoutOffset();let mouseX1=koui_events_EventHandler.mouseX+layoutOffset1[0];let mouseY1=koui_events_EventHandler.mouseY+layoutOffset1[1];if(this.clicked==1){let fromLeft=this.posY;this.scrollY=(mouseY1-this.clickOffsetRight-fromLeft)*(this.contentHeight-this.height)/(this.posY+this.height-this.scrollbarLengthRight-fromLeft);this.scrollY=Math.max(0,Math.min(this.contentHeight-this.height,this.scrollY))}if(this.clicked==2){let fromLeft=this.posX;this.scrollX=(mouseX1-this.clickOffsetBottom-fromLeft)*(this.contentWidth-this.width)/(this.posX+this.width-this.scrollbarLengthBottom-fromLeft);this.scrollX=Math.max(0,Math.min(this.contentWidth-this.width,this.scrollX))}break;case 2:case 8:this.clicked=0;koui_events_EventHandler.unblock();break}}draw(g){g.end();let state=this.disabled?"disabled":"default";let ctxElement="";if(ctxElement==null){ctxElement=""}this.state=state;this.ctxElement=ctxElement;this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let ctxElement1=ctxElement;let recursive=true;if(recursive==null){recursive=true}if(ctxElement1==null){ctxElement1=""}c.state=state;c.ctxElement=ctxElement1;c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContext(state,ctxElement1,true)}}}this.sG.begin(true,this.style.color.bg);this.sG.pushTranslation(-this.scrollX,-this.scrollY);let _g2=0;let _g3=this.elements;while(_g2<_g3.length){let element=_g3[_g2];++_g2;let g=this.sG;if(element.visible){g.set_opacity(element.style.opacity);element.draw(g);if(element.autoRenderChildren){g.pushTranslation(element.drawX,element.drawY);let _g=0;let _g1=element.children;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.visible){g.set_opacity(c.style.opacity);c.draw(g);if(c.autoRenderChildren){g.pushTranslation(c.drawX,c.drawY);let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;this.renderElement(g,c)}g.popTransformation()}}}g.popTransformation()}}}this.sG.popTransformation();this.sG.end();g.begin(false);g.pushTranslation(this.drawX,this.drawY);g.set_color(-1);g.set_opacity(1);g.drawImage(this.scrollTexture,0,0);this.drawScrollbars(g);g.popTransformation()}drawScrollbars(g){if(this.scrollbarLengthRight!=-1){this.drawWidth=(this.width*koui_Koui.uiScale|0)+(this.scrollbarWidth*koui_Koui.uiScale|0);let scrollRatio=this.scrollY/this.contentHeight;let ctxElement="bar_track";if(ctxElement==null){ctxElement=""}this.ctxElement=ctxElement;this.loadStyle();if(this.clicked==1){this.state="click";this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state="click";c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState("click",true)}}}}else if(this.isHovered){this.state="hover";this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state="hover";c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState("hover",true)}}}}g.set_opacity(this.style.opacity);g.fillKRect(this.width*koui_Koui.uiScale|0,0,this.scrollbarWidth*koui_Koui.uiScale|0,this.height*koui_Koui.uiScale|0,this.style);let ctxElement1="bar_thumb";if(ctxElement1==null){ctxElement1=""}this.ctxElement=ctxElement1;this.loadStyle();g.set_opacity(this.style.opacity);g.fillKRect(this.width*koui_Koui.uiScale|0,scrollRatio*(this.height*koui_Koui.uiScale|0),this.scrollbarWidth*koui_Koui.uiScale|0,this.scrollbarLengthRight,this.style)}if(this.scrollbarLengthBottom!=-1){this.drawHeight=(this.height*koui_Koui.uiScale|0)+(this.scrollbarWidth*koui_Koui.uiScale|0);let scrollRatio=this.scrollX/this.contentWidth;let ctxElement="bar_track";if(ctxElement==null){ctxElement=""}this.ctxElement=ctxElement;this.loadStyle();if(this.clicked==2){this.state="click";this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state="click";c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState("click",true)}}}}else if(this.isHovered){this.state="hover";this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let recursive=true;if(recursive==null){recursive=true}c.state="hover";c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContextState("hover",true)}}}}g.set_opacity(this.style.opacity);g.fillKRect(0,this.height*koui_Koui.uiScale|0,this.width*koui_Koui.uiScale|0,this.scrollbarWidth*koui_Koui.uiScale|0,this.style);let ctxElement1="bar_thumb";if(ctxElement1==null){ctxElement1=""}this.ctxElement=ctxElement1;this.loadStyle();g.set_opacity(this.style.opacity);g.fillKRect(scrollRatio*(this.width*koui_Koui.uiScale|0),this.height*koui_Koui.uiScale|0,this.scrollbarLengthBottom,this.scrollbarWidth*koui_Koui.uiScale|0,this.style)}if(this.scrollbarLengthRight!=-1&&this.scrollbarLengthBottom!=-1){let ctxElement="corner";if(ctxElement==null){ctxElement=""}this.state="default";this.ctxElement=ctxElement;this.loadStyle();let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let ctxElement1=ctxElement;let recursive=true;if(recursive==null){recursive=true}if(ctxElement1==null){ctxElement1=""}c.state="default";c.ctxElement=ctxElement1;c.loadStyle();if(recursive){let _g=0;let _g1=c.children;while(_g<_g1.length){let c=_g1[_g];++_g;c.setContext("default",ctxElement1,true)}}}g.set_opacity(this.style.opacity);g.fillKRect(this.width*koui_Koui.uiScale|0,this.height*koui_Koui.uiScale|0,this.scrollbarWidth*koui_Koui.uiScale|0,this.scrollbarWidth*koui_Koui.uiScale|0,this.style)}}getElementAtPosition(x,y){let posX=this.drawX;let posY=this.drawY;if(!(x>=posX&&x<=posX+(this.width*koui_Koui.uiScale|0)&&y>=posY&&y<=posY+(this.height*koui_Koui.uiScale|0))){if(this.scrollbarLengthRight!=-1){let posX=this.drawX+(this.width*koui_Koui.uiScale|0);let posY=this.drawY;if(x>=posX&&x<=posX+this.scrollbarWidth&&y>=posY&&y<=posY+(this.height*koui_Koui.uiScale|0)){return this}}if(this.scrollbarLengthBottom!=-1){let posX=this.drawX;let posY=this.drawY+(this.height*koui_Koui.uiScale|0);if(x>=posX&&x<=posX+(this.width*koui_Koui.uiScale|0)&&y>=posY&&y<=posY+this.scrollbarWidth){return this}}return null}if(this.absorbEvents){return this}x=x-this.drawX+this.scrollX|0;y=y-this.drawY+this.scrollY|0;let sorted_elements=this.elements.slice();sorted_elements.reverse();let _g=0;while(_g<sorted_elements.length){let element=sorted_elements[_g];++_g;if(!element.visible){continue}let hit=element.getElementAtPosition(x,y);if(hit!=null){return hit}let tmp;if(!element.visible){tmp=false}else{let posX=element.drawX;let posY=element.drawY;tmp=x>=posX&&x<=posX+element.drawWidth&&y>=posY&&y<=posY+element.drawHeight}if(tmp){return element}}return this}}$hxClasses["koui.elements.layouts.ScrollPane"]=koui_elements_layouts_ScrollPane;koui_elements_layouts_ScrollPane.__name__="koui.elements.layouts.ScrollPane";koui_elements_layouts_ScrollPane.__super__=koui_elements_layouts_Layout;Object.assign(koui_elements_layouts_ScrollPane.prototype,{__class__:koui_elements_layouts_ScrollPane,elements:null,scrollX:null,scrollY:null,contentHeight:null,contentWidth:null,scrollTexture:null,sG:null,scrollbarWidth:null,scrollbarLengthRight:null,scrollbarLengthBottom:null,isHovered:null,clicked:null,clickOffsetRight:null,clickOffsetBottom:null});class koui_events_Event{constructor(element,state){this.element=element;this.state=state}static dispatch(event){let toElement=event.element;if(toElement==null){return}let typeUID=haxe_rtti_Meta.getType(js_Boot.getClass(event)).typeUID[0];let listeners=toElement.eventListeners.h[typeUID];if(listeners==null){return}let _g=0;while(_g<listeners.length){let listener=listeners[_g];++_g;listener.callback(event)}}}$hxClasses["koui.events.Event"]=koui_events_Event;koui_events_Event.__name__="koui.events.Event";Object.assign(koui_events_Event.prototype,{__class__:koui_events_Event,element:null,state:null});function koui_events_Event_flag(index){return 1<<index}class koui_events_EventHandler{static init(){koui_events_EventHandler.mouse=kha_input_Mouse.get();koui_events_EventHandler.mouse.notify(koui_events_EventHandler.onMouseDown,koui_events_EventHandler.onMouseUp,koui_events_EventHandler.onMouseMove,koui_events_EventHandler.onMouseScroll,koui_events_EventHandler.onMouseLeave);koui_events_EventHandler.keyboard=kha_input_Keyboard.get();koui_events_EventHandler.keyboard.notify(koui_events_EventHandler.onKeyboardDown,koui_events_EventHandler.onKeyboardUp,koui_events_EventHandler.onKeyboardPress);kha_System.notifyOnApplicationState(koui_events_EventHandler.onForeground,koui_events_EventHandler.onResume,koui_events_EventHandler.onPause,koui_events_EventHandler.onBackground,koui_events_EventHandler.onShutdown)}static registerElement(element){let this1=koui_events_EventHandler.events;let v=[];this1.set(element,v)}static reset(){let element=koui_events_EventHandler.events.keys();while(element.hasNext()){let element1=element.next();let this1=koui_events_EventHandler.events;let v=[];this1.set(element1,v)}}static update(){if(koui_events_EventHandler.inBackground){return}if(koui_events_EventHandler.mouseMoved){koui_events_EventHandler.checkMouseHover()}koui_events_EventHandler.checkMousePressed();koui_events_EventHandler.checkKeyCodePress();let element=koui_events_EventHandler.events.keys();while(element.hasNext()){let element1=element.next();if(koui_events_EventHandler.elemBlocking!=null&&element1!=koui_events_EventHandler.elemBlocking){continue}if(element1.disabled){continue}let _g=0;let _g1=koui_events_EventHandler.events.h[element1.__id__];while(_g<_g1.length){let event=_g1[_g];++_g;koui_events_Event.dispatch(event)}}if(koui_events_EventHandler.markUnblock){koui_events_EventHandler.elemBlocking=null;koui_events_EventHandler.checkMouseHover();koui_events_EventHandler.markUnblock=false}koui_events_EventHandler.mouseMoved=false}static block(actuator){if(koui_events_EventHandler.elemFocused!=actuator){haxe_Log.trace("EventHandler warning: Cannot block, element "+Std.string(actuator)+" is not focused! Focused: "+Std.string(koui_events_EventHandler.elemFocused),{fileName:"koui/events/EventHandler.hx",lineNumber:181,className:"koui.events.EventHandler",methodName:"block"});return}koui_events_EventHandler.elemBlocking=actuator}static unblock(forceNow){if(forceNow==null){forceNow=false}if(forceNow){koui_events_EventHandler.elemBlocking=null}else{koui_events_EventHandler.markUnblock=true}}static onForeground(){koui_events_EventHandler.inBackground=false}static onResume(){}static onPause(){}static onBackground(){koui_events_EventHandler.inBackground=true;koui_utils_Cursor.setCursor(kha_input_MouseCursor.Default)}static onShutdown(){}static onMouseDown(button,x,y){let event=new koui_events_MouseClickEvent(koui_events_EventHandler.elemHovered,1,button);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}if(koui_events_EventHandler.elemFocused!=koui_events_EventHandler.elemHovered){let event=new koui_events_FocusEvent(koui_events_EventHandler.elemFocused,2,button);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}if(button==0){if(koui_events_EventHandler.elemBlocking==null||koui_events_EventHandler.elemBlocking==koui_events_EventHandler.elemHovered){koui_events_EventHandler.elemFocused=koui_events_EventHandler.elemHovered}else{koui_events_EventHandler.elemFocused=null}let event=new koui_events_FocusEvent(koui_events_EventHandler.elemFocused,1,button);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}}else{koui_events_EventHandler.elemFocused=null}}koui_events_EventHandler.mousePressed[button]=true}static onMouseUp(button,x,y){if(koui_events_EventHandler.elemFocused==koui_events_EventHandler.elemHovered){let event=new koui_events_MouseClickEvent(koui_events_EventHandler.elemFocused,2,button);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}}else{let event=new koui_events_MouseClickEvent(koui_events_EventHandler.elemFocused,8,button);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}}koui_events_EventHandler.mousePressed[button]=false}static onMouseMove(x,y,deltaX,deltaY){koui_events_EventHandler.mouseX=x;koui_events_EventHandler.mouseY=y;koui_events_EventHandler.mouseDX=deltaX;koui_events_EventHandler.mouseDY=deltaY;koui_events_EventHandler.mouseMoved=true;koui_utils_Cursor.setPosition(x,y)}static onMouseScroll(scrollDelta){let receivingElement=koui_events_EventHandler.getListeningParent(koui_events_EventHandler.elemHovered,koui_events_MouseScrollEvent);let event=new koui_events_MouseScrollEvent(receivingElement,1,scrollDelta);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}}static onMouseLeave(){}static onKeyboardDown(key){let event=new koui_events_KeyCodeStatusEvent(koui_events_EventHandler.elemFocused,1,key);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}koui_events_EventHandler.lastPressedKey=key;koui_events_EventHandler.lastPressedTime=kha_Scheduler.time()+koui_Config.keyRepeatDelay;koui_events_EventHandler.lastPressedKeyActive=true;if(key==17){koui_events_EventHandler.isCtrlDown=true}if(key==16){koui_events_EventHandler.isShiftDown=true}if(key==18){koui_events_EventHandler.isAltDown=true}}static onKeyboardUp(key){let event=new koui_events_KeyCodeStatusEvent(koui_events_EventHandler.elemFocused,2,key);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}if(koui_events_EventHandler.lastPressedKey==key){koui_events_EventHandler.lastPressedKey=null}if(key==17){koui_events_EventHandler.isCtrlDown=false}if(key==16){koui_events_EventHandler.isShiftDown=false}if(key==18){koui_events_EventHandler.isAltDown=false}}static onKeyboardPress(char){let event=new koui_events_KeyCharPressEvent(koui_events_EventHandler.elemFocused,1,char);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}}static checkMouseHover(){let newElemHovered=koui_events_EventHandler.getListeningParent(koui_Koui.getElementAtPosition(koui_events_EventHandler.mouseX,koui_events_EventHandler.mouseY),koui_events_MouseHoverEvent);if(newElemHovered!=koui_events_EventHandler.elemHovered||koui_events_EventHandler.markUnblock){let event=new koui_events_MouseHoverEvent(koui_events_EventHandler.elemHovered,2,true);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}let event1=new koui_events_MouseHoverEvent(newElemHovered,1,true);if(event1.element!=null){koui_events_EventHandler.events.h[event1.element.__id__].push(event1)}if(koui_events_EventHandler.elemBlocking==null||koui_events_EventHandler.elemBlocking==newElemHovered){koui_events_EventHandler.elemHovered=newElemHovered}else{koui_events_EventHandler.elemHovered=null}if(koui_events_EventHandler.elemHovered!=null){if(koui_events_EventHandler.elemHovered.disabled){koui_utils_Cursor.setCursor(koui_utils_Cursor.getCursorEnumValue(koui_theme_Style.styles.h[koui_events_EventHandler.elemHovered.tID+"_"+"default"].cursors.notallowed))}else{koui_utils_Cursor.setCursor(koui_utils_Cursor.getCursorEnumValue(koui_theme_Style.styles.h[koui_events_EventHandler.elemHovered.tID+"_"+"default"].cursors.defaultCursor))}}else if(koui_events_EventHandler.elemBlocking==null){koui_utils_Cursor.setCursor(kha_input_MouseCursor.Default)}}else{let event=new koui_events_MouseHoverEvent(newElemHovered,4,koui_events_EventHandler.mouseMoved);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}}}static checkMousePressed(){let _g=0;let _g1=koui_events_EventHandler.mousePressed.length;while(_g<_g1){let button=_g++;if(koui_events_EventHandler.mousePressed[button]){let event=new koui_events_MouseClickEvent(koui_events_EventHandler.elemFocused,4,button);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}}}}static checkKeyCodePress(){if(koui_events_EventHandler.lastPressedKey==null){return}if(koui_events_EventHandler.lastPressedKeyActive){let event=new koui_events_KeyCodePressEvent(koui_events_EventHandler.elemFocused,1,koui_events_EventHandler.lastPressedKey);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}koui_events_EventHandler.lastPressedKeyActive=false}else if(kha_Scheduler.time()-koui_events_EventHandler.lastPressedTime>koui_Config.keyRepeatPeriod){let event=new koui_events_KeyCodePressEvent(koui_events_EventHandler.elemFocused,2,koui_events_EventHandler.lastPressedKey);if(event.element!=null){koui_events_EventHandler.events.h[event.element.__id__].push(event)}koui_events_EventHandler.lastPressedTime=kha_Scheduler.time()}}static getListeningParent(element,eventClass){if(element==null){return null}let currentElement=element;let eventTypeUID=haxe_rtti_Meta.getType(eventClass).typeUID[0];while(true){if(Object.prototype.hasOwnProperty.call(currentElement.eventListeners.h,eventTypeUID)){return currentElement}if(currentElement.parent==null){break}currentElement=currentElement.parent;if(!(currentElement.parent!=null)){break}}return null}}$hxClasses["koui.events.EventHandler"]=koui_events_EventHandler;koui_events_EventHandler.__name__="koui.events.EventHandler";class koui_events_EventListener{constructor(callback){this.callback=callback}}$hxClasses["koui.events.EventListener"]=koui_events_EventListener;koui_events_EventListener.__name__="koui.events.EventListener";Object.assign(koui_events_EventListener.prototype,{__class__:koui_events_EventListener,callback:null});class koui_events_MouseEvent extends koui_events_Event{constructor(element,state){super(element,state)}}$hxClasses["koui.events.MouseEvent"]=koui_events_MouseEvent;koui_events_MouseEvent.__name__="koui.events.MouseEvent";koui_events_MouseEvent.__super__=koui_events_Event;Object.assign(koui_events_MouseEvent.prototype,{__class__:koui_events_MouseEvent});class koui_events_MouseButtonEvent extends koui_events_MouseEvent{constructor(element,state,mouseButton){super(element,state);this.mouseButton=mouseButton}}$hxClasses["koui.events.MouseButtonEvent"]=koui_events_MouseButtonEvent;koui_events_MouseButtonEvent.__name__="koui.events.MouseButtonEvent";koui_events_MouseButtonEvent.__super__=koui_events_MouseEvent;Object.assign(koui_events_MouseButtonEvent.prototype,{__class__:koui_events_MouseButtonEvent,mouseButton:null});class koui_events_FocusEvent extends koui_events_MouseButtonEvent{constructor(element,state,mouseButton){super(element,state,mouseButton)}}$hxClasses["koui.events.FocusEvent"]=koui_events_FocusEvent;koui_events_FocusEvent.__name__="koui.events.FocusEvent";koui_events_FocusEvent.__super__=koui_events_MouseButtonEvent;Object.assign(koui_events_FocusEvent.prototype,{__class__:koui_events_FocusEvent});class koui_events_KeyEvent extends koui_events_Event{constructor(element,state){super(element,state)}}$hxClasses["koui.events.KeyEvent"]=koui_events_KeyEvent;koui_events_KeyEvent.__name__="koui.events.KeyEvent";koui_events_KeyEvent.__super__=koui_events_Event;Object.assign(koui_events_KeyEvent.prototype,{__class__:koui_events_KeyEvent});class koui_events_KeyCodeEvent extends koui_events_KeyEvent{constructor(element,state,keyCode){super(element,state);this.keyCode=keyCode}}$hxClasses["koui.events.KeyCodeEvent"]=koui_events_KeyCodeEvent;koui_events_KeyCodeEvent.__name__="koui.events.KeyCodeEvent";koui_events_KeyCodeEvent.__super__=koui_events_KeyEvent;Object.assign(koui_events_KeyCodeEvent.prototype,{__class__:koui_events_KeyCodeEvent,keyCode:null});class koui_events_KeyCodeStatusEvent extends koui_events_KeyCodeEvent{constructor(element,state,keyCode){super(element,state,keyCode)}}$hxClasses["koui.events.KeyCodeStatusEvent"]=koui_events_KeyCodeStatusEvent;koui_events_KeyCodeStatusEvent.__name__="koui.events.KeyCodeStatusEvent";koui_events_KeyCodeStatusEvent.__super__=koui_events_KeyCodeEvent;Object.assign(koui_events_KeyCodeStatusEvent.prototype,{__class__:koui_events_KeyCodeStatusEvent});class koui_events_KeyCodePressEvent extends koui_events_KeyCodeEvent{constructor(element,state,keyCode){super(element,state,keyCode)}}$hxClasses["koui.events.KeyCodePressEvent"]=koui_events_KeyCodePressEvent;koui_events_KeyCodePressEvent.__name__="koui.events.KeyCodePressEvent";koui_events_KeyCodePressEvent.__super__=koui_events_KeyCodeEvent;Object.assign(koui_events_KeyCodePressEvent.prototype,{__class__:koui_events_KeyCodePressEvent});class koui_events_KeyCharPressEvent extends koui_events_KeyEvent{constructor(element,state,keyChar){super(element,state);this.keyChar=keyChar}}$hxClasses["koui.events.KeyCharPressEvent"]=koui_events_KeyCharPressEvent;koui_events_KeyCharPressEvent.__name__="koui.events.KeyCharPressEvent";koui_events_KeyCharPressEvent.__super__=koui_events_KeyEvent;Object.assign(koui_events_KeyCharPressEvent.prototype,{__class__:koui_events_KeyCharPressEvent,keyChar:null});class koui_events_MouseClickEvent extends koui_events_MouseButtonEvent{constructor(element,state,mouseButton){super(element,state,mouseButton)}getState(){return this.state}}$hxClasses["koui.events.MouseClickEvent"]=koui_events_MouseClickEvent;koui_events_MouseClickEvent.__name__="koui.events.MouseClickEvent";koui_events_MouseClickEvent.__super__=koui_events_MouseButtonEvent;Object.assign(koui_events_MouseClickEvent.prototype,{__class__:koui_events_MouseClickEvent});class koui_events_MouseHoverEvent extends koui_events_MouseEvent{constructor(element,state,mouseMoved){super(element,state);this.mouseMoved=mouseMoved}getState(){return this.state}}$hxClasses["koui.events.MouseHoverEvent"]=koui_events_MouseHoverEvent;koui_events_MouseHoverEvent.__name__="koui.events.MouseHoverEvent";koui_events_MouseHoverEvent.__super__=koui_events_MouseEvent;Object.assign(koui_events_MouseHoverEvent.prototype,{__class__:koui_events_MouseHoverEvent,mouseMoved:null});class koui_events_MouseScrollEvent extends koui_events_MouseEvent{constructor(element,state,scrollDelta){super(element,state);this.scrollDelta=scrollDelta}}$hxClasses["koui.events.MouseScrollEvent"]=koui_events_MouseScrollEvent;koui_events_MouseScrollEvent.__name__="koui.events.MouseScrollEvent";koui_events_MouseScrollEvent.__super__=koui_events_MouseEvent;Object.assign(koui_events_MouseScrollEvent.prototype,{__class__:koui_events_MouseScrollEvent,scrollDelta:null});class koui_graphics_KPainter{constructor(g4,canvas,quadUniformNames,styleUniformNames,vert,frag){this.styleIndices=new haxe_ds_ObjectMap;this.nextFreeStyleIndex=0;this.quadIndex=0;this.g4=g4;this.canvas=canvas;this.canvas=canvas;this.quadUniformNames=quadUniformNames;this.styleUniformNames=styleUniformNames;this.vert=vert;this.frag=frag;this.quadUniformValues=[];this.quadUniformValues.length=this.quadUniformNames.length;this.quadUniformLocations=[];this.quadUniformLocations.length=this.quadUniformNames.length;this.styleUniformValues=[];this.styleUniformValues.length=this.quadUniformNames.length;this.styleUniformLocations=[];this.styleUniformLocations.length=this.quadUniformNames.length}init(){this.quadIndex=0;let numQuadUniforms=this.quadUniformNames.length;let valuesPerQuadUniform=koui_graphics_KPainter.MAX_QUADS_PER_DRAWCALL*4;let quadUniformRawValues=kha_arrays_Float32Array._new(numQuadUniforms*valuesPerQuadUniform);let offset=0;let _g=0;let _g1=numQuadUniforms;while(_g<_g1){let i=_g++;let start=offset;let end=offset+=valuesPerQuadUniform;let start1=start*4;let end1=end!=null?end*4:end;this.quadUniformValues[i]=kha_arrays_ByteArray._new(quadUniformRawValues.buffer,start1,end1!=null?end1-start1:null)}let numStyleUniforms=this.styleUniformNames.length;let valuesPerStyleUniform=koui_graphics_KPainter.MAX_STYLES_PER_DRAWCALL*4;let styleUniformRawValues=kha_arrays_Float32Array._new(numStyleUniforms*valuesPerStyleUniform);offset=0;let _g2=0;let _g3=numStyleUniforms;while(_g2<_g3){let i=_g2++;let start=offset;let end=offset+=valuesPerStyleUniform;let start1=start*4;let end1=end!=null?end*4:end;this.styleUniformValues[i]=kha_arrays_ByteArray._new(styleUniformRawValues.buffer,start1,end1!=null?end1-start1:null)}if(this.structures==null){this.initVertexStructures()}if(this.indexBuffer==null||this.vertexBuffers==null){this.initBuffers()}if(this.pipeline==null){this.initPipeline()}}getStyleIndex(style){let styleIndex=this.styleIndices.h[style.__id__];if(styleIndex==null){styleIndex=this.nextFreeStyleIndex;this.styleIndices.set(style,styleIndex);this.nextFreeStyleIndex++}return styleIndex}initVertexStructures(){this.structures=[];let this1=new Array(2);this.structureLengths=this1;this.structures[0]=new kha_graphics4_VertexStructure;this.structures[0].add("pos",2);this.structures[1]=new kha_graphics4_VertexStructure;this.structures[1].add("col",3);this.structureLengths[0]=3;this.structureLengths[1]=4}initPipeline(){this.pipeline=new kha_graphics4_PipelineState;this.pipeline.inputLayout=this.structures;this.pipeline.vertexShader=this.vert;this.pipeline.fragmentShader=this.frag;this.pipeline.blendSource=3;this.pipeline.blendDestination=5;this.pipeline.blendOperation=0;this.pipeline.alphaBlendOperation=0;this.pipeline.alphaBlendSource=1;this.pipeline.alphaBlendDestination=5;this.pipeline.cullMode=2;this.pipeline.compile();this.pipelineCache=new kha_graphics4_SimplePipelineCache(this.pipeline,false);let _g=0;let _g1=this.quadUniformNames.length;while(_g<_g1){let i=_g++;this.quadUniformLocations[i]=this.pipeline.getConstantLocation(this.quadUniformNames[i])}let _g2=0;let _g3=this.styleUniformNames.length;while(_g2<_g3){let i=_g2++;this.styleUniformLocations[i]=this.pipeline.getConstantLocation(this.styleUniformNames[i])}}initBuffers(){this.vertexBuffers=[];let maxNumVerts=koui_graphics_KPainter.MAX_QUADS_PER_DRAWCALL*4;this.vertexBuffers[0]=new kha_graphics4_VertexBuffer(maxNumVerts,this.structures[0],1);this.vertexBuffers[1]=new kha_graphics4_VertexBuffer(maxNumVerts,this.structures[1],1);this.vCoords=kha_arrays_Float32Array._new(maxNumVerts*this.structureLengths[0]);this.vColors=kha_arrays_Float32Array._new(maxNumVerts*this.structureLengths[1]);let indices=[0,1,2,1,2,3];let indicesLength=indices.length;this.indexBuffer=new kha_graphics4_IndexBuffer(koui_graphics_KPainter.MAX_QUADS_PER_DRAWCALL*indicesLength,0);let ibuffer=this.indexBuffer.lock();let _g=0;let _g1=koui_graphics_KPainter.MAX_QUADS_PER_DRAWCALL;while(_g<_g1){let i=_g++;let _g1=0;let _g2=indicesLength;while(_g1<_g2){let j=_g1++;let k=i*indicesLength+j;ibuffer.setUint32(k*4,i*4+indices[j],kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4}}this.indexBuffer.unlock()}drawBuffer(){let vbCoords=this.vertexBuffers[0].lock();let _g=0;let _g1=this.vCoords.byteLength>>2;while(_g<_g1){let i=_g++;let v=this.vCoords.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);vbCoords.setFloat32(i*4,v,true)}this.vertexBuffers[0].unlock();let vbColors=this.vertexBuffers[1].lock();let _g2=0;let _g3=this.vColors.byteLength>>2;while(_g2<_g3){let i=_g2++;let v=this.vColors.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);vbColors.setFloat32(i*4,v,true)}this.vertexBuffers[1].unlock();this.g4.setPipeline(this.pipeline);this.g4.setIndexBuffer(this.indexBuffer);this.g4.setVertexBuffers(this.vertexBuffers);let _g4=0;let _g5=this.quadUniformNames.length;while(_g4<_g5){let i=_g4++;this.g4.setFloats(this.quadUniformLocations[i],this.quadUniformValues[i])}let _g6=0;let _g7=this.styleUniformNames.length;while(_g6<_g7){let i=_g6++;this.g4.setFloats(this.styleUniformLocations[i],this.styleUniformValues[i])}this.g4.drawIndexedVertices(0,this.quadIndex*6);this.quadIndex=0;this.nextFreeStyleIndex=0;this.styleIndices.h={__keys__:{}}}end(){if(this.quadIndex>0){this.drawBuffer()}}}$hxClasses["koui.graphics.KPainter"]=koui_graphics_KPainter;koui_graphics_KPainter.__name__="koui.graphics.KPainter";Object.assign(koui_graphics_KPainter.prototype,{__class__:koui_graphics_KPainter,g4:null,pipelineCache:null,canvas:null,pipeline:null,vert:null,frag:null,indexBuffer:null,vertexBuffers:null,structures:null,structureLengths:null,vCoords:null,vColors:null,quadIndex:null,nextFreeStyleIndex:null,styleIndices:null,quadUniformNames:null,quadUniformLocations:null,quadUniformValues:null,styleUniformNames:null,styleUniformLocations:null,styleUniformValues:null});class koui_graphics_KCirclePainter extends koui_graphics_KPainter{constructor(g4,canvas){let this1=new Array(1);let quadUniformNames=this1;quadUniformNames[0]="circles";let this2=new Array(3);let styleUniformNames=this2;styleUniformNames[0]="borderColors";styleUniformNames[1]="shadowColors";styleUniformNames[2]="attributes";super(g4,canvas,quadUniformNames,styleUniformNames,kha_Shaders.rect_vert,kha_Shaders.circle_frag)}}$hxClasses["koui.graphics.KCirclePainter"]=koui_graphics_KCirclePainter;koui_graphics_KCirclePainter.__name__="koui.graphics.KCirclePainter";koui_graphics_KCirclePainter.__super__=koui_graphics_KPainter;Object.assign(koui_graphics_KCirclePainter.prototype,{__class__:koui_graphics_KCirclePainter});class koui_graphics_KGraphics extends kha_graphics4_Graphics2{constructor(canvas){super(canvas);this.kRectPainter=new koui_graphics_KRectPainter(this.g,canvas);this.kCirclePainter=new koui_graphics_KCirclePainter(this.g,canvas);this.kRectPainter.init();this.kCirclePainter.init()}fillKRect(x,y,width,height,style){if(style.border.nineSlice){let atl=style.atlas;let innerRect=new koui_graphics_Rect(atl.x,atl.y,atl.w,atl.h);let texture=kha_Assets.images.get(style.textureBg);if(texture==null){return}let slices=koui_graphics_NineSlice.createSlices(innerRect,texture.get_width(),texture.get_height(),width,height);let imgSlices=slices[0];let elemSlices=slices[1];let _g=0;while(_g<9){let i=_g++;let imgSlice=imgSlices[i];let elemSlice=elemSlices[i];this.drawScaledSubImage(texture,imgSlice.left,imgSlice.top,imgSlice.width,imgSlice.height,x+elemSlice.left,y+elemSlice.top,elemSlice.width,elemSlice.height)}}else{let _this=this.transformations[this.transformationIndex];let x1=x;let y1=y;if(y1==null){y1=0}if(x1==null){x1=0}let value_x=x1;let value_y=y1;let w=_this._02*value_x+_this._12*value_y+_this._22;let x2=(_this._00*value_x+_this._10*value_y+_this._20)/w;let y2=(_this._01*value_x+_this._11*value_y+_this._21)/w;let x3=x2;let y3=y2;if(y3==null){y3=0}if(x3==null){x3=0}let p_x=x3;let p_y=y3;let _this1=this.coloredPainter;if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){_this1.drawTriBuffer(false)}if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){_this1.drawBuffer(false)}this.imagePainter.end();this.textPainter.end();this.kCirclePainter.end();this.kRectPainter.fillKRect(p_x,p_y,width,height,style)}}drawKAlignedString(text,x,y,horAlign,verAlign,style){if(text==""){return}this.set_pipeline(koui_graphics_KGraphics.textPipeline);this.set_fontSize(style.font.size*koui_Koui.uiScale|0);this.set_font(kha_Assets.fonts.get(style.font.family));if(style.textShadow!=null){this.set_color(style.textShadow.color);this.khaGraphicsExtDrawAlignedString(text,x+style.textShadow.offsetX,y+style.textShadow.offsetY,horAlign,verAlign)}this.set_color(style.color.text);this.khaGraphicsExtDrawAlignedString(text,x,y,horAlign,verAlign);this.set_pipeline(null);if(style.font.underlineThickness!=0){let width=this.get_font().width(this.get_fontSize(),text);let height=this.get_font().height(this.get_fontSize());let offsetX;switch(horAlign){case 1:offsetX=-width*.5;break;case 2:offsetX=-width;break;default:offsetX=0}let offsetY;switch(verAlign){case 0:offsetY=height;break;case 1:offsetY=height*.5;break;default:offsetY=0}this.fillRect(x+offsetX,y+offsetY,width,style.font.underlineThickness)}}khaGraphicsExtDrawAlignedString(text,x,y,horAlign,verAlign){let offsetX=0;if(horAlign==1||horAlign==2){let width=this.get_font().width(this.get_fontSize(),text);if(horAlign==1){offsetX=-width*.5}else{offsetX=-width}}let offsetY=0;if(verAlign==1||verAlign==2){let height=this.get_font().height(this.get_fontSize());if(verAlign==1){offsetY=-height*.5}else{offsetY=-height}}this.drawString(text,x+offsetX,y+offsetY)}flush(){super.flush();this.kRectPainter.end();this.kCirclePainter.end()}drawString(text,x,y){this.kRectPainter.end();this.kCirclePainter.end();super.drawString(text,x,y)}drawRect(x,y,width,height,strength){if(strength==null){strength=1}this.kRectPainter.end();this.kCirclePainter.end();super.drawRect(x,y,width,height,strength)}fillRect(x,y,width,height){this.kRectPainter.end();this.kCirclePainter.end();super.fillRect(x,y,width,height)}drawLine(x1,y1,x2,y2,strength){if(strength==null){strength=1}this.kRectPainter.end();this.kCirclePainter.end();super.drawLine(x1,y1,x2,y2,strength)}fillTriangle(x1,y1,x2,y2,x3,y3){this.kRectPainter.end();this.kCirclePainter.end();super.fillTriangle(x1,y1,x2,y2,x3,y3)}drawScaledSubImage(img,sx,sy,sw,sh,dx,dy,dw,dh){this.kRectPainter.end();this.kCirclePainter.end();super.drawScaledSubImage(img,sx,sy,sw,sh,dx,dy,dw,dh)}setProjection(){super.setProjection()}setPipeline(pipeline){if(pipeline==this.lastPipeline){return}this.lastPipeline=pipeline;this.flush();if(pipeline==null){this.imagePainter.set_pipeline(null);this.coloredPainter.set_pipeline(null);this.textPainter.set_pipeline(null);this.kRectPainter.pipelineCache=null;this.kCirclePainter.pipelineCache=null}else{let cache=this.pipelineCache.h[pipeline.__id__];if(cache==null){cache=new kha_graphics4_SimplePipelineCache(pipeline,true);this.pipelineCache.set(pipeline,cache)}this.imagePainter.set_pipeline(cache);this.coloredPainter.set_pipeline(cache);this.textPainter.set_pipeline(cache);this.kRectPainter.pipelineCache=cache;this.kCirclePainter.pipelineCache=cache}}static initTextPipeline(){let textVS=kha_graphics4_Graphics2.createTextVertexStructure();koui_graphics_KGraphics.textPipeline=kha_graphics4_Graphics2.createTextPipeline(textVS);koui_graphics_KGraphics.textPipeline.alphaBlendSource=1;koui_graphics_KGraphics.textPipeline.alphaBlendDestination=5;koui_graphics_KGraphics.textPipeline.blendSource=3;koui_graphics_KGraphics.textPipeline.blendDestination=5;koui_graphics_KGraphics.textPipeline.blendOperation=0;koui_graphics_KGraphics.textPipeline.compile()}}$hxClasses["koui.graphics.KGraphics"]=koui_graphics_KGraphics;koui_graphics_KGraphics.__name__="koui.graphics.KGraphics";koui_graphics_KGraphics.__super__=kha_graphics4_Graphics2;Object.assign(koui_graphics_KGraphics.prototype,{__class__:koui_graphics_KGraphics,kRectPainter:null,kCirclePainter:null});class koui_graphics_KRectPainter extends koui_graphics_KPainter{constructor(g4,canvas){let this1=new Array(1);let quadUniformNames=this1;quadUniformNames[0]="rects";let this2=new Array(3);let styleUniformNames=this2;styleUniformNames[0]="borderColors";styleUniformNames[1]="shadowColors";styleUniformNames[2]="attributes";super(g4,canvas,quadUniformNames,styleUniformNames,kha_Shaders.rect_vert,kha_Shaders.rect_frag)}fillKRect(x,y,width,height,style){if(this.quadIndex+1>=koui_graphics_KPainter.MAX_QUADS_PER_DRAWCALL||this.nextFreeStyleIndex+1>=koui_graphics_KPainter.MAX_STYLES_PER_DRAWCALL){this.drawBuffer()}let canvasW=this.canvas.get_width();let screenH=this.canvas.get_height();let cornerRadius=style.cornerRadius;let styleBorder=style.border;let styleColor=style.color;let styleShadow=style.dropShadow;let shadowWidth=styleShadow.radius;let posLeft=(x-shadowWidth)/canvasW;let posRight=(x+width+shadowWidth)/canvasW;let posTop=(y-shadowWidth)/screenH;let posBottom=(y+height+shadowWidth)/screenH;posLeft=posLeft*2-1;posRight=posRight*2-1;posTop=posTop*2-1;posBottom=posBottom*2-1;let colorTopLeft=styleColor.bg;let colorBottomRight=styleColor.bg;let direction=true;if(styleColor.useGradient){colorTopLeft=styleColor.gradient.colorTopLeft;colorBottomRight=styleColor.gradient.colorBottomRight;direction=styleColor.gradient.direction}let styleIndex=this.getStyleIndex(style);let quadOffset=this.quadIndex*this.structureLengths[0]*4;this.vCoords.setFloat32(quadOffset*4,posLeft,true);this.vCoords.setFloat32((quadOffset+1)*4,posTop,true);let v=this.quadIndex<<8|styleIndex;this.vCoords.setFloat32((quadOffset+2)*4,v,true);this.vCoords.setFloat32((quadOffset+3)*4,posLeft,true);this.vCoords.setFloat32((quadOffset+4)*4,posBottom,true);let v1=this.quadIndex<<8|styleIndex;this.vCoords.setFloat32((quadOffset+5)*4,v1,true);this.vCoords.setFloat32((quadOffset+6)*4,posRight,true);this.vCoords.setFloat32((quadOffset+7)*4,posTop,true);let v2=this.quadIndex<<8|styleIndex;this.vCoords.setFloat32((quadOffset+8)*4,v2,true);this.vCoords.setFloat32((quadOffset+9)*4,posRight,true);this.vCoords.setFloat32((quadOffset+10)*4,posBottom,true);let v3=this.quadIndex<<8|styleIndex;this.vCoords.setFloat32((quadOffset+11)*4,v3,true);let opacity=style.opacity;let colorTL;let colorTR;let colorBL;let colorBR;if(direction){colorTL=colorTopLeft;colorTR=colorTopLeft;colorBL=colorBottomRight;colorBR=colorBottomRight}else{colorTL=colorTopLeft;colorTR=colorBottomRight;colorBL=colorTopLeft;colorBR=colorBottomRight}let quadOffset1=this.quadIndex*this.structureLengths[1]*4;let v4=((colorTL&16711680)>>>16)*.00392156862745098;this.vColors.setFloat32(quadOffset1*4,v4,true);let v5=((colorTL&65280)>>>8)*.00392156862745098;this.vColors.setFloat32((quadOffset1+1)*4,v5,true);let v6=(colorTL&255)*.00392156862745098;this.vColors.setFloat32((quadOffset1+2)*4,v6,true);let v7=(colorTL>>>24)*.00392156862745098*opacity;this.vColors.setFloat32((quadOffset1+3)*4,v7,true);let v8=((colorBL&16711680)>>>16)*.00392156862745098;this.vColors.setFloat32((quadOffset1+4)*4,v8,true);let v9=((colorBL&65280)>>>8)*.00392156862745098;this.vColors.setFloat32((quadOffset1+5)*4,v9,true);let v10=(colorBL&255)*.00392156862745098;this.vColors.setFloat32((quadOffset1+6)*4,v10,true);let v11=(colorBL>>>24)*.00392156862745098*opacity;this.vColors.setFloat32((quadOffset1+7)*4,v11,true);let v12=((colorTR&16711680)>>>16)*.00392156862745098;this.vColors.setFloat32((quadOffset1+8)*4,v12,true);let v13=((colorTR&65280)>>>8)*.00392156862745098;this.vColors.setFloat32((quadOffset1+9)*4,v13,true);let v14=(colorTR&255)*.00392156862745098;this.vColors.setFloat32((quadOffset1+10)*4,v14,true);let v15=(colorTR>>>24)*.00392156862745098*opacity;this.vColors.setFloat32((quadOffset1+11)*4,v15,true);let v16=((colorBR&16711680)>>>16)*.00392156862745098;this.vColors.setFloat32((quadOffset1+12)*4,v16,true);let v17=((colorBR&65280)>>>8)*.00392156862745098;this.vColors.setFloat32((quadOffset1+13)*4,v17,true);let v18=(colorBR&255)*.00392156862745098;this.vColors.setFloat32((quadOffset1+14)*4,v18,true);let v19=(colorBR>>>24)*.00392156862745098*opacity;this.vColors.setFloat32((quadOffset1+15)*4,v19,true);this.quadUniformValues[0].setFloat32(this.quadIndex*4*4,x,true);let v20=x+width;this.quadUniformValues[0].setFloat32((this.quadIndex*4+1)*4,v20,true);let v21=y+height;this.quadUniformValues[0].setFloat32((this.quadIndex*4+2)*4,v21,true);this.quadUniformValues[0].setFloat32((this.quadIndex*4+3)*4,y,true);let borderColor=styleBorder.color;let v22=((borderColor&16711680)>>>16)*.00392156862745098;this.styleUniformValues[0].setFloat32(styleIndex*4*4,v22,true);let v23=((borderColor&65280)>>>8)*.00392156862745098;this.styleUniformValues[0].setFloat32((styleIndex*4+1)*4,v23,true);let v24=(borderColor&255)*.00392156862745098;this.styleUniformValues[0].setFloat32((styleIndex*4+2)*4,v24,true);let v25=(borderColor>>>24)*.00392156862745098*style.opacity;this.styleUniformValues[0].setFloat32((styleIndex*4+3)*4,v25,true);let shadowColor=styleShadow.color;if(styleShadow.radius==0){shadowColor=0}let v26=((shadowColor&16711680)>>>16)*.00392156862745098;this.styleUniformValues[1].setFloat32(styleIndex*4*4,v26,true);let v27=((shadowColor&65280)>>>8)*.00392156862745098;this.styleUniformValues[1].setFloat32((styleIndex*4+1)*4,v27,true);let v28=(shadowColor&255)*.00392156862745098;this.styleUniformValues[1].setFloat32((styleIndex*4+2)*4,v28,true);let v29=(shadowColor>>>24)*.00392156862745098*style.opacity;this.styleUniformValues[1].setFloat32((styleIndex*4+3)*4,v29,true);let v30=styleBorder.size;this.styleUniformValues[2].setFloat32(styleIndex*4*4,v30,true);this.styleUniformValues[2].setFloat32((styleIndex*4+1)*4,cornerRadius,true);this.styleUniformValues[2].setFloat32((styleIndex*4+2)*4,shadowWidth,true);let v31=styleShadow.falloff;this.styleUniformValues[2].setFloat32((styleIndex*4+3)*4,v31,true);this.quadIndex++}}$hxClasses["koui.graphics.KRectPainter"]=koui_graphics_KRectPainter;koui_graphics_KRectPainter.__name__="koui.graphics.KRectPainter";koui_graphics_KRectPainter.__super__=koui_graphics_KPainter;Object.assign(koui_graphics_KRectPainter.prototype,{__class__:koui_graphics_KRectPainter});class koui_graphics_NineSlice{static createSlices(imgInnerSlice,imgWidth,imgHeight,elemWidth,elemHeight){let this1=new Array(2);let out=this1;out[0]=koui_graphics_NineSlice._createImageSlices(imgInnerSlice,imgWidth,imgHeight);out[1]=koui_graphics_NineSlice._createElemSlices(out[0],elemWidth,elemHeight);return out}static _createImageSlices(innerSlice,targetWidth,targetHeight){let left=innerSlice.left;let right=innerSlice.get_right();let top=innerSlice.top;let bottom=innerSlice.get_bottom();let width=innerSlice.width;let height=innerSlice.height;return koui_graphics_NineSlice._createSlices(left,right,top,bottom,width,height,targetWidth,targetHeight)}static _createElemSlices(imageSlices,targetWidth,targetHeight){let left=imageSlices[0].width;let right=targetWidth-imageSlices[2].width;let top=imageSlices[0].height;let bottom=targetHeight-imageSlices[6].height;let width=right-left;let height=bottom-top;return koui_graphics_NineSlice._createSlices(left,right,top,bottom,width,height,targetWidth,targetHeight)}static _createSlices(left,right,top,bottom,width,height,targetWidth,targetHeight){let this1=new Array(9);let slices=this1;slices[0]=new koui_graphics_Rect(0,0,left,top);slices[1]=new koui_graphics_Rect(left,0,width,top);slices[2]=new koui_graphics_Rect(right,0,targetWidth-right,top);slices[3]=new koui_graphics_Rect(0,top,left,height);slices[4]=new koui_graphics_Rect(left,top,width,height);slices[5]=new koui_graphics_Rect(right,top,targetWidth-right,height);slices[6]=new koui_graphics_Rect(0,bottom,left,targetHeight-bottom);slices[7]=new koui_graphics_Rect(left,bottom,width,targetHeight-bottom);slices[8]=new koui_graphics_Rect(right,bottom,targetWidth-right,targetHeight-bottom);return slices}}$hxClasses["koui.graphics.NineSlice"]=koui_graphics_NineSlice;koui_graphics_NineSlice.__name__="koui.graphics.NineSlice";class koui_graphics_Rect{constructor(left,top,width,height){this.left=left;this.top=top;this.width=width;this.height=height}get_right(){return this.left+this.width}get_bottom(){return this.top+this.height}}$hxClasses["koui.graphics.Rect"]=koui_graphics_Rect;koui_graphics_Rect.__name__="koui.graphics.Rect";Object.assign(koui_graphics_Rect.prototype,{__class__:koui_graphics_Rect,left:null,top:null,width:null,height:null,__properties__:{get_bottom:"get_bottom",get_right:"get_right"}});class koui_theme_Style{constructor(){this.cornerRadius=0;this.opacity=0;this.orientation="";this.textureBg=""}static init(){let style_fixed_anchorpane_hover=new koui_theme_Style;koui_theme_Style.styles.h["fixed_anchorpane_hover"]=style_fixed_anchorpane_hover;style_fixed_anchorpane_hover.textureBg="";style_fixed_anchorpane_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style_fixed_anchorpane_hover.padding={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_hover.orientation="left";style_fixed_anchorpane_hover.opacity=1;style_fixed_anchorpane_hover.margin={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style_fixed_anchorpane_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style_fixed_anchorpane_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style_fixed_anchorpane_hover.cornerRadius=3;style_fixed_anchorpane_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style_fixed_anchorpane_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style_fixed_anchorpane_hover.atlas={y:0,x:0,w:10,h:10};let style_fixed_anchorpane_disabled=new koui_theme_Style;koui_theme_Style.styles.h["fixed_anchorpane_disabled"]=style_fixed_anchorpane_disabled;style_fixed_anchorpane_disabled.textureBg="";style_fixed_anchorpane_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style_fixed_anchorpane_disabled.padding={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_disabled.orientation="left";style_fixed_anchorpane_disabled.opacity=.6;style_fixed_anchorpane_disabled.margin={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style_fixed_anchorpane_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style_fixed_anchorpane_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style_fixed_anchorpane_disabled.cornerRadius=3;style_fixed_anchorpane_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style_fixed_anchorpane_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style_fixed_anchorpane_disabled.atlas={y:0,x:0,w:10,h:10};let style_fixed_anchorpane_default=new koui_theme_Style;koui_theme_Style.styles.h["fixed_anchorpane_default"]=style_fixed_anchorpane_default;style_fixed_anchorpane_default.textureBg="";style_fixed_anchorpane_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style_fixed_anchorpane_default.padding={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_default.orientation="left";style_fixed_anchorpane_default.opacity=1;style_fixed_anchorpane_default.margin={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style_fixed_anchorpane_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style_fixed_anchorpane_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style_fixed_anchorpane_default.cornerRadius=3;style_fixed_anchorpane_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style_fixed_anchorpane_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style_fixed_anchorpane_default.atlas={y:0,x:0,w:10,h:10};let style_fixed_anchorpane_click=new koui_theme_Style;koui_theme_Style.styles.h["fixed_anchorpane_click"]=style_fixed_anchorpane_click;style_fixed_anchorpane_click.textureBg="";style_fixed_anchorpane_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style_fixed_anchorpane_click.padding={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_click.orientation="left";style_fixed_anchorpane_click.opacity=1;style_fixed_anchorpane_click.margin={top:0,right:0,left:0,bottom:0};style_fixed_anchorpane_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style_fixed_anchorpane_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style_fixed_anchorpane_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style_fixed_anchorpane_click.cornerRadius=3;style_fixed_anchorpane_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style_fixed_anchorpane_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style_fixed_anchorpane_click.atlas={y:0,x:0,w:10,h:10};let style__textinput_invalid_hover=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_invalid_hover"]=style__textinput_invalid_hover;style__textinput_invalid_hover.textureBg="";style__textinput_invalid_hover.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_invalid_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_invalid_hover.padding={top:0,right:8,left:8,bottom:0};style__textinput_invalid_hover.orientation="left";style__textinput_invalid_hover.opacity=1;style__textinput_invalid_hover.margin={top:0,right:0,left:0,bottom:0};style__textinput_invalid_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_invalid_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_invalid_hover.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_invalid_hover.cornerRadius=3;style__textinput_invalid_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__textinput_invalid_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__textinput_invalid_hover.atlas={y:0,x:0,w:10,h:10};let style__textinput_invalid_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_invalid_disabled"]=style__textinput_invalid_disabled;style__textinput_invalid_disabled.textureBg="";style__textinput_invalid_disabled.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_invalid_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_invalid_disabled.padding={top:0,right:8,left:8,bottom:0};style__textinput_invalid_disabled.orientation="left";style__textinput_invalid_disabled.opacity=.6;style__textinput_invalid_disabled.margin={top:0,right:0,left:0,bottom:0};style__textinput_invalid_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_invalid_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_invalid_disabled.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_invalid_disabled.cornerRadius=3;style__textinput_invalid_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__textinput_invalid_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__textinput_invalid_disabled.atlas={y:0,x:0,w:10,h:10};let style__textinput_invalid_default=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_invalid_default"]=style__textinput_invalid_default;style__textinput_invalid_default.textureBg="";style__textinput_invalid_default.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_invalid_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_invalid_default.padding={top:0,right:8,left:8,bottom:0};style__textinput_invalid_default.orientation="left";style__textinput_invalid_default.opacity=1;style__textinput_invalid_default.margin={top:0,right:0,left:0,bottom:0};style__textinput_invalid_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_invalid_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_invalid_default.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_invalid_default.cornerRadius=3;style__textinput_invalid_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__textinput_invalid_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__textinput_invalid_default.atlas={y:0,x:0,w:10,h:10};let style__textinput_invalid_click=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_invalid_click"]=style__textinput_invalid_click;style__textinput_invalid_click.textureBg="";style__textinput_invalid_click.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_invalid_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_invalid_click.padding={top:0,right:8,left:8,bottom:0};style__textinput_invalid_click.orientation="left";style__textinput_invalid_click.opacity=1;style__textinput_invalid_click.margin={top:0,right:0,left:0,bottom:0};style__textinput_invalid_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_invalid_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_invalid_click.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_invalid_click.cornerRadius=3;style__textinput_invalid_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__textinput_invalid_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__textinput_invalid_click.atlas={y:0,x:0,w:10,h:10};let style__textinput_hover=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_hover"]=style__textinput_hover;style__textinput_hover.textureBg="";style__textinput_hover.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_hover.padding={top:0,right:8,left:8,bottom:0};style__textinput_hover.orientation="left";style__textinput_hover.opacity=1;style__textinput_hover.margin={top:0,right:0,left:0,bottom:0};style__textinput_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_hover.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_hover.cornerRadius=3;style__textinput_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-13948109)},bg:kha_Color._new(-15132127)};style__textinput_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__textinput_hover.atlas={y:0,x:0,w:10,h:10};let style__textinput_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_disabled"]=style__textinput_disabled;style__textinput_disabled.textureBg="";style__textinput_disabled.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_disabled.padding={top:0,right:8,left:8,bottom:0};style__textinput_disabled.orientation="left";style__textinput_disabled.opacity=.6;style__textinput_disabled.margin={top:0,right:0,left:0,bottom:0};style__textinput_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_disabled.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_disabled.cornerRadius=3;style__textinput_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__textinput_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__textinput_disabled.atlas={y:0,x:0,w:10,h:10};let style__textinput_default=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_default"]=style__textinput_default;style__textinput_default.textureBg="";style__textinput_default.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_default.padding={top:0,right:8,left:8,bottom:0};style__textinput_default.orientation="left";style__textinput_default.opacity=1;style__textinput_default.margin={top:0,right:0,left:0,bottom:0};style__textinput_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_default.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_default.cornerRadius=3;style__textinput_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__textinput_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__textinput_default.atlas={y:0,x:0,w:10,h:10};let style__textinput_click=new koui_theme_Style;koui_theme_Style.styles.h["_textinput_click"]=style__textinput_click;style__textinput_click.textureBg="";style__textinput_click.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__textinput_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__textinput_click.padding={top:0,right:8,left:8,bottom:0};style__textinput_click.orientation="left";style__textinput_click.opacity=1;style__textinput_click.margin={top:0,right:0,left:0,bottom:0};style__textinput_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__textinput_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__textinput_click.cursors={notallowed:"notallowed",defaultCursor:"text"};style__textinput_click.cornerRadius=3;style__textinput_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-13355194)},bg:kha_Color._new(-15132127)};style__textinput_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__textinput_click.atlas={y:0,x:0,w:10,h:10};let style__slider_inner_hover=new koui_theme_Style;koui_theme_Style.styles.h["_slider_inner_hover"]=style__slider_inner_hover;style__slider_inner_hover.textureBg="";style__slider_inner_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_inner_hover.padding={top:0,right:0,left:0,bottom:0};style__slider_inner_hover.orientation="left";style__slider_inner_hover.opacity=1;style__slider_inner_hover.margin={top:0,right:0,left:0,bottom:0};style__slider_inner_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_inner_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_inner_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_inner_hover.cornerRadius=3;style__slider_inner_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__slider_inner_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__slider_inner_hover.atlas={y:0,x:0,w:10,h:10};let style__slider_inner_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_slider_inner_disabled"]=style__slider_inner_disabled;style__slider_inner_disabled.textureBg="";style__slider_inner_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_inner_disabled.padding={top:0,right:0,left:0,bottom:0};style__slider_inner_disabled.orientation="left";style__slider_inner_disabled.opacity=.6;style__slider_inner_disabled.margin={top:0,right:0,left:0,bottom:0};style__slider_inner_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_inner_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_inner_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_inner_disabled.cornerRadius=3;style__slider_inner_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__slider_inner_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__slider_inner_disabled.atlas={y:0,x:0,w:10,h:10};let style__slider_inner_default=new koui_theme_Style;koui_theme_Style.styles.h["_slider_inner_default"]=style__slider_inner_default;style__slider_inner_default.textureBg="";style__slider_inner_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_inner_default.padding={top:0,right:0,left:0,bottom:0};style__slider_inner_default.orientation="left";style__slider_inner_default.opacity=1;style__slider_inner_default.margin={top:0,right:0,left:0,bottom:0};style__slider_inner_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_inner_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_inner_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_inner_default.cornerRadius=3;style__slider_inner_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__slider_inner_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__slider_inner_default.atlas={y:0,x:0,w:10,h:10};let style__slider_inner_click=new koui_theme_Style;koui_theme_Style.styles.h["_slider_inner_click"]=style__slider_inner_click;style__slider_inner_click.textureBg="";style__slider_inner_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_inner_click.padding={top:0,right:0,left:0,bottom:0};style__slider_inner_click.orientation="left";style__slider_inner_click.opacity=1;style__slider_inner_click.margin={top:0,right:0,left:0,bottom:0};style__slider_inner_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_inner_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_inner_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_inner_click.cornerRadius=3;style__slider_inner_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__slider_inner_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__slider_inner_click.atlas={y:0,x:0,w:10,h:10};let style__slider_hover=new koui_theme_Style;koui_theme_Style.styles.h["_slider_hover"]=style__slider_hover;style__slider_hover.textureBg="";style__slider_hover.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__slider_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_hover.padding={top:0,right:0,left:0,bottom:0};style__slider_hover.orientation="left";style__slider_hover.opacity=1;style__slider_hover.margin={top:0,right:0,left:0,bottom:0};style__slider_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_hover.cornerRadius=3;style__slider_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__slider_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__slider_hover.atlas={y:0,x:0,w:10,h:10};let style__slider_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_slider_disabled"]=style__slider_disabled;style__slider_disabled.textureBg="";style__slider_disabled.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__slider_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_disabled.padding={top:0,right:0,left:0,bottom:0};style__slider_disabled.orientation="left";style__slider_disabled.opacity=.6;style__slider_disabled.margin={top:0,right:0,left:0,bottom:0};style__slider_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_disabled.cornerRadius=3;style__slider_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__slider_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__slider_disabled.atlas={y:0,x:0,w:10,h:10};let style__slider_default=new koui_theme_Style;koui_theme_Style.styles.h["_slider_default"]=style__slider_default;style__slider_default.textureBg="";style__slider_default.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__slider_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_default.padding={top:0,right:0,left:0,bottom:0};style__slider_default.orientation="left";style__slider_default.opacity=1;style__slider_default.margin={top:0,right:0,left:0,bottom:0};style__slider_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_default.cornerRadius=3;style__slider_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__slider_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__slider_default.atlas={y:0,x:0,w:10,h:10};let style__slider_click=new koui_theme_Style;koui_theme_Style.styles.h["_slider_click"]=style__slider_click;style__slider_click.textureBg="";style__slider_click.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__slider_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__slider_click.padding={top:0,right:0,left:0,bottom:0};style__slider_click.orientation="left";style__slider_click.opacity=1;style__slider_click.margin={top:0,right:0,left:0,bottom:0};style__slider_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__slider_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__slider_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__slider_click.cornerRadius=3;style__slider_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__slider_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__slider_click.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_corner_hover=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_corner_hover"]=style__scrollpane_corner_hover;style__scrollpane_corner_hover.textureBg="";style__scrollpane_corner_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_corner_hover.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_hover.orientation="left";style__scrollpane_corner_hover.opacity=1;style__scrollpane_corner_hover.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_corner_hover.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_corner_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_corner_hover.cornerRadius=0;style__scrollpane_corner_hover.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__scrollpane_corner_hover.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1088493)};style__scrollpane_corner_hover.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_corner_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_corner_disabled"]=style__scrollpane_corner_disabled;style__scrollpane_corner_disabled.textureBg="";style__scrollpane_corner_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_corner_disabled.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_disabled.orientation="left";style__scrollpane_corner_disabled.opacity=.6;style__scrollpane_corner_disabled.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_corner_disabled.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_corner_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_corner_disabled.cornerRadius=0;style__scrollpane_corner_disabled.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__scrollpane_corner_disabled.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__scrollpane_corner_disabled.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_corner_default=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_corner_default"]=style__scrollpane_corner_default;style__scrollpane_corner_default.textureBg="";style__scrollpane_corner_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_corner_default.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_default.orientation="left";style__scrollpane_corner_default.opacity=1;style__scrollpane_corner_default.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_corner_default.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_corner_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_corner_default.cornerRadius=0;style__scrollpane_corner_default.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__scrollpane_corner_default.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__scrollpane_corner_default.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_corner_click=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_corner_click"]=style__scrollpane_corner_click;style__scrollpane_corner_click.textureBg="";style__scrollpane_corner_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_corner_click.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_click.orientation="left";style__scrollpane_corner_click.opacity=1;style__scrollpane_corner_click.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_corner_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_corner_click.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_corner_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_corner_click.cornerRadius=0;style__scrollpane_corner_click.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__scrollpane_corner_click.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1)};style__scrollpane_corner_click.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_track_hover=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_track_hover"]=style__scrollpane_bar_track_hover;style__scrollpane_bar_track_hover.textureBg="";style__scrollpane_bar_track_hover.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__scrollpane_bar_track_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_track_hover.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_hover.orientation="left";style__scrollpane_bar_track_hover.opacity=1;style__scrollpane_bar_track_hover.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_track_hover.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_track_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_track_hover.cornerRadius=0;style__scrollpane_bar_track_hover.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-14276557)};style__scrollpane_bar_track_hover.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1088493)};style__scrollpane_bar_track_hover.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_track_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_track_disabled"]=style__scrollpane_bar_track_disabled;style__scrollpane_bar_track_disabled.textureBg="";style__scrollpane_bar_track_disabled.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__scrollpane_bar_track_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_track_disabled.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_disabled.orientation="left";style__scrollpane_bar_track_disabled.opacity=.6;style__scrollpane_bar_track_disabled.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_track_disabled.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_track_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_track_disabled.cornerRadius=0;style__scrollpane_bar_track_disabled.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-14276557)};style__scrollpane_bar_track_disabled.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__scrollpane_bar_track_disabled.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_track_default=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_track_default"]=style__scrollpane_bar_track_default;style__scrollpane_bar_track_default.textureBg="";style__scrollpane_bar_track_default.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__scrollpane_bar_track_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_track_default.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_default.orientation="left";style__scrollpane_bar_track_default.opacity=1;style__scrollpane_bar_track_default.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_track_default.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_track_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_track_default.cornerRadius=0;style__scrollpane_bar_track_default.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-14276557)};style__scrollpane_bar_track_default.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__scrollpane_bar_track_default.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_track_click=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_track_click"]=style__scrollpane_bar_track_click;style__scrollpane_bar_track_click.textureBg="";style__scrollpane_bar_track_click.slider={textOffsetY:0,textOffsetX:0,showValue:true,showRange:false,buttonWidth:18};style__scrollpane_bar_track_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_track_click.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_click.orientation="left";style__scrollpane_bar_track_click.opacity=1;style__scrollpane_bar_track_click.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_track_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_track_click.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_track_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_track_click.cornerRadius=0;style__scrollpane_bar_track_click.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-14276557)};style__scrollpane_bar_track_click.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1)};style__scrollpane_bar_track_click.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_thumb_hover=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_thumb_hover"]=style__scrollpane_bar_thumb_hover;style__scrollpane_bar_thumb_hover.textureBg="";style__scrollpane_bar_thumb_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_thumb_hover.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_hover.orientation="left";style__scrollpane_bar_thumb_hover.opacity=1;style__scrollpane_bar_thumb_hover.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_thumb_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_thumb_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_thumb_hover.cornerRadius=3;style__scrollpane_bar_thumb_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__scrollpane_bar_thumb_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__scrollpane_bar_thumb_hover.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_thumb_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_thumb_disabled"]=style__scrollpane_bar_thumb_disabled;style__scrollpane_bar_thumb_disabled.textureBg="";style__scrollpane_bar_thumb_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_thumb_disabled.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_disabled.orientation="left";style__scrollpane_bar_thumb_disabled.opacity=.6;style__scrollpane_bar_thumb_disabled.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_thumb_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_thumb_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_thumb_disabled.cornerRadius=3;style__scrollpane_bar_thumb_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__scrollpane_bar_thumb_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__scrollpane_bar_thumb_disabled.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_thumb_default=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_thumb_default"]=style__scrollpane_bar_thumb_default;style__scrollpane_bar_thumb_default.textureBg="";style__scrollpane_bar_thumb_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_thumb_default.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_default.orientation="left";style__scrollpane_bar_thumb_default.opacity=1;style__scrollpane_bar_thumb_default.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_thumb_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_thumb_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_thumb_default.cornerRadius=3;style__scrollpane_bar_thumb_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__scrollpane_bar_thumb_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__scrollpane_bar_thumb_default.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_bar_thumb_click=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_bar_thumb_click"]=style__scrollpane_bar_thumb_click;style__scrollpane_bar_thumb_click.textureBg="";style__scrollpane_bar_thumb_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_bar_thumb_click.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_click.orientation="left";style__scrollpane_bar_thumb_click.opacity=1;style__scrollpane_bar_thumb_click.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_bar_thumb_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_bar_thumb_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_bar_thumb_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_bar_thumb_click.cornerRadius=3;style__scrollpane_bar_thumb_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__scrollpane_bar_thumb_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__scrollpane_bar_thumb_click.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_hover=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_hover"]=style__scrollpane_hover;style__scrollpane_hover.textureBg="";style__scrollpane_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_hover.scrollbar={width:20,color:{frontHover:kha_Color._new(-13355194),frontClick:kha_Color._new(-1088493),front:kha_Color._new(-13948109),corner:kha_Color._new(-15198184),bg:kha_Color._new(-16184815)}};style__scrollpane_hover.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_hover.orientation="left";style__scrollpane_hover.opacity=1;style__scrollpane_hover.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_hover.cornerRadius=3;style__scrollpane_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(0)};style__scrollpane_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__scrollpane_hover.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_disabled"]=style__scrollpane_disabled;style__scrollpane_disabled.textureBg="";style__scrollpane_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_disabled.scrollbar={width:20,color:{frontHover:kha_Color._new(-13355194),frontClick:kha_Color._new(-1088493),front:kha_Color._new(-13948109),corner:kha_Color._new(-15198184),bg:kha_Color._new(-16184815)}};style__scrollpane_disabled.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_disabled.orientation="left";style__scrollpane_disabled.opacity=.6;style__scrollpane_disabled.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_disabled.cornerRadius=3;style__scrollpane_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(0)};style__scrollpane_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__scrollpane_disabled.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_default=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_default"]=style__scrollpane_default;style__scrollpane_default.textureBg="";style__scrollpane_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_default.scrollbar={width:20,color:{frontHover:kha_Color._new(-13355194),frontClick:kha_Color._new(-1088493),front:kha_Color._new(-13948109),corner:kha_Color._new(-15198184),bg:kha_Color._new(-16184815)}};style__scrollpane_default.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_default.orientation="left";style__scrollpane_default.opacity=1;style__scrollpane_default.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_default.cornerRadius=3;style__scrollpane_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(0)};style__scrollpane_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__scrollpane_default.atlas={y:0,x:0,w:10,h:10};let style__scrollpane_click=new koui_theme_Style;koui_theme_Style.styles.h["_scrollpane_click"]=style__scrollpane_click;style__scrollpane_click.textureBg="";style__scrollpane_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__scrollpane_click.scrollbar={width:20,color:{frontHover:kha_Color._new(-13355194),frontClick:kha_Color._new(-1088493),front:kha_Color._new(-13948109),corner:kha_Color._new(-15198184),bg:kha_Color._new(-16184815)}};style__scrollpane_click.padding={top:0,right:0,left:0,bottom:0};style__scrollpane_click.orientation="left";style__scrollpane_click.opacity=1;style__scrollpane_click.margin={top:0,right:0,left:0,bottom:0};style__scrollpane_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__scrollpane_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__scrollpane_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__scrollpane_click.cornerRadius=3;style__scrollpane_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(0)};style__scrollpane_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__scrollpane_click.atlas={y:0,x:0,w:10,h:10};let style__rowlayout_hover=new koui_theme_Style;koui_theme_Style.styles.h["_rowlayout_hover"]=style__rowlayout_hover;style__rowlayout_hover.textureBg="";style__rowlayout_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__rowlayout_hover.padding={top:0,right:0,left:0,bottom:0};style__rowlayout_hover.orientation="left";style__rowlayout_hover.opacity=1;style__rowlayout_hover.margin={top:0,right:0,left:0,bottom:0};style__rowlayout_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__rowlayout_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__rowlayout_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__rowlayout_hover.cornerRadius=3;style__rowlayout_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__rowlayout_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__rowlayout_hover.atlas={y:0,x:0,w:10,h:10};let style__rowlayout_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_rowlayout_disabled"]=style__rowlayout_disabled;style__rowlayout_disabled.textureBg="";style__rowlayout_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__rowlayout_disabled.padding={top:0,right:0,left:0,bottom:0};style__rowlayout_disabled.orientation="left";style__rowlayout_disabled.opacity=.6;style__rowlayout_disabled.margin={top:0,right:0,left:0,bottom:0};style__rowlayout_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__rowlayout_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__rowlayout_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__rowlayout_disabled.cornerRadius=3;style__rowlayout_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__rowlayout_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__rowlayout_disabled.atlas={y:0,x:0,w:10,h:10};let style__rowlayout_default=new koui_theme_Style;koui_theme_Style.styles.h["_rowlayout_default"]=style__rowlayout_default;style__rowlayout_default.textureBg="";style__rowlayout_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__rowlayout_default.padding={top:0,right:0,left:0,bottom:0};style__rowlayout_default.orientation="left";style__rowlayout_default.opacity=1;style__rowlayout_default.margin={top:0,right:0,left:0,bottom:0};style__rowlayout_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__rowlayout_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__rowlayout_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__rowlayout_default.cornerRadius=3;style__rowlayout_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__rowlayout_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__rowlayout_default.atlas={y:0,x:0,w:10,h:10};let style__rowlayout_click=new koui_theme_Style;koui_theme_Style.styles.h["_rowlayout_click"]=style__rowlayout_click;style__rowlayout_click.textureBg="";style__rowlayout_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__rowlayout_click.padding={top:0,right:0,left:0,bottom:0};style__rowlayout_click.orientation="left";style__rowlayout_click.opacity=1;style__rowlayout_click.margin={top:0,right:0,left:0,bottom:0};style__rowlayout_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__rowlayout_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__rowlayout_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__rowlayout_click.cornerRadius=3;style__rowlayout_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__rowlayout_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__rowlayout_click.atlas={y:0,x:0,w:10,h:10};let style__root_hover=new koui_theme_Style;koui_theme_Style.styles.h["_root_hover"]=style__root_hover;style__root_hover.textureBg="";style__root_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__root_hover.padding={top:0,right:0,left:0,bottom:0};style__root_hover.orientation="left";style__root_hover.opacity=1;style__root_hover.margin={top:0,right:0,left:0,bottom:0};style__root_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__root_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__root_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__root_hover.cornerRadius=3;style__root_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__root_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__root_hover.atlas={y:0,x:0,w:10,h:10};let style__root_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_root_disabled"]=style__root_disabled;style__root_disabled.textureBg="";style__root_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__root_disabled.padding={top:0,right:0,left:0,bottom:0};style__root_disabled.orientation="left";style__root_disabled.opacity=.6;style__root_disabled.margin={top:0,right:0,left:0,bottom:0};style__root_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__root_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__root_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__root_disabled.cornerRadius=3;style__root_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__root_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__root_disabled.atlas={y:0,x:0,w:10,h:10};let style__root_default=new koui_theme_Style;koui_theme_Style.styles.h["_root_default"]=style__root_default;style__root_default.textureBg="";style__root_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__root_default.padding={top:0,right:0,left:0,bottom:0};style__root_default.orientation="left";style__root_default.opacity=1;style__root_default.margin={top:0,right:0,left:0,bottom:0};style__root_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__root_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__root_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__root_default.cornerRadius=3;style__root_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__root_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__root_default.atlas={y:0,x:0,w:10,h:10};let style__root_click=new koui_theme_Style;koui_theme_Style.styles.h["_root_click"]=style__root_click;style__root_click.textureBg="";style__root_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__root_click.padding={top:0,right:0,left:0,bottom:0};style__root_click.orientation="left";style__root_click.opacity=1;style__root_click.margin={top:0,right:0,left:0,bottom:0};style__root_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__root_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__root_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__root_click.cornerRadius=3;style__root_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__root_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__root_click.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_checked_hover=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_checked_hover"]=style__radiobutton_inner_checked_hover;style__radiobutton_inner_checked_hover.textureBg="";style__radiobutton_inner_checked_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_inner_checked_hover.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_hover.orientation="left";style__radiobutton_inner_checked_hover.opacity=1;style__radiobutton_inner_checked_hover.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_checked_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_checked_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_checked_hover.cornerRadius=9;style__radiobutton_inner_checked_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_checked_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__radiobutton_inner_checked_hover.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_checked_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_checked_disabled"]=style__radiobutton_inner_checked_disabled;style__radiobutton_inner_checked_disabled.textureBg="";style__radiobutton_inner_checked_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_inner_checked_disabled.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_disabled.orientation="left";style__radiobutton_inner_checked_disabled.opacity=.6;style__radiobutton_inner_checked_disabled.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_checked_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_checked_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_checked_disabled.cornerRadius=9;style__radiobutton_inner_checked_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_checked_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__radiobutton_inner_checked_disabled.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_checked_default=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_checked_default"]=style__radiobutton_inner_checked_default;style__radiobutton_inner_checked_default.textureBg="";style__radiobutton_inner_checked_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_inner_checked_default.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_default.orientation="left";style__radiobutton_inner_checked_default.opacity=1;style__radiobutton_inner_checked_default.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_checked_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_checked_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_checked_default.cornerRadius=9;style__radiobutton_inner_checked_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_checked_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__radiobutton_inner_checked_default.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_checked_click=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_checked_click"]=style__radiobutton_inner_checked_click;style__radiobutton_inner_checked_click.textureBg="";style__radiobutton_inner_checked_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_inner_checked_click.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_click.orientation="left";style__radiobutton_inner_checked_click.opacity=1;style__radiobutton_inner_checked_click.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_checked_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_checked_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_checked_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_checked_click.cornerRadius=9;style__radiobutton_inner_checked_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_checked_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__radiobutton_inner_checked_click.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_hover=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_hover"]=style__radiobutton_inner_hover;style__radiobutton_inner_hover.textureBg="";style__radiobutton_inner_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__radiobutton_inner_hover.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_hover.orientation="left";style__radiobutton_inner_hover.opacity=1;style__radiobutton_inner_hover.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_hover.cornerRadius=9;style__radiobutton_inner_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__radiobutton_inner_hover.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_disabled"]=style__radiobutton_inner_disabled;style__radiobutton_inner_disabled.textureBg="";style__radiobutton_inner_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__radiobutton_inner_disabled.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_disabled.orientation="left";style__radiobutton_inner_disabled.opacity=.6;style__radiobutton_inner_disabled.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_disabled.cornerRadius=9;style__radiobutton_inner_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__radiobutton_inner_disabled.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_default=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_default"]=style__radiobutton_inner_default;style__radiobutton_inner_default.textureBg="";style__radiobutton_inner_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__radiobutton_inner_default.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_default.orientation="left";style__radiobutton_inner_default.opacity=1;style__radiobutton_inner_default.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_default.cornerRadius=9;style__radiobutton_inner_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__radiobutton_inner_default.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_inner_click=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_inner_click"]=style__radiobutton_inner_click;style__radiobutton_inner_click.textureBg="";style__radiobutton_inner_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__radiobutton_inner_click.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_click.orientation="left";style__radiobutton_inner_click.opacity=1;style__radiobutton_inner_click.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_inner_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_inner_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_inner_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_inner_click.cornerRadius=9;style__radiobutton_inner_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__radiobutton_inner_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__radiobutton_inner_click.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_hover=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_hover"]=style__radiobutton_hover;style__radiobutton_hover.textureBg="";style__radiobutton_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_hover.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_hover.orientation="left";style__radiobutton_hover.opacity=1;style__radiobutton_hover.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_hover.cornerRadius=3;style__radiobutton_hover.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-13487305)};style__radiobutton_hover.checkbox={useAutoPadding:true};style__radiobutton_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__radiobutton_hover.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_disabled"]=style__radiobutton_disabled;style__radiobutton_disabled.textureBg="";style__radiobutton_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_disabled.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_disabled.orientation="left";style__radiobutton_disabled.opacity=.6;style__radiobutton_disabled.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_disabled.cornerRadius=3;style__radiobutton_disabled.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-13487305)};style__radiobutton_disabled.checkbox={useAutoPadding:true};style__radiobutton_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__radiobutton_disabled.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_default=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_default"]=style__radiobutton_default;style__radiobutton_default.textureBg="";style__radiobutton_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_default.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_default.orientation="left";style__radiobutton_default.opacity=1;style__radiobutton_default.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_default.cornerRadius=3;style__radiobutton_default.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-13487305)};style__radiobutton_default.checkbox={useAutoPadding:true};style__radiobutton_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__radiobutton_default.atlas={y:0,x:0,w:10,h:10};let style__radiobutton_click=new koui_theme_Style;koui_theme_Style.styles.h["_radiobutton_click"]=style__radiobutton_click;style__radiobutton_click.textureBg="";style__radiobutton_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__radiobutton_click.padding={top:0,right:0,left:0,bottom:0};style__radiobutton_click.orientation="left";style__radiobutton_click.opacity=1;style__radiobutton_click.margin={top:0,right:0,left:0,bottom:0};style__radiobutton_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__radiobutton_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__radiobutton_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__radiobutton_click.cornerRadius=3;style__radiobutton_click.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-13487305)};style__radiobutton_click.checkbox={useAutoPadding:true};style__radiobutton_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__radiobutton_click.atlas={y:0,x:0,w:10,h:10};let style__progressbar_inner_hover=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_inner_hover"]=style__progressbar_inner_hover;style__progressbar_inner_hover.textureBg="";style__progressbar_inner_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_inner_hover.padding={top:0,right:0,left:0,bottom:0};style__progressbar_inner_hover.orientation="right";style__progressbar_inner_hover.opacity=1;style__progressbar_inner_hover.margin={top:0,right:0,left:0,bottom:0};style__progressbar_inner_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_inner_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_inner_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_inner_hover.cornerRadius=3;style__progressbar_inner_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__progressbar_inner_hover.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1088493)};style__progressbar_inner_hover.atlas={y:0,x:0,w:10,h:10};let style__progressbar_inner_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_inner_disabled"]=style__progressbar_inner_disabled;style__progressbar_inner_disabled.textureBg="";style__progressbar_inner_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_inner_disabled.padding={top:0,right:0,left:0,bottom:0};style__progressbar_inner_disabled.orientation="right";style__progressbar_inner_disabled.opacity=.6;style__progressbar_inner_disabled.margin={top:0,right:0,left:0,bottom:0};style__progressbar_inner_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_inner_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_inner_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_inner_disabled.cornerRadius=3;style__progressbar_inner_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__progressbar_inner_disabled.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__progressbar_inner_disabled.atlas={y:0,x:0,w:10,h:10};let style__progressbar_inner_default=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_inner_default"]=style__progressbar_inner_default;style__progressbar_inner_default.textureBg="";style__progressbar_inner_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_inner_default.padding={top:0,right:0,left:0,bottom:0};style__progressbar_inner_default.orientation="right";style__progressbar_inner_default.opacity=1;style__progressbar_inner_default.margin={top:0,right:0,left:0,bottom:0};style__progressbar_inner_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_inner_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_inner_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_inner_default.cornerRadius=3;style__progressbar_inner_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__progressbar_inner_default.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__progressbar_inner_default.atlas={y:0,x:0,w:10,h:10};let style__progressbar_inner_click=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_inner_click"]=style__progressbar_inner_click;style__progressbar_inner_click.textureBg="";style__progressbar_inner_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_inner_click.padding={top:0,right:0,left:0,bottom:0};style__progressbar_inner_click.orientation="right";style__progressbar_inner_click.opacity=1;style__progressbar_inner_click.margin={top:0,right:0,left:0,bottom:0};style__progressbar_inner_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_inner_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_inner_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_inner_click.cornerRadius=3;style__progressbar_inner_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__progressbar_inner_click.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1)};style__progressbar_inner_click.atlas={y:0,x:0,w:10,h:10};let style__progressbar_hover=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_hover"]=style__progressbar_hover;style__progressbar_hover.textureBg="";style__progressbar_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_hover.padding={top:0,right:0,left:0,bottom:0};style__progressbar_hover.orientation="right";style__progressbar_hover.opacity=1;style__progressbar_hover.margin={top:0,right:0,left:0,bottom:0};style__progressbar_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_hover.cornerRadius=3;style__progressbar_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__progressbar_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__progressbar_hover.atlas={y:0,x:0,w:10,h:10};let style__progressbar_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_disabled"]=style__progressbar_disabled;style__progressbar_disabled.textureBg="";style__progressbar_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_disabled.padding={top:0,right:0,left:0,bottom:0};style__progressbar_disabled.orientation="right";style__progressbar_disabled.opacity=.6;style__progressbar_disabled.margin={top:0,right:0,left:0,bottom:0};style__progressbar_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_disabled.cornerRadius=3;style__progressbar_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__progressbar_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__progressbar_disabled.atlas={y:0,x:0,w:10,h:10};let style__progressbar_default=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_default"]=style__progressbar_default;style__progressbar_default.textureBg="";style__progressbar_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_default.padding={top:0,right:0,left:0,bottom:0};style__progressbar_default.orientation="right";style__progressbar_default.opacity=1;style__progressbar_default.margin={top:0,right:0,left:0,bottom:0};style__progressbar_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_default.cornerRadius=3;style__progressbar_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__progressbar_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__progressbar_default.atlas={y:0,x:0,w:10,h:10};let style__progressbar_click=new koui_theme_Style;koui_theme_Style.styles.h["_progressbar_click"]=style__progressbar_click;style__progressbar_click.textureBg="";style__progressbar_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__progressbar_click.padding={top:0,right:0,left:0,bottom:0};style__progressbar_click.orientation="right";style__progressbar_click.opacity=1;style__progressbar_click.margin={top:0,right:0,left:0,bottom:0};style__progressbar_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__progressbar_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__progressbar_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__progressbar_click.cornerRadius=3;style__progressbar_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__progressbar_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__progressbar_click.atlas={y:0,x:0,w:10,h:10};let style__panel_hover=new koui_theme_Style;koui_theme_Style.styles.h["_panel_hover"]=style__panel_hover;style__panel_hover.textureBg="";style__panel_hover.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__panel_hover.padding={top:0,right:0,left:0,bottom:0};style__panel_hover.orientation="left";style__panel_hover.opacity=1;style__panel_hover.margin={top:0,right:0,left:0,bottom:0};style__panel_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__panel_hover.dropShadow={radius:30,falloff:3,color:kha_Color._new(1996488704)};style__panel_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__panel_hover.cornerRadius=8;style__panel_hover.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-13947336)};style__panel_hover.border={style:"inset",size:2,nineSlice:false,color:kha_Color._new(-1157627904)};style__panel_hover.atlas={y:0,x:0,w:10,h:10};let style__panel_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_panel_disabled"]=style__panel_disabled;style__panel_disabled.textureBg="";style__panel_disabled.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__panel_disabled.padding={top:0,right:0,left:0,bottom:0};style__panel_disabled.orientation="left";style__panel_disabled.opacity=.6;style__panel_disabled.margin={top:0,right:0,left:0,bottom:0};style__panel_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__panel_disabled.dropShadow={radius:30,falloff:3,color:kha_Color._new(1996488704)};style__panel_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__panel_disabled.cornerRadius=8;style__panel_disabled.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-13947336)};style__panel_disabled.border={style:"inset",size:2,nineSlice:false,color:kha_Color._new(-1157627904)};style__panel_disabled.atlas={y:0,x:0,w:10,h:10};let style__panel_default=new koui_theme_Style;koui_theme_Style.styles.h["_panel_default"]=style__panel_default;style__panel_default.textureBg="";style__panel_default.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__panel_default.padding={top:0,right:0,left:0,bottom:0};style__panel_default.orientation="left";style__panel_default.opacity=1;style__panel_default.margin={top:0,right:0,left:0,bottom:0};style__panel_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__panel_default.dropShadow={radius:30,falloff:3,color:kha_Color._new(1996488704)};style__panel_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__panel_default.cornerRadius=8;style__panel_default.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-13947336)};style__panel_default.border={style:"inset",size:2,nineSlice:false,color:kha_Color._new(-1157627904)};style__panel_default.atlas={y:0,x:0,w:10,h:10};let style__panel_click=new koui_theme_Style;koui_theme_Style.styles.h["_panel_click"]=style__panel_click;style__panel_click.textureBg="";style__panel_click.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__panel_click.padding={top:0,right:0,left:0,bottom:0};style__panel_click.orientation="left";style__panel_click.opacity=1;style__panel_click.margin={top:0,right:0,left:0,bottom:0};style__panel_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__panel_click.dropShadow={radius:30,falloff:3,color:kha_Color._new(1996488704)};style__panel_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__panel_click.cornerRadius=8;style__panel_click.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-13947336)};style__panel_click.border={style:"inset",size:2,nineSlice:false,color:kha_Color._new(-1157627904)};style__panel_click.atlas={y:0,x:0,w:10,h:10};let style__numberinput_invalid_hover=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_invalid_hover"]=style__numberinput_invalid_hover;style__numberinput_invalid_hover.textureBg="";style__numberinput_invalid_hover.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_invalid_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_invalid_hover.padding={top:0,right:8,left:8,bottom:0};style__numberinput_invalid_hover.orientation="left";style__numberinput_invalid_hover.opacity=1;style__numberinput_invalid_hover.margin={top:0,right:0,left:0,bottom:0};style__numberinput_invalid_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_invalid_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_invalid_hover.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_invalid_hover.cornerRadius=3;style__numberinput_invalid_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__numberinput_invalid_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__numberinput_invalid_hover.atlas={y:0,x:0,w:10,h:10};let style__numberinput_invalid_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_invalid_disabled"]=style__numberinput_invalid_disabled;style__numberinput_invalid_disabled.textureBg="";style__numberinput_invalid_disabled.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_invalid_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_invalid_disabled.padding={top:0,right:8,left:8,bottom:0};style__numberinput_invalid_disabled.orientation="left";style__numberinput_invalid_disabled.opacity=.6;style__numberinput_invalid_disabled.margin={top:0,right:0,left:0,bottom:0};style__numberinput_invalid_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_invalid_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_invalid_disabled.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_invalid_disabled.cornerRadius=3;style__numberinput_invalid_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__numberinput_invalid_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__numberinput_invalid_disabled.atlas={y:0,x:0,w:10,h:10};let style__numberinput_invalid_default=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_invalid_default"]=style__numberinput_invalid_default;style__numberinput_invalid_default.textureBg="";style__numberinput_invalid_default.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_invalid_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_invalid_default.padding={top:0,right:8,left:8,bottom:0};style__numberinput_invalid_default.orientation="left";style__numberinput_invalid_default.opacity=1;style__numberinput_invalid_default.margin={top:0,right:0,left:0,bottom:0};style__numberinput_invalid_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_invalid_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_invalid_default.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_invalid_default.cornerRadius=3;style__numberinput_invalid_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__numberinput_invalid_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__numberinput_invalid_default.atlas={y:0,x:0,w:10,h:10};let style__numberinput_invalid_click=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_invalid_click"]=style__numberinput_invalid_click;style__numberinput_invalid_click.textureBg="";style__numberinput_invalid_click.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_invalid_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_invalid_click.padding={top:0,right:8,left:8,bottom:0};style__numberinput_invalid_click.orientation="left";style__numberinput_invalid_click.opacity=1;style__numberinput_invalid_click.margin={top:0,right:0,left:0,bottom:0};style__numberinput_invalid_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_invalid_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_invalid_click.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_invalid_click.cornerRadius=3;style__numberinput_invalid_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-8971236),colorBottomRight:kha_Color._new(-8242373)},bg:kha_Color._new(-15132127)};style__numberinput_invalid_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__numberinput_invalid_click.atlas={y:0,x:0,w:10,h:10};let style__numberinput_hover=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_hover"]=style__numberinput_hover;style__numberinput_hover.textureBg="";style__numberinput_hover.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_hover.padding={top:0,right:8,left:8,bottom:0};style__numberinput_hover.orientation="left";style__numberinput_hover.opacity=1;style__numberinput_hover.margin={top:0,right:0,left:0,bottom:0};style__numberinput_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_hover.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_hover.cornerRadius=3;style__numberinput_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-13948109)},bg:kha_Color._new(-15132127)};style__numberinput_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__numberinput_hover.atlas={y:0,x:0,w:10,h:10};let style__numberinput_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_disabled"]=style__numberinput_disabled;style__numberinput_disabled.textureBg="";style__numberinput_disabled.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_disabled.padding={top:0,right:8,left:8,bottom:0};style__numberinput_disabled.orientation="left";style__numberinput_disabled.opacity=.6;style__numberinput_disabled.margin={top:0,right:0,left:0,bottom:0};style__numberinput_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_disabled.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_disabled.cornerRadius=3;style__numberinput_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__numberinput_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__numberinput_disabled.atlas={y:0,x:0,w:10,h:10};let style__numberinput_default=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_default"]=style__numberinput_default;style__numberinput_default.textureBg="";style__numberinput_default.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_default.padding={top:0,right:8,left:8,bottom:0};style__numberinput_default.orientation="left";style__numberinput_default.opacity=1;style__numberinput_default.margin={top:0,right:0,left:0,bottom:0};style__numberinput_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_default.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_default.cornerRadius=3;style__numberinput_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-15132127),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__numberinput_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__numberinput_default.atlas={y:0,x:0,w:10,h:10};let style__numberinput_click=new koui_theme_Style;koui_theme_Style.styles.h["_numberinput_click"]=style__numberinput_click;style__numberinput_click.textureBg="";style__numberinput_click.textinput={colorSelection:kha_Color._new(1998694898),colorLabel:kha_Color._new(-5592406),colorCursor:kha_Color._new(-1),blinkInterval:30};style__numberinput_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__numberinput_click.padding={top:0,right:8,left:8,bottom:0};style__numberinput_click.orientation="left";style__numberinput_click.opacity=1;style__numberinput_click.margin={top:0,right:0,left:0,bottom:0};style__numberinput_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__numberinput_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__numberinput_click.cursors={notallowed:"notallowed",defaultCursor:"text"};style__numberinput_click.cornerRadius=3;style__numberinput_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-13355194)},bg:kha_Color._new(-15132127)};style__numberinput_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__numberinput_click.atlas={y:0,x:0,w:10,h:10};let style__layout_hover=new koui_theme_Style;koui_theme_Style.styles.h["_layout_hover"]=style__layout_hover;style__layout_hover.textureBg="";style__layout_hover.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__layout_hover.padding={top:0,right:0,left:0,bottom:0};style__layout_hover.orientation="left";style__layout_hover.opacity=1;style__layout_hover.margin={top:0,right:0,left:0,bottom:0};style__layout_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__layout_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__layout_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__layout_hover.cornerRadius=3;style__layout_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__layout_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__layout_hover.atlas={y:0,x:0,w:10,h:10};let style__layout_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_layout_disabled"]=style__layout_disabled;style__layout_disabled.textureBg="";style__layout_disabled.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__layout_disabled.padding={top:0,right:0,left:0,bottom:0};style__layout_disabled.orientation="left";style__layout_disabled.opacity=.6;style__layout_disabled.margin={top:0,right:0,left:0,bottom:0};style__layout_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__layout_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__layout_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__layout_disabled.cornerRadius=3;style__layout_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__layout_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__layout_disabled.atlas={y:0,x:0,w:10,h:10};let style__layout_default=new koui_theme_Style;koui_theme_Style.styles.h["_layout_default"]=style__layout_default;style__layout_default.textureBg="";style__layout_default.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__layout_default.padding={top:0,right:0,left:0,bottom:0};style__layout_default.orientation="left";style__layout_default.opacity=1;style__layout_default.margin={top:0,right:0,left:0,bottom:0};style__layout_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__layout_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__layout_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__layout_default.cornerRadius=3;style__layout_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__layout_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__layout_default.atlas={y:0,x:0,w:10,h:10};let style__layout_click=new koui_theme_Style;koui_theme_Style.styles.h["_layout_click"]=style__layout_click;style__layout_click.textureBg="";style__layout_click.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__layout_click.padding={top:0,right:0,left:0,bottom:0};style__layout_click.orientation="left";style__layout_click.opacity=1;style__layout_click.margin={top:0,right:0,left:0,bottom:0};style__layout_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__layout_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__layout_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__layout_click.cornerRadius=3;style__layout_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__layout_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__layout_click.atlas={y:0,x:0,w:10,h:10};let style__label_hover=new koui_theme_Style;koui_theme_Style.styles.h["_label_hover"]=style__label_hover;style__label_hover.textureBg="";style__label_hover.textShadow={offsetY:1,offsetX:1,color:kha_Color._new(-16777216)};style__label_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__label_hover.padding={top:0,right:0,left:0,bottom:0};style__label_hover.orientation="left";style__label_hover.opacity=1;style__label_hover.margin={top:0,right:0,left:0,bottom:0};style__label_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__label_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__label_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__label_hover.cornerRadius=3;style__label_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__label_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__label_hover.atlas={y:0,x:0,w:10,h:10};let style__label_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_label_disabled"]=style__label_disabled;style__label_disabled.textureBg="";style__label_disabled.textShadow={offsetY:1,offsetX:1,color:kha_Color._new(-16777216)};style__label_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__label_disabled.padding={top:0,right:0,left:0,bottom:0};style__label_disabled.orientation="left";style__label_disabled.opacity=.6;style__label_disabled.margin={top:0,right:0,left:0,bottom:0};style__label_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__label_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__label_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__label_disabled.cornerRadius=3;style__label_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__label_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__label_disabled.atlas={y:0,x:0,w:10,h:10};let style__label_default=new koui_theme_Style;koui_theme_Style.styles.h["_label_default"]=style__label_default;style__label_default.textureBg="";style__label_default.textShadow={offsetY:1,offsetX:1,color:kha_Color._new(-16777216)};style__label_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__label_default.padding={top:0,right:0,left:0,bottom:0};style__label_default.orientation="left";style__label_default.opacity=1;style__label_default.margin={top:0,right:0,left:0,bottom:0};style__label_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__label_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__label_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__label_default.cornerRadius=3;style__label_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__label_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__label_default.atlas={y:0,x:0,w:10,h:10};let style__label_click=new koui_theme_Style;koui_theme_Style.styles.h["_label_click"]=style__label_click;style__label_click.textureBg="";style__label_click.textShadow={offsetY:1,offsetX:1,color:kha_Color._new(-16777216)};style__label_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__label_click.padding={top:0,right:0,left:0,bottom:0};style__label_click.orientation="left";style__label_click.opacity=1;style__label_click.margin={top:0,right:0,left:0,bottom:0};style__label_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__label_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__label_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__label_click.cornerRadius=3;style__label_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__label_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__label_click.atlas={y:0,x:0,w:10,h:10};let style__imagepanel_hover=new koui_theme_Style;koui_theme_Style.styles.h["_imagepanel_hover"]=style__imagepanel_hover;style__imagepanel_hover.textureBg="";style__imagepanel_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__imagepanel_hover.padding={top:0,right:0,left:0,bottom:0};style__imagepanel_hover.orientation="left";style__imagepanel_hover.opacity=1;style__imagepanel_hover.margin={top:0,right:0,left:0,bottom:0};style__imagepanel_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__imagepanel_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__imagepanel_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__imagepanel_hover.cornerRadius=3;style__imagepanel_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__imagepanel_hover.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1088493)};style__imagepanel_hover.atlas={y:0,x:0,w:10,h:10};let style__imagepanel_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_imagepanel_disabled"]=style__imagepanel_disabled;style__imagepanel_disabled.textureBg="";style__imagepanel_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__imagepanel_disabled.padding={top:0,right:0,left:0,bottom:0};style__imagepanel_disabled.orientation="left";style__imagepanel_disabled.opacity=.6;style__imagepanel_disabled.margin={top:0,right:0,left:0,bottom:0};style__imagepanel_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__imagepanel_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__imagepanel_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__imagepanel_disabled.cornerRadius=3;style__imagepanel_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__imagepanel_disabled.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__imagepanel_disabled.atlas={y:0,x:0,w:10,h:10};let style__imagepanel_default=new koui_theme_Style;koui_theme_Style.styles.h["_imagepanel_default"]=style__imagepanel_default;style__imagepanel_default.textureBg="";style__imagepanel_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__imagepanel_default.padding={top:0,right:0,left:0,bottom:0};style__imagepanel_default.orientation="left";style__imagepanel_default.opacity=1;style__imagepanel_default.margin={top:0,right:0,left:0,bottom:0};style__imagepanel_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__imagepanel_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__imagepanel_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__imagepanel_default.cornerRadius=3;style__imagepanel_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__imagepanel_default.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__imagepanel_default.atlas={y:0,x:0,w:10,h:10};let style__imagepanel_click=new koui_theme_Style;koui_theme_Style.styles.h["_imagepanel_click"]=style__imagepanel_click;style__imagepanel_click.textureBg="";style__imagepanel_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__imagepanel_click.padding={top:0,right:0,left:0,bottom:0};style__imagepanel_click.orientation="left";style__imagepanel_click.opacity=1;style__imagepanel_click.margin={top:0,right:0,left:0,bottom:0};style__imagepanel_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__imagepanel_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__imagepanel_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__imagepanel_click.cornerRadius=3;style__imagepanel_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__imagepanel_click.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1)};style__imagepanel_click.atlas={y:0,x:0,w:10,h:10};let style__gridlayout_hover=new koui_theme_Style;koui_theme_Style.styles.h["_gridlayout_hover"]=style__gridlayout_hover;style__gridlayout_hover.textureBg="";style__gridlayout_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__gridlayout_hover.padding={top:0,right:0,left:0,bottom:0};style__gridlayout_hover.orientation="left";style__gridlayout_hover.opacity=1;style__gridlayout_hover.margin={top:0,right:0,left:0,bottom:0};style__gridlayout_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__gridlayout_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__gridlayout_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__gridlayout_hover.cornerRadius=3;style__gridlayout_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__gridlayout_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__gridlayout_hover.atlas={y:0,x:0,w:10,h:10};let style__gridlayout_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_gridlayout_disabled"]=style__gridlayout_disabled;style__gridlayout_disabled.textureBg="";style__gridlayout_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__gridlayout_disabled.padding={top:0,right:0,left:0,bottom:0};style__gridlayout_disabled.orientation="left";style__gridlayout_disabled.opacity=.6;style__gridlayout_disabled.margin={top:0,right:0,left:0,bottom:0};style__gridlayout_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__gridlayout_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__gridlayout_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__gridlayout_disabled.cornerRadius=3;style__gridlayout_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__gridlayout_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__gridlayout_disabled.atlas={y:0,x:0,w:10,h:10};let style__gridlayout_default=new koui_theme_Style;koui_theme_Style.styles.h["_gridlayout_default"]=style__gridlayout_default;style__gridlayout_default.textureBg="";style__gridlayout_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__gridlayout_default.padding={top:0,right:0,left:0,bottom:0};style__gridlayout_default.orientation="left";style__gridlayout_default.opacity=1;style__gridlayout_default.margin={top:0,right:0,left:0,bottom:0};style__gridlayout_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__gridlayout_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__gridlayout_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__gridlayout_default.cornerRadius=3;style__gridlayout_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__gridlayout_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__gridlayout_default.atlas={y:0,x:0,w:10,h:10};let style__gridlayout_click=new koui_theme_Style;koui_theme_Style.styles.h["_gridlayout_click"]=style__gridlayout_click;style__gridlayout_click.textureBg="";style__gridlayout_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__gridlayout_click.padding={top:0,right:0,left:0,bottom:0};style__gridlayout_click.orientation="left";style__gridlayout_click.opacity=1;style__gridlayout_click.margin={top:0,right:0,left:0,bottom:0};style__gridlayout_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__gridlayout_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__gridlayout_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__gridlayout_click.cornerRadius=3;style__gridlayout_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__gridlayout_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__gridlayout_click.atlas={y:0,x:0,w:10,h:10};let style__expander_hover=new koui_theme_Style;koui_theme_Style.styles.h["_expander_hover"]=style__expander_hover;style__expander_hover.textureBg="";style__expander_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__expander_hover.padding={top:0,right:0,left:0,bottom:0};style__expander_hover.orientation="left";style__expander_hover.opacity=1;style__expander_hover.margin={top:0,right:0,left:0,bottom:0};style__expander_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__expander_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__expander_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__expander_hover.cornerRadius=3;style__expander_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__expander_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__expander_hover.atlas={y:0,x:0,w:10,h:10};let style__expander_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_expander_disabled"]=style__expander_disabled;style__expander_disabled.textureBg="";style__expander_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__expander_disabled.padding={top:0,right:0,left:0,bottom:0};style__expander_disabled.orientation="left";style__expander_disabled.opacity=.6;style__expander_disabled.margin={top:0,right:0,left:0,bottom:0};style__expander_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__expander_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__expander_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__expander_disabled.cornerRadius=3;style__expander_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__expander_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__expander_disabled.atlas={y:0,x:0,w:10,h:10};let style__expander_default=new koui_theme_Style;koui_theme_Style.styles.h["_expander_default"]=style__expander_default;style__expander_default.textureBg="";style__expander_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__expander_default.padding={top:0,right:0,left:0,bottom:0};style__expander_default.orientation="left";style__expander_default.opacity=1;style__expander_default.margin={top:0,right:0,left:0,bottom:0};style__expander_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__expander_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__expander_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__expander_default.cornerRadius=3;style__expander_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__expander_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__expander_default.atlas={y:0,x:0,w:10,h:10};let style__expander_click=new koui_theme_Style;koui_theme_Style.styles.h["_expander_click"]=style__expander_click;style__expander_click.textureBg="";style__expander_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__expander_click.padding={top:0,right:0,left:0,bottom:0};style__expander_click.orientation="left";style__expander_click.opacity=1;style__expander_click.margin={top:0,right:0,left:0,bottom:0};style__expander_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__expander_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__expander_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__expander_click.cornerRadius=3;style__expander_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__expander_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__expander_click.atlas={y:0,x:0,w:10,h:10};let style__dropdown_overlay_bg_hover=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_overlay_bg_hover"]=style__dropdown_overlay_bg_hover;style__dropdown_overlay_bg_hover.textureBg="";style__dropdown_overlay_bg_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_overlay_bg_hover.padding={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_hover.orientation="left";style__dropdown_overlay_bg_hover.opacity=1;style__dropdown_overlay_bg_hover.margin={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_overlay_bg_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_overlay_bg_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_overlay_bg_hover.cornerRadius=3;style__dropdown_overlay_bg_hover.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-14276557)};style__dropdown_overlay_bg_hover.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1088493)};style__dropdown_overlay_bg_hover.atlas={y:0,x:0,w:10,h:10};let style__dropdown_overlay_bg_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_overlay_bg_disabled"]=style__dropdown_overlay_bg_disabled;style__dropdown_overlay_bg_disabled.textureBg="";style__dropdown_overlay_bg_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_overlay_bg_disabled.padding={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_disabled.orientation="left";style__dropdown_overlay_bg_disabled.opacity=.6;style__dropdown_overlay_bg_disabled.margin={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_overlay_bg_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_overlay_bg_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_overlay_bg_disabled.cornerRadius=3;style__dropdown_overlay_bg_disabled.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-14276557)};style__dropdown_overlay_bg_disabled.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_overlay_bg_disabled.atlas={y:0,x:0,w:10,h:10};let style__dropdown_overlay_bg_default=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_overlay_bg_default"]=style__dropdown_overlay_bg_default;style__dropdown_overlay_bg_default.textureBg="";style__dropdown_overlay_bg_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_overlay_bg_default.padding={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_default.orientation="left";style__dropdown_overlay_bg_default.opacity=1;style__dropdown_overlay_bg_default.margin={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_overlay_bg_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_overlay_bg_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_overlay_bg_default.cornerRadius=3;style__dropdown_overlay_bg_default.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-14276557)};style__dropdown_overlay_bg_default.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_overlay_bg_default.atlas={y:0,x:0,w:10,h:10};let style__dropdown_overlay_bg_click=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_overlay_bg_click"]=style__dropdown_overlay_bg_click;style__dropdown_overlay_bg_click.textureBg="";style__dropdown_overlay_bg_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_overlay_bg_click.padding={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_click.orientation="left";style__dropdown_overlay_bg_click.opacity=1;style__dropdown_overlay_bg_click.margin={top:0,right:0,left:0,bottom:0};style__dropdown_overlay_bg_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_overlay_bg_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_overlay_bg_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_overlay_bg_click.cornerRadius=3;style__dropdown_overlay_bg_click.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-14276557)};style__dropdown_overlay_bg_click.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-1)};style__dropdown_overlay_bg_click.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_selected_hover=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_selected_hover"]=style__dropdown_option_selected_hover;style__dropdown_option_selected_hover.textureBg="";style__dropdown_option_selected_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_selected_hover.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_selected_hover.orientation="left";style__dropdown_option_selected_hover.opacity=1;style__dropdown_option_selected_hover.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_selected_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_selected_hover.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_selected_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_selected_hover.cornerRadius=3;style__dropdown_option_selected_hover.color={useGradient:false,text:kha_Color._new(-1088493),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(0)};style__dropdown_option_selected_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__dropdown_option_selected_hover.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_selected_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_selected_disabled"]=style__dropdown_option_selected_disabled;style__dropdown_option_selected_disabled.textureBg="";style__dropdown_option_selected_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_selected_disabled.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_selected_disabled.orientation="left";style__dropdown_option_selected_disabled.opacity=.6;style__dropdown_option_selected_disabled.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_selected_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_selected_disabled.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_selected_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_selected_disabled.cornerRadius=3;style__dropdown_option_selected_disabled.color={useGradient:false,text:kha_Color._new(-1088493),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(0)};style__dropdown_option_selected_disabled.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_option_selected_disabled.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_selected_default=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_selected_default"]=style__dropdown_option_selected_default;style__dropdown_option_selected_default.textureBg="";style__dropdown_option_selected_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_selected_default.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_selected_default.orientation="left";style__dropdown_option_selected_default.opacity=1;style__dropdown_option_selected_default.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_selected_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_selected_default.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_selected_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_selected_default.cornerRadius=3;style__dropdown_option_selected_default.color={useGradient:false,text:kha_Color._new(-1088493),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(0)};style__dropdown_option_selected_default.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_option_selected_default.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_selected_click=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_selected_click"]=style__dropdown_option_selected_click;style__dropdown_option_selected_click.textureBg="";style__dropdown_option_selected_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_selected_click.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_selected_click.orientation="left";style__dropdown_option_selected_click.opacity=1;style__dropdown_option_selected_click.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_selected_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_selected_click.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_selected_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_selected_click.cornerRadius=3;style__dropdown_option_selected_click.color={useGradient:false,text:kha_Color._new(-1088493),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(0)};style__dropdown_option_selected_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__dropdown_option_selected_click.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_hover=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_hover"]=style__dropdown_option_hover;style__dropdown_option_hover.textureBg="";style__dropdown_option_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_hover.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_hover.orientation="left";style__dropdown_option_hover.opacity=1;style__dropdown_option_hover.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_hover.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_hover.cornerRadius=3;style__dropdown_option_hover.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(0)};style__dropdown_option_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__dropdown_option_hover.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_disabled"]=style__dropdown_option_disabled;style__dropdown_option_disabled.textureBg="";style__dropdown_option_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_disabled.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_disabled.orientation="left";style__dropdown_option_disabled.opacity=.6;style__dropdown_option_disabled.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_disabled.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_disabled.cornerRadius=3;style__dropdown_option_disabled.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(0)};style__dropdown_option_disabled.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_option_disabled.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_default=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_default"]=style__dropdown_option_default;style__dropdown_option_default.textureBg="";style__dropdown_option_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_default.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_default.orientation="left";style__dropdown_option_default.opacity=1;style__dropdown_option_default.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_default.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_default.cornerRadius=3;style__dropdown_option_default.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(0)};style__dropdown_option_default.border={style:"middle",size:0,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_option_default.atlas={y:0,x:0,w:10,h:10};let style__dropdown_option_click=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_option_click"]=style__dropdown_option_click;style__dropdown_option_click.textureBg="";style__dropdown_option_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_option_click.padding={top:0,right:0,left:8,bottom:0};style__dropdown_option_click.orientation="left";style__dropdown_option_click.opacity=1;style__dropdown_option_click.margin={top:0,right:0,left:0,bottom:0};style__dropdown_option_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_option_click.dropShadow={radius:0,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_option_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_option_click.cornerRadius=3;style__dropdown_option_click.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(0)};style__dropdown_option_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__dropdown_option_click.atlas={y:0,x:0,w:10,h:10};let style__dropdown_hover=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_hover"]=style__dropdown_hover;style__dropdown_hover.textureBg="";style__dropdown_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_hover.padding={top:0,right:8,left:8,bottom:0};style__dropdown_hover.orientation="left";style__dropdown_hover.opacity=1;style__dropdown_hover.margin={top:0,right:0,left:0,bottom:0};style__dropdown_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_hover.dropdown={separatorSize:0,separatorColor:kha_Color._new(-16777216),arrowSize:6,arrowRight:true,arrowColor:kha_Color._new(-2236963)};style__dropdown_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_hover.cornerRadius=3;style__dropdown_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__dropdown_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__dropdown_hover.atlas={y:0,x:0,w:10,h:10};let style__dropdown_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_disabled"]=style__dropdown_disabled;style__dropdown_disabled.textureBg="";style__dropdown_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_disabled.padding={top:0,right:8,left:8,bottom:0};style__dropdown_disabled.orientation="left";style__dropdown_disabled.opacity=.6;style__dropdown_disabled.margin={top:0,right:0,left:0,bottom:0};style__dropdown_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_disabled.dropdown={separatorSize:0,separatorColor:kha_Color._new(-16777216),arrowSize:6,arrowRight:true,arrowColor:kha_Color._new(-2236963)};style__dropdown_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_disabled.cornerRadius=3;style__dropdown_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__dropdown_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_disabled.atlas={y:0,x:0,w:10,h:10};let style__dropdown_default=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_default"]=style__dropdown_default;style__dropdown_default.textureBg="";style__dropdown_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_default.padding={top:0,right:8,left:8,bottom:0};style__dropdown_default.orientation="left";style__dropdown_default.opacity=1;style__dropdown_default.margin={top:0,right:0,left:0,bottom:0};style__dropdown_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_default.dropdown={separatorSize:0,separatorColor:kha_Color._new(-16777216),arrowSize:6,arrowRight:true,arrowColor:kha_Color._new(-2236963)};style__dropdown_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_default.cornerRadius=3;style__dropdown_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__dropdown_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__dropdown_default.atlas={y:0,x:0,w:10,h:10};let style__dropdown_click=new koui_theme_Style;koui_theme_Style.styles.h["_dropdown_click"]=style__dropdown_click;style__dropdown_click.textureBg="";style__dropdown_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__dropdown_click.padding={top:0,right:8,left:8,bottom:0};style__dropdown_click.orientation="left";style__dropdown_click.opacity=1;style__dropdown_click.margin={top:0,right:0,left:0,bottom:0};style__dropdown_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__dropdown_click.dropdown={separatorSize:0,separatorColor:kha_Color._new(-16777216),arrowSize:6,arrowRight:true,arrowColor:kha_Color._new(-2236963)};style__dropdown_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__dropdown_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__dropdown_click.cornerRadius=3;style__dropdown_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__dropdown_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__dropdown_click.atlas={y:0,x:0,w:10,h:10};let style__collayout_hover=new koui_theme_Style;koui_theme_Style.styles.h["_collayout_hover"]=style__collayout_hover;style__collayout_hover.textureBg="";style__collayout_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__collayout_hover.padding={top:0,right:0,left:0,bottom:0};style__collayout_hover.orientation="left";style__collayout_hover.opacity=1;style__collayout_hover.margin={top:0,right:0,left:0,bottom:0};style__collayout_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__collayout_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__collayout_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__collayout_hover.cornerRadius=3;style__collayout_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__collayout_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__collayout_hover.atlas={y:0,x:0,w:10,h:10};let style__collayout_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_collayout_disabled"]=style__collayout_disabled;style__collayout_disabled.textureBg="";style__collayout_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__collayout_disabled.padding={top:0,right:0,left:0,bottom:0};style__collayout_disabled.orientation="left";style__collayout_disabled.opacity=.6;style__collayout_disabled.margin={top:0,right:0,left:0,bottom:0};style__collayout_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__collayout_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__collayout_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__collayout_disabled.cornerRadius=3;style__collayout_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__collayout_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__collayout_disabled.atlas={y:0,x:0,w:10,h:10};let style__collayout_default=new koui_theme_Style;koui_theme_Style.styles.h["_collayout_default"]=style__collayout_default;style__collayout_default.textureBg="";style__collayout_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__collayout_default.padding={top:0,right:0,left:0,bottom:0};style__collayout_default.orientation="left";style__collayout_default.opacity=1;style__collayout_default.margin={top:0,right:0,left:0,bottom:0};style__collayout_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__collayout_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__collayout_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__collayout_default.cornerRadius=3;style__collayout_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__collayout_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__collayout_default.atlas={y:0,x:0,w:10,h:10};let style__collayout_click=new koui_theme_Style;koui_theme_Style.styles.h["_collayout_click"]=style__collayout_click;style__collayout_click.textureBg="";style__collayout_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__collayout_click.padding={top:0,right:0,left:0,bottom:0};style__collayout_click.orientation="left";style__collayout_click.opacity=1;style__collayout_click.margin={top:0,right:0,left:0,bottom:0};style__collayout_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__collayout_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__collayout_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__collayout_click.cornerRadius=3;style__collayout_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__collayout_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__collayout_click.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_checked_hover=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_checked_hover"]=style__checkbox_inner_checked_hover;style__checkbox_inner_checked_hover.textureBg="";style__checkbox_inner_checked_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_inner_checked_hover.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_hover.orientation="left";style__checkbox_inner_checked_hover.opacity=1;style__checkbox_inner_checked_hover.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_checked_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_checked_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_checked_hover.cornerRadius=3;style__checkbox_inner_checked_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__checkbox_inner_checked_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__checkbox_inner_checked_hover.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_checked_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_checked_disabled"]=style__checkbox_inner_checked_disabled;style__checkbox_inner_checked_disabled.textureBg="";style__checkbox_inner_checked_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_inner_checked_disabled.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_disabled.orientation="left";style__checkbox_inner_checked_disabled.opacity=.6;style__checkbox_inner_checked_disabled.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_checked_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_checked_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_checked_disabled.cornerRadius=3;style__checkbox_inner_checked_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__checkbox_inner_checked_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__checkbox_inner_checked_disabled.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_checked_default=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_checked_default"]=style__checkbox_inner_checked_default;style__checkbox_inner_checked_default.textureBg="";style__checkbox_inner_checked_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_inner_checked_default.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_default.orientation="left";style__checkbox_inner_checked_default.opacity=1;style__checkbox_inner_checked_default.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_checked_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_checked_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_checked_default.cornerRadius=3;style__checkbox_inner_checked_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__checkbox_inner_checked_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__checkbox_inner_checked_default.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_checked_click=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_checked_click"]=style__checkbox_inner_checked_click;style__checkbox_inner_checked_click.textureBg="";style__checkbox_inner_checked_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_inner_checked_click.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_click.orientation="left";style__checkbox_inner_checked_click.opacity=1;style__checkbox_inner_checked_click.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_checked_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_checked_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_checked_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_checked_click.cornerRadius=3;style__checkbox_inner_checked_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-427729),colorBottomRight:kha_Color._new(-1088493)},bg:kha_Color._new(-15132127)};style__checkbox_inner_checked_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__checkbox_inner_checked_click.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_hover=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_hover"]=style__checkbox_inner_hover;style__checkbox_inner_hover.textureBg="";style__checkbox_inner_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__checkbox_inner_hover.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_hover.orientation="left";style__checkbox_inner_hover.opacity=1;style__checkbox_inner_hover.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_hover.cornerRadius=3;style__checkbox_inner_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__checkbox_inner_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__checkbox_inner_hover.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_disabled"]=style__checkbox_inner_disabled;style__checkbox_inner_disabled.textureBg="";style__checkbox_inner_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__checkbox_inner_disabled.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_disabled.orientation="left";style__checkbox_inner_disabled.opacity=.6;style__checkbox_inner_disabled.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_disabled.cornerRadius=3;style__checkbox_inner_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__checkbox_inner_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__checkbox_inner_disabled.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_default=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_default"]=style__checkbox_inner_default;style__checkbox_inner_default.textureBg="";style__checkbox_inner_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__checkbox_inner_default.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_default.orientation="left";style__checkbox_inner_default.opacity=1;style__checkbox_inner_default.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_default.cornerRadius=3;style__checkbox_inner_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__checkbox_inner_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__checkbox_inner_default.atlas={y:0,x:0,w:10,h:10};let style__checkbox_inner_click=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_inner_click"]=style__checkbox_inner_click;style__checkbox_inner_click.textureBg="";style__checkbox_inner_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:18};style__checkbox_inner_click.padding={top:0,right:0,left:0,bottom:0};style__checkbox_inner_click.orientation="left";style__checkbox_inner_click.opacity=1;style__checkbox_inner_click.margin={top:0,right:0,left:0,bottom:0};style__checkbox_inner_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_inner_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_inner_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_inner_click.cornerRadius=3;style__checkbox_inner_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__checkbox_inner_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__checkbox_inner_click.atlas={y:0,x:0,w:10,h:10};let style__checkbox_hover=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_hover"]=style__checkbox_hover;style__checkbox_hover.textureBg="";style__checkbox_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_hover.padding={top:0,right:0,left:0,bottom:0};style__checkbox_hover.orientation="left";style__checkbox_hover.opacity=1;style__checkbox_hover.margin={top:0,right:0,left:0,bottom:0};style__checkbox_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_hover.cornerRadius=3;style__checkbox_hover.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-13487305)};style__checkbox_hover.checkbox={useAutoPadding:true};style__checkbox_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__checkbox_hover.atlas={y:0,x:0,w:10,h:10};let style__checkbox_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_disabled"]=style__checkbox_disabled;style__checkbox_disabled.textureBg="";style__checkbox_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_disabled.padding={top:0,right:0,left:0,bottom:0};style__checkbox_disabled.orientation="left";style__checkbox_disabled.opacity=.6;style__checkbox_disabled.margin={top:0,right:0,left:0,bottom:0};style__checkbox_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_disabled.cornerRadius=3;style__checkbox_disabled.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-13487305)};style__checkbox_disabled.checkbox={useAutoPadding:true};style__checkbox_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__checkbox_disabled.atlas={y:0,x:0,w:10,h:10};let style__checkbox_default=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_default"]=style__checkbox_default;style__checkbox_default.textureBg="";style__checkbox_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_default.padding={top:0,right:0,left:0,bottom:0};style__checkbox_default.orientation="left";style__checkbox_default.opacity=1;style__checkbox_default.margin={top:0,right:0,left:0,bottom:0};style__checkbox_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_default.cornerRadius=3;style__checkbox_default.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-13487305)};style__checkbox_default.checkbox={useAutoPadding:true};style__checkbox_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__checkbox_default.atlas={y:0,x:0,w:10,h:10};let style__checkbox_click=new koui_theme_Style;koui_theme_Style.styles.h["_checkbox_click"]=style__checkbox_click;style__checkbox_click.textureBg="";style__checkbox_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__checkbox_click.padding={top:0,right:0,left:0,bottom:0};style__checkbox_click.orientation="left";style__checkbox_click.opacity=1;style__checkbox_click.margin={top:0,right:0,left:0,bottom:0};style__checkbox_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__checkbox_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__checkbox_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__checkbox_click.cornerRadius=3;style__checkbox_click.color={useGradient:false,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-13487305)};style__checkbox_click.checkbox={useAutoPadding:true};style__checkbox_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1723184566)};style__checkbox_click.atlas={y:0,x:0,w:10,h:10};let style__button_hover=new koui_theme_Style;koui_theme_Style.styles.h["_button_hover"]=style__button_hover;style__button_hover.textureBg="";style__button_hover.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__button_hover.padding={top:0,right:0,left:0,bottom:0};style__button_hover.orientation="left";style__button_hover.opacity=1;style__button_hover.margin={top:0,right:0,left:0,bottom:0};style__button_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__button_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__button_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__button_hover.cornerRadius=3;style__button_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__button_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__button_hover.atlas={y:0,x:0,w:10,h:10};let style__button_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_button_disabled"]=style__button_disabled;style__button_disabled.textureBg="";style__button_disabled.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__button_disabled.padding={top:0,right:0,left:0,bottom:0};style__button_disabled.orientation="left";style__button_disabled.opacity=.6;style__button_disabled.margin={top:0,right:0,left:0,bottom:0};style__button_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__button_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__button_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__button_disabled.cornerRadius=3;style__button_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__button_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__button_disabled.atlas={y:0,x:0,w:10,h:10};let style__button_default=new koui_theme_Style;koui_theme_Style.styles.h["_button_default"]=style__button_default;style__button_default.textureBg="";style__button_default.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__button_default.padding={top:0,right:0,left:0,bottom:0};style__button_default.orientation="left";style__button_default.opacity=1;style__button_default.margin={top:0,right:0,left:0,bottom:0};style__button_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__button_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__button_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__button_default.cornerRadius=3;style__button_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__button_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__button_default.atlas={y:0,x:0,w:10,h:10};let style__button_click=new koui_theme_Style;koui_theme_Style.styles.h["_button_click"]=style__button_click;style__button_click.textureBg="";style__button_click.size={width:200,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,height:40};style__button_click.padding={top:0,right:0,left:0,bottom:0};style__button_click.orientation="left";style__button_click.opacity=1;style__button_click.margin={top:0,right:0,left:0,bottom:0};style__button_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__button_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__button_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__button_click.cornerRadius=3;style__button_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__button_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__button_click.atlas={y:0,x:0,w:10,h:10};let style__anchorpane_hover=new koui_theme_Style;koui_theme_Style.styles.h["_anchorpane_hover"]=style__anchorpane_hover;style__anchorpane_hover.textureBg="";style__anchorpane_hover.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__anchorpane_hover.padding={top:0,right:0,left:0,bottom:0};style__anchorpane_hover.orientation="left";style__anchorpane_hover.opacity=1;style__anchorpane_hover.margin={top:0,right:0,left:0,bottom:0};style__anchorpane_hover.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__anchorpane_hover.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__anchorpane_hover.cursors={notallowed:"notallowed",defaultCursor:"default"};style__anchorpane_hover.cornerRadius=3;style__anchorpane_hover.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13948109),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__anchorpane_hover.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1088493)};style__anchorpane_hover.atlas={y:0,x:0,w:10,h:10};let style__anchorpane_disabled=new koui_theme_Style;koui_theme_Style.styles.h["_anchorpane_disabled"]=style__anchorpane_disabled;style__anchorpane_disabled.textureBg="";style__anchorpane_disabled.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__anchorpane_disabled.padding={top:0,right:0,left:0,bottom:0};style__anchorpane_disabled.orientation="left";style__anchorpane_disabled.opacity=.6;style__anchorpane_disabled.margin={top:0,right:0,left:0,bottom:0};style__anchorpane_disabled.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__anchorpane_disabled.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__anchorpane_disabled.cursors={notallowed:"notallowed",defaultCursor:"default"};style__anchorpane_disabled.cornerRadius=3;style__anchorpane_disabled.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__anchorpane_disabled.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__anchorpane_disabled.atlas={y:0,x:0,w:10,h:10};let style__anchorpane_default=new koui_theme_Style;koui_theme_Style.styles.h["_anchorpane_default"]=style__anchorpane_default;style__anchorpane_default.textureBg="";style__anchorpane_default.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__anchorpane_default.padding={top:0,right:0,left:0,bottom:0};style__anchorpane_default.orientation="left";style__anchorpane_default.opacity=1;style__anchorpane_default.margin={top:0,right:0,left:0,bottom:0};style__anchorpane_default.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__anchorpane_default.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__anchorpane_default.cursors={notallowed:"notallowed",defaultCursor:"default"};style__anchorpane_default.cornerRadius=3;style__anchorpane_default.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-14276557),colorBottomRight:kha_Color._new(-15132127)},bg:kha_Color._new(-15132127)};style__anchorpane_default.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-14737368)};style__anchorpane_default.atlas={y:0,x:0,w:10,h:10};let style__anchorpane_click=new koui_theme_Style;koui_theme_Style.styles.h["_anchorpane_click"]=style__anchorpane_click;style__anchorpane_click.textureBg="";style__anchorpane_click.size={width:200,minWidth:20,minHeight:20,maxWidth:0,maxHeight:0,height:40};style__anchorpane_click.padding={top:0,right:0,left:0,bottom:0};style__anchorpane_click.orientation="left";style__anchorpane_click.opacity=1;style__anchorpane_click.margin={top:0,right:0,left:0,bottom:0};style__anchorpane_click.font={underlineThickness:0,size:15,family:"Montserrat_Regular"};style__anchorpane_click.dropShadow={radius:5,falloff:3.5,color:kha_Color._new(1996488704)};style__anchorpane_click.cursors={notallowed:"notallowed",defaultCursor:"default"};style__anchorpane_click.cornerRadius=3;style__anchorpane_click.color={useGradient:true,text:kha_Color._new(-2236963),gradient:{direction:true,colorTopLeft:kha_Color._new(-13355194),colorBottomRight:kha_Color._new(-14276557)},bg:kha_Color._new(-15132127)};style__anchorpane_click.border={style:"middle",size:2,nineSlice:false,color:kha_Color._new(-1)};style__anchorpane_click.atlas={y:0,x:0,w:10,h:10};koui_theme_Style.requiredAssets=["Montserrat_Regular",""]}}$hxClasses["koui.theme.Style"]=koui_theme_Style;koui_theme_Style.__name__="koui.theme.Style";Object.assign(koui_theme_Style.prototype,{__class__:koui_theme_Style,textureBg:null,textinput:null,textShadow:null,slider:null,size:null,scrollbar:null,padding:null,orientation:null,opacity:null,margin:null,font:null,dropdown:null,dropShadow:null,cursors:null,cornerRadius:null,color:null,checkbox:null,border:null,atlas:null});class koui_utils_Cursor{static init(){koui_utils_Cursor.mouse=kha_input_Mouse.get()}static setPosition(x,y){koui_utils_Cursor.mouseX=x;koui_utils_Cursor.mouseY=y}static setCursor(cursorType){koui_utils_Cursor.mouse.setSystemCursor(cursorType)}static getCursorEnumValue(name){if(name==null){return kha_input_MouseCursor.Default}switch(name.toLowerCase()){case"default":return kha_input_MouseCursor.Default;case"notallowed":return kha_input_MouseCursor.NotAllowed;case"pointer":return kha_input_MouseCursor.Pointer;case"text":return kha_input_MouseCursor.Text;case"wait":return kha_input_MouseCursor.Wait;default:return kha_input_MouseCursor.Default}}}$hxClasses["koui.utils.Cursor"]=koui_utils_Cursor;koui_utils_Cursor.__name__="koui.utils.Cursor";class koui_utils_Set_$Int{constructor(){this.map=new haxe_ds_IntMap}toArray(){let out=[];let key=this.map.keys();while(key.hasNext()){let key1=key.next();out.push(key1)}return out}}$hxClasses["koui.utils.Set_Int"]=koui_utils_Set_$Int;koui_utils_Set_$Int.__name__="koui.utils.Set_Int";Object.assign(koui_utils_Set_$Int.prototype,{__class__:koui_utils_Set_$Int,map:null});class koui_utils_Set_$String{constructor(){this.map=new haxe_ds_StringMap}}$hxClasses["koui.utils.Set_String"]=koui_utils_Set_$String;koui_utils_Set_$String.__name__="koui.utils.Set_String";Object.assign(koui_utils_Set_$String.prototype,{__class__:koui_utils_Set_$String,map:null});class koui_utils_FontUtil{static removeDuplicatesFromSortedIArray(array){if(array.length==0||array.length==1){return array}let outArray=[];let lastEntry=null;let _g=0;let _g1=array.length;while(_g<_g1){let i=_g++;if(i!=0&&array[i]==lastEntry){continue}lastEntry=array[i];outArray.push(lastEntry)}return outArray}static setKhaGlyphs(){let allGlyphs=koui_utils_FontUtil.BASE_GLYPHS.slice();let locale=koui_utils_FontUtil.additionalLocales.map.keys();while(locale.hasNext()){let locale1=locale.next();allGlyphs=allGlyphs.concat(koui_utils_FontUtil.localeDefaultGlyphs.h[locale1])}allGlyphs=allGlyphs.concat(koui_utils_FontUtil.additionalGlyphs.toArray());allGlyphs.sort(Reflect.compare);kha_graphics2_Graphics.fontGlyphs=koui_utils_FontUtil.removeDuplicatesFromSortedIArray(allGlyphs)}}$hxClasses["koui.utils.FontUtil"]=koui_utils_FontUtil;koui_utils_FontUtil.__name__="koui.utils.FontUtil";class koui_utils_TextureAtlas{static drawFromAtlas(g,element,divisionsX,divisionsY,offsetX,offsetY,drawX,drawY){if(offsetY==null){offsetY=0}if(offsetX==null){offsetX=0}if(divisionsY==null){divisionsY=1}if(divisionsX==null){divisionsX=1}if(element.style.textureBg==""){return false}let texture=kha_Assets.images.get(element.style.textureBg);if(texture==null){return false}if(drawX==null){drawX=element.drawX}if(drawY==null){drawY=element.drawY}let atlasX=0;let atlasY=0;let atlasW;let atlasH;if(element.style.atlas!=null){atlasW=element.style.atlas.w;atlasH=element.style.atlas.h;atlasX=element.style.atlas.x*atlasW;atlasY=element.style.atlas.y*atlasH}else{atlasW=texture.get_width()/divisionsX|0;atlasH=texture.get_height()/divisionsY|0}atlasX+=atlasW*offsetX;atlasY+=atlasH*offsetY;g.set_color(-1);g.drawScaledSubImage(texture,atlasX,atlasY,atlasW,atlasH,drawX,drawY,element.drawWidth,element.drawHeight);return true}}$hxClasses["koui.utils.TextureAtlas"]=koui_utils_TextureAtlas;koui_utils_TextureAtlas.__name__="koui.utils.TextureAtlas";class zui_Ext{static inlineRadio(ui,handle,texts,align){if(align==null){align=0}if(!ui.isVisible(ui.t.ELEMENT_H*ui.ops.scaleFactor)){ui.endElement();return handle.position}let step=ui._w/texts.length;let hovered=-1;if(ui.getHover()){let ix=ui.inputX-ui._x-ui._windowX|0;let _g=0;let _g1=texts.length;while(_g<_g1){let i=_g++;if(ix<i*step+step){hovered=i;break}}}if(ui.getReleased()){handle.position=hovered;handle.changed=ui.changed=true}else{handle.changed=false}let _g=0;let _g1=texts.length;while(_g<_g1){let i=_g++;if(handle.position==i){ui.g.set_color(ui.t.ACCENT_HOVER_COL);if(!ui.enabled){ui.fadeColor()}ui.g.fillRect(ui._x+step*i,ui._y+ui.buttonOffsetY,step,ui.t.BUTTON_H*ui.ops.scaleFactor)}else if(hovered==i){ui.g.set_color(ui.t.ACCENT_COL);if(!ui.enabled){ui.fadeColor()}ui.g.drawRect(ui._x+step*i,ui._y+ui.buttonOffsetY,step,ui.t.BUTTON_H*ui.ops.scaleFactor)}ui.g.set_color(ui.t.TEXT_COL);ui._x+=step*i;let _w=ui._w;ui._w=step|0;ui.drawString(ui.g,texts[i],null,0,align);ui._x-=step*i;ui._w=_w}ui.endElement();return handle.position}static rightAlignNumber(number,length){let s=number+"";while(s.length<length)s=" "+s;return s}static textArea(ui,handle,align,editable,label,wordWrap){if(wordWrap==null){wordWrap=false}if(label==null){label=""}if(editable==null){editable=true}if(align==null){align=0}handle.text=StringTools.replace(handle.text,"\t","    ");let selected=ui.textSelectedHandle==handle;let lines=handle.text.split("\n");let showLabel=lines.length==1&&lines[0]=="";let keyPressed=selected&&ui.isKeyPressed;ui.highlightOnSelect=false;ui.tabSwitchEnabled=false;if(wordWrap&&handle.text!=""){let cursorSet=false;let cursorPos=ui.cursorX;let _g=0;let _g1=handle.position;while(_g<_g1){let i=_g++;cursorPos+=lines[i].length+1}let words=lines.join(" ").split(" ");lines=[];let line="";let _g2=0;while(_g2<words.length){let w=words[_g2];++_g2;let linew=ui.ops.font.width(ui.fontSize,line+" "+w);let wordw=ui.ops.font.width(ui.fontSize," "+w);if(linew>ui._w-10&&linew>wordw){lines.push(line);line=""}line=line==""?w:line+" "+w;let linesLen=lines.length;let _g=0;while(_g<lines.length){let l=lines[_g];++_g;linesLen+=l.length}if(selected&&!cursorSet&&cursorPos<=linesLen+line.length){cursorSet=true;handle.position=lines.length;ui.cursorX=ui.highlightAnchor=cursorPos-linesLen}}lines.push(line);if(selected){ui.textSelected=handle.text=lines[handle.position]}}let cursorStartX=ui.cursorX;if(zui_Ext.textAreaLineNumbers){let _y=ui._y;let _TEXT_COL=ui.t.TEXT_COL;ui.t.TEXT_COL=ui.t.ACCENT_COL;let maxLength=Math.ceil(Math.log(lines.length+.5)/Math.log(10));let _g=0;let _g1=lines.length;while(_g<_g1){let i=_g++;ui.text(zui_Ext.rightAlignNumber(i+1,maxLength));ui._y-=ui.t.ELEMENT_OFFSET*ui.ops.scaleFactor}ui.t.TEXT_COL=_TEXT_COL;ui._y=_y;ui._x+=(lines.length+"").length*16+4}ui.g.set_color(ui.t.SEPARATOR_COL);let g=ui.g;let x=ui._x+ui.buttonOffsetY;let y=ui._y+ui.buttonOffsetY;let w=ui._w-ui.buttonOffsetY*2;let h=lines.length*(ui.t.ELEMENT_H*ui.ops.scaleFactor)-ui.buttonOffsetY*2;let strength=0;if(strength==0){strength=1}if(!ui.enabled){ui.fadeColor()}g.fillRect(x,y-1,w,h+1);let _textColoring=ui.textColoring;ui.textColoring=zui_Ext.textAreaColoring;let _g=0;let _g1=lines.length;while(_g<_g1){let i=_g++;if(!selected&&ui.getHover()||selected&&i==handle.position){handle.position=i;handle.text=lines[i];ui.submitTextHandle=null;ui.textInput(handle,showLabel?label:"",align,editable);if(keyPressed&&ui.key!=13&&ui.key!=27){lines[i]=ui.textSelected}}else if(showLabel){let TEXT_COL=ui.t.TEXT_COL;ui.t.TEXT_COL=ui.t.LABEL_COL;ui.text(label,2);ui.t.TEXT_COL=TEXT_COL}else{ui.text(lines[i],align)}ui._y-=ui.t.ELEMENT_OFFSET*ui.ops.scaleFactor}ui._y+=ui.t.ELEMENT_OFFSET*ui.ops.scaleFactor;ui.textColoring=_textColoring;if(zui_Ext.textAreaScrollPastEnd){ui._y+=ui._h-ui.windowHeaderH-ui.t.ELEMENT_H*ui.ops.scaleFactor-ui.t.ELEMENT_OFFSET*ui.ops.scaleFactor}if(keyPressed){if(ui.key==40&&handle.position<lines.length-1){handle.position++;zui_Ext.scrollAlign(ui,handle)}if(ui.key==38&&handle.position>0){handle.position--;zui_Ext.scrollAlign(ui,handle)}if(editable&&ui.key==13&&!wordWrap){handle.position++;lines.splice(handle.position,0,HxOverrides.substr(lines[handle.position-1],ui.cursorX,null));lines[handle.position-1]=HxOverrides.substr(lines[handle.position-1],0,ui.cursorX);ui.startTextEdit(handle);ui.cursorX=ui.highlightAnchor=0;zui_Ext.scrollAlign(ui,handle)}if(editable&&ui.key==8&&cursorStartX==0&&handle.position>0){handle.position--;ui.cursorX=ui.highlightAnchor=lines[handle.position].length;lines[handle.position]+=lines[handle.position+1];lines.splice(handle.position+1,1);zui_Ext.scrollAlign(ui,handle)}ui.textSelected=lines[handle.position]}ui.highlightOnSelect=true;ui.tabSwitchEnabled=true;handle.text=lines.join("\n");return handle.text}static scrollAlign(ui,handle){if((handle.position+1)*(ui.t.ELEMENT_H*ui.ops.scaleFactor)+ui.currentWindow.scrollOffset>ui._h-ui.windowHeaderH){ui.currentWindow.scrollOffset-=ui.t.ELEMENT_H*ui.ops.scaleFactor}else if((handle.position+1)*(ui.t.ELEMENT_H*ui.ops.scaleFactor)+ui.currentWindow.scrollOffset<ui.windowHeaderH){ui.currentWindow.scrollOffset+=ui.t.ELEMENT_H*ui.ops.scaleFactor}}}$hxClasses["zui.Ext"]=zui_Ext;zui_Ext.__name__="zui.Ext";class zui_GraphicsExtension{static drawArc(g2,cx,cy,radius,sAngle,eAngle,strength,ccw,segments){if(segments==null){segments=0}if(ccw==null){ccw=false}if(strength==null){strength=1}sAngle%=Math.PI*2;eAngle%=Math.PI*2;if(ccw){if(eAngle>sAngle){eAngle-=Math.PI*2}}else if(eAngle<sAngle){eAngle+=Math.PI*2}radius+=strength/2;if(segments<=0){segments=Math.floor(10*Math.sqrt(radius))}let theta=(eAngle-sAngle)/segments;let c=Math.cos(theta);let s=Math.sin(theta);let x=Math.cos(sAngle)*radius;let y=Math.sin(sAngle)*radius;let _g=0;let _g1=segments;while(_g<_g1){let n=_g++;let px=x+cx;let py=y+cy;let t=x;x=c*x-s*y;y=c*y+s*t;zui_GraphicsExtension.drawInnerLine(g2,x+cx,y+cy,px,py,strength)}}static drawCircle(g2,cx,cy,radius,strength,segments){if(segments==null){segments=0}if(strength==null){strength=1}radius+=strength/2;if(segments<=0){segments=Math.floor(10*Math.sqrt(radius))}let theta=2*Math.PI/segments;let c=Math.cos(theta);let s=Math.sin(theta);let x=radius;let y=0;let _g=0;let _g1=segments;while(_g<_g1){let n=_g++;let px=x+cx;let py=y+cy;let t=x;x=c*x-s*y;y=c*y+s*t;zui_GraphicsExtension.drawInnerLine(g2,x+cx,y+cy,px,py,strength)}}static drawInnerLine(g2,x1,y1,x2,y2,strength){let side=y2>y1?1:0;if(y2==y1){side=x2-x1>0?1:0}let vec_x=0;let vec_y=0;if(y2==y1){let x=0;let y=-1;if(y==null){y=0}if(x==null){x=0}let v_x=x;let v_y=y;vec_x=v_x;vec_y=v_y}else{let x=1;let y=-(x2-x1)/(y2-y1);if(y==null){y=0}if(x==null){x=0}let v_x=x;let v_y=y;vec_x=v_x;vec_y=v_y}let currentLength=Math.sqrt(vec_x*vec_x+vec_y*vec_y);if(currentLength!=0){let mul=strength/currentLength;vec_x*=mul;vec_y*=mul}let x=x1+side*vec_x;let y=y1+side*vec_y;if(y==null){y=0}if(x==null){x=0}let p1_x=x;let p1_y=y;let x3=x2+side*vec_x;let y3=y2+side*vec_y;if(y3==null){y3=0}if(x3==null){x3=0}let p2_x=x3;let p2_y=y3;let x4=p1_x-vec_x;let y4=p1_y-vec_y;if(y4==null){y4=0}if(x4==null){x4=0}let p3_x=x4;let p3_y=y4;let x5=p2_x-vec_x;let y5=p2_y-vec_y;if(y5==null){y5=0}if(x5==null){x5=0}let p4_x=x5;let p4_y=y5;g2.fillTriangle(p1_x,p1_y,p2_x,p2_y,p3_x,p3_y);g2.fillTriangle(p3_x,p3_y,p2_x,p2_y,p4_x,p4_y)}static fillCircle(g2,cx,cy,radius,segments){if(segments==null){segments=0}if(segments<=0){segments=Math.floor(10*Math.sqrt(radius))}let theta=2*Math.PI/segments;let c=Math.cos(theta);let s=Math.sin(theta);let x=radius;let y=0;let _g=0;let _g1=segments;while(_g<_g1){let n=_g++;let px=x+cx;let py=y+cy;let t=x;x=c*x-s*y;y=c*y+s*t;g2.fillTriangle(px,py,x+cx,y+cy,cx,cy)}}}$hxClasses["zui.GraphicsExtension"]=zui_GraphicsExtension;zui_GraphicsExtension.__name__="zui.GraphicsExtension";class zui_Themes{}$hxClasses["zui.Themes"]=zui_Themes;zui_Themes.__name__="zui.Themes";class zui_Zui{constructor(ops){this.checkSelectImage=null;this.elementsBaked=false;this.scissor=false;this.tabVertical=false;this.tabScroll=0;this.tabHandle=null;this.tabColors=null;this.tabNames=null;this.tooltipTime=0;this.tooltipWait=false;this.tooltipShown=false;this.tooltipY=0;this.tooltipX=0;this.tooltipInvertY=false;this.tooltipImgMaxWidth=null;this.tooltipImg=null;this.tooltipText="";this.comboInitialValue=0;this.comboToSubmit=0;this.submitComboHandle=null;this.comboSearchBar=false;this.comboSelectedWindow=null;this.comboSelectedHandle=null;this.tabPressedHandle=null;this.tabPressed=false;this.textToSubmit="";this.submitTextHandle=null;this.textSelectedHandle=null;this.restoreY=-1;this.restoreX=-1;this.windowHeaderH=0;this.windowHeaderW=0;this.dragHandle=null;this.scrollHandle=null;this.windowEnded=true;this._windowY=0;this._windowX=0;this.imageScrollAlign=true;this.scrollAlign=0;this.curRatio=-1;this.highlightAnchor=0;this.cursorX=0;this.inputStartedTime=0;this.key=null;this.isTabDown=false;this.isReturnDown=false;this.isEscapeDown=false;this.isDeleteDown=false;this.isBackspaceDown=false;this.isADown=false;this.isAltDown=false;this.isCtrlDown=false;this.isShiftDown=false;this.isKeyDown=false;this.isKeyPressed=false;this.inputWheelDelta=0;this.inputEnabled=true;this.inputRegistered=false;this.sliderTooltipW=0;this.sliderTooltipY=0;this.sliderTooltipX=0;this.sliderTooltip=false;this.touchHoldActivated=false;this.highlightFullRow=false;this.windowBorderRight=0;this.windowBorderBottom=0;this.windowBorderTop=0;this.textColoring=null;this.tabSwitchEnabled=true;this.highlightOnSelect=true;this.alwaysRedraw=false;this.scrollEnabled=true;this.imageInvertY=false;this.changed=false;this.isReleased=false;this.isHovered=false;this.isPushed=false;this.isStarted=false;this.enabled=true;this.isTyping=false;this.isScrolling=false;if(ops.theme==null){ops.theme=zui_Themes.dark}this.t=ops.theme;if(ops.khaWindowId==null){ops.khaWindowId=0}if(ops.scaleFactor==null){ops.scaleFactor=1}if(ops.autoNotifyInput==null){ops.autoNotifyInput=true}this.ops=ops;this.setScale(ops.scaleFactor);if(ops.autoNotifyInput){this.registerInput()}if(zui_Zui.copyReceiver==null){zui_Zui.copyReceiver=this;kha_System.notifyOnCutCopyPaste($bind(this,this.onCut),$bind(this,this.onCopy),$bind(this,this.onPaste));kha_System.notifyOnFrames(function(frames){if((zui_Zui.isCopy||zui_Zui.isPaste)&&++zui_Zui.copyFrame>1){zui_Zui.isCopy=zui_Zui.isCut=zui_Zui.isPaste=false}else if(zui_Zui.copyFrame>1&&++zui_Zui.copyFrame>2){zui_Zui.copyFrame=0;zui_Zui.textToPaste=""}})}let rtTextVS=kha_graphics4_Graphics2.createTextVertexStructure();this.rtTextPipeline=kha_graphics4_Graphics2.createTextPipeline(rtTextVS);this.rtTextPipeline.alphaBlendSource=1;this.rtTextPipeline.compile()}setScale(factor){this.ops.scaleFactor=factor;this.fontSize=this.t.FONT_SIZE*this.ops.scaleFactor|0;let fontHeight=this.ops.font.height(this.fontSize);this.fontOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-fontHeight)/2;this.arrowOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.ARROW_SIZE*this.ops.scaleFactor)/2;this.arrowOffsetX=this.arrowOffsetY;this.titleOffsetX=(this.arrowOffsetX*2+this.t.ARROW_SIZE*this.ops.scaleFactor)/this.ops.scaleFactor;this.buttonOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.BUTTON_H*this.ops.scaleFactor)/2;this.checkOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.CHECK_SIZE*this.ops.scaleFactor)/2;this.checkOffsetX=this.checkOffsetY;this.checkSelectOffsetY=(this.t.CHECK_SIZE*this.ops.scaleFactor-this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor)/2;this.checkSelectOffsetX=this.checkSelectOffsetY;this.radioOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.CHECK_SIZE*this.ops.scaleFactor)/2;this.radioOffsetX=this.radioOffsetY;this.radioSelectOffsetY=(this.t.CHECK_SIZE*this.ops.scaleFactor-this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor)/2;this.radioSelectOffsetX=this.radioSelectOffsetY;this.elementsBaked=false}bakeElements(){if(this.checkSelectImage!=null){this.checkSelectImage.unload()}this.checkSelectImage=kha_Image.createRenderTarget(this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor|0,this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor|0,null,0,1);let g=this.checkSelectImage.get_g2();g.begin(true,0);g.set_color(this.t.ACCENT_SELECT_COL);g.drawLine(0,0,this.checkSelectImage.get_width(),this.checkSelectImage.get_height(),2*this.ops.scaleFactor);g.drawLine(this.checkSelectImage.get_width(),0,0,this.checkSelectImage.get_height(),2*this.ops.scaleFactor);g.end();this.elementsBaked=true}registerInput(){if(this.inputRegistered){return}kha_input_Mouse.get().notifyWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel));if(kha_input_Pen.get()!=null){kha_input_Pen.get().notify($bind(this,this.onPenDown),$bind(this,this.onPenUp),$bind(this,this.onPenMove))}kha_input_Keyboard.get().notify($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress));let _gthis=this;kha_System.notifyOnApplicationState(function(){_gthis.inputDX=_gthis.inputDY=0},null,null,null,null);this.inputRegistered=true}begin(g){if(!this.elementsBaked){this.bakeElements()}this.changed=false;this.globalG=g;zui_Zui.current=this;this._x=0;this._y=0;this._w=0;this._h=0}end(last){if(last==null){last=true}if(!this.windowEnded){this.endWindow()}this.drawCombo();this.drawTooltip(true);this.tabPressedHandle=null;if(last){this.endInput()}}beginRegion(g,x,y,w){if(!this.elementsBaked){g.end();this.bakeElements();g.begin(false)}this.changed=false;this.globalG=g;this.g=g;this.currentWindow=null;this.tooltipText="";this.tooltipImg=null;this._windowX=0;this._windowY=0;this._windowW=w;this._x=x;this._y=y;this._w=w}endRegion(last){if(last==null){last=true}this.drawTooltip(false);this.tabPressedHandle=null;if(last){this.endInput()}}endInput(){this.isKeyPressed=false;this.inputStarted=false;this.inputStartedR=false;this.inputReleased=false;this.inputReleasedR=false;this.inputDX=0;this.inputDY=0;this.inputWheelDelta=0;this.penInUse=false;if(zui_Zui.keyRepeat&&this.isKeyDown&&kha_Scheduler.time()-zui_Zui.keyRepeatTime>.05){if(this.key==8||this.key==46||this.key==37||this.key==39||this.key==38||this.key==40){zui_Zui.keyRepeatTime=kha_Scheduler.time();this.isKeyPressed=true}}if(zui_Zui.touchHold&&this.inputDown&&this.inputX==this.inputStartedX&&this.inputY==this.inputStartedY&&this.inputStartedTime>0&&kha_Scheduler.time()-this.inputStartedTime>.7){this.touchHoldActivated=true;this.inputReleasedR=true;this.inputStartedTime=0}}inputChanged(){if(!(this.inputDX!=0||this.inputDY!=0||this.inputWheelDelta!=0||this.inputStarted||this.inputStartedR||this.inputReleased||this.inputReleasedR||this.inputDown||this.inputDownR)){return this.isKeyPressed}else{return true}}windowDirty(handle,x,y,w,h){let wx=x+handle.dragX;let wy=y+handle.dragY;let inputChanged=this.getInputInRect(wx,wy,w,h)&&this.inputChanged();if(!(this.alwaysRedraw||this.isScrolling)){return inputChanged}else{return true}}window(handle,x,y,w,h,drag){if(drag==null){drag=false}if(handle.texture==null||w!=handle.texture.get_width()||h!=handle.texture.get_height()){this.resize(handle,w,h)}if(!this.windowEnded){this.endWindow()}this.windowEnded=false;this.g=handle.texture.get_g2();this.currentWindow=handle;this._windowX=x+handle.dragX;this._windowY=y+handle.dragY;this._windowW=w;this._windowH=h;this.windowHeaderW=0;this.windowHeaderH=0;if(this.windowDirty(handle,x,y,w,h)){handle.redraws=2}if(zui_Zui.onBorderHover!=null){if(this.getInputInRect(this._windowX-4,this._windowY,8,this._windowH)){zui_Zui.onBorderHover(handle,0)}else if(this.getInputInRect(this._windowX+this._windowW-4,this._windowY,8,this._windowH)){zui_Zui.onBorderHover(handle,1)}else if(this.getInputInRect(this._windowX,this._windowY-4,this._windowW,8)){zui_Zui.onBorderHover(handle,2)}else if(this.getInputInRect(this._windowX,this._windowY+this._windowH-4,this._windowW,8)){zui_Zui.onBorderHover(handle,3)}}if(handle.redraws<=0){return false}this._x=0;this._y=handle.scrollOffset;if(handle.layout==1){w=this.t.ELEMENT_W*this.ops.scaleFactor|0}this._w=!handle.scrollEnabled?w:w-(this.t.SCROLL_W*this.ops.scaleFactor|0);this._h=h;this.tooltipText="";this.tooltipImg=null;this.tabNames=null;if(this.t.FILL_WINDOW_BG){this.g.begin(true,this.t.WINDOW_BG_COL)}else{this.g.begin(true,0);this.g.set_color(this.t.WINDOW_BG_COL);this.g.fillRect(this._x,this._y-handle.scrollOffset,handle.lastMaxX,handle.lastMaxY)}handle.dragEnabled=drag;if(drag){if(this.inputStarted&&this.getInputInRect(this._windowX,this._windowY,this._windowW,15*this.ops.scaleFactor|0)){this.dragHandle=handle}else if(this.inputReleased){this.dragHandle=null}if(handle==this.dragHandle){handle.redraws=2;handle.dragX+=this.inputDX|0;handle.dragY+=this.inputDY|0}this._y+=15*this.ops.scaleFactor|0;this.windowHeaderH+=15*this.ops.scaleFactor|0}return true}endWindow(bindGlobalG){if(bindGlobalG==null){bindGlobalG=true}let handle=this.currentWindow;if(handle==null){return}if(handle.redraws>0||this.isScrolling){if(this.scissor){this.scissor=false;this.g.disableScissor()}if(this.tabNames!=null){this.drawTabs()}if(handle.dragEnabled){this.g.set_color(this.t.SEPARATOR_COL);this.g.fillRect(0,0,this._windowW,15*this.ops.scaleFactor|0)}let wh=this._windowH-this.windowHeaderH;let fullHeight=this._y-handle.scrollOffset-this.windowHeaderH;if(fullHeight<wh||handle.layout==1||!this.scrollEnabled){handle.scrollEnabled=false;handle.scrollOffset=0}else{handle.scrollEnabled=true;if(this.tabScroll<0){handle.scrollOffset=this.tabScroll;this.tabScroll=0}let wy=this._windowY+this.windowHeaderH;let amountToScroll=fullHeight-wh;let amountScrolled=-handle.scrollOffset;let ratio=amountScrolled/amountToScroll;let barH=wh*Math.abs(wh/fullHeight);barH=Math.max(barH,this.t.ELEMENT_H*this.ops.scaleFactor);let totalScrollableArea=wh-barH;let e=amountToScroll/totalScrollableArea;let barY=totalScrollableArea*ratio+this.windowHeaderH;let barFocus=this.getInputInRect(this._windowX+this._windowW-(this.t.SCROLL_W*this.ops.scaleFactor|0),barY+this._windowY,this.t.SCROLL_W*this.ops.scaleFactor|0,barH);if(this.inputStarted&&barFocus){this.scrollHandle=handle;this.isScrolling=true}let scrollDelta=this.inputWheelDelta;if(zui_Zui.touchScroll&&this.inputDown&&this.inputDY!=0&&this.inputX>this._windowX+this.windowHeaderW&&this.inputY>this._windowY+this.windowHeaderH){this.isScrolling=true;scrollDelta=-this.inputDY/20}if(handle==this.scrollHandle){this.scroll(this.inputDY*e,fullHeight)}else if(scrollDelta!=0&&this.comboSelectedHandle==null&&this.getInputInRect(this._windowX,wy,this._windowW,wh)){this.scroll(scrollDelta*(this.t.ELEMENT_H*this.ops.scaleFactor),fullHeight)}if(handle.scrollOffset>0){handle.scrollOffset=0}else if(fullHeight+handle.scrollOffset<wh){handle.scrollOffset=wh-fullHeight}this.g.set_color(this.t.ACCENT_COL);let scrollbarFocus=this.getInputInRect(this._windowX+this._windowW-(this.t.SCROLL_W*this.ops.scaleFactor|0),wy,this.t.SCROLL_W*this.ops.scaleFactor|0,wh);let barW=scrollbarFocus||handle==this.scrollHandle?this.t.SCROLL_W*this.ops.scaleFactor|0:(this.t.SCROLL_W*this.ops.scaleFactor|0)/3;this.g.fillRect(this._windowW-barW-this.scrollAlign,barY,barW,barH)}handle.lastMaxX=this._x;handle.lastMaxY=this._y;if(handle.layout==0){handle.lastMaxX+=this._windowW}else{handle.lastMaxY+=this._windowH}handle.redraws--;this.g.end()}this.windowEnded=true;if(zui_Zui.alwaysRedrawWindow||handle.redraws>-4){if(bindGlobalG){this.globalG.begin(false)}this.globalG.set_color(this.t.WINDOW_TINT_COL);this.globalG.drawImage(handle.texture,this._windowX,this._windowY);if(bindGlobalG){this.globalG.end()}if(handle.redraws<=0){handle.redraws--}}}scroll(delta,fullHeight){this.currentWindow.scrollOffset-=delta}tab(handle,text,vertical,color){if(color==null){color=-1}if(vertical==null){vertical=false}if(this.tabNames==null){this.tabNames=[];this.tabColors=[];this.tabHandle=handle;this.tabVertical=vertical;this._w-=this.tabVertical?this.t.ELEMENT_OFFSET*this.ops.scaleFactor+this.t.ELEMENT_W*this.ops.scaleFactor-this.ops.scaleFactor|0:0;if(vertical){this.windowHeaderW+=this.t.ELEMENT_W*this.ops.scaleFactor}else{this.windowHeaderH+=this.t.BUTTON_H*this.ops.scaleFactor+this.buttonOffsetY+this.t.ELEMENT_OFFSET*this.ops.scaleFactor}this.restoreX=this.inputX;this.restoreY=this.inputY;if(!vertical&&this.getInputInRect(this._windowX,this._windowY,this._windowW,this.windowHeaderH)){this.inputX=this.inputY=-1}if(vertical){this._x+=this.windowHeaderW+6;this._w-=6}else{this._y+=this.windowHeaderH+3}}this.tabNames.push(text);this.tabColors.push(color);return handle.position==this.tabNames.length-1}drawTabs(){this.inputX=this.restoreX;this.inputY=this.restoreY;if(this.currentWindow==null){return}let tabX=0;let tabY=0;let tabHMin=this.t.BUTTON_H*this.ops.scaleFactor*1.1|0;let headerH=this.currentWindow.dragEnabled?15*this.ops.scaleFactor|0:0;let tabH=this.t.FULL_TABS&&this.tabVertical?(this._windowH-headerH)/this.tabNames.length|0:tabHMin;let origy=this._y;this._y=headerH;this.tabHandle.changed=false;if(this.isCtrlDown&&this.isTabDown){this.tabHandle.position++;if(this.tabHandle.position>=this.tabNames.length){this.tabHandle.position=0}this.tabHandle.changed=true;this.isTabDown=false}if(this.tabHandle.position>=this.tabNames.length){this.tabHandle.position=this.tabNames.length-1}this.g.set_color(this.t.SEPARATOR_COL);if(this.tabVertical){this.g.fillRect(0,this._y,this.t.ELEMENT_W*this.ops.scaleFactor,this._windowH)}else{this.g.fillRect(0,this._y,this._windowW,this.buttonOffsetY+tabH+2)}this.g.set_color(this.t.ACCENT_COL);if(this.tabVertical){this.g.fillRect(this.t.ELEMENT_W*this.ops.scaleFactor,this._y,1,this._windowH)}else{this.g.fillRect(this.buttonOffsetY,this._y+this.buttonOffsetY+tabH+2,this._windowW-this.buttonOffsetY*2,1)}let basey=this.tabVertical?this._y:this._y+2;let _g=0;let _g1=this.tabNames.length;while(_g<_g1){let i=_g++;this._x=tabX;this._y=basey+tabY;this._w=this.tabVertical?this.t.ELEMENT_W*this.ops.scaleFactor-this.ops.scaleFactor|0:this.t.FULL_TABS?this._windowW/this.tabNames.length|0:this.ops.font.width(this.fontSize,this.tabNames[i])+this.buttonOffsetY*2+18*this.ops.scaleFactor|0;let released=this.getReleased(tabH);let pushed=this.getPushed(tabH);let hover=this.getHover(tabH);if(released){let h=this.tabHandle.nest(this.tabHandle.position);h.scrollOffset=this.currentWindow.scrollOffset;h=this.tabHandle.nest(i);this.tabScroll=h.scrollOffset;this.tabHandle.position=i;this.currentWindow.redraws=3;this.tabHandle.changed=true}let selected=this.tabHandle.position==i;this.g.set_color(pushed||hover?this.t.BUTTON_HOVER_COL:this.tabColors[i]!=-1?this.tabColors[i]:selected?this.t.WINDOW_BG_COL:this.t.SEPARATOR_COL);if(this.tabVertical){tabY+=tabH+1}else{tabX+=this._w+1}let g=this.g;let x=this._x+this.buttonOffsetY;let y=this._y+this.buttonOffsetY;let w=this._w;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}g.fillRect(x,y-1,w,tabH+1);this.g.set_color(selected?this.t.BUTTON_TEXT_COL:this.t.LABEL_COL);this.drawString(this.g,this.tabNames[i],null,(tabH-tabHMin)/2,this.t.FULL_TABS?1:0);if(selected){if(this.tabVertical){this.g.set_color(this.t.HIGHLIGHT_COL);this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY-1,2,tabH+this.buttonOffsetY)}else{this.g.set_color(this.t.WINDOW_BG_COL);this.g.fillRect(this._x+this.buttonOffsetY+1,this._y+this.buttonOffsetY+tabH,this._w-1,1);this.g.set_color(this.t.HIGHLIGHT_COL);this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w,2)}}}this._x=0;this._y=origy;this._w=(!this.currentWindow.scrollEnabled?this._windowW:this._windowW-(this.t.SCROLL_W*this.ops.scaleFactor|0))|0}panel(handle,text,isTree,filled,pack){if(pack==null){pack=true}if(filled==null){filled=true}if(isTree==null){isTree=false}if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)){this.endElement();return handle.selected}if(this.getReleased()){handle.selected=!handle.selected;handle.changed=this.changed=true}if(filled){this.g.set_color(this.t.PANEL_BG_COL);let g=this.g;let x=this._x;let y=this._y;let w=this._w;let h=this.t.ELEMENT_H*this.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}g.fillRect(x,y-1,w,h+1)}if(isTree){this.drawTree(handle.selected)}else{this.drawArrow(handle.selected)}this.g.set_color(this.t.LABEL_COL);this.drawString(this.g,text,this.titleOffsetX,0);this.endElement();if(pack&&!handle.selected){this._y-=this.t.ELEMENT_OFFSET*this.ops.scaleFactor}return handle.selected}image(image,tint,h,sx,sy,sw,sh){if(sh==null){sh=0}if(sw==null){sw=0}if(sy==null){sy=0}if(sx==null){sx=0}if(tint==null){tint=-1}let iw=(sw>0?sw:image.get_width())*this.ops.scaleFactor;let ih=(sh>0?sh:image.get_height())*this.ops.scaleFactor;let w=Math.min(iw,this._w);let x=this._x;let scroll=this.currentWindow!=null&&this.currentWindow.scrollEnabled;let r;if(this.curRatio==-1){r=1}else{let ratio=this.ratios[this.curRatio];r=ratio<0?-ratio:ratio}if(this.imageScrollAlign){w=Math.min(iw,this._w-this.buttonOffsetY*2);x+=this.buttonOffsetY;if(!scroll){w-=(this.t.SCROLL_W*this.ops.scaleFactor|0)*r;x+=(this.t.SCROLL_W*this.ops.scaleFactor|0)*r/2}}else if(scroll){w+=(this.t.SCROLL_W*this.ops.scaleFactor|0)*r}let ratio=h==null?w/iw:h/ih;if(h==null){h=ih*ratio}else{w=iw*ratio}if(!this.isVisible(h)){this.endElement(h);return 0}let started=this.getStarted(h);let down=this.getPushed(h);let released=this.getReleased(h);let hover=this.getHover(h);if(this.curRatio==-1&&(started||down||released||hover)){if(this.inputX<this._windowX+this._x||this.inputX>this._windowX+this._x+w){hover=false;released=hover;down=released;started=down}}this.g.set_color(tint);if(!this.enabled){this.fadeColor()}let h_float=h;if(sw>0){if(this.imageInvertY){this.g.drawScaledSubImage(image,sx,sy,sw,sh,x,this._y+h_float,w,-h_float)}else{this.g.drawScaledSubImage(image,sx,sy,sw,sh,x,this._y,w,h_float)}}else if(this.imageInvertY){this.g.drawScaledImage(image,x,this._y+h_float,w,-h_float)}else{this.g.drawScaledImage(image,x,this._y,w,h_float)}this.endElement(h);if(started){return 1}else if(released){return 3}else if(down){return 2}else if(hover){return 4}else{return 0}}text(text,align,bg){if(bg==null){bg=0}if(align==null){align=0}if(text.indexOf("\n")>=0){let align1=align;let bg1=bg;if(bg1==null){bg1=0}if(align1==null){align1=0}let _g=0;let _g1=text.split("\n");while(_g<_g1.length){let line=_g1[_g];++_g;this.text(line,align1,bg1)}return 0}let h=Math.max(this.t.ELEMENT_H*this.ops.scaleFactor,this.ops.font.height(this.fontSize));if(!this.isVisible(h)){this.endElement(h+this.t.ELEMENT_OFFSET*this.ops.scaleFactor);return 0}let started=this.getStarted(h);let down=this.getPushed(h);let released=this.getReleased(h);let hover=this.getHover(h);if(bg!=0){this.g.set_color(bg);this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-this.buttonOffsetY*2,this.t.BUTTON_H*this.ops.scaleFactor)}this.g.set_color(this.t.TEXT_COL);this.drawString(this.g,text,null,0,align);this.endElement(h+this.t.ELEMENT_OFFSET*this.ops.scaleFactor);if(started){return 1}else if(released){return 3}else if(down){return 2}else{return 0}}startTextEdit(handle,align){if(align==null){align=0}this.isTyping=true;this.submitTextHandle=this.textSelectedHandle;this.textToSubmit=this.textSelected;this.textSelectedHandle=handle;this.textSelected=handle.text;this.cursorX=handle.text.length;if(this.tabPressed){this.tabPressed=false;this.isKeyPressed=false}else if(!this.highlightOnSelect){this.setCursorToInput(align)}this.tabPressedHandle=handle;this.highlightAnchor=this.highlightOnSelect?0:this.cursorX;if(kha_input_Keyboard.get()!=null){kha_input_Keyboard.get().show()}}submitTextEdit(){this.submitTextHandle.changed=this.submitTextHandle.text!=this.textToSubmit;this.submitTextHandle.text=this.textToSubmit;this.submitTextHandle=null;this.textToSubmit="";this.textSelected=""}updateTextEdit(align,editable,liveUpdate){if(liveUpdate==null){liveUpdate=false}if(editable==null){editable=true}if(align==null){align=0}let text=this.textSelected;if(this.isKeyPressed){if(this.key==37){if(this.cursorX>0){this.cursorX--}}else if(this.key==39){if(this.cursorX<text.length){this.cursorX++}}else if(editable&&this.key==8){if(this.cursorX>0&&this.highlightAnchor==this.cursorX){text=HxOverrides.substr(text,0,this.cursorX-1)+HxOverrides.substr(text,this.cursorX,text.length);this.cursorX--}else if(this.highlightAnchor<this.cursorX){text=HxOverrides.substr(text,0,this.highlightAnchor)+HxOverrides.substr(text,this.cursorX,text.length);this.cursorX=this.highlightAnchor}else{text=HxOverrides.substr(text,0,this.cursorX)+HxOverrides.substr(text,this.highlightAnchor,text.length)}}else if(editable&&this.key==46){if(this.highlightAnchor==this.cursorX){text=HxOverrides.substr(text,0,this.cursorX)+HxOverrides.substr(text,this.cursorX+1,null)}else if(this.highlightAnchor<this.cursorX){text=HxOverrides.substr(text,0,this.highlightAnchor)+HxOverrides.substr(text,this.cursorX,text.length);this.cursorX=this.highlightAnchor}else{text=HxOverrides.substr(text,0,this.cursorX)+HxOverrides.substr(text,this.highlightAnchor,text.length)}}else if(this.key==13){this.deselectText()}else if(this.key==27){this.textSelected=this.textSelectedHandle.text;this.deselectText()}else if(this.key==9&&this.tabSwitchEnabled&&!this.isCtrlDown){this.tabPressed=true;this.deselectText();this.key=null}else if(this.key==36){this.cursorX=0}else if(this.key==35){this.cursorX=text.length}else if(this.isCtrlDown&&this.isADown){this.cursorX=text.length;this.highlightAnchor=0}else if(editable&&this.key!=16&&this.key!=20&&this.key!=17&&this.key!=224&&this.key!=18&&this.key!=38&&this.key!=40&&this.char!=null&&this.char!=""&&HxOverrides.cca(this.char,0)>=32){text=HxOverrides.substr(text,0,this.highlightAnchor)+this.char+HxOverrides.substr(text,this.cursorX,null);this.cursorX=this.cursorX+1>text.length?text.length:this.cursorX+1}let selecting=this.isShiftDown&&(this.key==37||this.key==39||this.key==16);if(!selecting&&(!this.isCtrlDown||this.isCtrlDown&&this.isAltDown)){this.highlightAnchor=this.cursorX}}if(editable&&zui_Zui.textToPaste!=""){text=HxOverrides.substr(text,0,this.highlightAnchor)+zui_Zui.textToPaste+HxOverrides.substr(text,this.cursorX,null);this.cursorX+=zui_Zui.textToPaste.length;this.highlightAnchor=this.cursorX;zui_Zui.textToPaste="";zui_Zui.isPaste=false}if(this.highlightAnchor==this.cursorX){zui_Zui.textToCopy=text}else if(this.highlightAnchor<this.cursorX){zui_Zui.textToCopy=text.substring(this.highlightAnchor,this.cursorX)}else{zui_Zui.textToCopy=text.substring(this.cursorX,this.highlightAnchor)}if(editable&&zui_Zui.isCut){if(this.highlightAnchor==this.cursorX){text=""}else if(this.highlightAnchor<this.cursorX){text=HxOverrides.substr(text,0,this.highlightAnchor)+HxOverrides.substr(text,this.cursorX,text.length);this.cursorX=this.highlightAnchor}else{text=HxOverrides.substr(text,0,this.cursorX)+HxOverrides.substr(text,this.highlightAnchor,text.length)}}let off=this.t.TEXT_OFFSET*this.ops.scaleFactor;let lineHeight=this.t.ELEMENT_H*this.ops.scaleFactor;let cursorHeight=lineHeight-this.buttonOffsetY*3;if(this.highlightAnchor!=this.cursorX){let istart=this.cursorX;let iend=this.highlightAnchor;if(this.highlightAnchor<this.cursorX){istart=this.highlightAnchor;iend=this.cursorX}let hlstr=HxOverrides.substr(text,istart,iend-istart);let hlstrw=this.ops.font.width(this.fontSize,hlstr);let startoff=this.ops.font.width(this.fontSize,HxOverrides.substr(text,0,istart));let hlStart=align==0?this._x+startoff+off:this._x+this._w-hlstrw-off;if(align==2){hlStart-=this.ops.font.width(this.fontSize,HxOverrides.substr(text,iend,text.length))}this.g.set_color(this.t.ACCENT_SELECT_COL);this.g.fillRect(hlStart,this._y+this.buttonOffsetY*1.5,hlstrw,cursorHeight)}let str=align==0?HxOverrides.substr(text,0,this.cursorX):text.substring(this.cursorX,text.length);let strw=this.ops.font.width(this.fontSize,str);let cursorX=align==0?this._x+strw+off:this._x+this._w-strw-off;this.g.set_color(this.t.TEXT_COL);this.g.fillRect(cursorX,this._y+this.buttonOffsetY*1.5,2*this.ops.scaleFactor,cursorHeight);this.textSelected=text;if(liveUpdate&&this.textSelectedHandle!=null){this.textSelectedHandle.changed=this.textSelectedHandle.text!=this.textSelected;this.textSelectedHandle.text=this.textSelected}}textInput(handle,label,align,editable,liveUpdate){if(liveUpdate==null){liveUpdate=false}if(editable==null){editable=true}if(align==null){align=0}if(label==null){label=""}if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)){this.endElement();return handle.text}let hover=this.getHover();if(hover&&zui_Zui.onTextHover!=null){zui_Zui.onTextHover()}this.g.set_color(hover?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);let g=this.g;let fill=this.t.FILL_ACCENT_BG;let x=this._x+this.buttonOffsetY;let y=this._y+this.buttonOffsetY;let w=this._w-this.buttonOffsetY*2;let h=this.t.BUTTON_H*this.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}if(fill){g.fillRect(x,y-1,w,h+1)}else{g.drawRect(x,y,w,h,strength)}let released=this.getReleased();if(this.submitTextHandle==handle&&released){this.isTyping=true;this.textSelectedHandle=this.submitTextHandle;this.submitTextHandle=null;this.setCursorToInput(align)}let startEdit=released||this.tabPressed;handle.changed=false;if(this.textSelectedHandle!=handle&&startEdit){this.startTextEdit(handle,align)}if(this.textSelectedHandle==handle){this.updateTextEdit(align,editable,liveUpdate)}if(this.submitTextHandle==handle){this.submitTextEdit()}if(label!=""){this.g.set_color(this.t.LABEL_COL);let labelAlign=align==2?0:2;this.drawString(this.g,label,labelAlign==0?null:0,0,labelAlign)}this.g.set_color(this.t.TEXT_COL);if(this.textSelectedHandle!=handle){this.drawString(this.g,handle.text,null,0,align)}else{this.drawString(this.g,this.textSelected,null,0,align,false)}this.endElement();return handle.text}setCursorToInput(align){let off=align==0?this.t.TEXT_OFFSET*this.ops.scaleFactor:this._w-this.ops.font.width(this.fontSize,this.textSelected);let x=this.inputX-(this._windowX+this._x+off);this.cursorX=0;while(this.cursorX<this.textSelected.length&&this.ops.font.width(this.fontSize,HxOverrides.substr(this.textSelected,0,this.cursorX))<x)this.cursorX++;this.highlightAnchor=this.cursorX}deselectText(){if(this.textSelectedHandle==null){return}this.submitTextHandle=this.textSelectedHandle;this.textToSubmit=this.textSelected;this.textSelectedHandle=null;this.isTyping=false;if(this.currentWindow!=null){this.currentWindow.redraws=2}if(kha_input_Keyboard.get()!=null){kha_input_Keyboard.get().hide()}this.highlightAnchor=this.cursorX;if(zui_Zui.onDeselectText!=null){zui_Zui.onDeselectText()}}button(text,align,label){if(label==null){label=""}if(align==null){align=1}if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)){this.endElement();return false}let released=this.getReleased();let pushed=this.getPushed();let hover=this.getHover();if(released){this.changed=true}this.g.set_color(pushed?this.t.BUTTON_PRESSED_COL:hover?this.t.BUTTON_HOVER_COL:this.t.BUTTON_COL);let g=this.g;let fill=this.t.FILL_BUTTON_BG;let x=this._x+this.buttonOffsetY;let y=this._y+this.buttonOffsetY;let w=this._w-this.buttonOffsetY*2;let h=this.t.BUTTON_H*this.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}if(fill){g.fillRect(x,y-1,w,h+1)}else{g.drawRect(x,y,w,h,strength)}this.g.set_color(this.t.BUTTON_TEXT_COL);this.drawString(this.g,text,null,0,align);if(label!=""){this.g.set_color(this.t.LABEL_COL);this.drawString(this.g,label,null,0,align==2?0:2)}this.endElement();return released}check(handle,text,label){if(label==null){label=""}if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)){this.endElement();return handle.selected}if(this.getReleased()){handle.selected=!handle.selected;handle.changed=this.changed=true}else{handle.changed=false}let hover=this.getHover();this.drawCheck(handle.selected,hover);this.g.set_color(this.t.TEXT_COL);this.drawString(this.g,text,this.titleOffsetX,0,0);if(label!=""){this.g.set_color(this.t.LABEL_COL);this.drawString(this.g,label,null,0,2)}this.endElement();return handle.selected}combo(handle,texts,label,showLabel,align,searchBar){if(searchBar==null){searchBar=true}if(align==null){align=0}if(showLabel==null){showLabel=false}if(label==null){label=""}if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)){this.endElement();return handle.position}if(this.getReleased()){if(this.comboSelectedHandle==null){this.inputEnabled=false;this.comboSelectedHandle=handle;this.comboSelectedWindow=this.currentWindow;this.comboSelectedAlign=align;this.comboSelectedTexts=texts;this.comboSelectedLabel=label;this.comboSelectedX=this._x+this._windowX|0;this.comboSelectedY=this._y+this._windowY+this.t.ELEMENT_H*this.ops.scaleFactor|0;this.comboSelectedW=this._w|0;this.comboSearchBar=searchBar;let _g=0;while(_g<texts.length){let t=texts[_g];++_g;let w=(this.ops.font.width(this.fontSize,t)|0)+10;if(this.comboSelectedW<w){this.comboSelectedW=w}}if(this.comboSelectedW>this._w*2){this.comboSelectedW=this._w*2|0}if(this.comboSelectedW>this._w){this.comboSelectedW+=this.t.TEXT_OFFSET*this.ops.scaleFactor|0}this.comboToSubmit=handle.position;this.comboInitialValue=handle.position}}if(handle==this.comboSelectedHandle&&(this.isEscapeDown||this.inputReleasedR)){handle.position=this.comboInitialValue;handle.changed=this.changed=true;this.submitComboHandle=null}else if(handle==this.submitComboHandle){handle.position=this.comboToSubmit;this.submitComboHandle=null;handle.changed=this.changed=true}else{handle.changed=false}let hover=this.getHover();if(hover){this.g.set_color(this.t.ACCENT_HOVER_COL);let g=this.g;let fill=this.t.FILL_ACCENT_BG;let x=this._x+this.buttonOffsetY;let y=this._y+this.buttonOffsetY;let w=this._w-this.buttonOffsetY*2;let h=this.t.BUTTON_H*this.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}if(fill){g.fillRect(x,y-1,w,h+1)}else{g.drawRect(x,y,w,h,strength)}}else{this.g.set_color(this.t.ACCENT_COL);let g=this.g;let fill=this.t.FILL_ACCENT_BG;let x=this._x+this.buttonOffsetY;let y=this._y+this.buttonOffsetY;let w=this._w-this.buttonOffsetY*2;let h=this.t.BUTTON_H*this.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}if(fill){g.fillRect(x,y-1,w,h+1)}else{g.drawRect(x,y,w,h,strength)}}let x=this._x+this._w-this.arrowOffsetX-8;let y=this._y+this.arrowOffsetY+3;this.g.fillTriangle(x,y,x+this.t.ARROW_SIZE*this.ops.scaleFactor,y,x+this.t.ARROW_SIZE*this.ops.scaleFactor/2,y+this.t.ARROW_SIZE*this.ops.scaleFactor/2);if(showLabel&&label!=""){if(align==0){this._x-=15}this.g.set_color(this.t.LABEL_COL);this.drawString(this.g,label,null,0,align==0?2:0);if(align==0){this._x+=15}}if(align==2){this._x-=15}this.g.set_color(this.t.TEXT_COL);if(handle.position<texts.length){this.drawString(this.g,texts[handle.position],null,0,align)}if(align==2){this._x+=15}this.endElement();return handle.position}slider(handle,text,from,to,filled,precision,displayValue,align,textEdit){if(textEdit==null){textEdit=true}if(align==null){align=2}if(displayValue==null){displayValue=true}if(precision==null){precision=100}if(filled==null){filled=false}if(to==null){to=1}if(from==null){from=0}if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)){this.endElement();return handle.value}if(this.getStarted()){this.scrollHandle=handle;this.isScrolling=true;this.changed=handle.changed=true;if(zui_Zui.touchTooltip){this.sliderTooltip=true;this.sliderTooltipX=this._x+this._windowX;this.sliderTooltipY=this._y+this._windowY;this.sliderTooltipW=this._w}}else{handle.changed=false}if(handle==this.scrollHandle&&this.inputDX!=0){let range=to-from;let sliderX=this._x+this._windowX+this.buttonOffsetY;let sliderW=this._w-this.buttonOffsetY*2;let step=range/sliderW;let value=from+(this.inputX-sliderX)*step;handle.value=Math.round(value*precision)/precision;if(handle.value<from){handle.value=from}else if(handle.value>to){handle.value=to}handle.changed=this.changed=true}let hover=this.getHover();this.drawSlider(handle.value,from,to,filled,hover);let startEdit=(this.getReleased()||this.tabPressed)&&textEdit;if(startEdit){handle.text=handle.value+"";this.startTextEdit(handle);handle.changed=this.changed=true}let lalign=align==0?2:0;if(this.textSelectedHandle==handle){this.updateTextEdit(lalign)}if(this.submitTextHandle==handle){this.submitTextEdit();try{let code=handle.text;handle.value=eval(code)}catch(_g){}handle.changed=this.changed=true}this.g.set_color(this.t.LABEL_COL);this.drawString(this.g,text,null,0,align);if(displayValue){this.g.set_color(this.t.TEXT_COL);if(this.textSelectedHandle!=handle){this.drawString(this.g,Math.round(handle.value*precision)/precision+"",null,0,lalign)}else{this.drawString(this.g,this.textSelected,null,0,lalign)}}this.endElement();return handle.value}tooltip(text){this.tooltipText=text;this.tooltipY=this._y+this._windowY}drawArrow(selected){let x=this._x+this.arrowOffsetX;let y=this._y+this.arrowOffsetY;this.g.set_color(this.t.TEXT_COL);if(selected){this.g.fillTriangle(x,y,x+this.t.ARROW_SIZE*this.ops.scaleFactor,y,x+this.t.ARROW_SIZE*this.ops.scaleFactor/2,y+this.t.ARROW_SIZE*this.ops.scaleFactor)}else{this.g.fillTriangle(x,y,x,y+this.t.ARROW_SIZE*this.ops.scaleFactor,x+this.t.ARROW_SIZE*this.ops.scaleFactor,y+this.t.ARROW_SIZE*this.ops.scaleFactor/2)}}drawTree(selected){let SIGN_W=7*this.ops.scaleFactor;let x=this._x+this.arrowOffsetX+1;let y=this._y+this.arrowOffsetY+1;this.g.set_color(this.t.TEXT_COL);if(selected){this.g.fillRect(x,y+SIGN_W/2-1,SIGN_W,SIGN_W/8)}else{this.g.fillRect(x,y+SIGN_W/2-1,SIGN_W,SIGN_W/8);this.g.fillRect(x+SIGN_W/2-1,y,SIGN_W/8,SIGN_W)}}drawCheck(selected,hover){let x=this._x+this.checkOffsetX;let y=this._y+this.checkOffsetY;this.g.set_color(hover?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);let g=this.g;let fill=this.t.FILL_ACCENT_BG;let w=this.t.CHECK_SIZE*this.ops.scaleFactor;let h=this.t.CHECK_SIZE*this.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}if(fill){g.fillRect(x,y-1,w,h+1)}else{g.drawRect(x,y,w,h,strength)}if(selected){this.g.set_color(-1);if(!this.enabled){this.fadeColor()}let size=this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor|0;this.g.drawScaledImage(this.checkSelectImage,x+this.checkSelectOffsetX,y+this.checkSelectOffsetY,size,size)}}drawSlider(value,from,to,filled,hover){let x=this._x+this.buttonOffsetY;let y=this._y+this.buttonOffsetY;let w=this._w-this.buttonOffsetY*2;this.g.set_color(hover?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);let g=this.g;let fill=this.t.FILL_ACCENT_BG;let h=this.t.BUTTON_H*this.ops.scaleFactor;let strength=0;if(strength==0){strength=1}if(!this.enabled){this.fadeColor()}if(fill){g.fillRect(x,y-1,w,h+1)}else{g.drawRect(x,y,w,h,strength)}this.g.set_color(hover?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);let offset=(value-from)/(to-from);let barW=8*this.ops.scaleFactor;let sliderX=filled?x:x+(w-barW)*offset;sliderX=Math.max(Math.min(sliderX,x+(w-barW)),x);let sliderW=filled?w*offset:barW;sliderW=Math.max(Math.min(sliderW,w),0);let g1=this.g;let h1=this.t.BUTTON_H*this.ops.scaleFactor;let strength1=0;if(strength1==0){strength1=1}if(!this.enabled){this.fadeColor()}g1.fillRect(sliderX,y-1,sliderW,h1+1)}drawCombo(){if(this.comboSelectedHandle==null){return}let _g=this.g;this.globalG.set_color(this.t.SEPARATOR_COL);this.globalG.begin(false);let comboH=(this.comboSelectedTexts.length+(this.comboSelectedLabel!=""?1:0)+(this.comboSearchBar?1:0))*(this.t.ELEMENT_H*this.ops.scaleFactor|0);let distTop=this.comboSelectedY-comboH-(this.t.ELEMENT_H*this.ops.scaleFactor|0)-this.windowBorderTop;let distBottom=kha_System.windowHeight()-this.windowBorderBottom-(this.comboSelectedY+comboH);let unrollUp=distBottom<0&&distBottom<distTop;this.beginRegion(this.globalG,this.comboSelectedX,this.comboSelectedY,this.comboSelectedW);if(this.isKeyPressed||this.inputWheelDelta!=0){let arrowUp=this.isKeyPressed&&this.key==(unrollUp?40:38);let arrowDown=this.isKeyPressed&&this.key==(unrollUp?38:40);let wheelUp=unrollUp&&this.inputWheelDelta>0||!unrollUp&&this.inputWheelDelta<0;let wheelDown=unrollUp&&this.inputWheelDelta<0||!unrollUp&&this.inputWheelDelta>0;if((arrowUp||wheelUp)&&this.comboToSubmit>0){let step=1;if(this.comboSearchBar&&this.textSelected.length>0){let search=this.textSelected.toLowerCase();while(this.comboSelectedTexts[this.comboToSubmit-step].toLowerCase().indexOf(search)<0&&this.comboToSubmit-step>0)++step;if(this.comboSelectedTexts[this.comboToSubmit-step].toLowerCase().indexOf(search)<0){step=0}}this.comboToSubmit-=step;this.submitComboHandle=this.comboSelectedHandle}else if((arrowDown||wheelDown)&&this.comboToSubmit<this.comboSelectedTexts.length-1){let step=1;if(this.comboSearchBar&&this.textSelected.length>0){let search=this.textSelected.toLowerCase();while(this.comboSelectedTexts[this.comboToSubmit+step].toLowerCase().indexOf(search)<0&&this.comboToSubmit+step<this.comboSelectedTexts.length-1)++step;if(this.comboSelectedTexts[this.comboToSubmit+step].toLowerCase().indexOf(search)<0){step=0}}this.comboToSubmit+=step;this.submitComboHandle=this.comboSelectedHandle}if(this.comboSelectedWindow!=null){this.comboSelectedWindow.redraws=2}}this.inputEnabled=true;let _BUTTON_COL=this.t.BUTTON_COL;let _ELEMENT_OFFSET=this.t.ELEMENT_OFFSET;this.t.ELEMENT_OFFSET=0;let unrollRight=this._x+this.comboSelectedW*2<kha_System.windowWidth()-this.windowBorderRight?1:-1;let resetPosition=false;let search="";if(this.comboSearchBar){if(unrollUp){this._y-=this.t.ELEMENT_H*this.ops.scaleFactor*2}let comboSearchHandle=zui_Handle.global.nest(0,null);if(zui_Zui.comboFirst){comboSearchHandle.text=""}this.fill(0,0,this._w/this.ops.scaleFactor,this.t.ELEMENT_H*this.ops.scaleFactor/this.ops.scaleFactor,this.t.SEPARATOR_COL);search=this.textInput(comboSearchHandle,"",0,true,true).toLowerCase();if(this.isReleased){zui_Zui.comboFirst=true}if(zui_Zui.comboFirst){this.startTextEdit(comboSearchHandle)}resetPosition=comboSearchHandle.changed}let _g1=0;let _g2=this.comboSelectedTexts.length;while(_g1<_g2){let i=_g1++;if(search.length>0&&this.comboSelectedTexts[i].toLowerCase().indexOf(search)<0){continue}if(resetPosition){this.comboToSubmit=this.comboSelectedHandle.position=i;this.submitComboHandle=this.comboSelectedHandle;resetPosition=false}if(unrollUp){this._y-=this.t.ELEMENT_H*this.ops.scaleFactor*2}this.t.BUTTON_COL=i==this.comboSelectedHandle.position?this.t.ACCENT_SELECT_COL:this.t.SEPARATOR_COL;this.fill(0,0,this._w/this.ops.scaleFactor,this.t.ELEMENT_H*this.ops.scaleFactor/this.ops.scaleFactor,this.t.SEPARATOR_COL);if(this.button(this.comboSelectedTexts[i],this.comboSelectedAlign)){this.comboToSubmit=i;this.submitComboHandle=this.comboSelectedHandle;if(this.comboSelectedWindow!=null){this.comboSelectedWindow.redraws=2}break}if(this._y+this.t.ELEMENT_H*this.ops.scaleFactor>kha_System.windowHeight()-this.windowBorderBottom||this._y-this.t.ELEMENT_H*this.ops.scaleFactor*2<this.windowBorderTop){this._x+=this.comboSelectedW*unrollRight;this._y=this.comboSelectedY}}this.t.BUTTON_COL=_BUTTON_COL;this.t.ELEMENT_OFFSET=_ELEMENT_OFFSET;if(this.comboSelectedLabel!=""){if(unrollUp){this._y-=this.t.ELEMENT_H*this.ops.scaleFactor*2;this.fill(0,0,this._w/this.ops.scaleFactor,this.t.ELEMENT_H*this.ops.scaleFactor/this.ops.scaleFactor,this.t.SEPARATOR_COL);this.g.set_color(this.t.LABEL_COL);this.drawString(this.g,this.comboSelectedLabel,null,0,2);this._y+=this.t.ELEMENT_H*this.ops.scaleFactor;this.fill(0,0,this._w/this.ops.scaleFactor,this.ops.scaleFactor,this.t.ACCENT_SELECT_COL)}else{this.fill(0,0,this._w/this.ops.scaleFactor,this.t.ELEMENT_H*this.ops.scaleFactor/this.ops.scaleFactor,this.t.SEPARATOR_COL);this.fill(0,0,this._w/this.ops.scaleFactor,this.ops.scaleFactor,this.t.ACCENT_SELECT_COL);this.g.set_color(this.t.LABEL_COL);this.drawString(this.g,this.comboSelectedLabel,null,0,2)}}if((this.inputReleased||this.inputReleasedR||this.isEscapeDown||this.isReturnDown)&&!zui_Zui.comboFirst){this.comboSelectedHandle=null;zui_Zui.comboFirst=true}else{zui_Zui.comboFirst=false}this.inputEnabled=this.comboSelectedHandle==null;this.endRegion(false);this.globalG.end();this.g=_g}drawTooltip(bindGlobalG){if(this.sliderTooltip){if(bindGlobalG){this.globalG.begin(false)}this.globalG.set_font(this.ops.font);this.globalG.set_fontSize(this.fontSize*2);let text=Math.round(this.scrollHandle.value*100)/100+"";let xoff=this.ops.font.width(this.globalG.get_fontSize(),text)/2;let yoff=this.ops.font.height(this.globalG.get_fontSize());let x=Math.min(Math.max(this.sliderTooltipX,this.inputX),this.sliderTooltipX+this.sliderTooltipW);this.globalG.set_color(this.t.ACCENT_COL);this.globalG.fillRect(x-xoff,this.sliderTooltipY-yoff,xoff*2,yoff);this.globalG.set_color(this.t.TEXT_COL);this.globalG.drawString(text,x-xoff,this.sliderTooltipY-yoff);if(bindGlobalG){this.globalG.end()}}if(zui_Zui.touchTooltip&&this.textSelectedHandle!=null){if(bindGlobalG){this.globalG.begin(false)}this.globalG.set_font(this.ops.font);this.globalG.set_fontSize(this.fontSize*2);let xoff=this.ops.font.width(this.globalG.get_fontSize(),this.textSelected)/2;let yoff=this.ops.font.height(this.globalG.get_fontSize())/2;let x=kha_System.windowWidth()/2;let y=kha_System.windowHeight()/3;this.globalG.set_color(this.t.ACCENT_COL);this.globalG.fillRect(x-xoff,y-yoff,xoff*2,yoff*2);this.globalG.set_color(this.t.TEXT_COL);this.globalG.drawString(this.textSelected,x-xoff,y-yoff);if(bindGlobalG){this.globalG.end()}}if(this.tooltipText!=""||this.tooltipImg!=null){if(this.inputChanged()){this.tooltipShown=false;this.tooltipWait=this.inputDX==0&&this.inputDY==0}if(!this.tooltipShown){this.tooltipShown=true;this.tooltipX=this.inputX;this.tooltipTime=kha_Scheduler.time()}if(!this.tooltipWait&&kha_Scheduler.time()-this.tooltipTime>1){if(this.tooltipImg!=null){this.drawTooltipImage(bindGlobalG)}if(this.tooltipText!=""){this.drawTooltipText(bindGlobalG)}}}else{this.tooltipShown=false}}drawTooltipText(bindGlobalG){this.globalG.set_color(this.t.TEXT_COL);let lines=this.tooltipText.split("\n");let tooltipW=0;let _g=0;while(_g<lines.length){let line=lines[_g];++_g;let lineTooltipW=this.ops.font.width(this.fontSize,line);if(lineTooltipW>tooltipW){tooltipW=lineTooltipW}}this.tooltipX=Math.min(this.tooltipX,kha_System.windowWidth()-tooltipW-20);if(bindGlobalG){this.globalG.begin(false)}let fontHeight=this.ops.font.height(this.fontSize);let off=0;if(this.tooltipImg!=null){let w=this.tooltipImg.get_width();if(this.tooltipImgMaxWidth!=null&&w>this.tooltipImgMaxWidth){w=this.tooltipImgMaxWidth}off=this.tooltipImg.get_height()*(w/this.tooltipImg.get_width())|0}this.globalG.fillRect(this.tooltipX,this.tooltipY+off,tooltipW+20,fontHeight*lines.length);this.globalG.set_font(this.ops.font);this.globalG.set_fontSize(this.fontSize);this.globalG.set_color(this.t.ACCENT_COL);let _g1=0;let _g2=lines.length;while(_g1<_g2){let i=_g1++;this.globalG.drawString(lines[i],this.tooltipX+5,this.tooltipY+off+i*this.fontSize)}if(bindGlobalG){this.globalG.end()}}drawTooltipImage(bindGlobalG){let w=this.tooltipImg.get_width();if(this.tooltipImgMaxWidth!=null&&w>this.tooltipImgMaxWidth){w=this.tooltipImgMaxWidth}let h=this.tooltipImg.get_height()*(w/this.tooltipImg.get_width());this.tooltipX=Math.min(this.tooltipX,kha_System.windowWidth()-w-20);this.tooltipY=Math.min(this.tooltipY,kha_System.windowHeight()-h-20);if(bindGlobalG){this.globalG.begin(false)}this.globalG.set_color(-16777216);this.globalG.fillRect(this.tooltipX,this.tooltipY,w,h);this.globalG.set_color(-1);if(this.tooltipInvertY){this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY+h,w,-h)}else{this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY,w,h)}if(bindGlobalG){this.globalG.end()}}drawString(g,text,xOffset,yOffset,align,truncation){if(truncation==null){truncation=true}if(align==null){align=0}if(yOffset==null){yOffset=0}let fullText=text;if(truncation){while(text.length>0&&this.ops.font.width(this.fontSize,text)>this._w-6*this.ops.scaleFactor)text=HxOverrides.substr(text,0,text.length-1);if(text.length<fullText.length){text+="..";while(text.length>2&&this.ops.font.width(this.fontSize,text)>this._w-10*this.ops.scaleFactor)text=HxOverrides.substr(text,0,text.length-3)+"..";if(this.isHovered){this.tooltip(fullText)}}}if(zui_Zui.dynamicGlyphLoad){let _g=0;let _g1=text.length;while(_g<_g1){let i=_g++;if(HxOverrides.cca(text,i)>126&&kha_graphics2_Graphics.fontGlyphs.indexOf(HxOverrides.cca(text,i))==-1){kha_graphics2_Graphics.fontGlyphs.push(HxOverrides.cca(text,i));kha_graphics2_Graphics.fontGlyphs=kha_graphics2_Graphics.fontGlyphs.slice()}}}if(xOffset==null){xOffset=this.t.TEXT_OFFSET}xOffset*=this.ops.scaleFactor;g.set_font(this.ops.font);g.set_fontSize(this.fontSize);if(align==1){xOffset=this._w/2-this.ops.font.width(this.fontSize,text)/2}else if(align==2){xOffset=this._w-this.ops.font.width(this.fontSize,text)-this.t.TEXT_OFFSET*this.ops.scaleFactor}if(!this.enabled){this.fadeColor()}g.set_pipeline(this.rtTextPipeline);if(this.textColoring==null){g.drawString(text,this._x+xOffset,this._y+this.fontOffsetY+yOffset)}else{let _g=0;let _g1=this.textColoring.colorings;while(_g<_g1.length){let coloring=_g1[_g];++_g;let result=zui_Zui.extractColoring(text,coloring);if(result.colored!=""){g.set_color(coloring.color);g.drawString(result.colored,this._x+xOffset,this._y+this.fontOffsetY+yOffset)}text=result.uncolored}g.set_color(this.textColoring.default_color);g.drawString(text,this._x+xOffset,this._y+this.fontOffsetY+yOffset)}g.set_pipeline(null)}endElement(elementSize){if(elementSize==null){elementSize=this.t.ELEMENT_H*this.ops.scaleFactor+this.t.ELEMENT_OFFSET*this.ops.scaleFactor}if(this.currentWindow==null||this.currentWindow.layout==0){if(this.curRatio==-1||this.ratios!=null&&this.curRatio==this.ratios.length-1){this._y+=elementSize;if(this.ratios!=null&&this.curRatio==this.ratios.length-1){this.curRatio=-1;this.ratios=null;this._x=this.xBeforeSplit;this._w=this.wBeforeSplit;this.highlightFullRow=false}}else{this.curRatio++;this._x+=this._w;let ratio=this.ratios[this.curRatio];this._w=(ratio<0?-ratio:ratio*this.wBeforeSplit)|0}}else{this._x+=this._w+this.t.ELEMENT_OFFSET*this.ops.scaleFactor}}row(ratios){this.ratios=ratios;this.curRatio=0;this.xBeforeSplit=this._x;this.wBeforeSplit=this._w;let ratio=ratios[this.curRatio];this._w=(ratio<0?-ratio:ratio*this._w)|0}indent(bothSides){if(bothSides==null){bothSides=true}this._x+=this.t.TAB_W*this.ops.scaleFactor|0;this._w-=this.t.TAB_W*this.ops.scaleFactor|0;if(bothSides){this._w-=this.t.TAB_W*this.ops.scaleFactor|0}}unindent(bothSides){if(bothSides==null){bothSides=true}this._x-=this.t.TAB_W*this.ops.scaleFactor|0;this._w+=this.t.TAB_W*this.ops.scaleFactor|0;if(bothSides){this._w+=this.t.TAB_W*this.ops.scaleFactor|0}}fadeColor(){this.g.set_color(kha_Color.fromFloats(((this.g.get_color()&16711680)>>>16)*.00392156862745098,((this.g.get_color()&65280)>>>8)*.00392156862745098,(this.g.get_color()&255)*.00392156862745098,.25))}fill(x,y,w,h,color){this.g.set_color(color);if(!this.enabled){this.fadeColor()}this.g.fillRect(this._x+x*this.ops.scaleFactor,this._y+y*this.ops.scaleFactor-1,w*this.ops.scaleFactor,h*this.ops.scaleFactor);this.g.set_color(-1)}isVisible(elemH){if(this.currentWindow==null){return true}if(this._y+elemH>this.windowHeaderH){return this._y<this.currentWindow.texture.get_height()}else{return false}}getReleased(elemH){if(elemH==null){elemH=-1}this.isReleased=this.enabled&&this.inputEnabled&&this.inputReleased&&this.getHover(elemH)&&this.getInitialHover(elemH);return this.isReleased}getPushed(elemH){if(elemH==null){elemH=-1}this.isPushed=this.enabled&&this.inputEnabled&&this.inputDown&&this.getHover(elemH)&&this.getInitialHover(elemH);return this.isPushed}getStarted(elemH){if(elemH==null){elemH=-1}this.isStarted=this.enabled&&this.inputEnabled&&this.inputStarted&&this.getHover(elemH);return this.isStarted}getInitialHover(elemH){if(elemH==null){elemH=-1}if(this.scissor&&this.inputY<this._windowY+this.windowHeaderH){return false}if(elemH==-1){elemH=this.t.ELEMENT_H*this.ops.scaleFactor}if(this.enabled&&this.inputEnabled&&this.inputStartedX>=this._windowX+this._x&&this.inputStartedX<this._windowX+this._x+this._w&&this.inputStartedY>=this._windowY+this._y){return this.inputStartedY<this._windowY+this._y+elemH}else{return false}}getHover(elemH){if(elemH==null){elemH=-1}if(this.scissor&&this.inputY<this._windowY+this.windowHeaderH){return false}if(elemH==-1){elemH=this.t.ELEMENT_H*this.ops.scaleFactor}this.isHovered=this.enabled&&this.inputEnabled&&this.inputX>=this._windowX+(this.highlightFullRow?0:this._x)&&this.inputX<this._windowX+this._x+(this.highlightFullRow?this._windowW:this._w)&&this.inputY>=this._windowY+this._y&&this.inputY<this._windowY+this._y+elemH;return this.isHovered}getInputInRect(x,y,w,h,scale){if(scale==null){scale=1}if(this.enabled&&this.inputEnabled&&this.inputX>=x*scale&&this.inputX<(x+w)*scale&&this.inputY>=y*scale){return this.inputY<(y+h)*scale}else{return false}}onMouseDown(button,x,y){if(this.penInUse){return}if(button==0){this.inputStarted=true}else{this.inputStartedR=true}if(button==0){this.inputDown=true}else{this.inputDownR=true}this.inputStartedTime=kha_Scheduler.time();this.inputStartedX=x;this.inputStartedY=y}onMouseUp(button,x,y){if(this.penInUse){return}if(this.touchHoldActivated){this.touchHoldActivated=false;return}if(this.isScrolling){this.isScrolling=false;this.scrollHandle=null;this.sliderTooltip=false;if(x==this.inputStartedX&&y==this.inputStartedY){if(button==0){this.inputReleased=true}else{this.inputReleasedR=true}}}else if(button==0){this.inputReleased=true}else{this.inputReleasedR=true}if(button==0){this.inputDown=false}else{this.inputDownR=false}this.deselectText()}onMouseMove(x,y,movementX,movementY){this.setInputPosition(x,y)}onMouseWheel(delta){this.inputWheelDelta=delta}setInputPosition(x,y){this.inputDX+=x-this.inputX;this.inputDY+=y-this.inputY;this.inputX=x;this.inputY=y}onPenDown(x,y,pressure){this.onMouseDown(0,x,y)}onPenUp(x,y,pressure){if(this.inputStarted){this.inputStarted=false;this.penInUse=true;return}this.onMouseUp(0,x,y);this.penInUse=true}onPenMove(x,y,pressure){this.onMouseMove(x,y,0,0)}onKeyDown(code){this.key=code;this.isKeyPressed=true;this.isKeyDown=true;zui_Zui.keyRepeatTime=kha_Scheduler.time()+.4;switch(code){case 8:this.isBackspaceDown=true;break;case 9:this.isTabDown=true;break;case 13:this.isReturnDown=true;break;case 16:this.isShiftDown=true;break;case 17:this.isCtrlDown=true;break;case 18:this.isAltDown=true;break;case 27:this.isEscapeDown=true;break;case 32:this.char=" ";break;case 46:this.isDeleteDown=true;break;case 65:this.isADown=true;break;default:}}onKeyUp(code){this.isKeyDown=false;switch(code){case 8:this.isBackspaceDown=false;break;case 9:this.isTabDown=false;break;case 13:this.isReturnDown=false;break;case 16:this.isShiftDown=false;break;case 17:this.isCtrlDown=false;break;case 18:this.isAltDown=false;break;case 27:this.isEscapeDown=false;break;case 46:this.isDeleteDown=false;break;case 65:this.isADown=false;break;default:}}onKeyPress(char){this.char=char;this.isKeyPressed=true}onCut(){zui_Zui.isCut=true;return this.onCopy()}onCopy(){zui_Zui.isCopy=true;return zui_Zui.textToCopy}onPaste(s){zui_Zui.isPaste=true;zui_Zui.textToPaste=s}resize(handle,w,h){handle.redraws=2;if(handle.texture!=null){handle.texture.unload()}if(w<1){w=1}if(h<1){h=1}handle.texture=kha_Image.createRenderTarget(w,h,0,0,1);handle.texture.get_g2().set_imageScaleQuality(1)}static extractColoring(text,col){let res={colored:"",uncolored:""};let coloring=false;let startFrom=0;let startLength=0;let _g=0;let _g1=text.length;while(_g<_g1){let i=_g++;let skipFirst=false;let length=zui_Zui.checkStart(i,text,col.start);let separatedLeft;if(i!=0){let code=HxOverrides.cca(text,i-1);separatedLeft=!(code>=65&&code<=90||code>=97&&code<=122)}else{separatedLeft=true}let separatedRight;if(i+length<text.length){let code=HxOverrides.cca(text,i+length);separatedRight=!(code>=65&&code<=90||code>=97&&code<=122)}else{separatedRight=true}let isSeparated=separatedLeft&&separatedRight;if(length>0&&(!coloring||col.end=="")&&(!col.separated||isSeparated)){coloring=true;startFrom=i;startLength=length;if(col.end!=""&&col.end!="\n"){skipFirst=true}}else if(col.end==""){if(i==startFrom+startLength){coloring=false}}else if(HxOverrides.substr(text,i,col.end.length)==col.end){coloring=false}let b=coloring&&!skipFirst;res.colored+=b?text.charAt(i):" ";res.uncolored+=b?" ":text.charAt(i)}return res}static checkStart(i,text,start){let _g=0;while(_g<start.length){let s=start[_g];++_g;if(HxOverrides.substr(text,i,s.length)==s){return s.length}}return 0}}$hxClasses["zui.Zui"]=zui_Zui;zui_Zui.__name__="zui.Zui";Object.assign(zui_Zui.prototype,{__class__:zui_Zui,isScrolling:null,isTyping:null,enabled:null,isStarted:null,isPushed:null,isHovered:null,isReleased:null,changed:null,imageInvertY:null,scrollEnabled:null,alwaysRedraw:null,highlightOnSelect:null,tabSwitchEnabled:null,textColoring:null,windowBorderTop:null,windowBorderBottom:null,windowBorderRight:null,highlightFullRow:null,touchHoldActivated:null,sliderTooltip:null,sliderTooltipX:null,sliderTooltipY:null,sliderTooltipW:null,inputRegistered:null,inputEnabled:null,inputX:null,inputY:null,inputStartedX:null,inputStartedY:null,inputDX:null,inputDY:null,inputWheelDelta:null,inputStarted:null,inputStartedR:null,inputReleased:null,inputReleasedR:null,inputDown:null,inputDownR:null,penInUse:null,isKeyPressed:null,isKeyDown:null,isShiftDown:null,isCtrlDown:null,isAltDown:null,isADown:null,isBackspaceDown:null,isDeleteDown:null,isEscapeDown:null,isReturnDown:null,isTabDown:null,key:null,char:null,inputStartedTime:null,cursorX:null,highlightAnchor:null,ratios:null,curRatio:null,xBeforeSplit:null,wBeforeSplit:null,g:null,t:null,ops:null,globalG:null,rtTextPipeline:null,fontSize:null,fontOffsetY:null,arrowOffsetX:null,arrowOffsetY:null,titleOffsetX:null,buttonOffsetY:null,checkOffsetX:null,checkOffsetY:null,checkSelectOffsetX:null,checkSelectOffsetY:null,radioOffsetX:null,radioOffsetY:null,radioSelectOffsetX:null,radioSelectOffsetY:null,scrollAlign:null,imageScrollAlign:null,_x:null,_y:null,_w:null,_h:null,_windowX:null,_windowY:null,_windowW:null,_windowH:null,currentWindow:null,windowEnded:null,scrollHandle:null,dragHandle:null,windowHeaderW:null,windowHeaderH:null,restoreX:null,restoreY:null,textSelectedHandle:null,textSelected:null,submitTextHandle:null,textToSubmit:null,tabPressed:null,tabPressedHandle:null,comboSelectedHandle:null,comboSelectedWindow:null,comboSelectedAlign:null,comboSelectedTexts:null,comboSelectedLabel:null,comboSelectedX:null,comboSelectedY:null,comboSelectedW:null,comboSearchBar:null,submitComboHandle:null,comboToSubmit:null,comboInitialValue:null,tooltipText:null,tooltipImg:null,tooltipImgMaxWidth:null,tooltipInvertY:null,tooltipX:null,tooltipY:null,tooltipShown:null,tooltipWait:null,tooltipTime:null,tabNames:null,tabColors:null,tabHandle:null,tabScroll:null,tabVertical:null,scissor:null,elementsBaked:null,checkSelectImage:null});function $getIterator(o){if(o instanceof Array)return new haxe_iterators_ArrayIterator(o);else return o.iterator()}function $bind(o,m){if(m==null)return null;if(m.__id__==null)m.__id__=$global.$haxeUID++;var f;if(o.hx__closures__==null)o.hx__closures__={};else f=o.hx__closures__[m.__id__];if(f==null){f=m.bind(o);o.hx__closures__[m.__id__]=f}return f}$global.$haxeUID|=0;if(typeof performance!="undefined"?typeof performance.now=="function":false){HxOverrides.now=performance.now.bind(performance)}$hxClasses["Math"]=Math;if(String.fromCodePoint==null)String.fromCodePoint=function(c){return c<65536?String.fromCharCode(c):String.fromCharCode((c>>10)+55232)+String.fromCharCode((c&1023)+56320)};{String.prototype.__class__=$hxClasses["String"]=String;String.__name__="String";$hxClasses["Array"]=Array;Array.__name__="Array";Date.prototype.__class__=$hxClasses["Date"]=Date;Date.__name__="Date";var Int={};var Dynamic={};var Float=Number;var Bool=Boolean;var Class={};var Enum={}}haxe_ds_ObjectMap.count=0;js_Boot.__toStr={}.toString;arm_Base.isResizing=false;arm_Base.uiEnabled=true;arm_Base.resizing=new armory_system_Signal;iron_Trait._hx_skip_constructor=false;armory_renderpath_NishitaData.lutHeightSteps=128;armory_renderpath_NishitaData.lutAngleSteps=128;armory_renderpath_NishitaData.jSteps=8;armory_renderpath_NishitaData.radiusAtmo=6420;armory_renderpath_NishitaData.radiusPlanet=6360;armory_renderpath_NishitaData.rayleighCoeff=new iron_math_Vec3(55e-7,13e-6,224e-7);armory_renderpath_NishitaData.rayleighScale=8e3;armory_renderpath_NishitaData.mieCoeff=2e-5;armory_renderpath_NishitaData.mieScale=1200;armory_renderpath_NishitaData.ozoneCoeff=new iron_math_Vec3(159051840791988e-20,9.670704118097e-7,7.309568762914e-8);armory_renderpath_RenderPathCreator.setTargetMeshes=armory_renderpath_RenderPathForward.setTargetMeshes;armory_renderpath_RenderPathCreator.drawMeshes=armory_renderpath_RenderPathForward.drawMeshes;armory_system_Event.events=new haxe_ds_StringMap;zui_Handle.ptrCounter=0;zui_Handle.global=new zui_Handle;armory_ui_Canvas.assetMap=new haxe_ds_IntMap;armory_ui_Canvas.themes=[];armory_ui_Canvas.events=[];armory_ui_Canvas.screenW=-1;armory_ui_Canvas.screenH=-1;armory_ui_Canvas.imageScaleQuality=0;armory_ui_Canvas.h=new zui_Handle;armory_ui_Themes.light={NAME:"Default Light",WINDOW_BG_COL:-1052689,WINDOW_TINT_COL:-14540254,ACCENT_COL:-1118482,ACCENT_HOVER_COL:-4473925,ACCENT_SELECT_COL:-5592406,BUTTON_COL:-3355444,BUTTON_TEXT_COL:-14540254,BUTTON_HOVER_COL:-5000269,BUTTON_PRESSED_COL:-5131855,TEXT_COL:-6710887,LABEL_COL:-5592406,SEPARATOR_COL:-6710887,HIGHLIGHT_COL:-14656100,CONTEXT_COL:-5592406,PANEL_BG_COL:-5592406,FONT_SIZE:26,ELEMENT_W:200,ELEMENT_H:48,ELEMENT_OFFSET:8,ARROW_SIZE:10,BUTTON_H:44,CHECK_SIZE:30,CHECK_SELECT_SIZE:16,SCROLL_W:12,TEXT_OFFSET:16,TAB_W:24,FILL_WINDOW_BG:false,FILL_BUTTON_BG:true,FILL_ACCENT_BG:false,LINK_STYLE:0,FULL_TABS:false};haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe_io_FPHelper.helper=new DataView(new ArrayBuffer(8));iron_App.traitInits=[];iron_App.traitUpdates=[];iron_App.traitLateUpdates=[];iron_App.traitFixedUpdates=[];iron_App.traitRenders=[];iron_App.traitRenders2D=[];iron_App.pauseUpdates=false;iron_App.time=0;iron_App.lastw=-1;iron_App.lasth=-1;iron_Scene.uidCounter=0;iron_Scene.framePassed=true;iron_data_Data.cachedSceneRaws=new haxe_ds_StringMap;iron_data_Data.cachedMeshes=new haxe_ds_StringMap;iron_data_Data.cachedLights=new haxe_ds_StringMap;iron_data_Data.cachedCameras=new haxe_ds_StringMap;iron_data_Data.cachedMaterials=new haxe_ds_StringMap;iron_data_Data.cachedParticles=new haxe_ds_StringMap;iron_data_Data.cachedWorlds=new haxe_ds_StringMap;iron_data_Data.cachedShaders=new haxe_ds_StringMap;iron_data_Data.cachedBlobs=new haxe_ds_StringMap;iron_data_Data.cachedImages=new haxe_ds_StringMap;iron_data_Data.cachedFonts=new haxe_ds_StringMap;iron_data_Data.assetsLoaded=0;iron_data_Data.loadingMeshes=new haxe_ds_StringMap;iron_data_Data.loadingLights=new haxe_ds_StringMap;iron_data_Data.loadingCameras=new haxe_ds_StringMap;iron_data_Data.loadingMaterials=new haxe_ds_StringMap;iron_data_Data.loadingParticles=new haxe_ds_StringMap;iron_data_Data.loadingWorlds=new haxe_ds_StringMap;iron_data_Data.loadingShaders=new haxe_ds_StringMap;iron_data_Data.loadingSceneRaws=new haxe_ds_StringMap;iron_data_Data.loadingBlobs=new haxe_ds_StringMap;iron_data_Data.loadingImages=new haxe_ds_StringMap;iron_data_Data.loadingFonts=new haxe_ds_StringMap;iron_data_Data.dataPath="."+"/"+"data"+"/";iron_data_MaterialData.uidCounter=0;iron_data_MaterialContext.num=0;iron_math_Mat4.helpVec=new iron_math_Vec4;iron_math_Mat4.helpMat=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation._hx_skip_constructor=false;iron_object_Animation.m1=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation.m2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation.vpos=new iron_math_Vec4;iron_object_Animation.vpos2=new iron_math_Vec4;iron_object_Animation.vscl=new iron_math_Vec4;iron_object_Animation.vscl2=new iron_math_Vec4;iron_object_Animation.q1=new iron_math_Quat;iron_object_Animation.q2=new iron_math_Quat;iron_object_Animation.q3=new iron_math_Quat;iron_object_Animation.vp=new iron_math_Vec4;iron_object_Animation.vs=new iron_math_Vec4;iron_object_BoneAnimation.skinMaxBones=128;iron_object_BoneAnimation.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.m1=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.m2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.vpos=new iron_math_Vec4;iron_object_BoneAnimation.vscl=new iron_math_Vec4;iron_object_BoneAnimation.q1=new iron_math_Quat;iron_object_BoneAnimation.q2=new iron_math_Quat;iron_object_BoneAnimation.q3=new iron_math_Quat;iron_object_BoneAnimation.vpos2=new iron_math_Vec4;iron_object_BoneAnimation.vscl2=new iron_math_Vec4;iron_object_BoneAnimation.v1=new iron_math_Vec4;iron_object_BoneAnimation.v2=new iron_math_Vec4;iron_object_Object._hx_skip_constructor=false;iron_object_Object.uidCounter=0;iron_object_Object.seed=1;iron_object_CameraObject.temp=new iron_math_Vec4;iron_object_CameraObject.sphereCenter=new iron_math_Vec4;iron_object_CameraObject.vcenter=new iron_math_Vec4;iron_object_CameraObject.vup=new iron_math_Vec4;iron_object_LightObject.eye=new iron_math_Vec4;iron_object_Transform.temp=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Uniforms.biasMat=new iron_math_Mat4(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);iron_object_Uniforms.helpMat=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Uniforms.helpMat2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Uniforms.helpMat3=new iron_math_Mat3(1,0,0,0,1,0,0,0,1);iron_object_Uniforms.helpVec=new iron_math_Vec4;iron_object_Uniforms.helpVec2=new iron_math_Vec4;iron_object_Uniforms.helpQuat=new iron_math_Quat;iron_object_Uniforms.defaultFilter=1;iron_system_Input.occupied=false;iron_system_Input.gamepads=[];iron_system_Input.registered=false;iron_system_VirtualInput._hx_skip_constructor=false;iron_system_Mouse.buttons=["left","right","middle","side1","side2"];iron_system_Keyboard.keys=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","space","backspace","tab","enter","shift","control","alt","capslock","win","escape","delete","up","down","left","right","back",",",".",":",";","<","=",">","?","!",'"',"#","$","%","&","_","(",")","*","|","{","}","[","]","~","`","/","\\","@","+","-","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12"];iron_system_Gamepad.buttonsPS=["cross","circle","square","triangle","l1","r1","l2","r2","share","options","l3","r3","up","down","left","right","home","touchpad"];iron_system_Gamepad.buttons=iron_system_Gamepad.buttonsPS;iron_system_Time.scale=1;iron_system_Time._fixedStep=.03333333333333333;iron_system_Time.lastTime=0;iron_system_Time._delta=0;iron_system_Time.lastRenderTime=0;iron_system_Time._renderDelta=0;kha_Assets.images=new kha__$Assets_ImageList;kha_Assets.sounds=new kha__$Assets_SoundList;kha_Assets.blobs=new kha__$Assets_BlobList;kha_Assets.fonts=new kha__$Assets_FontList;kha_Assets.videos=new kha__$Assets_VideoList;kha_Scheduler.DIF_COUNT=3;kha_Scheduler.maxframetime=.5;kha_Scheduler.startTime=0;kha_Shaders.World_World_fragData0="s367:I3ZlcnNpb24gMzMwCgppbiB2ZWMzIG5vcm1hbDsKb3V0IHZlYzQgZnJhZ0NvbG9yOwoKdm9pZCBtYWluKCkKewogICAgdmVjMyBuID0gbm9ybWFsaXplKG5vcm1hbCk7CiAgICBmcmFnQ29sb3IgPSB2ZWM0KHZlYzMoMC4wNTA4NzYwODg0NDA0MTgyNDM0MDgyMDMxMjUpLngsIHZlYzMoMC4wNTA4NzYwODg0NDA0MTgyNDM0MDgyMDMxMjUpLnksIHZlYzMoMC4wNTA4NzYwODg0NDA0MTgyNDM0MDgyMDMxMjUpLnosIGZyYWdDb2xvci53KTsKICAgIGZyYWdDb2xvci53ID0gMC4wOwp9Cgo";kha_Shaders.World_World_vertData0="s254:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIG1hdDQgU01WUDsKCm91dCB2ZWMzIG5vcm1hbDsKaW4gdmVjMyBub3I7CmluIHZlYzMgcG9zOwoKdm9pZCBtYWluKCkKewogICAgbm9ybWFsID0gbm9yOwogICAgdmVjNCBwb3NpdGlvbiA9IFNNVlAgKiB2ZWM0KHBvcywgMS4wKTsKICAgIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbik7Cn0KCg";kha_Shaders.circle_fragData0="s1478:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIHZlYzQgc2hhZG93Q29sb3JzWzE2XTsKdW5pZm9ybSB2ZWM0IGNpcmNsZXNbMTZdOwp1bmlmb3JtIHZlYzQgYXR0cmlidXRlc1sxNl07CnVuaWZvcm0gdmVjNCBib3JkZXJDb2xvcnNbMTZdOwoKZmxhdCBpbiBpbnQgaW5zdGFuY2VJRDsKaW4gdmVjNCBjb2xvcjsKb3V0IHZlYzQgZnJhZ0NvbG9yOwoKZmxvYXQgZGlzdGFuY2VUb0NpcmNsZSh2ZWMyIGNlbnRlciwgZmxvYXQgcmFkaXVzLCB2ZWMyIHBvaW50KQp7CiAgICByZXR1cm4gbGVuZ3RoKHBvaW50IC0gY2VudGVyKSAtIHJhZGl1czsKfQoKdm9pZCBtYWluKCkKewogICAgaW50IGlJRCA9IGluc3RhbmNlSUQ7CiAgICB2ZWM0IHNoYWRvd0NvbG9yID0gc2hhZG93Q29sb3JzW2lJRF07CiAgICBmbG9hdCBkc3QgPSBkaXN0YW5jZVRvQ2lyY2xlKGNpcmNsZXNbaUlEXS54eSwgY2lyY2xlc1tpSURdLnosIGdsX0ZyYWdDb29yZC54eSk7CiAgICBmbG9hdCBzaGFkb3dXaWR0aCA9IGF0dHJpYnV0ZXNbaUlEXS55ICsgOS45OTk5OTk3NDczNzg3NTE2MzU1NTE0NTI2MzY3MTg4ZS0wNTsKICAgIGZsb2F0IHNoYWRvd0Ftb3VudCA9IHBvdyhtYXgoMC4wLCAxLjAgLSAoZHN0IC8gc2hhZG93V2lkdGgpKSwgYXR0cmlidXRlc1tpSURdLnopOwogICAgdmVjNCBzaGFkb3cgPSBzaGFkb3dDb2xvcjsKICAgIHNoYWRvdy53ICo9IHNoYWRvd0Ftb3VudDsKICAgIGZsb2F0IGJvcmRlclRoaWNrbmVzcyA9IGF0dHJpYnV0ZXNbaUlEXS54OwogICAgZmxvYXQgYm9yZGVyT3V0ZXIgPSBzbW9vdGhzdGVwKC0xLjIwMDAwMDA0NzY4MzcxNTgyMDMxMjUsIDAuMCwgZHN0KTsKICAgIGZsb2F0IGJvcmRlcklubmVyID0gc21vb3Roc3RlcCgtMC42MDAwMDAwMjM4NDE4NTc5MTAxNTYyNSwgMC42MDAwMDAwMjM4NDE4NTc5MTAxNTYyNSwgZHN0ICsgYm9yZGVyVGhpY2tuZXNzKTsKICAgIHZlYzQgYmdDb2xvciA9IGNvbG9yOwogICAgYmdDb2xvciA9IG1peChiZ0NvbG9yLCBib3JkZXJDb2xvcnNbaUlEXSwgdmVjNChib3JkZXJJbm5lcikpOwogICAgYmdDb2xvciA9IG1peChiZ0NvbG9yLCBzaGFkb3csIHZlYzQoYm9yZGVyT3V0ZXIpKTsKICAgIGZyYWdDb2xvciA9IGJnQ29sb3I7Cn0KCg";kha_Shaders.painter_colored_fragData0="s142:I3ZlcnNpb24gMzMwCgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IGZyYWdtZW50Q29sb3I7Cn0KCg";kha_Shaders.painter_colored_vertData0="s307:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo";kha_Shaders.painter_image_fragData0="s374:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg";kha_Shaders.painter_image_vertData0="s368:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHZlcnRleFVWOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHZlcnRleFVWOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK";kha_Shaders.painter_text_fragData0="s270:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgpvdXQgdmVjNCBGcmFnQ29sb3I7CmluIHZlYzQgZnJhZ21lbnRDb2xvcjsKaW4gdmVjMiB0ZXhDb29yZDsKCnZvaWQgbWFpbigpCnsKICAgIEZyYWdDb2xvciA9IHZlYzQoZnJhZ21lbnRDb2xvci54eXosIHRleHR1cmUodGV4LCB0ZXhDb29yZCkueCAqIGZyYWdtZW50Q29sb3Iudyk7Cn0KCg";kha_Shaders.painter_text_vertData0="s390:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHZlcnRleFVWOwpvdXQgdmVjNCBmcmFnbWVudENvbG9yOwppbiB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdmVydGV4VVY7CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg";kha_Shaders.painter_video_fragData0="s374:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7CgppbiB2ZWMyIHRleENvb3JkOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBGcmFnQ29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZSh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgRnJhZ0NvbG9yID0gdGV4Y29sb3I7Cn0KCg";kha_Shaders.painter_video_vertData0="s368:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHZlcnRleFVWOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHZlcnRleFVWOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK";kha_Shaders.rect_fragData0="s1979:I3ZlcnNpb24gMzMwCgp1bmlmb3JtIHZlYzQgc2hhZG93Q29sb3JzWzE2XTsKdW5pZm9ybSB2ZWM0IGF0dHJpYnV0ZXNbMTZdOwp1bmlmb3JtIHZlYzQgcmVjdHNbMTI4XTsKdW5pZm9ybSB2ZWM0IGJvcmRlckNvbG9yc1sxNl07CgpmbGF0IGluIGludCBpbnN0YW5jZUlEOwpmbGF0IGluIGludCBzdHlsZUlEOwppbiB2ZWM0IGNvbG9yOwpvdXQgdmVjNCBmcmFnQ29sb3I7CgpmbG9hdCBkaXN0YW5jZVRvUmVjdCh2ZWM0IHJlY3QsIHZlYzIgcG9pbnQpCnsKICAgIGZsb2F0IGR4ID0gbWF4KHJlY3QueCAtIHBvaW50LngsIHBvaW50LnggLSByZWN0LnkpOwogICAgZmxvYXQgZHkgPSBtYXgocmVjdC53IC0gcG9pbnQueSwgcG9pbnQueSAtIHJlY3Queik7CiAgICB2ZWMyIGRzdCA9IHZlYzIoZHgsIGR5KTsKICAgIHJldHVybiBsZW5ndGgobWF4KGRzdCwgdmVjMigwLjApKSkgKyBtaW4obWF4KGRzdC54LCBkc3QueSksIDAuMCk7Cn0KCnZvaWQgbWFpbigpCnsKICAgIGludCBpSUQgPSBpbnN0YW5jZUlEOwogICAgaW50IHNJRCA9IHN0eWxlSUQ7CiAgICB2ZWM0IHNoYWRvd0NvbG9yID0gc2hhZG93Q29sb3JzW3NJRF07CiAgICBmbG9hdCBjb3JuZXJSYWRpdXMgPSBhdHRyaWJ1dGVzW3NJRF0ueTsKICAgIHZlYzQgb3V0ZXJSZWN0ID0gcmVjdHNbaUlEXSArIHZlYzQoY29ybmVyUmFkaXVzLCAtY29ybmVyUmFkaXVzLCAtY29ybmVyUmFkaXVzLCBjb3JuZXJSYWRpdXMpOwogICAgZmxvYXQgb3V0ZXJEc3QgPSBkaXN0YW5jZVRvUmVjdChvdXRlclJlY3QsIGdsX0ZyYWdDb29yZC54eSkgLSBjb3JuZXJSYWRpdXM7CiAgICBmbG9hdCBzaGFkb3dXaWR0aCA9IGF0dHJpYnV0ZXNbc0lEXS56ICsgOS45OTk5OTk3NDczNzg3NTE2MzU1NTE0NTI2MzY3MTg4ZS0wNTsKICAgIGZsb2F0IHNoYWRvd0Ftb3VudCA9IHBvdyhtYXgoMC4wLCAxLjAgLSAob3V0ZXJEc3QgLyBzaGFkb3dXaWR0aCkpLCBhdHRyaWJ1dGVzW3NJRF0udyk7CiAgICB2ZWM0IHNoYWRvdyA9IHNoYWRvd0NvbG9yOwogICAgc2hhZG93LncgKj0gc2hhZG93QW1vdW50OwogICAgZmxvYXQgYm9yZGVyVGhpY2tuZXNzID0gYXR0cmlidXRlc1tzSURdLng7CiAgICBmbG9hdCBpbm5lckRzdCA9IG91dGVyRHN0ICsgYm9yZGVyVGhpY2tuZXNzOwogICAgZmxvYXQgYm9yZGVyT3V0ZXIgPSBzbW9vdGhzdGVwKC0xLjIwMDAwMDA0NzY4MzcxNTgyMDMxMjUsIDAuMCwgb3V0ZXJEc3QpOwogICAgZmxvYXQgYm9yZGVySW5uZXIgPSBzbW9vdGhzdGVwKC0wLjYwMDAwMDAyMzg0MTg1NzkxMDE1NjI1LCAwLjYwMDAwMDAyMzg0MTg1NzkxMDE1NjI1LCBpbm5lckRzdCk7CiAgICB2ZWM0IGJnQ29sb3IgPSBjb2xvcjsKICAgIGJnQ29sb3IgPSBtaXgoYmdDb2xvciwgYm9yZGVyQ29sb3JzW3NJRF0sIHZlYzQoYm9yZGVySW5uZXIpKTsKICAgIGJnQ29sb3IgPSBtaXgoYmdDb2xvciwgc2hhZG93LCB2ZWM0KGJvcmRlck91dGVyKSk7CiAgICBmcmFnQ29sb3IgPSBiZ0NvbG9yOwp9Cgo";kha_Shaders.rect_vertData0="s388:I3ZlcnNpb24gMzMwCgpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCBjb2w7CmluIHZlYzMgcG9zOwpmbGF0IG91dCBpbnQgaW5zdGFuY2VJRDsKZmxhdCBvdXQgaW50IHN0eWxlSUQ7Cgp2b2lkIG1haW4oKQp7CiAgICBjb2xvciA9IGNvbDsKICAgIGludCBpbnN0U3R5bGVJRHMgPSBpbnQocG9zLnopOwogICAgaW5zdGFuY2VJRCA9IGluc3RTdHlsZUlEcyA%PiA4OwogICAgc3R5bGVJRCA9IGluc3RTdHlsZUlEcyAmIDI1NTsKICAgIGdsX1Bvc2l0aW9uID0gdmVjNChwb3MueCwgcG9zLnksIDAuMCwgMS4wKTsKfQoK";kha_System.renderListeners=[];kha_System.foregroundListeners=[];kha_System.resumeListeners=[];kha_System.pauseListeners=[];kha_System.backgroundListeners=[];kha_System.shutdownListeners=[];kha_System.dropFilesListeners=[];kha_SystemImpl.maxGamepads=4;kha_SystemImpl.mouseLockListeners=[];kha_Window.windows=[];kha_arrays_ByteArray.LITTLE_ENDIAN=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120;kha_audio2_Audio.disableGcInteractions=false;kha_audio2_Audio.intBox=new kha_internal_IntBox(0);kha_audio2_Audio1.lastAllocationCount=0;kha_graphics2_Graphics._hx_skip_constructor=false;kha_graphics2_Graphics.fontGlyphs=function($this){var $r;let _g=[];{let _g1=32;while(_g1<256){let i=_g1++;_g.push(i)}}$r=_g;return $r}(this);kha_input_Gamepad.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}};kha_input_Gamepad.instances=[];kha_input_Gamepad.connectListeners=[];kha_input_Gamepad.disconnectListeners=[];kha_input_Keyboard.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}};kha_input_Keyboard.keyBehavior=kha_input_BlockInterventions.Default;kha_input_Mouse.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}};kha_input_Mouse.wheelEventBlockBehavior=kha_input_MouseEventBlockBehavior.Full;kha_input_Surface.touchDownEventBlockBehavior=kha_input_TouchDownEventBlockBehavior.Full;kha_krom_Graphics.mat=kha_arrays_Float32Array._new(16);kha_netsync_ControllerBuilder.nextId=0;koui_Config.scrollSensitivity=50;koui_Config.keyRepeatDelay=.5;koui_Config.keyRepeatPeriod=.03;koui_Koui.initialized=false;koui_Koui.uiScale=1;koui_Koui.overlays=[];koui_Koui.overlay_offsets=[];koui_effects_Effect.__meta__={obj:{subclasses:["koui.effects.Border"]}};koui_elements_Element._hx_skip_constructor=false;koui_elements_Element.invalidations=new koui_utils_Set_$koui_$elements_$Element;koui_elements_layouts_Layout.isValidating=false;koui_events_Event.__meta__={obj:{typeUID:["event"]}};koui_events_EventHandler.mouseX=0;koui_events_EventHandler.mouseY=0;koui_events_EventHandler.mouseDX=0;koui_events_EventHandler.mouseDY=0;koui_events_EventHandler.isCtrlDown=false;koui_events_EventHandler.isShiftDown=false;koui_events_EventHandler.isAltDown=false;koui_events_EventHandler.events=new haxe_ds_ObjectMap;koui_events_EventHandler.mouseMoved=false;koui_events_EventHandler.mousePressed=function($this){var $r;let this1=new Array(3);$r=this1;return $r}(this);koui_events_EventHandler.lastPressedKeyActive=false;koui_events_EventHandler.lastPressedTime=0;koui_events_EventHandler.markUnblock=false;koui_events_EventHandler.inBackground=false;koui_events_MouseEvent.__meta__={obj:{typeUID:["localClass.module.MouseEvent"]}};koui_events_MouseButtonEvent.__meta__={obj:{typeUID:["localClass.module.MouseButtonEvent"]}};koui_events_FocusEvent.__meta__={obj:{typeUID:["localClass.module.FocusEvent"]}};koui_events_KeyEvent.__meta__={obj:{typeUID:["localClass.module.KeyEvent"]}};koui_events_KeyCodeEvent.__meta__={obj:{typeUID:["localClass.module.KeyCodeEvent"]}};koui_events_KeyCodeStatusEvent.__meta__={obj:{typeUID:["localClass.module.KeyCodeStatusEvent"]}};koui_events_KeyCodePressEvent.__meta__={obj:{typeUID:["localClass.module.KeyCodePressEvent"]}};koui_events_KeyCharPressEvent.__meta__={obj:{typeUID:["localClass.module.KeyCharPressEvent"]}};koui_events_MouseClickEvent.__meta__={obj:{typeUID:["localClass.module.MouseClickEvent"]}};koui_events_MouseHoverEvent.__meta__={obj:{typeUID:["localClass.module.MouseHoverEvent"]}};koui_events_MouseScrollEvent.__meta__={obj:{typeUID:["localClass.module.MouseScrollEvent"]}};koui_graphics_KPainter.MAX_QUADS_PER_DRAWCALL=128;koui_graphics_KPainter.MAX_STYLES_PER_DRAWCALL=16;koui_theme_Style.styles=new haxe_ds_StringMap;koui_utils_Cursor.mouseX=0;koui_utils_Cursor.mouseY=0;koui_utils_FontUtil.BASE_GLYPHS=function($this){var $r;let _g=[];{let _g1=32;while(_g1<383){let i=_g1++;_g.push(i)}}$r=_g;return $r}(this);koui_utils_FontUtil.localeDefaultGlyphs=function($this){var $r;let _g=new haxe_ds_StringMap;{let _g1=[];let _g2=880;while(_g2<1023){let i=_g2++;_g1.push(i)}_g.h["el"]=_g1}{let _g3=[];let _g4=1024;while(_g4<1119){let i=_g4++;_g3.push(i)}_g.h["ru"]=_g3}$r=_g;return $r}(this);koui_utils_FontUtil.additionalGlyphs=new koui_utils_Set_$Int;koui_utils_FontUtil.additionalLocales=new koui_utils_Set_$String;zui_Ext.textAreaLineNumbers=false;zui_Ext.textAreaScrollPastEnd=false;zui_Themes.dark={NAME:"Default Dark",WINDOW_BG_COL:-14079703,WINDOW_TINT_COL:-1,ACCENT_COL:-13027015,ACCENT_HOVER_COL:-12369085,ACCENT_SELECT_COL:-11513776,BUTTON_COL:-13092808,BUTTON_TEXT_COL:-1513499,BUTTON_HOVER_COL:-11974327,BUTTON_PRESSED_COL:-15000805,TEXT_COL:-1513499,LABEL_COL:-3618616,SEPARATOR_COL:-14671840,HIGHLIGHT_COL:-14656100,CONTEXT_COL:-14540254,PANEL_BG_COL:-12895429,FONT_SIZE:13,ELEMENT_W:100,ELEMENT_H:24,ELEMENT_OFFSET:4,ARROW_SIZE:5,BUTTON_H:22,CHECK_SIZE:15,CHECK_SELECT_SIZE:8,SCROLL_W:9,TEXT_OFFSET:8,TAB_W:6,FILL_WINDOW_BG:false,FILL_BUTTON_BG:true,FILL_ACCENT_BG:false,LINK_STYLE:0,FULL_TABS:false};zui_Zui.alwaysRedrawWindow=true;zui_Zui.keyRepeat=true;zui_Zui.dynamicGlyphLoad=true;zui_Zui.touchScroll=false;zui_Zui.touchHold=false;zui_Zui.touchTooltip=false;zui_Zui.keyRepeatTime=0;zui_Zui.textToPaste="";zui_Zui.textToCopy="";zui_Zui.isCut=false;zui_Zui.isCopy=false;zui_Zui.isPaste=false;zui_Zui.copyFrame=0;zui_Zui.comboFirst=true;Main.main()})(typeof exports!="undefined"?exports:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);